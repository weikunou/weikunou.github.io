<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>C# 基础语法 07 抽象接口</title>
    <link href="/2024/02/12/csharp-basic-7/"/>
    <url>/2024/02/12/csharp-basic-7/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第七期 完结）。</p><span id="more"></span><h1 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h1><p>抽象类是未完全实现逻辑的类，专门作为基类来使用，将具体逻辑推迟到合适的派生类去实现。</p><p>下面是一个具体类 FlyObject，包含一个虚方法 Fly，它可以有方法体，此时方法体内是空的，没有需要实现的逻辑。</p><p>由它衍生出两个具体类，Bird 和 Plane，它们都重写了 Fly 方法，并且加上了具体逻辑。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bird</span> : <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;小鸟在飞行&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Plane</span> : <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;飞机在飞行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用时</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        FlyObject bird = <span class="hljs-keyword">new</span> Bird();<br>        bird.Fly();<br>        <span class="hljs-comment">// 小鸟在飞行</span><br><br>        FlyObject plane = <span class="hljs-keyword">new</span> Plane();<br>        plane.Fly();<br>        <span class="hljs-comment">// 飞机在飞行</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>由于基类 FlyObject 的 Fly 方法并没有具体实现逻辑，只是一个空的方法，此时可以将基类的 Fly 方法改成一个抽象方法，并去掉方法体。</p><p>因为包含了抽象方法，FlyObject 也需要加上 abstract 变成一个抽象类。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>抽象类不能被实例化，需要有派生类继承它，通过派生类实例化。</p><p>继承了抽象类的派生类，必须通过重写，实现抽象方法。</p><h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><p>接口是完全未实现逻辑的“类”，只有方法成员。</p><p>和抽象类一样，接口也不能被实例化，需要有其他类去实现接口。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bird</span> : <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;小鸟在飞行&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Plane</span> : <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;飞机在飞行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>接口约定以 I 为开头进行命名，接口内定义的方法成员必须是 public 的，可以省略不写。</p><p>实现接口的类，必须包含接口内定义的所有方法成员，并且不需要写 override。</p><p>使用时</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        IFlyObject bird = <span class="hljs-keyword">new</span> Bird();<br>        bird.Fly();<br><br>        IFlyObject plane = <span class="hljs-keyword">new</span> Plane();<br>        plane.Fly();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>和抽象类不同的是，抽象类只能继承一个，接口可以同时实现多个。</p>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 06 委托事件</title>
    <link href="/2024/02/04/csharp-basic-6/"/>
    <url>/2024/02/04/csharp-basic-6/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第六期）。</p><span id="more"></span><h1 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h1><p>委托是一个类，可以被实例化，包装一系列的方法，相当于一个方法的容器，可以作为参数传入其他方法。</p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>方法的参数列表内，有一个委托参数，方法体会调用这个委托参数。</p><p>而委托参数包装的是什么样的方法，则由外部传入的方法决定。</p><p>相当于一个填空题，借助外部的方法产生结果。</p><p>模板委托方法通常在代码的中间部分，有返回值。</p><p>定义一个 Person 类，包含人物的名字和正在思考的内容。</p><p>同时，定义一个 Answer 类，用来包装人物答题的内容。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> person;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> result;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">string</span> thinking</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        person = name;<br>        result = thinking;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Answer <span class="hljs-title">Think</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = <span class="hljs-keyword">new</span> Answer();<br>        answer.person = person;<br>        answer.result = result;<br>        <span class="hljs-keyword">return</span> answer;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Answer</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> person;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><p>再定义一个 Exam 类，输出答题人和答案。</p><p>其中，方法的参数是一个委托，Func 类是 C# 内部定义好的一个委托类，它可以有返回值，尖括号 &lt; &gt; 内填入返回值的类型。</p><p>在方法内部调用委托，得到 Answer 类型的返回值，把内容打印输出。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Exam</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AnswerQuestion</span>(<span class="hljs-params">Func&lt;Answer&gt; solution</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = solution.Invoke();<br>        Console.WriteLine(<span class="hljs-string">$&quot;答题人：<span class="hljs-subst">&#123;answer.person&#125;</span> 答案：<span class="hljs-subst">&#123;answer.result&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>实际使用时，可以定义 Func 变量，new 一个委托实例，将一个实例的方法作为参数传入。</p><p>然后把委托变量传给 AnswerQuestion 方法，同一个方法，可以接收不同的委托变量，实现功能的复用。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Exam exam = <span class="hljs-keyword">new</span> Exam();<br>        Person person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;小明&quot;</span>, <span class="hljs-string">&quot;鸡排&quot;</span>);<br>        Person person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;小红&quot;</span>, <span class="hljs-string">&quot;奶茶&quot;</span>);<br><br>        Func&lt;Answer&gt; func1 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person1.Think);<br>        Func&lt;Answer&gt; func2 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person2.Think);<br><br>        exam.AnswerQuestion(func1);<br>        exam.AnswerQuestion(func2);<br>        <br>        <span class="hljs-comment">// 答题人：小明 答案：鸡排</span><br>        <span class="hljs-comment">// 答题人：小红 答案：奶茶</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h3><p>同样，方法的参数列表内，有一个委托参数。</p><p>在执行完一系列代码之后，调用外部方法进行回调。</p><p>回调委托方法通常在代码的末尾部分，无返回值。</p><p>继续上面的例子，添加一个 Logger 类，用于答题后的信息提示。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Logger</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> message;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Logger</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">this</span>.message = message;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"></span>) </span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>扩展 AnswerQuestion 的参数列表，并在打印答题结果之后进行回调。</p><p>Action 类也是 C# 内部定义好的一个委托类，无返回值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Exam</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AnswerQuestion</span>(<span class="hljs-params">Func&lt;Answer&gt; solution, Action callback</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = solution.Invoke();<br>        Console.WriteLine(<span class="hljs-string">$&quot;答题人：<span class="hljs-subst">&#123;answer.person&#125;</span> 答案：<span class="hljs-subst">&#123;answer.result&#125;</span>&quot;</span>);<br>        callback.Invoke();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>实例化 Logger 类，填入信息提示。</p><p>可以定义 Action 变量并实例化，传入 Logger 类的 Log 方法。</p><p>然后把 action 变量作为参数，作为回调方法传入 AnswerQuestion 方法中。</p><p>现在每次打印答题结果之后，都会有答题成功的信息提示。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Exam exam = <span class="hljs-keyword">new</span> Exam();<br>        Person person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;小明&quot;</span>, <span class="hljs-string">&quot;鸡排&quot;</span>);<br>        Person person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;小红&quot;</span>, <span class="hljs-string">&quot;奶茶&quot;</span>);<br><br>        Func&lt;Answer&gt; func1 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person1.Think);<br>        Func&lt;Answer&gt; func2 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person2.Think);<br><br>        Logger logger = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;答题成功&quot;</span>);<br>        Action action = <span class="hljs-keyword">new</span> Action(logger.Log);<br><br>        exam.AnswerQuestion(func1, action);<br>        exam.AnswerQuestion(func2, action);<br>        <br>        <span class="hljs-comment">// 答题人：小明 答案：鸡排</span><br>        <span class="hljs-comment">// 答题成功</span><br>        <span class="hljs-comment">// 答题人：小红 答案：奶茶</span><br>        <span class="hljs-comment">// 答题成功</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="多播"><a href="#多播" class="headerlink" title="多播"></a>多播</h3><p>委托是一对多的，也就是说，可以包装多个方法，当委托被调用时，会有多个方法被同时调用，调用的顺序则是方法被填入委托变量时的顺序。</p><p>在上述的例子进行扩展，再实例化一个 Logger，会提示【请继续答题】，并且使用 += 符号给 action 变量再添加一个方法引用。</p><p>此时回调方法会输出两行。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        Logger logger1 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;答题成功&quot;</span>);<br>        Logger logger2 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;请继续答题&quot;</span>);<br>        Action action = <span class="hljs-keyword">new</span> Action(logger1.Log);<br>        action += logger2.Log;<br><br>        exam.AnswerQuestion(func1, action);<br>        exam.AnswerQuestion(func2, action);<br>        <br>        <span class="hljs-comment">// 答题人：小明 答案：鸡排</span><br>        <span class="hljs-comment">// 答题成功</span><br>        <span class="hljs-comment">// 请继续答题</span><br>        <span class="hljs-comment">// 答题人：小红 答案：奶茶</span><br>        <span class="hljs-comment">// 答题成功</span><br>        <span class="hljs-comment">// 请继续答题</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><p>事件是在委托的基础上，对委托的访问进行限制，事件的右侧只能是 += 或 -= 符号，不能被 = 符号直接覆盖，也不能被 .Invoke 调用。</p><p>接着上述的例子，自定义一个 SubmitEventHandler 委托，和一个 SubmitSystem 类。</p><p>SubmitSystem 类包含一个委托字段，和一个事件。</p><p>事件必须同时包含 add 和 remove，对委托字段进行添加方法和移除方法。</p><p>同时，因为委托字段是私有的，外部无法调用，事件也不能被调用，所以提供一个方法 TriggerSubmit 对委托字段进行调用。</p><blockquote><p>注意：如果 submitEventHandler 没有包含任何方法，则会是 null，需要进行判空。</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SubmitEventHandler</span>(<span class="hljs-params"></span>)</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SubmitSystem</span><br>&#123;<br>    <span class="hljs-keyword">private</span> SubmitEventHandler submitEventHandler;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> SubmitEventHandler OnSubmit<br>    &#123;<br>        <span class="hljs-keyword">add</span><br>        &#123;<br>            submitEventHandler += <span class="hljs-keyword">value</span>;<br>        &#125;<br>        <span class="hljs-keyword">remove</span><br>        &#123;<br>            submitEventHandler -= <span class="hljs-keyword">value</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TriggerSubmit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (submitEventHandler != <span class="hljs-literal">null</span>)<br>        &#123;<br>            submitEventHandler.Invoke();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在，继续添加主程序的逻辑。</p><p>实例化 submitSystem 变量，给它的事件添加两个方法，并通过 TriggerSubmit 调用被事件保护起来的私有委托。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <br>        Logger logger3 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;小明提交了试卷&quot;</span>);<br>        Logger logger4 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;小红提交了试卷&quot;</span>);<br>        <br>        SubmitSystem submitSystem = <span class="hljs-keyword">new</span> SubmitSystem();<br>        submitSystem.OnSubmit += logger3.Log;<br>        submitSystem.OnSubmit += logger4.Log;<br>        <br>        submitSystem.TriggerSubmit();<br>        <br>        <span class="hljs-comment">// ...</span><br>        <span class="hljs-comment">// 小明提交了试卷</span><br>        <span class="hljs-comment">// 小红提交了试卷</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>上述事件的定义是一个完整定义，实际上可以简化。</p><p>可以直接定义事件，无需定义私有委托字段，也无需为事件添加 add 和 remove 访问器。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SubmitEventHandler</span>(<span class="hljs-params"></span>)</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SubmitSystem</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> SubmitEventHandler OnSubmit;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TriggerSubmit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (OnSubmit != <span class="hljs-literal">null</span>)<br>        &#123;<br>            OnSubmit.Invoke();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>此时，事件的右侧似乎可以被 .Invoke 调用，还可以判空。</p><p>实际上，因为 C# 会在编译时自动生成私有委托字段，但是编写代码时并没有私有委托字段，所以不得不使用事件来触发调用，不过外部对事件的访问依然只能是 += 和 -= 符号。</p>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 05 泛型集合</title>
    <link href="/2024/01/28/csharp-basic-5/"/>
    <url>/2024/01/28/csharp-basic-5/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第五期）。</p><span id="more"></span><h1 id="泛型集合"><a href="#泛型集合" class="headerlink" title="泛型集合"></a>泛型集合</h1><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>泛型是一个类型占位符，在定义泛型类的时候，可以先使用一个字母 T 占位，在实际使用时，需要传入一个具体的类型替代 T。</p><p>例如，定义一个泛型类，后面的尖括号 &lt; &gt; 先填 T，并且使用 T 声明一个变量 myType，在构造函数给 myType 赋值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyGeneric</span>&lt;<span class="hljs-title">T</span>&gt;<br>&#123;<br>    <span class="hljs-keyword">public</span> T myType;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyGeneric</span>(<span class="hljs-params">T type</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        myType = type;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用时，需要填入具体的类型替代 T。</p><p>通过 myType 字段的 GetType 方法，查看它的数据类型。</p><p>填入 int 的泛型实例，它的 myType 字段的类型是 System.Int32。</p><p>填入 string 的泛型实例，它的 myType 字段的类型是 System.String。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        MyGeneric&lt;<span class="hljs-built_in">int</span>&gt; myGenericInt = <span class="hljs-keyword">new</span> MyGeneric&lt;<span class="hljs-built_in">int</span>&gt;(<span class="hljs-number">1</span>);<br>        Console.WriteLine(myGenericInt.myType.GetType());<br>        <span class="hljs-comment">// System.Int32</span><br><br>        MyGeneric&lt;<span class="hljs-built_in">string</span>&gt; myGenericString = <span class="hljs-keyword">new</span> MyGeneric&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;小明&quot;</span>);<br>        Console.WriteLine(myGenericString.myType.GetType());<br>        <span class="hljs-comment">// System.String</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这样，泛型类就可以通过填入不同的数据类型，提升代码的复用性，无需将类型写死。</p><h2 id="列表（List）"><a href="#列表（List）" class="headerlink" title="列表（List）"></a>列表（List）</h2><p>列表是数组的扩展，内部实现是以数组为基础的。</p><p>列表的使用方法主要有：</p><ol><li>添加元素（Add）</li><li>访问元素（[]）</li><li>删除元素（Remove）</li><li>清空列表（Clear）</li></ol><p>使用 List 声明一个列表，尖括号 &lt; &gt; 内填入数据类型。</p><p>使用 Add 添加三个元素，并用 for 循环访问每个元素，打印输出。其中，Count 可以获取列表的长度。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.Count; i++)<br>        &#123;<br>            Console.WriteLine(nums[i]);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 1</span><br>        <span class="hljs-comment">// 2</span><br>        <span class="hljs-comment">// 3</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 Remove 删除一个元素，后续的元素都会往前移动，列表长度减少。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        nums.Remove(<span class="hljs-number">2</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.Count; i++)<br>        &#123;<br>            Console.WriteLine(nums[i]);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 1</span><br>        <span class="hljs-comment">// 3</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 Clear 清空列表。</p><p>打印列表的长度，输出 0，表示列表中没有任何元素了。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        Console.WriteLine(nums.Count);<br>        <span class="hljs-comment">// 3</span><br>        <br>        nums.Clear();<br>        Console.WriteLine(nums.Count);<br>        <span class="hljs-comment">// 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="字典（Dictionary）"><a href="#字典（Dictionary）" class="headerlink" title="字典（Dictionary）"></a>字典（Dictionary）</h2><p>字典存储一系列键值对，通过 key 值，可以快速获取到对应的 value 值。</p><p>和列表类似，字典的使用方法主要有：</p><ol><li>添加元素（Add）</li><li>访问元素（[]）</li><li>删除元素（Remove）</li><li>判断是否包含某个 key 值（ContainsKey）</li><li>清空列表（Clear）</li></ol><p>使用 Dictionary 声明一个字典，尖括号 &lt; &gt; 内填入两个数据类型，第一个是 key，第二个是 value。</p><p>使用 Add 添加三个元素，记录每个学生的分数。</p><p>通过 [] 访问字典元素，填入 key 值获取 value 值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;小明&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;小红&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;小坤&quot;</span>, <span class="hljs-number">100</span>);<br><br>        Console.WriteLine(<span class="hljs-string">&quot;小明的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小明&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;小红的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小红&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;小坤的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小坤&quot;</span>]);<br>        <br>        <span class="hljs-comment">// 小明的分数：60</span><br>        <span class="hljs-comment">// 小红的分数：80</span><br>        <span class="hljs-comment">// 小坤的分数：100</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 Remove 删除某个 key 对应的元素之后，再次使用此 key 值去访问字典，则会报错。</p><p>所以通常要判断字典是否包含某个 key 值，才能去访问。</p><p>例如，从 scores 字典中删除小红的数据，如果直接访问 scores[“小红”] 会报错，需要使用 ContainsKey 判断一下是否包含小红的数据。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;小明&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;小红&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;小坤&quot;</span>, <span class="hljs-number">100</span>);<br><br>        Console.WriteLine(<span class="hljs-string">&quot;小明的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小明&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;小坤的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小坤&quot;</span>]);<br><br>        scores.Remove(<span class="hljs-string">&quot;小红&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (scores.ContainsKey(<span class="hljs-string">&quot;小红&quot;</span>))<br>        &#123;<br>            Console.WriteLine(<span class="hljs-string">&quot;小红的分数：&quot;</span> + scores[<span class="hljs-string">&quot;小红&quot;</span>]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 Clear 清空字典。</p><p>字典同样有 Count 属性，获取字典的键值对的个数。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;小明&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;小红&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;小坤&quot;</span>, <span class="hljs-number">100</span>);<br>        Console.WriteLine(scores.Count);<br>        <span class="hljs-comment">// 3</span><br>        <br>        scores.Clear();<br>        Console.WriteLine(scores.Count);<br>        <span class="hljs-comment">// 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 04 值和引用</title>
    <link href="/2024/01/21/csharp-basic-4/"/>
    <url>/2024/01/21/csharp-basic-4/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第四期）。</p><span id="more"></span><h1 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h1><p>值类型，直接存储数据。</p><p>引用类型，存储内存地址，通过地址找到数据。</p><p>值类型：int，float，double，bool，char 等等。</p><p>引用类型：string，class 等等。</p><p>值类型赋值时，会创建值的副本。</p><p>修改值类型变量，不会影响其他值类型变量。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> x = <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> y = x;<br>        x = <span class="hljs-number">0</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;x = &quot;</span> + x);<br>        Console.WriteLine(<span class="hljs-string">&quot;y = &quot;</span> + y);<br>        <br>        <span class="hljs-comment">// x = 0</span><br>        <span class="hljs-comment">// y = 1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>引用类型，两个变量引用的对象相同时，对其中一个变量引用的对象进行修改，另一个变量引用的对象也发生了变化。</p><p>因为这两个变量只是存储了一个地址，指向同一块数据区域。</p><p>就好比，两个人使用同一个银行账户，一个人取走了全部的钱，另一个人就没钱了。</p><p>例如，有一个账户类，包含余额字段，存钱、取钱、查询余额的方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Account</span><br>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">float</span> money;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Save</span>(<span class="hljs-params"><span class="hljs-built_in">float</span> money</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (money &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">this</span>.money += money;<br>            Console.WriteLine(<span class="hljs-string">&quot;存入 &quot;</span> + money);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span>(<span class="hljs-params"><span class="hljs-built_in">float</span> money</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (money &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.money &gt;= money)<br>            &#123;<br>                <span class="hljs-keyword">this</span>.money -= money;<br>                Console.WriteLine(<span class="hljs-string">&quot;取出 &quot;</span> + money);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                Console.WriteLine(<span class="hljs-string">&quot;余额不足&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Query</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;余额 &quot;</span> + money);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在创建一个账户对象，赋值给 myAccount，接着再赋值给 herAccount，两个 Account 变量引用的是同一个对象。</p><p>在我的账户存入 10 元，从她的账户取出 10 元，我的账户余额 0 元。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Account myAccount = <span class="hljs-keyword">new</span> Account();    <span class="hljs-comment">// 我的账户</span><br>        Account herAccount = myAccount;       <span class="hljs-comment">// 她的账户</span><br><br>        myAccount.Save(<span class="hljs-number">10f</span>);    <span class="hljs-comment">// 我的账户存入 10 元</span><br>        herAccount.Draw(<span class="hljs-number">10f</span>);   <span class="hljs-comment">// 她的账户取出 10 元</span><br>        myAccount.Query();      <span class="hljs-comment">// 我的账户余额  0 元</span><br>        <br>        <span class="hljs-comment">// 存入 10</span><br>        <span class="hljs-comment">// 取出 10</span><br>        <span class="hljs-comment">// 余额 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="装箱和拆箱"><a href="#装箱和拆箱" class="headerlink" title="装箱和拆箱"></a>装箱和拆箱</h1><p>装箱，把值类型转换成引用类型。</p><p>拆箱，把引用类型转换成值类型。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>;<br>        <br>        <span class="hljs-built_in">object</span> obj = i;     <span class="hljs-comment">// 装箱</span><br>        <br>        <span class="hljs-built_in">int</span> j = (<span class="hljs-built_in">int</span>)obj;   <span class="hljs-comment">// 拆箱</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>有时候为了通用，会把方法的参数类型定义为 object，当传入一个值类型参数时，就会需要装箱。</p><p>由于装箱会生成新的对象，对运行效率有一定影响，一般是尽量避免装箱和拆箱的。</p><p>装箱和拆箱时，对两个变量的值进行修改，是互不影响的。</p><h1 id="ref-和-out"><a href="#ref-和-out" class="headerlink" title="ref 和 out"></a>ref 和 out</h1><p>通常，当方法的参数是值类型时，外部传入的变量和方法体内的参数变量，是分别独立的，对方法体内的参数变量修改时，不会影响到外部的变量。</p><p>这是因为方法内的形参，只是外部传入的实参的一个副本。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>        Add(i);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        <br>        <span class="hljs-comment">// i = 0</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>如果要实现当 i 传入 Add 方法内，执行之后 i 的数值增加，则需要使用 ref 关键字。</p><p>方法的参数类型前面要加个 ref，调用方法时，传入的参数前面也要加个 ref。</p><p>此时，i 变成了按引用传参，在方法内对 i 进行修改，同时也会影响到外部的 i。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>        Add(<span class="hljs-keyword">ref</span> i);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        <br>        <span class="hljs-comment">// i = 1</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">int</span> i</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>需要注意的是，外部的 i 需要赋初始值，如果没有赋值，则会报错。</p><p>ref 的特点是有进有出，需要先赋值，再传入，有输出。</p><p>out 也是按引用传参，不过 out 只是用来输出多个参数。</p><p>out 的特点是只出不进，不需要先赋值，方法会把内部的数值输出到外部的变量，即使赋初始值，也会被输出的数值覆盖。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i;<br>        <span class="hljs-built_in">int</span> j = <span class="hljs-number">3</span>;<br>        Add(<span class="hljs-keyword">out</span> i, <span class="hljs-keyword">out</span> j);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        Console.WriteLine(<span class="hljs-string">&quot;j = &quot;</span> + j);<br>        <br>        <span class="hljs-comment">// i = 1</span><br>        <span class="hljs-comment">// j = 2</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> i, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> j</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i = <span class="hljs-number">1</span>;<br>        j = <span class="hljs-number">2</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 03 面向对象</title>
    <link href="/2024/01/14/csharp-basic-3/"/>
    <url>/2024/01/14/csharp-basic-3/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第三期）。</p><span id="more"></span><h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><p>隐藏对象的信息，留出访问的接口，保护字段不被随意修改。</p><p>C# 的属性就是用来实现封装的。</p><p>例如，Hero 类有一个只读的等级属性，只能获取到英雄等级，而不能直接对等级进行修改。</p><p>如果要对英雄等级进行修改，只能通过给经验属性赋值，在类的内部进行经验和等级的转换。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-comment">// 英雄等级 只读</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> level;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Level<br>    &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> level; &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 经验等级转换</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> factor = <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Experience<br>    &#123;<br>        <span class="hljs-keyword">get</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> level * factor;<br>        &#125;<br>        <span class="hljs-keyword">set</span><br>        &#123;<br>            level = Math.Abs(<span class="hljs-keyword">value</span> / factor);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创建英雄对象，给他增加经验值，查看他的等级。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        hero.Experience = <span class="hljs-number">10000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;英雄等级：&quot;</span> + hero.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;英雄经验：&quot;</span> + hero.Experience);<br>        <br>        <span class="hljs-comment">// 英雄等级：10</span><br>        <span class="hljs-comment">// 英雄经验：10000</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>一个类继承另一个类，它就拥有了另一个类的所有字段、属性和方法。</p><p>继承的类叫子类（或派生类），被继承的类叫父类（或基类）。</p><p>继承可以减少代码重复，提升代码的复用性。</p><p>现在出现了两位英雄，他们都继承了 Hero 类，并且类的内部没有定义任何成员字段、属性和方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 剑圣</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Blademaster</span> : <span class="hljs-title">Hero</span><br>&#123;<br><br>&#125;<br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 大魔法师</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Archmage</span> : <span class="hljs-title">Hero</span><br>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>分别创建剑圣和大魔法师对象，给他们增加不同的经验值，查看他们的等级。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Blademaster blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        blademaster.Experience = <span class="hljs-number">10000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;剑圣等级：&quot;</span> + blademaster.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;剑圣经验：&quot;</span> + blademaster.Experience);<br><br>        Archmage archmage = <span class="hljs-keyword">new</span> Archmage();<br>        archmage.Experience = <span class="hljs-number">20000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;大魔法师等级：&quot;</span> + archmage.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;大魔法师经验：&quot;</span> + archmage.Experience);<br>        <br>        <span class="hljs-comment">// 剑圣等级：10</span><br>        <span class="hljs-comment">// 剑圣经验：10000</span><br>        <span class="hljs-comment">// 大魔法师等级：20</span><br>        <span class="hljs-comment">// 大魔法师经验：20000</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态是在继承的基础上，子类重写父类的方法，使用父类的类型声明变量，引用子类的实例对象，从而产生类型代差，调用同样的方法，却产生不一样的行为。</p><p>现在给英雄增加一个攻击的方法，这个方法需要使用 virtual 修饰符，是一个虚方法，表示可以被重写。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 英雄</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;英雄攻击&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>让剑圣和大魔法师重写父类的攻击方法，重写方法需要使用 override 修饰符。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 剑圣</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Blademaster</span> : <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;致命一击&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 大魔法师</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Archmage</span> : <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;暴风雪&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在，声明 Hero 类型的变量，引用不同类型的实例对象，调用 Attack。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// 普通英雄</span><br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        hero.Attack();<br><br>        <span class="hljs-comment">// 剑圣</span><br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        blademaster.Attack();<br><br>        <span class="hljs-comment">// 大魔法师</span><br>        Hero archmage = <span class="hljs-keyword">new</span> Archmage();<br>        archmage.Attack();<br>        <br>        <span class="hljs-comment">// 英雄攻击</span><br>        <span class="hljs-comment">// 致命一击</span><br>        <span class="hljs-comment">// 暴风雪</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里之所以可以使用 Hero 变量引用 Blademaster 和 Archmage 对象，是因为他们继承了 Hero 类。</p><p>可以说剑圣是一个英雄，但反过来不行，英雄不一定是剑圣。</p><blockquote><p>如果反过来写，Blademaster blademaster = new Hero(); 则会报错：无法将类型 Hero 隐式转换为 Blademaster。</p><p>如果要强制类型转换，运行起来也会报错，无法将 Hero 强制转换为 Blademaster：Unhandled exception. System.InvalidCastException: Unable to cast object of type ‘Hero’ to type ‘Blademaster’.</p></blockquote><p>同时，也可以使用数组统一管理。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero archmage = <span class="hljs-keyword">new</span> Archmage();<br><br>        Hero[] heros = &#123; hero, blademaster, archmage &#125;;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; heros.Length; i++)<br>        &#123;<br>            heros[i].Attack();<br>        &#125;<br>        <br>        <span class="hljs-comment">// 英雄攻击</span><br>        <span class="hljs-comment">// 致命一击</span><br>        <span class="hljs-comment">// 暴风雪</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>多态重写方法，实际上是在继承链上调用该方法的最新版本。</p><p>现在新增一个狂暴剑圣，继承了剑圣，也重写了 Attack 方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 狂暴剑圣</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BerserkBlademaster</span> : <span class="hljs-title">Blademaster</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;剑刃风暴&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>跟往常一样声明 Hero 类型变量，引用子类实例，调用方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero berserkBlademaster = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        <br>        hero.Attack();<br>        blademaster.Attack();<br>        berserkBlademaster.Attack();<br>        <br>        <span class="hljs-comment">// 英雄攻击</span><br>        <span class="hljs-comment">// 致命一击</span><br>        <span class="hljs-comment">// 剑刃风暴</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>如果狂暴剑圣没有重写 Attack 方法，而是声明了一个相同名字的方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 狂暴剑圣</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BerserkBlademaster</span> : <span class="hljs-title">Blademaster</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;剑刃风暴&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>那么狂暴剑圣对象被 Hero 类型变量引用时，调用 Attack 方法，此时该方法被重写后的最新版本是剑圣的 Attack 方法，不会输出剑刃风暴，而是致命一击。</p><p>除非用狂暴剑圣本来的类型，才会输出剑刃风暴。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero berserkBlademaster = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        <br>        hero.Attack();<br>        blademaster.Attack();<br>        berserkBlademaster.Attack();<br>        <br>        <span class="hljs-comment">// 英雄攻击</span><br>        <span class="hljs-comment">// 致命一击</span><br>        <span class="hljs-comment">// 致命一击</span><br>        <br>        BerserkBlademaster berserkBlademaster2 = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        berserkBlademaster2.Attack();<br>        <br>        <span class="hljs-comment">// 剑刃风暴</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 02 属性方法</title>
    <link href="/2024/01/07/csharp-basic-2/"/>
    <url>/2024/01/07/csharp-basic-2/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第二期）。</p><span id="more"></span><h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><p>类包含字段、属性和方法，是一个抽象概念。</p><p>对象是类的一个实例。</p><h2 id="字段和属性"><a href="#字段和属性" class="headerlink" title="字段和属性"></a>字段和属性</h2><p>字段和属性定义了对象的特征。</p><p>声明一个学生类，包含若干个字段和属性。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> Gender<br>&#123;<br>    Boy,<br>    Girl<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// 字段</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> name;    <span class="hljs-comment">// 姓名（公开）</span><br>    <span class="hljs-keyword">public</span> Gender gender;  <span class="hljs-comment">// 性别（公开）</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> age;       <span class="hljs-comment">// 年龄（私有）</span><br><br>    <span class="hljs-comment">// 属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Age<br>    &#123;<br>        <span class="hljs-keyword">get</span> <span class="hljs-comment">// 可以获取年龄字段</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> age;<br>        &#125;<br>        <span class="hljs-keyword">set</span> <span class="hljs-comment">// 设置年龄字段时，可以添加逻辑判断，例如限制在 (0, 100) 之间</span><br>        &#123;<br>            <span class="hljs-comment">// value 是一个关键字，对属性进行赋值时，value 是等号右边的值</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">value</span> &lt; <span class="hljs-number">100</span>)<br>            &#123;<br>                age = <span class="hljs-keyword">value</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>实例化一个学生对象，对字段和属性进行赋值，并打印结果。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        student.name = <span class="hljs-string">&quot;小明&quot;</span>;<br>        student.gender = Gender.Boy;<br>        student.Age = <span class="hljs-number">200</span>;<br>        <br>        Console.WriteLine(student.name);    <span class="hljs-comment">// 小明</span><br>        Console.WriteLine(student.gender);  <span class="hljs-comment">// Boy</span><br>        Console.WriteLine(student.Age);     <span class="hljs-comment">// 0（对 Age 属性赋值时，数值不在规定范围内，age 字段默认值为 0）</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>方法定义了对象的行为，可以执行一系列的逻辑。</p><h3 id="无参方法"><a href="#无参方法" class="headerlink" title="无参方法"></a>无参方法</h3><p>没有参数的方法。</p><p>例如，声明一个 Say 方法，打印三个句子。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Say</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;你好，我叫 &quot;</span> + name);<br>        Console.WriteLine(<span class="hljs-string">&quot;我是一个 &quot;</span> + gender);<br>        Console.WriteLine(<span class="hljs-string">&quot;我今年刚满 &quot;</span> + age + <span class="hljs-string">&quot; 岁~~~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>通过实例对象调用方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        student.name = <span class="hljs-string">&quot;喵喵球&quot;</span>;<br>        student.gender = Gender.Girl;<br>        student.Age = <span class="hljs-number">18</span>;<br>        <br>        student.Say();<br>        <br>        <span class="hljs-comment">// 你好，我叫 喵喵球</span><br>        <span class="hljs-comment">// 我是一个 Girl</span><br>        <span class="hljs-comment">// 我今年刚满 18 岁~~~</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="有参方法"><a href="#有参方法" class="headerlink" title="有参方法"></a>有参方法</h3><p>有参数的方法。</p><p>例如，声明一个 Repeat 方法，有一个 string 类型的参数，方法体内会复读传入的内容。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Repeat</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> content</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;我再说一遍 &quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>通过实例对象调用方法，并传入一个字符串参数。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br><br>        student.Repeat(<span class="hljs-string">&quot;我今年刚满 18 岁~~~&quot;</span>);<br>        <br>        <span class="hljs-comment">// 我再说一遍 我今年刚满 18 岁~~~</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><p>构造方法的名称和类名相同。</p><p>当类里面没有写任何构造方法时，会有一个默认的无参构造方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// 无参构造方法，不写也行</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>如果需要在实例化对象时，有一些执行逻辑，就可以显式写出构造方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>Console.WriteLine(<span class="hljs-string">&quot;一个对象被实例化了&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        <br>        <span class="hljs-comment">// 一个对象被实例化了</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>也可以自定义一个有参构造方法。</p><p>当参数名和字段名相同时，为了区分是参数赋值给字段，就需要在使用字段时，加上 this。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, Gender gender, <span class="hljs-built_in">int</span> age</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.gender = gender;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>此时，私有字段 age 可以被直接赋值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;小明&quot;</span>, Gender.Boy, <span class="hljs-number">10</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="析构方法"><a href="#析构方法" class="headerlink" title="析构方法"></a>析构方法</h3><p>当对象被垃圾收集器回收时，会自动调用析构方法。</p><p>析构方法也跟类名相同，前面要加个 ~ 符号。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    ~Student()<br>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;我被回收了呜呜呜~~~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在 Program 类声明一个静态方法 CreateStudent，方法体内实例化一个对象，当方法调用结束后，对象就没有引用了。</p><p>此时可以调用 GC.Collect 方法主动回收一次垃圾，student 对象就会调用析构方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        CreateStudent();<br>        GC.Collect();<br>        <br>        <span class="hljs-comment">// 我被回收了呜呜呜~~~</span><br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CreateStudent</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;小明&quot;</span>, Gender.Boy, <span class="hljs-number">10</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><p>不用实例化对象就能调用的方法。</p><p>例如，上述的 CreateStudent 方法，前面有个修饰符 static，表示静态的，不需要 new 一个 Program 对象，就能够直接调用。</p><p>Student 类也可以声明一个静态方法。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Introduce</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;我是一个学生&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>无需实例化对象，直接通过类名调用。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student.Introduce();<br>        <br>        <span class="hljs-comment">// 我是一个学生</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# 基础语法 01 入门概念</title>
    <link href="/2024/01/03/csharp-basic-1/"/>
    <url>/2024/01/03/csharp-basic-1/</url>
    
    <content type="html"><![CDATA[<p>简单复习一下 C# 基础语法（第一期）。</p><span id="more"></span><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// 单行注释</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * 多行注释</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> 文档注释，会显示在代码提示框里</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// 打印输出</span><br>Console.Write(<span class="hljs-string">&quot;输出&quot;</span>);<br>Console.WriteLine(<span class="hljs-string">&quot;输出并换行&quot;</span>);<br><br><span class="hljs-comment">// 读取输入</span><br>Console.ReadLine();<br></code></pre></td></tr></table></figure><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><p>在 C# 中被规定了用途的单词，声明变量时，变量名不可与关键字冲突。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">namespace</span> <span class="hljs-comment">// 命名空间</span><br><span class="hljs-title">using</span>     <span class="hljs-comment">// 引入命名空间</span><br><span class="hljs-title">class</span>     <span class="hljs-comment">// 声明类</span><br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">char</span> gender = <span class="hljs-string">&#x27;男&#x27;</span>;      <span class="hljs-comment">// 字符型</span><br><span class="hljs-built_in">string</span> name = <span class="hljs-string">&quot;柯南&quot;</span>;    <span class="hljs-comment">// 字符串型</span><br><span class="hljs-built_in">int</span> age = <span class="hljs-number">3</span>;            <span class="hljs-comment">// 整型</span><br><span class="hljs-built_in">float</span> money = <span class="hljs-number">0.1f</span>;     <span class="hljs-comment">// 单精度浮点型</span><br><span class="hljs-built_in">double</span> salary = <span class="hljs-number">0.1</span>;    <span class="hljs-comment">// 双精度浮点型</span><br><span class="hljs-built_in">bool</span> hasMoney = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// 布尔型</span><br></code></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>声明并赋值，不可修改。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> PI = <span class="hljs-number">3.14</span>;<br></code></pre></td></tr></table></figure><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>声明时可以赋值，如果没有赋值则会有相应类型的默认值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">double</span> money = <span class="hljs-number">0.1</span>;   <span class="hljs-comment">// 初始赋值</span><br><span class="hljs-built_in">int</span> num;              <span class="hljs-comment">// 默认值 0</span><br></code></pre></td></tr></table></figure><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>低精度类型会自动转换成高精度类型</p><p>高精度类型需要强制转换成低精度类型，并且会丢失部分精度。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">double</span> i = <span class="hljs-number">2</span>;     <span class="hljs-comment">// 自动转换（隐式转换），int 转 double</span><br><span class="hljs-built_in">int</span> j = (<span class="hljs-built_in">int</span>)<span class="hljs-number">3.1</span>; <span class="hljs-comment">// 强制转换（显式转换），double 转 int，3.1 被转换成 3 再赋值给 j，丢失部分精度（小数点后的数字）</span><br></code></pre></td></tr></table></figure><h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><p>枚举值是从 0 递增的整数。</p><p>使用枚举可以限制变量只能从有限的选项中取值，避免随意取值。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// 声明时</span><br><span class="hljs-built_in">enum</span> Gender <span class="hljs-comment">// 性别只能是男、女</span><br>&#123;<br>    Boy,<br>    Girl<br>&#125;<br><br><span class="hljs-comment">// 使用时</span><br>Gender.Boy<br>Gender.Girl<br></code></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">string</span>[] students = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">// 数组长度为 3</span><br><br><span class="hljs-comment">// 三个等效语句</span><br><span class="hljs-built_in">string</span>[] students1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;;  <span class="hljs-comment">// 直接赋值</span><br><span class="hljs-built_in">string</span>[] students2 = &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;;               <span class="hljs-comment">// 直接赋值</span><br><span class="hljs-built_in">string</span>[] students3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">3</span>] &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;; <span class="hljs-comment">// 数组长度为 3，并赋值</span><br><br>Console.WriteLine(students1[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// 输出 A</span><br></code></pre></td></tr></table></figure><h3 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span>[,] scores = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">3</span>, <span class="hljs-number">2</span>] &#123; &#123; <span class="hljs-number">11</span>, <span class="hljs-number">23</span> &#125;, &#123; <span class="hljs-number">25</span>, <span class="hljs-number">44</span> &#125;, &#123; <span class="hljs-number">76</span>, <span class="hljs-number">13</span> &#125; &#125;;  <span class="hljs-comment">// 3 行 2 列</span><br><span class="hljs-comment">// 11 23</span><br><span class="hljs-comment">// 25 44</span><br><span class="hljs-comment">// 76 13</span><br>Console.WriteLine(scores[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]); <span class="hljs-comment">// 取第一行第一列，结果 11</span><br>Console.WriteLine(scores[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]); <span class="hljs-comment">// 取第二行第二列，结果 44</span><br></code></pre></td></tr></table></figure><h2 id="条件分支"><a href="#条件分支" class="headerlink" title="条件分支"></a>条件分支</h2><h3 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">bool</span> hasMoney = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">bool</span> hasEnergy = <span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">if</span> (hasMoney)<br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;买买买&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (hasEnergy)<br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;冲冲冲&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;发呆&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 发呆</span><br></code></pre></td></tr></table></figure><h3 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">string</span> name = <span class="hljs-string">&quot;小樱&quot;</span>;<br><br><span class="hljs-keyword">switch</span> (name)<br>&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;小樱&quot;</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;魔法杖&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;知世&quot;</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;摄像机&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-literal">default</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;未知&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 魔法杖</span><br></code></pre></td></tr></table></figure><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>&#123;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">3</span>)<br>    &#123;<br>        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// 跳过当次循环</span><br>    &#125;<br>    <span class="hljs-comment">// 打印 i</span><br>    Console.WriteLine(i);<br>&#125;<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 0</span><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">// 2</span><br><span class="hljs-comment">// 4</span><br></code></pre></td></tr></table></figure><h3 id="foreach-循环"><a href="#foreach-循环" class="headerlink" title="foreach 循环"></a>foreach 循环</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span>[] num = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><br><span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> x <span class="hljs-keyword">in</span> num)<br>&#123;<br>    <span class="hljs-comment">// 打印 x</span><br>    Console.WriteLine(x);<br>    <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 跳出循环</span><br>&#125;<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure><h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">3</span>)<br>&#123;<br>    <span class="hljs-comment">// 打印 i</span><br>    Console.WriteLine(i);<br>    i++;<br>&#125;<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 0</span><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">// 2</span><br></code></pre></td></tr></table></figure><h3 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do while 循环"></a>do while 循环</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">// 至少执行一次</span><br><span class="hljs-keyword">do</span><br>&#123;<br>    <span class="hljs-comment">// 打印 i</span><br>    Console.WriteLine(i);<br>    i++;<br>&#125; <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">0</span>);<br><br><span class="hljs-comment">// 输出</span><br><span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D 输入系统</title>
    <link href="/2023/10/05/unity-input-system/"/>
    <url>/2023/10/05/unity-input-system/</url>
    
    <content type="html"><![CDATA[<p>这篇文章研究一下通过键盘和鼠标对游戏物体进行移动或是其他操作。</p><p>先来看看简单的按键输入。</p><span id="more"></span><h2 id="一、键盘按键"><a href="#一、键盘按键" class="headerlink" title="一、键盘按键"></a>一、键盘按键</h2><p>创建一个脚本，挂载到一个 Cube 上，在 Update 函数监听键盘按键。</p><p>使用的接口就是 Input.GetKeyDown，这个接口只会在按下按键的时候，返回一次 true。也就是说，长按键盘按键时，后续只会返回 false。</p><p>如果想要按住键盘的按键，持续不断地返回 true，就可以使用 Input.GetKey 接口。</p><p>（注：Input.GetKey 在按下的瞬间，可能会调用好几次，因为 Update 是每帧执行一次，每帧 0.016 秒左右）</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 按下键盘的 W 键，向上移动一个单位</span><br>    <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.W))<br>    &#123;<br>        transform.position += Vector3.up;<br>    &#125;<br>    <span class="hljs-comment">// 按下键盘的 S 键，向下移动一个单位</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.S))<br>    &#123;<br>        transform.position += Vector3.down;<br>    &#125;<br>    <span class="hljs-comment">// 按下键盘的 A 键，向左移动一个单位</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.A))<br>    &#123;<br>        transform.position += Vector3.left;<br>    &#125;<br>    <span class="hljs-comment">// 按下键盘的 D 键，向右移动一个单位</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.D))<br>    &#123;<br>        transform.position += Vector3.right;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>当然，在移动游戏物体时，不会逐个按键去监听，而是使用 Input.GetAxis 去监听水平或垂直方向上的偏移量。</p><p>这里声明了一个速度和一个方向向量，通过获取水平和垂直方向的偏移量，修改方向向量，计算出每帧的移动距离，修改物体位置，达到通过键盘方向键移动游戏物体的目的。</p><p>上面通过监听每个键盘按键的例子，只对 WSAD 有效。而下面这个例子，对 WSAD 和 方向键 都有效。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><span class="hljs-keyword">public</span> Vector3 direction;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 水平偏移量</span><br>    <span class="hljs-built_in">float</span> h = Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>    <span class="hljs-comment">// 垂直偏移量</span><br>    <span class="hljs-built_in">float</span> v = Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>);<br>    <span class="hljs-comment">// 修改方向向量</span><br>    direction.x = h;<br>    direction.y = v;<br>    <span class="hljs-comment">// 计算移动距离并修改物体位置</span><br>    transform.position += speed * Time.deltaTime * direction;<br>&#125;<br></code></pre></td></tr></table></figure><p>为什么是 Horizontal 和 Vertical 呢？有没有其他的参数呢？</p><p>答案是有的。</p><p>打开 Edit -&gt; Project Settings -&gt; Input Manager，可以看到 Horizontal 和 Vertical 两个元素，里面都包含了一系列的参数设置。</p><p>可以添加、修改、删除一些元素，填好 Name（按键名）、Positive Button（正向）、Negative Button（反向）就可以通过 Input.GetAxis 获取按键输入啦。</p><p><img src="/../images/unity-input-system/Snipaste_2023-10-05_13-53-12.png"></p><p>此外，还有 Input.GetAxisRaw，它和 Input.GetAxis 的区别是，它的返回值是 -1 0 1 三个整数，而 Input.GetAxis 会逐渐从 0 到 1 或 -1 进行变化，有一个缓慢增速的过程。</p><p>除了 Input.GetKeyDown，还有 Input.GetButtonDown，它们都可以获取 Input Manager 设置的轴键，而 GetKeyDown 可以额外通过 KeyCode 枚举变量获取按键，GetButtonDown 则只能获取轴键（GetAxis 同理）。</p><h2 id="二、鼠标按键"><a href="#二、鼠标按键" class="headerlink" title="二、鼠标按键"></a>二、鼠标按键</h2><p>鼠标的三个按键也都是通过 Input 类的接口来监听。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">0</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;按下鼠标左键&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">1</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;按下鼠标右键&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">2</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;按下鼠标中键&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>鼠标在屏幕上移动时，也同样可以获取到移动的坐标偏移量。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">float</span> x = Input.GetAxis(<span class="hljs-string">&quot;Mouse X&quot;</span>);<br>    <span class="hljs-built_in">float</span> y = Input.GetAxis(<span class="hljs-string">&quot;Mouse Y&quot;</span>);<br>    Debug.Log(<span class="hljs-string">$&quot;mouse x = <span class="hljs-subst">&#123;x&#125;</span> y = <span class="hljs-subst">&#123;y&#125;</span>&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><p>下面列出了一些常用的按键接口。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// 键盘</span><br>Input.GetKey(KeyCode.W)           <span class="hljs-comment">// 按住 W 键持续返回 true, 松开后返回 false</span><br>Input.GetKeyDown(KeyCode.W)       <span class="hljs-comment">// 按下 W 键返回 true，按住也只会返回 false</span><br>Input.GetKeyUp(KeyCode.W)         <span class="hljs-comment">// 抬起 W 键返回 true</span><br><br><span class="hljs-comment">// 注：这里的 Jump 需要在 Input Manager 里设置一个名称为 Jump 的轴键</span><br>Input.GetButton(<span class="hljs-string">&quot;Jump&quot;</span>)           <span class="hljs-comment">// 按住自定义的键持续返回 true, 松开后返回 false</span><br>Input.GetButtonDown(<span class="hljs-string">&quot;Jump&quot;</span>)       <span class="hljs-comment">// 按下自定义的键返回 true，按住也只会返回 false</span><br>Input.GetButtonUp(<span class="hljs-string">&quot;Jump&quot;</span>)         <span class="hljs-comment">// 抬起自定义的键返回 true</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>)       <span class="hljs-comment">// AD 或左右方向键的偏移量 (从 0 到 1 变化，或从 0 到 -1 变化)</span><br>Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>)         <span class="hljs-comment">// WS 或上下方向键的偏移量 (从 0 到 1 变化，或从 0 到 -1 变化)</span><br>    <br>Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>)    <span class="hljs-comment">// AD 或左右方向键的偏移量 (-1 0 1)</span><br>Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>)      <span class="hljs-comment">// WS 或上下方向键的偏移量 (-1 0 1)</span><br><br><br><span class="hljs-comment">// 鼠标 0: 左键  1: 右键  2: 中键</span><br>Input.GetMouseButton(<span class="hljs-number">0</span>)       <span class="hljs-comment">// 按住鼠标左键</span><br>Input.GetMouseButtonDown(<span class="hljs-number">1</span>)   <span class="hljs-comment">// 按下鼠标右键</span><br>Input.GetMouseButtonUp(<span class="hljs-number">2</span>)     <span class="hljs-comment">// 抬起鼠标中键</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse X&quot;</span>)      <span class="hljs-comment">// 鼠标水平方向移动的偏移量</span><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse Y&quot;</span>)      <span class="hljs-comment">// 鼠标垂直方向移动的偏移量</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D 移动游戏物体</title>
    <link href="/2023/09/12/unity-move-gameobject/"/>
    <url>/2023/09/12/unity-move-gameobject/</url>
    
    <content type="html"><![CDATA[<p>在 unity 中，一个很基础的需求是移动游戏物体。</p><p>移动物体的方式有很多种，本质上都是对 Transform 组件的 Position 属性进行修改。</p><span id="more"></span><h2 id="一、直接修改-position"><a href="#一、直接修改-position" class="headerlink" title="一、直接修改 position"></a>一、直接修改 position</h2><p>修改自身的位置：</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#">transform.position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p>当前物体就会出现在指定的坐标位置。</p><p>修改引用物体的位置：</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> Transform other;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    other.position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="二、Translate"><a href="#二、Translate" class="headerlink" title="二、Translate"></a>二、Translate</h2><p>unity 提供了 transform.Translate() 函数，用于移动游戏物体。</p><p>下面的例子是让当前物体沿着 X 轴正方向持续移动。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    transform.Translate(Vector3.right * speed * Time.deltaTime, Space.World);<br>&#125;<br></code></pre></td></tr></table></figure><p>Translate 函数的第一个参数，就是移动的方向和距离，使用一个向量作为输入。</p><p>可以看到，这里使用了物体的右方向（Vector3.right），定义了一个速度（speed），乘上增量时间修正（Time.deltaTime），作为最终的移动向量。</p><p>为什么要乘上 Time.deltaTime 呢？</p><p>这是因为 Update 函数每秒的执行次数是根据设备的性能来决定的。如果当前帧率是 60，那么 Update 函数每秒执行 60 次；如果帧率是 30，则执行 30 次。那么，物体的移动速度就不稳定了。</p><p>为了保持物体在不同帧率下，都是同样的移动速度，Time.deltaTime 作为一个变量，就发挥作用了。</p><ul><li>在 60 帧的情况下，Time.deltaTime 的值为 1/60，Update 执行了 60 次，最终 1 秒移动了 Vector3.right * speed 的距离。</li><li>在 30 帧的情况下，Time.deltaTime 的值为 1/30，Update 执行了 30 次，最终 1 秒移动了 Vector3.right * speed 的距离。</li></ul><p>第二个参数是坐标系，默认是使用物体自身的局部坐标系，也可以指定使用世界坐标系（Space.World）。</p><h2 id="三、刚体"><a href="#三、刚体" class="headerlink" title="三、刚体"></a>三、刚体</h2><p>给物体挂上刚体组件（Rigidbody），修改 velocity 属性，让物体在指定的方向产生移动速度。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><span class="hljs-keyword">public</span> Rigidbody rigidbody;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    rigidbody.velocity = Vector3.right * speed;<br>&#125;<br></code></pre></td></tr></table></figure><p>刚体的速度只需要设置一次，就会持续不断地移动。</p><p>（注：刚体默认是受到重力影响，会往下掉落。如果想要让物体不受重力影响，可以取消勾选刚体组件上的 Use Gravity 选项。）</p><p>当然，在实际项目中，这个速度需要不断地进行调整，不会只在 Start 设置一次。</p><p>对于物理组件来说，通常会使用 FixedUpdate 去控制物理逻辑，对于一些按键输入，则可以使用 Update 控制。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 方向键左右的输入，取值为 -1, 0, 1</span><br>    <span class="hljs-built_in">float</span> horizontal = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>    rigidbody.velocity = Vector3.right * horizontal * speed;<br>&#125;<br></code></pre></td></tr></table></figure><p>现在物体就可以通过方向键进行左右移动了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>回顾博客</title>
    <link href="/2023/09/10/review-blog/"/>
    <url>/2023/09/10/review-blog/</url>
    
    <content type="html"><![CDATA[<p>已经有好久好久没有更新博客了。</p><p>我又回来看看它了。</p><span id="more"></span><p>最近经常看别人的博客，看到好多知识和有意思的想法，然后就会联想到自己以前建立的博客，感慨这两年间都没有再写上一篇博客。</p><p>其实平常都有在小米笔记上写一些工作日志、周志，还有偶尔的一些情绪感悟。</p><p>可能是因为手机上随时可以写，随时可以查看，就渐渐地遗忘了网页的博客吧。</p><p>而且我的主站是用 Notion 搭建的个人空间，博客对我来说，似乎确实没有太大的作用。</p><hr><p>回想当初，刚接触的编程语言是前端三件套（HTML、CSS、JavaScript），职业方向也是想着往 Web 前端开发工程师的路径走，只是由于自己的迷茫和懒惰，也有兴趣低迷的原因，导致这条路并没有走太远。</p><p>后来因为参加比赛，选择了做游戏，就一路走向了 Unity3D 客户端开发工程师。</p><p>那时候还是很纠结，是要做前端还是游戏。不过，听从了师兄的建议，尝试去做一个 Web 项目，最基本的，就是搭建一个博客。其实也算不上做项目吧，毕竟用了博客框架，看些入门教程就搭起来了，然后就是写文章。师兄也建议我去写一个 todolist 应用，不过那时候比赛很忙，后来也没写了。</p><p>最开始我写的博客，是全英文的。因为我想起来，以前师兄给我看过他的博客，也是全英文的。我觉得这样的写作方式可以一边积累博客一边熟练使用英语，所以就硬着头皮要求自己这样写了。当然，就坚持了两篇。</p><p>后面放弃了前端，也就遗忘了博客。</p><hr><p>第二次回来看博客，是 2021 年初的时候了。</p><p>那时候辞职考研失败，一切百废待兴，总觉得应该做点什么，并且需要记录一下自己的成长，让自己有一个全新的开始，所以就想起了博客。</p><p>那时候确实很兴奋地在写，还做了几个简单的小游戏，打包成 WebGL，捣鼓了很多天，终于可以在博客上预览了。</p><p>然后年初找工作，上班之后，就没时间没精力来写了。</p><hr><p>时间一晃，2023 年了。</p><p>这两年间也并不是一直有在工作，也换过几家公司，休息过几段时间。</p><p>现在，在新公司做了快七个月了，状态不是很好。说不出来什么原因，就是对工作内容和日常对接感到很无趣。</p><p>有自己的原因，也有其他人的原因。</p><p>总之，我需要找点事情来缓解一下自己的无趣。</p><hr><p>今天是 9 月 10 号，周日。</p><p>我参考了几个大佬的博客，很喜欢一个用 Jekyll 生成，Chirpy 主题的博客页面。</p><p>然后我捣鼓了一天 Ruby，安装 gem、bundler、jekyll，勉强看到了同样效果的页面，但是已经被 bundle 在命令行窗口半天都不响应给气晕了。</p><p>魔法上网、换镜像源，都很难制服这个 bundle，然后想想，还是 hexo 简单好用。</p><p>姑且用 hexo 写一篇简短的博客，来延续这个封印了两年的小空间吧。</p><hr><p>今天也给自己做的 hexo 主题美化了一下，做成了左边固定，右边滚动的结构。删除了很多没有用的元素，力求简洁。不过总感觉有点空，后续想到什么好玩的点子，再想办法加进来吧。</p>]]></content>
    
    
    
    <tags>
      
      <tag>日常</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tetris</title>
    <link href="/2021/04/20/Tetris/"/>
    <url>/2021/04/20/Tetris/</url>
    
    <content type="html"><![CDATA[<p>俄罗斯方块项目演示。</p><p><a href="../../../../WebGL/Tetris/index.html">Tetris</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TheRestOfThePlanet</title>
    <link href="/2021/04/08/TheRestOfThePlanet/"/>
    <url>/2021/04/08/TheRestOfThePlanet/</url>
    
    <content type="html"><![CDATA[<p>星球余生项目演示。</p><p><a href="../../../../WebGL/TheRestOfThePlanet/index.html">TheRestOfThePlanet</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ZerosSmartGrowth</title>
    <link href="/2021/02/17/ZerosSmartGrowth/"/>
    <url>/2021/02/17/ZerosSmartGrowth/</url>
    
    <content type="html"><![CDATA[<p>Zero 的智能成长项目演示。</p><p><a href="../../../../WebGL/ZerosSmartGrowth/index.html">ZerosSmartGrowth</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PickGifts</title>
    <link href="/2021/02/03/PickGifts/"/>
    <url>/2021/02/03/PickGifts/</url>
    
    <content type="html"><![CDATA[<p>挑选礼物项目演示。</p><p><a href="../../../../WebGL/PickGifts/index.html">PickGifts</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GreedySnake</title>
    <link href="/2021/01/27/GreedySnake/"/>
    <url>/2021/01/27/GreedySnake/</url>
    
    <content type="html"><![CDATA[<p>贪吃蛇项目演示。</p><p><a href="../../../../WebGL/GreedySnake/index.html">GreedySnake</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Link</title>
    <link href="/2021/01/27/Hexo-Link/"/>
    <url>/2021/01/27/Hexo-Link/</url>
    
    <content type="html"><![CDATA[<p>在文章中引入超链接，直接在 Typora 中写</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[GreedySnake](..<span class="hljs-regexp">/WebGL/</span>GreedySnake/index.html)<br></code></pre></td></tr></table></figure><p>这里的文件夹层级是，_posts 和 WebGL 都放在 source 里。</p><p>和插入图片一样，首页显示了链接，并且可以正常打开，而文章页面却不能正常打开，找不到页面。</p><p>同样是路径的问题。</p><span id="more"></span><p>在 Hexo-Image 这篇文章中，我使用了 hexo-renderer-marked 这个插件修改网站发布后的图片的路径。</p><p>不过，超链接这一块，我还没有找到合适的插件去修正。</p><p>所以这里就先用一个土方法，自己在路径前加上很多个 ../ 。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[GreedySnake](..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>WebGL<span class="hljs-regexp">/GreedySnake/i</span>ndex.html)<br></code></pre></td></tr></table></figure><p>加多少个，要看文件夹的层级，根据实际情况去选择。这里我加上了三个 ../ ，因为我的文章页面的上级目录，有年月日三个层级。</p><p>这样，文章页面的超链接路径就会回到根目录下去找 WebGL 这个文件夹，而主页同样是在根目录下找，因为根目录已经没有上级目录了，所以加多少个 ../ 也没关系（好像有点矛盾了）。</p><p>不过，我觉得这个方法并不是最好的，以后估计会找到更好的解决方案吧。</p><p>另外，超链接的路径里不能有空格，如果有空格，超链接会变成 p 标签。</p><p>还有一个问题，就是 index.html 在发布时会被渲染，导致页面出现某些问题。比如，我打开的链接是 Unity WebGL 的页面，这个页面会直接在我的网站背景上显示，而不是打开一个新的页面。</p><p><img src="/../images/HexoLink/page_overlap.png" alt="页面重叠"></p><p>所以还需要去到 config.yml 文件里，找到 skip_render，让一些页面跳过渲染。</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haml">skip_render:<br>  -<span class="ruby"> <span class="hljs-string">&#x27;README.md&#x27;</span></span><br><span class="ruby">  - <span class="hljs-string">&#x27;WebGL/GreedySnake/*.html&#x27;</span></span><br></code></pre></td></tr></table></figure><p>参数前加的连字符 - 是 yml 的数组写法。这里我添加了 GreedySnake 下的所有 html 文件。</p><p>清理一下数据库，清理之前，如果 public 文件夹下的有需要保存的东西，比如 README.md，需要先备份一下，因为清理的命令也会把 public 文件夹给删除。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo clean<br></code></pre></td></tr></table></figure><p>重新启动本地服务器，会发现，WebGL 页面已经在新页面打开了。</p><p><img src="/../images/HexoLink/new_page.png" alt="打开新页面"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Image</title>
    <link href="/2021/01/27/Hexo-Image/"/>
    <url>/2021/01/27/Hexo-Image/</url>
    
    <content type="html"><![CDATA[<p>在写文章的过程中，有时需要插入图片。</p><p>如果直接在 Markdown 文件中使用相对路径引用图片，当网站发布时，首页显示了图片，文章页面却不会显示图片。</p><p>经过一番探索和尝试，我使用以下的方法插入图片。</p><span id="more"></span><p>首先，在 source 文件夹下创建一个 images 文件夹。</p><p>为了便于分类，在 images 文件夹下，还有一个 Hexo 文件夹，表示这个文件夹下的图片是 Hexo.md 这篇文章使用的。</p><p><img src="/../images/HexoImage/imagesHexo.png" alt="Hexo文章里的图片"></p><p>接着，在 Typora 编辑器中插入图片，例如</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![创建仓库](..<span class="hljs-regexp">/images/</span>Hexo/repository.png)<br></code></pre></td></tr></table></figure><p>在输入图片路径时，要使用 / 而不是 \，虽然两种写法在 Typora 编辑器中都可以显示图片，但是在 Hexo 发布时却会导致路径出现问题。</p><p>另外，图片和文件夹的名称也不能带有连字符 - ，因为这个符号同样会让图片显示不出来。</p><p>然后，安装一个插件。这个插件也是为了让文章被渲染后的图片路径变得正常。</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-renderer-marked <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>在 config.yml 里配置一下，找到 Writing 这个标题下，新增字段</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">marked:</span><br>  <span class="hljs-attr">prependRoot:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>还要检查一下 URL 这个标题下，root 字段是否是一个斜杠</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">root:</span> /<br></code></pre></td></tr></table></figure><p>这个 prependRoot 字段的作用是，在图片的路径前，加上 root 设置的路径。</p><p>在这里，因为我设置的图片路径是</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![创建仓库](..<span class="hljs-regexp">/images/</span>Hexo/repository.png)<br></code></pre></td></tr></table></figure><p>按照上述的配置，生成的页面的图片路径就会变成</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![创建仓库](<span class="hljs-regexp">/../im</span>ages<span class="hljs-regexp">/Hexo/</span>repository.png)<br></code></pre></td></tr></table></figure><p>原本发布后，文章页面的图片路径应该是</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">4000</span><span class="hljs-regexp">/2021/</span><span class="hljs-number">01</span><span class="hljs-regexp">/26/im</span>ages<span class="hljs-regexp">/Hexo/</span>repository.png<br></code></pre></td></tr></table></figure><p>就是路径的问题导致文章页面的图片显示不出来，而配置后的路径则是</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">4000</span><span class="hljs-regexp">/images/</span>Hexo/repository.png<br></code></pre></td></tr></table></figure><p>路径正确，图片也就正常地显示出来了。</p><p>不过此处有个小问题，就是按照上述流程配置后，文章的图片还是显示不出来，经过测试发现，需要在文章里写一次</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--more--&gt;</span> // 首页会出现 Read More 的按钮，隐藏后面的内容<br></code></pre></td></tr></table></figure><p>然后神奇的是，图片正常显示了。</p><p>之后，即使把这个代码去掉，图片也是正常显示的。</p><p>可能是这个插件的某个地方出了问题吧。</p><p>如果直接写</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--more--&gt;</span><br></code></pre></td></tr></table></figure><p>也是显示不出来的，还是需要先安装插件，配置 config.yml，再写 Read More 的代码才行。</p><p>最后，生成一下页面。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo g<br></code></pre></td></tr></table></figure><p>在本地测试一下，可以看到图片已经显示出来了。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo s<br></code></pre></td></tr></table></figure><p><img src="/../images/HexoImage/imagesTest.png" alt="本地测试"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Config</title>
    <link href="/2021/01/27/Hexo-Config/"/>
    <url>/2021/01/27/Hexo-Config/</url>
    
    <content type="html"><![CDATA[<p>在根目录下，有个叫 _config.yml 的文件，用文本编辑器打开，可以看到很多配置字段。</p><span id="more"></span><h1 id="Site"><a href="#Site" class="headerlink" title="Site"></a>Site</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>title</td><td>网站的标题</td><td>默认会显示在网站顶部</td></tr><tr><td>subtitle</td><td>网站的副标题</td><td>默认会显示在标题下方</td></tr><tr><td>description</td><td>网站的描述</td><td>没有显示，跟搜索引擎有关</td></tr><tr><td>keywords</td><td>网站的关键词</td><td>没有显示，跟搜索引擎有关</td></tr><tr><td>author</td><td>作者</td><td>默认会显示在网站底部</td></tr><tr><td>language</td><td>网站的语言，使用 2 个字符的代码描述，中文是 zh</td><td>没有显示，跟搜索引擎有关</td></tr><tr><td>timezone</td><td>网站的时区，Hexo会默认使用计算机上的设置</td><td>没有显示，跟搜索引擎有关</td></tr></tbody></table><h1 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>url</td><td>网站的 URL</td><td>如果网站在域名下的一个子目录里，则需要设置为 https://网址/子目录/</td></tr><tr><td>root</td><td>网站的根目录</td><td>如果网站在域名下的一个子目录里，则需要设置为 /子目录/</td></tr><tr><td>permalink</td><td>文章的永久链接格式</td><td>public 文件夹和网址的层级格式</td></tr><tr><td>permalink_defaults</td><td>永久链接格式的默认值</td><td>为 permalink 设置默认值</td></tr><tr><td>pretty_urls</td><td>美化永久链接</td><td>可以让 URL 更简洁</td></tr><tr><td>pretty_urls.trailing_index</td><td>链接尾部的 index.html</td><td>设置为 false 可以让链接尾部的 index.html 不显示</td></tr><tr><td>pretty_urls.trailing_html</td><td>链接尾部的 .html</td><td>设置为 false 可以让链接尾部的 .html 不显示</td></tr></tbody></table><h1 id="Directory"><a href="#Directory" class="headerlink" title="Directory"></a>Directory</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>source_dir</td><td>资源文件夹</td><td>存放文章、图片等资源</td></tr><tr><td>public_dir</td><td>Hexo 发布的文件夹</td><td>可以看到发布后的静态页面文件</td></tr><tr><td>tag_dir</td><td>标签文件夹</td><td>给文章设置标签后，会多出一个标签文件夹，网站的侧边栏也会多出两栏标签导航栏</td></tr><tr><td>archive_dir</td><td>档案文件夹</td><td>默认按照月份将文章归档</td></tr><tr><td>category_dir</td><td>分类文件夹</td><td>跟标签文件夹差不多，同样在文章的顶部进行设置</td></tr><tr><td>code_dir</td><td>代码文件夹</td><td>存放代码</td></tr><tr><td>i18n_dir</td><td>国际化文件夹</td><td>跟语言相关</td></tr><tr><td>skip_render</td><td>跳过渲染，将路径下的文件直接拷贝到 public 文件夹下</td><td>可以在发布时，将一些资源原封不动地拷贝到 public 文件夹，避免渲染后出现问题，比如 README.md 文件</td></tr></tbody></table><h1 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>new_post_name</td><td>新建文章的名称格式，默认是 title.md</td><td>新建文章后生成的文件名会是 标题.md 的格式</td></tr><tr><td>default_layout</td><td>新建文章的默认布局，默认是 post</td><td>新建文章时使用的模板</td></tr><tr><td>titlecase</td><td>将标题转换成首字母大写的标题</td><td></td></tr><tr><td>external_link</td><td>外部链接</td><td></td></tr><tr><td>external_link.enable</td><td>是否在新标签页打开外部链接</td><td></td></tr><tr><td>external_link.field</td><td>对整个网站还是当前文章生效</td><td></td></tr><tr><td>external_link.exclude</td><td>排除哪些域名</td><td></td></tr><tr><td>filename_case</td><td>把文章的名称改为小写（1）或大写（2），默认不改（0）</td><td></td></tr><tr><td>render_drafts</td><td>是否渲染草稿</td><td>设置为 true 后，将会显示通过草稿模板创建的文章</td></tr><tr><td>post_asset_folder</td><td>是否启用资源文件夹</td><td>设置为 true 后，新建文章的同时，会在文章同级目录下生成一个同名文件夹存放资源</td></tr><tr><td>relative_link</td><td>是否把链接改为根目录的相对路径</td><td></td></tr><tr><td>future</td><td>是否显示未来日期的文章</td><td>设置为 false 后，将不会显示未来日期的文章</td></tr><tr><td>highlight</td><td>代码块设置</td><td></td></tr><tr><td>highlight.enable</td><td></td><td></td></tr><tr><td>highlight.line_number</td><td></td><td></td></tr><tr><td>highlight.auto_detect</td><td></td><td></td></tr><tr><td>highlight.tab_replace</td><td></td><td></td></tr><tr><td>highlight.wrap</td><td></td><td></td></tr><tr><td>highlight.hljs</td><td></td><td></td></tr><tr><td>prismjs</td><td>代码块设置</td><td></td></tr><tr><td>prismjs.enable</td><td></td><td></td></tr><tr><td>prismjs.preprocess</td><td></td><td></td></tr><tr><td>prismjs.line_number</td><td></td><td></td></tr><tr><td>prismjs.tab_replace</td><td></td><td></td></tr></tbody></table><h1 id="Home-page-setting"><a href="#Home-page-setting" class="headerlink" title="Home page setting"></a>Home page setting</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>index_generator</td><td>主页设置</td><td></td></tr><tr><td>index_generator.path</td><td>主页的路径</td><td></td></tr><tr><td>index_generator.per_page</td><td>每页显示的文章数目</td><td></td></tr><tr><td>index_generator.order_by</td><td>文章排序</td><td></td></tr></tbody></table><h1 id="Category-amp-Tag"><a href="#Category-amp-Tag" class="headerlink" title="Category &amp; Tag"></a>Category &amp; Tag</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>default_category</td><td>默认分类</td><td></td></tr><tr><td>category_map</td><td>分类别名</td><td></td></tr><tr><td>tag_map</td><td>标签别名</td><td></td></tr></tbody></table><h1 id="Metadata-elements"><a href="#Metadata-elements" class="headerlink" title="Metadata elements"></a>Metadata elements</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>meta_generator</td><td>是否在页面头部插入 meta 标签</td><td></td></tr></tbody></table><h1 id="Date-Time-format"><a href="#Date-Time-format" class="headerlink" title="Date / Time format"></a>Date / Time format</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>date_format</td><td>日期格式</td><td></td></tr><tr><td>time_format</td><td>时间格式</td><td></td></tr><tr><td>updated_option</td><td>如果文章中没有指定创建日期，就会使用更新日期</td><td></td></tr></tbody></table><h1 id="Pagination"><a href="#Pagination" class="headerlink" title="Pagination"></a>Pagination</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>per_page</td><td>文章分页时，每页的文章数目</td><td></td></tr><tr><td>pagination_dir</td><td>分页的目录</td><td></td></tr></tbody></table><h1 id="Include-Exclude-file-s"><a href="#Include-Exclude-file-s" class="headerlink" title="Include / Exclude file(s)"></a>Include / Exclude file(s)</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>include</td><td>包括的文件</td><td>Hexo 会将这个路径下的文件拷贝到 source 文件夹下</td></tr><tr><td>exclude</td><td>不包括的文件</td><td>Hexo 会将这个路径下的文件排除在外</td></tr><tr><td>ignore</td><td>忽略的文件</td><td>Hexo 不会对这些文件进行操作</td></tr></tbody></table><h1 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>theme</td><td>主题</td><td>网站显示的样式</td></tr></tbody></table><h1 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h1><table><thead><tr><th>字段</th><th>描述</th><th>作用</th></tr></thead><tbody><tr><td>deploy</td><td>部署设置</td><td></td></tr><tr><td>deploy.type</td><td>部署类型，默认是 git</td><td></td></tr><tr><td>deploy.repo</td><td>部署地址，github 远程仓库地址</td><td>将发布后的文件部署到相应的 Github 地址</td></tr><tr><td>deploy.branch</td><td>部署分支</td><td>将发布后的文件部署到相应的 Github 地址的一个分支下</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo</title>
    <link href="/2021/01/26/Hexo/"/>
    <url>/2021/01/26/Hexo/</url>
    
    <content type="html"><![CDATA[<p>Hexo 是一个网站框架，可以快速地搭建一个属于自己的网站。</p><p>下面介绍一下我的搭建过程。</p><span id="more"></span><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><ul><li>注册一个 Github 账号并创建远程仓库</li><li>安装 Git</li><li>安装 node.js</li><li>配置 SSH Key</li></ul><h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>Github 官网：<a href="https://github.com/">https://github.com/</a></p><p>点击右上角的 sign up 注册一个账号。</p><p>登录后，在 Github 上 new 一个 repository，名字叫做：github昵称 + github.io。比如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">weikunou</span><span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span><br></code></pre></td></tr></table></figure><p><img src="/../images/Hexo/repository.png" alt="创建仓库"></p><p>创建好之后，点击分支按钮，输入 source，创建一个新的分支，用于存储源文件。</p><p><img src="/../images/Hexo/source.png" alt="创建source分支"></p><p>而默认的 main 分支是用来存储发布后的静态页面文件的。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Git 官网： <a href="https://git-scm.com/">https://git-scm.com/</a></p><p>Node.js 官网：<a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p><h2 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h2><p>这个是用来提交代码到远程仓库的密钥，可以安全地将本地文件上传到 Github 服务器。</p><p>打开 Git Bash，输入如下代码，先检查一下本机是否已经有 SSH Key：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">$ <span class="hljs-keyword">cd</span> ~<span class="hljs-string">/.ssh</span><br></code></pre></td></tr></table></figure><p>如果提示 No such file or directory 则说明没有 SSH Key。</p><p>那么，输入如下代码创建 SSH Key：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh-keygen -t rsa -C <span class="hljs-string">&quot;注册 Github 的邮箱地址&quot;</span><br></code></pre></td></tr></table></figure><p>如果保持默认设置，可以直接连续按回车键。完成配置后，打开 C 盘里的用户文件夹，可以看到一个 .ssh 的文件夹，用文本编辑器打开 id_rsa.pub，复制所有的内容。</p><p>回到 Github 主页，点击右上角的头像，点击 Settings，进入设置页面，找到 SSH and GPG keys，点击 New SSH key 按钮，Title 可以随意起，把复制的内容粘贴到 Key 的文本框内，最后点击 Add SSH key。</p><p><img src="/../images/Hexo/ssh.png" alt="ssh"></p><p>然后，测试一下是否配置成功。回到 Git Bash 面板，输入代码：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh -T git<span class="hljs-variable">@github</span>.com<br></code></pre></td></tr></table></figure><p>如果有提示</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">Hi weikunou! You<span class="hljs-symbol">&#x27;ve</span> successfully authenticated, but GitHub does <span class="hljs-keyword">not</span> provide shell <span class="hljs-keyword">access</span>.<br></code></pre></td></tr></table></figure><p>就说明已经配置成功了。</p><p>另外，还需要配置一下 Git 的用户名和邮箱，用来记录每次提交代码的人是谁。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.name</span> <span class="hljs-string">&quot;github 用户名&quot;</span><br>$ git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.email</span> <span class="hljs-string">&quot;github 注册邮箱&quot;</span><br></code></pre></td></tr></table></figure><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><p>在 Git Bash 窗口（或者 cmd 命令提示符窗口），输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span> -g hexo<br></code></pre></td></tr></table></figure><p>就安装好了 Hexo。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>在电脑的某个盘上准备好要存放 Hexo 的文件夹，比如 myblog。</p><p>然后在 Git Bash 窗口下转到目录，比如 D 盘上的 Projects 文件夹下的 myblog 子文件夹。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ cd <span class="hljs-regexp">/d/</span>Projects/myblog<br></code></pre></td></tr></table></figure><p>然后执行初始化命令。如果文件夹不是空的，则会报错，需要保持 myblog 是一个空文件夹。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">$ hexo <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p>此时 myblog 文件夹下就有了一些文件。耐心等待一段时间，Hexo 会自动安装 node_modules 依赖包，如果没有发现这个文件夹，那么可以输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><p>手动安装 node_modules 依赖包。</p><p>接下来，执行</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">$ hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>启动服务，然后打开浏览器，在地址栏输入 http:// localhost:4000/ 即可在本地预览网站。</p><h2 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h2><p>执行</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">$ hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;About-me&quot;</span><br></code></pre></td></tr></table></figure><p>hexo 会在 source/_posts 文件夹下生成一个新的 About-me.md 文件，打开这个文件，就可以开始写作啦。</p><p>这里推荐一款 Markdown 写作软件，<a href="https://www.typora.io/">Typora</a>。</p><h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>安装一个插件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>用文本编辑器打开 Hexo 文件夹下的 _config.yml，在最下面的 deploy 参数下，填写远程仓库的名称和分支。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-attribute">deploy</span>:<br>  <span class="hljs-attribute">type</span>: git<br>  <span class="hljs-attribute">repo</span>: <span class="hljs-attribute">https</span>:<span class="hljs-comment">//github.com/Github 用户名/Github 项目名</span><br>  <span class="hljs-attribute">branch</span>: main<br></code></pre></td></tr></table></figure><p>执行命令</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo deploy<br></code></pre></td></tr></table></figure><p>就将项目发布成静态页面并上传到 Github 项目的 main 分支下了。</p><p>现在，只要在浏览器输入</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>Github项目名称/<br></code></pre></td></tr></table></figure><p>就可以访问个人网站啦。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
