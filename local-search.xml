<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Unity3D Shader å…¥é—¨çŸ¥è¯†</title>
    <link href="/2025/09/14/unity-shader-intro/"/>
    <url>/2025/09/14/unity-shader-intro/</url>
    
    <content type="html"><![CDATA[<p>Unity3D Shader å…¥é—¨çŸ¥è¯†è¯¦è§£ã€‚</p><span id="more"></span><h1 id="Unity3D-Shader-å…¥é—¨çŸ¥è¯†"><a href="#Unity3D-Shader-å…¥é—¨çŸ¥è¯†" class="headerlink" title="Unity3D Shader å…¥é—¨çŸ¥è¯†"></a>Unity3D Shader å…¥é—¨çŸ¥è¯†</h1><p>Shaderï¼ˆç€è‰²å™¨ï¼‰å¯¹å¾ˆå¤š Unity åˆå­¦è€…æ¥è¯´åƒæ˜¯â€œé»‘é­”æ³•â€ã€‚</p><p>å®é™…ä¸Šï¼ŒShader å¹¶æ²¡æœ‰é‚£ä¹ˆç¥ç§˜ï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ®µè¿è¡Œåœ¨ GPU ä¸Šçš„å°ç¨‹åºï¼Œç”¨æ¥æ§åˆ¶ <strong>å±å¹•ä¸Šæ¯ä¸ªåƒç´ çš„é¢œè‰²å’Œæ˜¾ç¤ºæ•ˆæœ</strong>ã€‚</p><p>æœ¬æ–‡ä¼šå†™ä¸€ä¸ªæœ€ç®€å•çš„ Shaderï¼Œå¹¶é€æ­¥è®²è§£ Shader çš„åŸºæœ¬ç»“æ„ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Shader"><a href="#ä»€ä¹ˆæ˜¯-Shader" class="headerlink" title="ä»€ä¹ˆæ˜¯ Shader"></a>ä»€ä¹ˆæ˜¯ Shader</h2><p>åœ¨ Unity ä¸­ï¼ŒShader æ˜¯æè´¨çš„æ ¸å¿ƒï¼Œå®ƒå‘Šè¯‰ GPU å¦‚ä½•å»æ¸²æŸ“ä¸€ä¸ªç‰©ä½“ã€‚</p><p>æˆ‘ä»¬å¹³å¸¸çœ‹åˆ°çš„å„ç§ç‰¹æ•ˆï¼ˆå‘å…‰ã€é€æ˜ã€æ°´æ³¢ã€å¡é€šæè¾¹ï¼‰éƒ½æ˜¯ Shader åœ¨å‘æŒ¥ä½œç”¨ã€‚</p><p>Unity çš„ Shader å¸¸è§æœ‰ä¸‰ç±»ï¼š</p><ul><li><strong>Surface Shader</strong>ï¼šUnity å°è£…çš„é«˜å±‚æ¬¡å†™æ³•ï¼Œé€‚åˆå¿«é€Ÿå®ç°å…‰ç…§æè´¨ã€‚</li><li><strong>Vertex&#x2F;Fragment Shader</strong>ï¼šåº•å±‚æ§åˆ¶æ–¹å¼ï¼Œå¯ä»¥å®Œå…¨è‡ªå®šä¹‰é¡¶ç‚¹å’Œåƒç´ çš„æ¸²æŸ“ã€‚</li><li><strong>Shader Graph</strong>ï¼šå¯è§†åŒ–ç¼–è¾‘ï¼Œæ‹–æ‹½èŠ‚ç‚¹å³å¯æ‹¼æ¥ Shaderã€‚</li></ul><p>æœ¬æ–‡æˆ‘ä»¬å…ˆç”¨ <strong>æœ€ç®€å•çš„ Unlit Shader</strong>ï¼ˆæ— å…‰ç…§ï¼‰å…¥é—¨ã€‚</p><h2 id="Shader-çš„åŸºæœ¬ç»“æ„"><a href="#Shader-çš„åŸºæœ¬ç»“æ„" class="headerlink" title="Shader çš„åŸºæœ¬ç»“æ„"></a>Shader çš„åŸºæœ¬ç»“æ„</h2><p>åœ¨ Unity ä¸­ï¼Œä¸€ä¸ªæœ€åŸºç¡€çš„ Shader ç»“æ„é•¿è¿™æ ·ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c">Shader <span class="hljs-string">&quot;Custom/SimpleColor&quot;</span><br>&#123;<br>    Properties<br>    &#123;<br>        _Color (<span class="hljs-string">&quot;Main Color&quot;</span>, Color) = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<br>    &#125;<br><br>    SubShader<br>    &#123;<br>        Tags &#123; <span class="hljs-string">&quot;RenderType&quot;</span>=<span class="hljs-string">&quot;Opaque&quot;</span> &#125;<br>        Pass<br>        &#123;<br>            CGPROGRAM<br>            <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> vertex vert</span><br>            <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> fragment frag</span><br>            <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;UnityCG.cginc&quot;</span></span><br><br>            fixed4 _Color;<br><br>            <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">appdata</span></span><br><span class="hljs-class">            &#123;</span><br>                float4 vertex : POSITION;<br>            &#125;;<br><br>            <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">v2f</span></span><br><span class="hljs-class">            &#123;</span><br>                float4 pos : SV_POSITION;<br>            &#125;;<br><br>            <span class="hljs-function">v2f <span class="hljs-title">vert</span> <span class="hljs-params">(appdata v)</span></span><br><span class="hljs-function">            </span>&#123;<br>                v2f o;<br>                o.pos = UnityObjectToClipPos(v.vertex);<br>                <span class="hljs-keyword">return</span> o;<br>            &#125;<br><br>            <span class="hljs-function">fixed4 <span class="hljs-title">frag</span> <span class="hljs-params">(v2f i)</span> : SV_Target</span><br><span class="hljs-function">            </span>&#123;<br>                <span class="hljs-keyword">return</span> _Color;<br>            &#125;<br>            ENDCG<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä»£ç è§£è¯»"><a href="#ä»£ç è§£è¯»" class="headerlink" title="ä»£ç è§£è¯»"></a>ä»£ç è§£è¯»</h2><h3 id="å‘½å"><a href="#å‘½å" class="headerlink" title="å‘½å"></a>å‘½å</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">Shader <span class="hljs-string">&quot;Custom/SimpleColor&quot;</span><br></code></pre></td></tr></table></figure><p>æ¯ä¸ª Shader éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œæ ¼å¼é€šå¸¸æ˜¯ <code>Shader &quot;è·¯å¾„/åå­—&quot;</code>ã€‚</p><p>è¿™é‡Œå¹¶ä¸æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œè€Œæ˜¯ <strong>Unity å†…éƒ¨çš„å‘½åç©ºé—´</strong>ã€‚</p><p>åœ¨æè´¨çƒ (Material) çš„ <strong>Shader ä¸‹æ‹‰èœå•</strong> é‡Œï¼Œè¿™ä¸ªåå­—ä¼šå†³å®š Shader çš„æ˜¾ç¤ºä½ç½®ã€‚</p><h3 id="Properties-å—"><a href="#Properties-å—" class="headerlink" title="Properties å—"></a>Properties å—</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c">Properties<br>&#123;<br>    _Color (<span class="hljs-string">&quot;Main Color&quot;</span>, Color) = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰äº†æè´¨é¢æ¿ä¸­å¯è°ƒçš„å±æ€§ã€‚</p><ul><li><code>_Color</code>ï¼šå˜é‡åï¼ˆåœ¨ Shader ä»£ç é‡Œä½¿ç”¨ï¼‰</li><li><code>&quot;Main Color&quot;</code>ï¼šåœ¨ Inspector é¢æ¿æ˜¾ç¤ºçš„åå­—</li><li><code>Color</code>ï¼šå±æ€§ç±»å‹</li><li><code>(1,1,1,1)</code>ï¼šé»˜è®¤å€¼ï¼ˆRGBA &#x3D; ç™½è‰²ï¼‰</li></ul><h3 id="SubShader-ä¸-Pass"><a href="#SubShader-ä¸-Pass" class="headerlink" title="SubShader ä¸ Pass"></a>SubShader ä¸ Pass</h3><ul><li><code>SubShader</code>ï¼šçœŸæ­£çš„æ¸²æŸ“é€»è¾‘å†™åœ¨è¿™é‡Œã€‚Unity ä¼šæ ¹æ®æ˜¾å¡é€‰æ‹©åˆé€‚çš„ SubShaderã€‚</li><li><code>Pass</code>ï¼šä¸€æ¬¡æ¸²æŸ“æŒ‡ä»¤ã€‚å¤æ‚ Shader å¯èƒ½åŒ…å«å¤šä¸ª Passï¼Œæ¯”å¦‚ä¸€æ¬¡æ¸²æŸ“è¾¹ç¼˜ï¼Œä¸€æ¬¡æ¸²æŸ“æœ¬ä½“ã€‚</li></ul><h3 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">Tags &#123; <span class="hljs-string">&quot;RenderType&quot;</span>=<span class="hljs-string">&quot;Opaque&quot;</span> &#125;<br></code></pre></td></tr></table></figure><p>å®ƒæ˜¯ä¸€ä¸ª <strong>é”®å€¼å¯¹</strong> é›†åˆï¼Œç”¨æ¥å‘Šè¯‰ Unity çš„æ¸²æŸ“ç®¡çº¿ï¼Œ<strong>è¿™ä¸ª Shader åº”è¯¥è¢«å¦‚ä½•åˆ†ç±»ã€æ’åºå’Œå¤„ç†</strong>ã€‚</p><p><code>&quot;RenderType&quot;</code> æ˜¯ Unity å†…ç½®çš„ä¸€ä¸ª Shader Tagï¼Œç”¨äºæè¿° <strong>æè´¨çš„å¤§ç±»æ¸²æŸ“æ–¹å¼</strong>ã€‚</p><p>å¸¸è§å–å€¼æœ‰ï¼š</p><ul><li><code>&quot;Opaque&quot;</code>ï¼š<strong>ä¸é€æ˜ç‰©ä½“</strong>ï¼ˆé»˜è®¤ï¼‰</li><li><code>&quot;Transparent&quot;</code>ï¼š<strong>é€æ˜ç‰©ä½“</strong>ï¼ˆå¦‚ç»ç’ƒã€ç²’å­ã€UIï¼‰</li><li><code>&quot;TransparentCutout&quot;</code>ï¼š<strong>é€æ˜è£å‰ªç‰©ä½“</strong>ï¼ˆå¦‚æ ‘å¶ã€å›´æ ï¼Œé€æ˜éƒ¨åˆ†ç›´æ¥è£æ‰ï¼Œæ²¡æœ‰åŠé€æ˜ï¼‰</li></ul><p>è¿™é‡Œä½¿ç”¨ <code>&quot;Opaque&quot;</code>ï¼ŒUnity ä¼šæŠŠå®ƒæ”¾åˆ° <strong>ä¸é€æ˜é˜Ÿåˆ—ï¼ˆQueue &#x3D; Geometry, 2000 å·¦å³ï¼‰</strong> é‡Œè¿›è¡Œæ¸²æŸ“ã€‚</p><h3 id="CGPROGRAM-å—"><a href="#CGPROGRAM-å—" class="headerlink" title="CGPROGRAM å—"></a>CGPROGRAM å—</h3><p>è¿™æ˜¯ HLSL&#x2F;CG ä»£ç çš„åŒºåŸŸï¼ŒåŒ…è£¹åœ¨ CGPROGRAM å’Œ ENDCG ä¹‹é—´ã€‚</p><ul><li><code>#pragma vertex vert</code>ï¼šæŒ‡å®šé¡¶ç‚¹ç€è‰²å™¨å‡½æ•°ï¼ˆvertï¼‰</li><li><code>#pragma fragment frag</code>ï¼šæŒ‡å®šç‰‡å…ƒç€è‰²å™¨å‡½æ•°ï¼ˆfragï¼‰</li><li><code>#include &quot;UnityCG.cginc&quot;</code>ï¼šå¼•å…¥ Unity æä¾›çš„ä¸€ä¸ª HLSL å…¬å…±å‡½æ•°&#x2F;å®åº“ï¼Œç›¸å½“äº C# é‡Œçš„ <code>using</code>ï¼Œä¾‹å¦‚ä¸‹é¢ç”¨åˆ°çš„ <code>UnityObjectToClipPos</code> å°±æ˜¯è¿™ä¸ªåº“é‡Œçš„å‡½æ•°ï¼ŒæŠŠ <strong>æ¨¡å‹ç©ºé—´</strong> è½¬æ¢æˆ <strong>è£å‰ªç©ºé—´</strong>ï¼Œå‡ ä¹æ¯ä¸ª Shader é¡¶ç‚¹ç€è‰²å™¨éƒ½è¦ç”¨åˆ°ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">fixed4 _Color;<br></code></pre></td></tr></table></figure><p>åœ¨ä»£ç åŒºåŸŸå®šä¹‰çš„ <code>_Color</code> å˜é‡ï¼Œä½¿ç”¨çš„æ˜¯ <code>Properties</code> å®šä¹‰çš„ <code>_Color</code> å±æ€§ï¼Œåç§°è¦ä¸€è‡´æ‰èƒ½è·å–åˆ°ã€‚</p><h3 id="é¡¶ç‚¹æ•°æ®-appdata"><a href="#é¡¶ç‚¹æ•°æ®-appdata" class="headerlink" title="é¡¶ç‚¹æ•°æ® appdata"></a>é¡¶ç‚¹æ•°æ® appdata</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">appdata</span></span><br><span class="hljs-class">&#123;</span><br>    float4 vertex : POSITION;<br>&#125;;<br></code></pre></td></tr></table></figure><p><code>appdata</code> æ˜¯ä¸€ä¸ª <strong>è¾“å…¥ç»“æ„ä½“</strong>ï¼Œè¡¨ç¤ºä» <strong>CPU â†’ GPU</strong> ä¼ é€’è¿‡æ¥çš„ä¿¡æ¯ï¼ˆç½‘æ ¼é¡¶ç‚¹æ•°æ®ï¼‰ï¼Œæ˜¯ GPU <strong>æ¸²æŸ“ç®¡çº¿çš„å…¥å£æ•°æ®</strong>ã€‚</p><p>è¿™é‡Œçš„ <strong>è¯­ä¹‰æ ‡è¯†ç¬¦</strong>ï¼ˆ<code>: POSITION</code>ï¼‰å‘Šè¯‰ GPUï¼Œ<code>vertex</code> å¯¹åº”çš„æ˜¯é¡¶ç‚¹åæ ‡ã€‚</p><p>Mesh çš„æ¯ä¸ªé¡¶ç‚¹éƒ½ä¼šç”Ÿæˆä¸€ä¸ª <code>appdata</code>ï¼Œé€å…¥é¡¶ç‚¹ç€è‰²å™¨ã€‚</p><h3 id="é¡¶ç‚¹ç€è‰²å™¨-vert"><a href="#é¡¶ç‚¹ç€è‰²å™¨-vert" class="headerlink" title="é¡¶ç‚¹ç€è‰²å™¨ vert"></a>é¡¶ç‚¹ç€è‰²å™¨ vert</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">v2f</span></span><br><span class="hljs-class">&#123;</span><br>    float4 pos : SV_POSITION;<br>&#125;;<br><br><span class="hljs-function">v2f <span class="hljs-title">vert</span> <span class="hljs-params">(appdata v)</span></span><br><span class="hljs-function"></span>&#123;<br>    v2f o;<br>    o.pos = UnityObjectToClipPos(v.vertex);<br>    <span class="hljs-keyword">return</span> o;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¾“å…¥ <code>appdata</code>ï¼šåŒ…å«äº†æ¨¡å‹çš„é¡¶ç‚¹æ•°æ®ï¼ˆä½ç½®ã€æ³•çº¿ã€UV ç­‰ï¼‰ã€‚</li><li><code>UnityObjectToClipPos</code>ï¼šæŠŠæ¨¡å‹ç©ºé—´çš„åæ ‡è½¬æ¢åˆ°å±å¹•ç©ºé—´ï¼ˆå¿…é¡»æ“ä½œï¼‰ã€‚</li><li>è¾“å‡º <code>v2f</code>ï¼šä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨çš„æ•°æ®ï¼ˆåŒ <code>appdata</code>ï¼Œæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼‰ã€‚</li></ul><h3 id="ç‰‡å…ƒç€è‰²å™¨-frag"><a href="#ç‰‡å…ƒç€è‰²å™¨-frag" class="headerlink" title="ç‰‡å…ƒç€è‰²å™¨ frag"></a>ç‰‡å…ƒç€è‰²å™¨ frag</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function">fixed4 <span class="hljs-title">frag</span> <span class="hljs-params">(v2f i)</span> : SV_Target</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> _Color;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>frag</code> å†³å®šå±å¹•ä¸Šè¿™ä¸ªåƒç´ æœ€ç»ˆæ˜¯ä»€ä¹ˆé¢œè‰²ã€‚</li><li>è¿™é‡Œç›´æ¥è¿”å› <code>_Color</code>ï¼Œæ‰€ä»¥æ•´ä¸ªæ¨¡å‹å°±æ˜¯ä¸€å—çº¯è‰²ã€‚</li></ul><h2 id="åœ¨-Unity-ä¸­æµ‹è¯•"><a href="#åœ¨-Unity-ä¸­æµ‹è¯•" class="headerlink" title="åœ¨ Unity ä¸­æµ‹è¯•"></a>åœ¨ Unity ä¸­æµ‹è¯•</h2><p>æ–°å»ºä¸€ä¸ª <strong>Shader æ–‡ä»¶</strong>ï¼Œå‘½åä¸º <code>SimpleColor</code>ï¼Œç²˜è´´ä¸Šé¢çš„ä»£ç ã€‚</p><p><img src="/../images/unity-shader-intro/%E5%88%9B%E5%BB%BAShader.png"></p><p>æ–°å»ºä¸€ä¸ª <strong>æè´¨ï¼ˆMaterialï¼‰</strong>ï¼ŒæŠŠ Shader è®¾ç½®ä¸º <code>Custom/SimpleColor</code>ã€‚</p><p><img src="/../images/unity-shader-intro/%E5%88%9B%E5%BB%BA%E6%9D%90%E8%B4%A8.png"></p><p><img src="/../images/unity-shader-intro/%E8%AE%BE%E7%BD%AEShader.png"></p><p>åˆ›å»ºä¸€ä¸ª Cubeï¼ŒæŠŠæè´¨æ‹–åˆ° Cube ä¸Šã€‚</p><p><img src="/../images/unity-shader-intro/%E6%8B%96%E5%8A%A8%E6%9D%90%E8%B4%A8.png"></p><p>åœ¨ Inspector é¢æ¿è°ƒæ•´ <code>Main Color</code>ï¼Œæ¨¡å‹å°±ä¼šå˜æˆå¯¹åº”çš„é¢œè‰²ã€‚</p><p><img src="/../images/unity-shader-intro/%E8%B0%83%E6%95%B4%E9%A2%9C%E8%89%B2.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D Gizmos è°ƒè¯•å¯è§†åŒ–</title>
    <link href="/2025/08/31/unity-gizmos/"/>
    <url>/2025/08/31/unity-gizmos/</url>
    
    <content type="html"><![CDATA[<p>åˆ©ç”¨ Gizmos ç›´è§‚åœ°çœ‹åˆ°ä¸€äº›è°ƒè¯•ä¿¡æ¯ã€‚</p><span id="more"></span><h1 id="Unity3D-Gizmos-è°ƒè¯•å¯è§†åŒ–"><a href="#Unity3D-Gizmos-è°ƒè¯•å¯è§†åŒ–" class="headerlink" title="Unity3D Gizmos è°ƒè¯•å¯è§†åŒ–"></a>Unity3D Gizmos è°ƒè¯•å¯è§†åŒ–</h1><p>åœ¨ Unity å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ <strong>Scene &#x2F; Game è§†å›¾</strong> é‡Œç›´è§‚åœ°çœ‹åˆ°ä¸€äº›è°ƒè¯•ä¿¡æ¯ï¼Œæ¯”å¦‚è§’è‰²çš„æ”»å‡»èŒƒå›´ã€AI çš„å·¡é€»è·¯å¾„ã€æ‘„åƒæœºçš„è§†é‡ç­‰ã€‚</p><p>è¿™æ—¶å€™ï¼ŒUnity æä¾›çš„ <strong>Gizmos</strong> ç³»ç»Ÿå°±æ˜¯éå¸¸å¥½ç”¨çš„å·¥å…·ã€‚</p><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><p>åªè¦åœ¨è„šæœ¬é‡Œå®ç° <strong><code>OnDrawGizmos</code></strong> æˆ– <strong><code>OnDrawGizmosSelected</code></strong> æ–¹æ³•ï¼Œå°±èƒ½ç»˜åˆ¶è°ƒè¯•è¾…åŠ©å›¾å½¢ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GizmosDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    [<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> <span class="hljs-built_in">float</span> radius = <span class="hljs-number">2f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmos</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è®¾ç½®é¢œè‰²</span><br>        Gizmos.color = Color.green;<br><br>        <span class="hljs-comment">// ç”»ä¸€ä¸ªçƒä½“</span><br>        Gizmos.DrawWireSphere(transform.position, radius);<br><br>        <span class="hljs-comment">// ç”»ä¸€ä¸ªç«‹æ–¹ä½“</span><br>        Gizmos.color = Color.yellow;<br>        Gizmos.DrawWireCube(transform.position + Vector3.up * <span class="hljs-number">2</span>, Vector3.one);<br><br>        <span class="hljs-comment">// ç”»ä¸€æ¡å°„çº¿</span><br>        Gizmos.color = Color.red;<br>        Gizmos.DrawRay(transform.position, transform.forward * <span class="hljs-number">5f</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmosSelected</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Gizmos.color = Color.cyan;<br>        Gizmos.DrawWireSphere(transform.position, radius * <span class="hljs-number">1.5f</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong><code>OnDrawGizmos</code></strong> -&gt; å§‹ç»ˆæ˜¾ç¤ºï¼ˆåœºæ™¯ä¸­ä¼šå¾ˆä¹±ï¼‰</li><li><strong><code>OnDrawGizmosSelected</code></strong> -&gt; åªæœ‰é€‰ä¸­ç‰©ä½“æ—¶æ˜¾ç¤ºï¼ˆæ¨èï¼‰</li></ul><blockquote><p>æ³¨ï¼šå¦‚æœåœ¨è§†å›¾ä¸­æ²¡æœ‰æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ï¼Œè¯·æ£€æŸ¥å³ä¸Šè§’çš„å›¾å½¢å¼€å…³ï¼Œå‹¾é€‰å¯¹åº”çš„è„šæœ¬ã€‚</p></blockquote><p><img src="/../images/unity-gizmos/Gizmos%E6%98%BE%E7%A4%BA%E5%BC%80%E5%85%B3.png"></p><h2 id="å¸¸ç”¨-Gizmos-API"><a href="#å¸¸ç”¨-Gizmos-API" class="headerlink" title="å¸¸ç”¨ Gizmos API"></a>å¸¸ç”¨ Gizmos API</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>Gizmos.DrawWireSphere(pos, radius)</code></td><td>çº¿æ¡†çƒä½“</td></tr><tr><td><code>Gizmos.DrawSphere(pos, radius)</code></td><td>å®å¿ƒçƒä½“</td></tr><tr><td><code>Gizmos.DrawWireCube(pos, size)</code></td><td>çº¿æ¡†ç«‹æ–¹ä½“</td></tr><tr><td><code>Gizmos.DrawCube(pos, size)</code></td><td>å®å¿ƒç«‹æ–¹ä½“</td></tr><tr><td><code>Gizmos.DrawLine(start, end)</code></td><td>ç»˜åˆ¶çº¿æ®µ</td></tr><tr><td><code>Gizmos.DrawRay(origin, dir)</code></td><td>ç»˜åˆ¶å°„çº¿</td></tr><tr><td><code>Gizmos.DrawIcon(pos, &quot;icon.png&quot;, true)</code></td><td>ç»˜åˆ¶å›¾æ ‡ï¼ˆæ–¹ä¾¿å®šä½ï¼‰</td></tr><tr><td><code>Gizmos.matrix = transform.localToWorldMatrix</code></td><td>è®¾ç½®åæ ‡ç³»ï¼ˆç»˜åˆ¶å±€éƒ¨ç½‘æ ¼æ—¶å¾ˆæœ‰ç”¨ï¼‰</td></tr><tr><td><code>Gizmos.DrawMesh(mesh, pos, rot, scale)</code></td><td>ç»˜åˆ¶è‡ªå®šä¹‰ Mesh</td></tr></tbody></table><h2 id="å®é™…åº”ç”¨åœºæ™¯"><a href="#å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®é™…åº”ç”¨åœºæ™¯"></a>å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="æ˜¾ç¤ºæ”»å‡»èŒƒå›´"><a href="#æ˜¾ç¤ºæ”»å‡»èŒƒå›´" class="headerlink" title="æ˜¾ç¤ºæ”»å‡»èŒƒå›´"></a>æ˜¾ç¤ºæ”»å‡»èŒƒå›´</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmosSelected</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    Gizmos.color = Color.red;<br>    Gizmos.DrawWireSphere(transform.position, attackRange);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ˜¾ç¤º-AI-å·¡é€»è·¯å¾„"><a href="#æ˜¾ç¤º-AI-å·¡é€»è·¯å¾„" class="headerlink" title="æ˜¾ç¤º AI å·¡é€»è·¯å¾„"></a>æ˜¾ç¤º AI å·¡é€»è·¯å¾„</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmos</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    Gizmos.color = Color.blue;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; waypoints.Length - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        Gizmos.DrawLine(waypoints[i].position, waypoints[i + <span class="hljs-number">1</span>].position);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ˜¾ç¤ºæ‘„åƒæœºè§†é‡"><a href="#æ˜¾ç¤ºæ‘„åƒæœºè§†é‡" class="headerlink" title="æ˜¾ç¤ºæ‘„åƒæœºè§†é‡"></a>æ˜¾ç¤ºæ‘„åƒæœºè§†é‡</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmos</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    Camera cam = GetComponent&lt;Camera&gt;();<br>    Gizmos.color = Color.green;<br>    Gizmos.matrix = cam.transform.localToWorldMatrix;<br>    Gizmos.DrawFrustum(Vector3.zero, cam.fieldOfView, cam.farClipPlane, cam.nearClipPlane, cam.aspect);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é€šç”¨-Gizmos-å·¥å…·ç±»"><a href="#é€šç”¨-Gizmos-å·¥å…·ç±»" class="headerlink" title="é€šç”¨ Gizmos å·¥å…·ç±»"></a>é€šç”¨ Gizmos å·¥å…·ç±»</h2><p>ä¸ºäº†é¿å…æ¯æ¬¡éƒ½å†™é‡å¤ä»£ç ï¼Œå¯ä»¥æ•´ç†ä¸€ä¸ª <strong>GizmosHelper</strong> å·¥å…·ç±»ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ç»˜åˆ¶è°ƒè¯•ç½‘æ ¼</li><li>ç»˜åˆ¶æ‰‡å½¢èŒƒå›´</li><li>ç»˜åˆ¶è·¯å¾„ç®­å¤´</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GizmosHelper</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç»˜åˆ¶è°ƒè¯•ç½‘æ ¼</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawGrid</span>(<span class="hljs-params">Vector3 origin, <span class="hljs-built_in">int</span> width, <span class="hljs-built_in">int</span> height, <span class="hljs-built_in">float</span> cellSize, Color color</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Gizmos.color = color;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt;= width; x++)<br>        &#123;<br>            Gizmos.DrawLine(origin + <span class="hljs-keyword">new</span> Vector3(x * cellSize, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br>                            origin + <span class="hljs-keyword">new</span> Vector3(x * cellSize, <span class="hljs-number">0</span>, height * cellSize));<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> z = <span class="hljs-number">0</span>; z &lt;= height; z++)<br>        &#123;<br>            Gizmos.DrawLine(origin + <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, z * cellSize),<br>                            origin + <span class="hljs-keyword">new</span> Vector3(width * cellSize, <span class="hljs-number">0</span>, z * cellSize));<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç»˜åˆ¶æ‰‡å½¢èŒƒå›´</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawSector</span>(<span class="hljs-params">Vector3 center, Vector3 forward, <span class="hljs-built_in">float</span> angle, <span class="hljs-built_in">float</span> radius, <span class="hljs-built_in">int</span> segments = <span class="hljs-number">20</span></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Gizmos.color = Color.yellow;<br>        <span class="hljs-built_in">float</span> halfAngle = angle * <span class="hljs-number">0.5f</span>;<br>        Quaternion leftRot = Quaternion.AngleAxis(-halfAngle, Vector3.up);<br>        Quaternion rightRot = Quaternion.AngleAxis(halfAngle, Vector3.up);<br><br>        Vector3 leftDir = leftRot * forward * radius;<br>        Vector3 rightDir = rightRot * forward * radius;<br><br>        Gizmos.DrawLine(center, center + leftDir);<br>        Gizmos.DrawLine(center, center + rightDir);<br><br>        Vector3 lastPoint = center + leftDir;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= segments; i++)<br>        &#123;<br>            <span class="hljs-built_in">float</span> t = (<span class="hljs-built_in">float</span>)i / segments;<br>            Quaternion rot = Quaternion.AngleAxis(Mathf.Lerp(-halfAngle, halfAngle, t), Vector3.up);<br>            Vector3 nextPoint = center + rot * forward * radius;<br>            Gizmos.DrawLine(lastPoint, nextPoint);<br>            lastPoint = nextPoint;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç»˜åˆ¶è·¯å¾„ç®­å¤´</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawPath</span>(<span class="hljs-params">Vector3[] points, Color color</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (points == <span class="hljs-literal">null</span> || points.Length &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>;<br><br>        Gizmos.color = color;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; points.Length - <span class="hljs-number">1</span>; i++)<br>        &#123;<br>            Gizmos.DrawLine(points[i], points[i + <span class="hljs-number">1</span>]);<br>            DrawArrowHead(points[i], points[i + <span class="hljs-number">1</span>], color);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawArrowHead</span>(<span class="hljs-params">Vector3 start, Vector3 end, Color color</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Vector3 dir = (end - start).normalized;<br>        Vector3 right = Quaternion.LookRotation(dir) * Quaternion.Euler(<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, <span class="hljs-number">0</span>) * Vector3.forward;<br>        Vector3 left = Quaternion.LookRotation(dir) * Quaternion.Euler(<span class="hljs-number">0</span>, <span class="hljs-number">-150</span>, <span class="hljs-number">0</span>) * Vector3.forward;<br><br>        Gizmos.DrawLine(end, end + right * <span class="hljs-number">0.5f</span>);<br>        Gizmos.DrawLine(end, end + left * <span class="hljs-number">0.5f</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrawGizmos</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// è°ƒè¯•ç½‘æ ¼</span><br>    GizmosHelper.DrawGrid(Vector3.zero, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1f</span>, Color.gray);<br><br>    <span class="hljs-comment">// æ‰‡å½¢èŒƒå›´</span><br>    GizmosHelper.DrawSector(transform.position, transform.forward, <span class="hljs-number">90f</span>, <span class="hljs-number">5f</span>);<br><br>    <span class="hljs-comment">// è·¯å¾„ç®­å¤´</span><br>    Vector3[] path = &#123; transform.position, transform.position + Vector3.forward * <span class="hljs-number">3</span>, transform.position + Vector3.right * <span class="hljs-number">3</span> &#125;;<br>    GizmosHelper.DrawPath(path, Color.cyan);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><img src="/../images/unity-gizmos/%E7%BB%98%E5%88%B6%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%BD%A2.png"></p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul><li>Gizmos åªåœ¨ <strong>Scene &#x2F; Game è§†å›¾</strong> å¯è§ï¼Œä¸ä¼šå‡ºç°åœ¨æ¸¸æˆå‘å¸ƒç‰ˆæœ¬ã€‚</li><li>åœ¨ <strong>Gizmos é¢æ¿</strong> å‹¾é€‰å¯¹åº”è„šæœ¬æ‰èƒ½çœ‹åˆ°ã€‚</li><li>å»ºè®®ç”¨ <code>OnDrawGizmosSelected</code>ï¼Œé¿å…åœºæ™¯å¤ªä¹±ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><code>OnDrawGizmos</code> &#x2F; <code>OnDrawGizmosSelected</code> æ˜¯è°ƒè¯•å¯è§†åŒ–çš„æ ¸å¿ƒå…¥å£ã€‚</li><li>Gizmos å¸¸ç”¨æ¥æ˜¾ç¤º <strong>ç½‘æ ¼ã€èŒƒå›´ã€è·¯å¾„ã€æ‘„åƒæœºè§†é‡ç­‰è°ƒè¯•è¾…åŠ©ä¿¡æ¯</strong>ã€‚</li><li>å°è£… <strong>GizmosHelper å·¥å…·ç±»</strong> èƒ½æå¤§æé«˜å¼€å‘æ•ˆç‡ã€‚</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å¹³å°å®å®šä¹‰</title>
    <link href="/2025/07/27/unity-scripting-define-symbols/"/>
    <url>/2025/07/27/unity-scripting-define-symbols/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å¹³å°å®å®šä¹‰çš„ä»‹ç»å’Œä½¿ç”¨ã€‚</p><span id="more"></span><h1 id="å¹³å°å®å®šä¹‰"><a href="#å¹³å°å®å®šä¹‰" class="headerlink" title="å¹³å°å®å®šä¹‰"></a>å¹³å°å®å®šä¹‰</h1><p>åœ¨ Unity å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦å†™ä¸€äº›å¹³å°ç›¸å…³ã€è°ƒè¯•ç”¨ã€æˆ–åªåœ¨ç¼–è¾‘å™¨è¿è¡Œçš„ä»£ç ã€‚</p><p>ä¸ºäº†é¿å…æ‰“åŒ…é”™è¯¯æˆ–å¹³å°å…¼å®¹é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Unity æä¾›çš„ <strong>å®æŒ‡ä»¤ï¼ˆå¹³å°å®å®šä¹‰ï¼‰</strong> æ¥æ§åˆ¶ä»£ç çš„ç¼–è¯‘èŒƒå›´ã€‚</p><p>ä¸€ä¸ªæœ€å¸¸è§çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br>    Debug.Log(<span class="hljs-string">&quot;ä»…åœ¨ç¼–è¾‘å™¨ä¸­è¾“å‡º&quot;</span>);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç åªä¼šåœ¨ Unity ç¼–è¾‘å™¨ä¸­ç¼–è¯‘æ‰§è¡Œï¼Œæ‰“åŒ…æ—¶ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚</p><h2 id="å¸¸è§-Unity-å¹³å°å®å®šä¹‰ä¸€è§ˆ"><a href="#å¸¸è§-Unity-å¹³å°å®å®šä¹‰ä¸€è§ˆ" class="headerlink" title="å¸¸è§ Unity å¹³å°å®å®šä¹‰ä¸€è§ˆ"></a>å¸¸è§ Unity å¹³å°å®å®šä¹‰ä¸€è§ˆ</h2><table><thead><tr><th>å®å®šä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>UNITY_EDITOR</code></td><td>Unity ç¼–è¾‘å™¨ä¸­ç”Ÿæ•ˆ</td></tr><tr><td><code>UNITY_ANDROID</code></td><td>å®‰å“å¹³å°</td></tr><tr><td><code>UNITY_IOS</code></td><td>iOS å¹³å°</td></tr><tr><td><code>UNITY_STANDALONE_WIN</code></td><td>Windows å¹³å°ï¼ˆPC ç«¯ï¼‰</td></tr><tr><td><code>UNITY_STANDALONE_OSX</code></td><td>macOS å¹³å°</td></tr><tr><td><code>UNITY_STANDALONE</code></td><td>æ‰€æœ‰æ¡Œé¢å¹³å°ï¼ˆWindowsã€Macã€Linuxï¼‰é€šç”¨</td></tr><tr><td><code>UNITY_WEBGL</code></td><td>WebGL å¹³å°</td></tr><tr><td><code>UNITY_SERVER</code></td><td>Server æ„å»ºæ¨¡å¼ï¼ˆæ— å›¾å½¢ï¼‰</td></tr><tr><td><code>DEVELOPMENT_BUILD</code></td><td>å¼€å‘è€…æ¨¡å¼æ„å»º</td></tr><tr><td><code>UNITY_EDITOR_WIN</code></td><td>Windows ç¼–è¾‘å™¨ç¯å¢ƒ</td></tr><tr><td><code>UNITY_EDITOR_OSX</code></td><td>macOS ç¼–è¾‘å™¨ç¯å¢ƒ</td></tr></tbody></table><blockquote><p>ğŸ’¡ Unity ä¼šæ ¹æ®æ‰“åŒ…å¹³å°è‡ªåŠ¨å¯ç”¨è¿™äº›å®ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ ï¼Œç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨å³å¯ã€‚</p></blockquote><h2 id="å®é™…ä½¿ç”¨ç¤ºä¾‹"><a href="#å®é™…ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="å®é™…ä½¿ç”¨ç¤ºä¾‹"></a>å®é™…ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="ç¼–è¾‘å™¨ä¸“ç”¨ä»£ç "><a href="#ç¼–è¾‘å™¨ä¸“ç”¨ä»£ç " class="headerlink" title="ç¼–è¾‘å™¨ä¸“ç”¨ä»£ç "></a>ç¼–è¾‘å™¨ä¸“ç”¨ä»£ç </h3><p>å¦‚èœå•åŠŸèƒ½ã€è°ƒè¯•å·¥å…·ç­‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br><span class="hljs-keyword">using</span> UnityEditor;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EditorOnlyTool</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StopPlaymode</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br>        EditorApplication.isPlaying = <span class="hljs-literal">false</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è·¯å¾„é€‚é…"><a href="#è·¯å¾„é€‚é…" class="headerlink" title="è·¯å¾„é€‚é…"></a>è·¯å¾„é€‚é…</h3><p>é€‚ç”¨äºä¸åŒå¹³å°å­˜æ¡£è·¯å¾„å¤„ç†ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">GetSavePath</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br>    <span class="hljs-keyword">return</span> Application.dataPath + <span class="hljs-string">&quot;/&quot;</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><br>    <span class="hljs-keyword">return</span> Application.persistentDataPath + <span class="hljs-string">&quot;/&quot;</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰å®å®šä¹‰"><a href="#è‡ªå®šä¹‰å®å®šä¹‰" class="headerlink" title="è‡ªå®šä¹‰å®å®šä¹‰"></a>è‡ªå®šä¹‰å®å®šä¹‰</h2><p>é™¤äº†ç³»ç»Ÿé»˜è®¤çš„å®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­è‡ªå®šä¹‰å®ã€‚</p><p>è®¾ç½®ä½ç½®ï¼š<kbd>Edit</kbd> &gt; <kbd>Project Settings</kbd> &gt; <kbd>Player</kbd> &gt; <kbd>Other Settings</kbd> &gt; <kbd>Scripting Define Symbols</kbd></p><blockquote><p>ğŸ’¡ è‡ªå®šä¹‰å®éå¸¸é€‚åˆç”¨äºåŠŸèƒ½å¼€å…³ã€è°ƒè¯•æ¨¡å¼ã€æ¨¡å—åˆ‡æ¢ç­‰åœºæ™¯ã€‚</p></blockquote><h3 id="å°æ¸¸æˆå¹³å°"><a href="#å°æ¸¸æˆå¹³å°" class="headerlink" title="å°æ¸¸æˆå¹³å°"></a>å°æ¸¸æˆå¹³å°</h3><p>ä¾‹å¦‚æ·»åŠ ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">WX_GAME;DY_GAME;<br></code></pre></td></tr></table></figure><p>ç„¶åä»£ç ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> WX_GAME</span><br>    <span class="hljs-comment">// å¾®ä¿¡å°æ¸¸æˆé€»è¾‘</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> DY_GAME</span><br>    <span class="hljs-comment">// æŠ–éŸ³å°æ¸¸æˆé€»è¾‘</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><br>    <span class="hljs-comment">// å…¶ä»–å¹³å°é€»è¾‘</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>åœ¨æ‰“åŒ…å¾®ä¿¡å°æ¸¸æˆæ—¶ï¼Œç§»é™¤ <code>DY_GAME</code> å®å®šä¹‰ï¼Œåªä¼šç¼–è¯‘å¾®ä¿¡å°æ¸¸æˆçš„é€»è¾‘ã€‚åŒç†ï¼Œæ‰“åŒ…æŠ–éŸ³å°æ¸¸æˆæ—¶ï¼Œç§»é™¤ <code>WX_GAME</code> å®å®šä¹‰ã€‚</p><p>å¯ä»¥å†™ä¸€ä¸ªèœå•å·¥å…·ï¼Œä¸€é”®åˆ‡æ¢å¹³å°å®å®šä¹‰ï¼Œé¿å…æ‰‹åŠ¨åˆ æ¥åˆ å»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Linq;<br><span class="hljs-keyword">using</span> UnityEditor;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlatformMacroSwitcher</span><br>&#123;<br>    <span class="hljs-comment">// æ‰€æœ‰å°æ¸¸æˆå¹³å°çš„å®ï¼Œç”¨äºäº’æ–¥</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span>[] MiniGameMacros = &#123; <span class="hljs-string">&quot;WX_GAME&quot;</span>, <span class="hljs-string">&quot;DY_GAME&quot;</span> &#125;;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;Tools/å°æ¸¸æˆå¹³å°åˆ‡æ¢/åˆ‡æ¢åˆ°å¾®ä¿¡å°æ¸¸æˆ&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SwitchToWXGame</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        SetExclusiveMacro(<span class="hljs-string">&quot;WX_GAME&quot;</span>);<br>    &#125;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;Tools/å°æ¸¸æˆå¹³å°åˆ‡æ¢/åˆ‡æ¢åˆ°æŠ–éŸ³å°æ¸¸æˆ&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SwitchToDYGame</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        SetExclusiveMacro(<span class="hljs-string">&quot;DY_GAME&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetExclusiveMacro</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> targetMacro</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> targetGroup = EditorUserBuildSettings.selectedBuildTargetGroup;<br>        <span class="hljs-keyword">var</span> symbols = PlayerSettings.GetScriptingDefineSymbolsForGroup(targetGroup);<br>        <span class="hljs-keyword">var</span> symbolList = symbols.Split(<span class="hljs-string">&#x27;;&#x27;</span>).Where(s =&gt; !<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(s)).ToList();<br><br>        <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰å°æ¸¸æˆå¹³å°å®</span><br>        symbolList.RemoveAll(s =&gt; MiniGameMacros.Contains(s));<br><br>        <span class="hljs-comment">// æ·»åŠ ç›®æ ‡å¹³å°å®</span><br>        <span class="hljs-keyword">if</span> (!symbolList.Contains(targetMacro))<br>        &#123;<br>            symbolList.Add(targetMacro);<br>        &#125;<br><br>        <span class="hljs-comment">// æ›´æ–°å®å®šä¹‰</span><br>        <span class="hljs-built_in">string</span> newSymbols = <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot;;&quot;</span>, symbolList);<br>        PlayerSettings.SetScriptingDefineSymbolsForGroup(targetGroup, newSymbols);<br><br>        Debug.Log(<span class="hljs-string">$&quot;å·²åˆ‡æ¢åˆ°å¹³å°å®ï¼š<span class="hljs-subst">&#123;targetMacro&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ—¥å¿—å¼€å…³"><a href="#æ—¥å¿—å¼€å…³" class="headerlink" title="æ—¥å¿—å¼€å…³"></a>æ—¥å¿—å¼€å…³</h3><p>ä¾‹å¦‚æ·»åŠ ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">ENABLE_LOG;<br></code></pre></td></tr></table></figure><p>å°è£…ä¸€ä¸ªæ—¥å¿—å·¥å…·ç±»ï¼Œå¯ä»¥é€šè¿‡å®å®šä¹‰æ§åˆ¶æ˜¯å¦æ‰“å°æ—¥å¿—ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LogUtil</span><br>&#123;<br>    [<span class="hljs-meta">System.Diagnostics.Conditional(<span class="hljs-meta-string">&quot;ENABLE_LOG&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(message);<br>    &#125;<br><br>    [<span class="hljs-meta">System.Diagnostics.Conditional(<span class="hljs-meta-string">&quot;ENABLE_LOG&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogWarning</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.LogWarning(message);<br>    &#125;<br><br>    [<span class="hljs-meta">System.Diagnostics.Conditional(<span class="hljs-meta-string">&quot;ENABLE_LOG&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogError</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.LogError(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥å†™ä¸€ä¸ªèœå•å·¥å…·ï¼Œä¸€é”®å¼€å…³æ—¥å¿—å®å®šä¹‰ï¼Œé¿å…æ‰‹åŠ¨åˆ æ¥åˆ å»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Linq;<br><span class="hljs-keyword">using</span> UnityEditor;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ToggleLogMacro</span><br>&#123;<br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;Tools/æ—¥å¿—å¼€å…³/å¼€å¯ ENABLE_LOG&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EnableLog</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        ToggleMacro(<span class="hljs-string">&quot;ENABLE_LOG&quot;</span>, <span class="hljs-literal">true</span>);<br>    &#125;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;Tools/æ—¥å¿—å¼€å…³/å…³é—­ ENABLE_LOG&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DisableLog</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        ToggleMacro(<span class="hljs-string">&quot;ENABLE_LOG&quot;</span>, <span class="hljs-literal">false</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ToggleMacro</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> macro, <span class="hljs-built_in">bool</span> enable</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> targetGroup = EditorUserBuildSettings.selectedBuildTargetGroup;<br>        <span class="hljs-keyword">var</span> symbols = PlayerSettings.GetScriptingDefineSymbolsForGroup(targetGroup);<br>        <span class="hljs-keyword">var</span> symbolList = symbols.Split(<span class="hljs-string">&#x27;;&#x27;</span>);<br><br>        <span class="hljs-keyword">if</span> (enable &amp;&amp; !symbols.Contains(macro))<br>        &#123;<br>            symbols = <span class="hljs-built_in">string</span>.IsNullOrEmpty(symbols) ? macro : symbols + <span class="hljs-string">&quot;;&quot;</span> + macro;<br>            Debug.Log(<span class="hljs-string">$&quot;å¯ç”¨å®å®šä¹‰: <span class="hljs-subst">&#123;macro&#125;</span>&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!enable &amp;&amp; symbols.Contains(macro))<br>        &#123;<br>            symbols = <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot;;&quot;</span>, symbolList.Where(s =&gt; s != macro));<br>            Debug.Log(<span class="hljs-string">$&quot;å…³é—­å®å®šä¹‰: <span class="hljs-subst">&#123;macro&#125;</span>&quot;</span>);<br>        &#125;<br><br>        PlayerSettings.SetScriptingDefineSymbolsForGroup(targetGroup, symbols);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h2><h3 id="å»ºè®®ä½¿ç”¨çš„åœºæ™¯"><a href="#å»ºè®®ä½¿ç”¨çš„åœºæ™¯" class="headerlink" title="å»ºè®®ä½¿ç”¨çš„åœºæ™¯"></a>å»ºè®®ä½¿ç”¨çš„åœºæ™¯</h3><ul><li>âœ… <strong>å¹³å°é€‚é…</strong>ï¼šAndroid&#x2F;iOS çš„ä¸åŒ APIã€è·¯å¾„ã€æƒé™å¤„ç†</li><li>âœ… <strong>è°ƒè¯•å·¥å…·</strong>ï¼šåªåœ¨å¼€å‘æ—¶ä½¿ç”¨çš„ä»£ç </li><li>âœ… <strong>æ„å»ºä¼˜åŒ–</strong>ï¼šæ’é™¤æµ‹è¯•ä»£ç ã€é˜²æ­¢æ³„éœ²æ•æ„Ÿä¿¡æ¯</li></ul><h3 id="ä¸å»ºè®®æ»¥ç”¨å®æŒ‡ä»¤"><a href="#ä¸å»ºè®®æ»¥ç”¨å®æŒ‡ä»¤" class="headerlink" title="ä¸å»ºè®®æ»¥ç”¨å®æŒ‡ä»¤"></a>ä¸å»ºè®®æ»¥ç”¨å®æŒ‡ä»¤</h3><ul><li>âŒ å¤§æ®µå¹³å°é€»è¾‘å †å åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯è¯»æ€§å·®</li><li>âŒ å®ä»£æ›¿è¿è¡Œæ—¶åˆ¤æ–­ï¼Œå¯¼è‡´è¿è¡Œé€»è¾‘ä¸ä¸€è‡´</li><li>âŒ è‡ªå®šä¹‰å®æœªæ–‡æ¡£åŒ–ï¼Œæ˜“è¢«é—å¿˜æˆ–è¯¯ç”¨</li></ul><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>Unity çš„å®æŒ‡ä»¤æ˜¯è·¨å¹³å°å¼€å‘çš„é‡è¦å·¥å…·ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒå¹³å°ç¼–å†™ä¸åŒçš„é€»è¾‘ä»£ç ï¼Œä¹Ÿèƒ½å¸®åŠ©æˆ‘ä»¬æ§åˆ¶è°ƒè¯•å’Œå‘å¸ƒè¡Œä¸ºã€‚</p><p>ä½†ä½¿ç”¨æ—¶è¦ä¿æŒ <strong>æ¸…æ™°ç»“æ„</strong> å’Œ <strong>æ–‡æ¡£è®°å½•</strong> ï¼Œé¿å…ç»´æŠ¤å›°éš¾ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å±å¹•ç‚¹å‡»ç‰¹æ•ˆ</title>
    <link href="/2025/06/22/unity-screen-click-effect/"/>
    <url>/2025/06/22/unity-screen-click-effect/</url>
    
    <content type="html"><![CDATA[<p>å®ç°ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®æ’­æ”¾ç‚¹å‡»ç‰¹æ•ˆã€‚</p><span id="more"></span><h1 id="å±å¹•ç‚¹å‡»ç‰¹æ•ˆ"><a href="#å±å¹•ç‚¹å‡»ç‰¹æ•ˆ" class="headerlink" title="å±å¹•ç‚¹å‡»ç‰¹æ•ˆ"></a>å±å¹•ç‚¹å‡»ç‰¹æ•ˆ</h1><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>ç°æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ï¼Œæ’­æ”¾ä¸€ä¸ªç‚¹å‡»ç‰¹æ•ˆã€‚</p><p>ç¾æœ¯å·²ç»åšå¥½äº†ç‰¹æ•ˆï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/../images/unity-screen-click-effect/%E7%82%B9%E5%87%BB%E7%89%B9%E6%95%88.gif"></p><h2 id="ç‰¹æ•ˆå®¹å™¨"><a href="#ç‰¹æ•ˆå®¹å™¨" class="headerlink" title="ç‰¹æ•ˆå®¹å™¨"></a>ç‰¹æ•ˆå®¹å™¨</h2><p>é¦–å…ˆï¼Œç”»å¸ƒæ˜¯ Camera æ¨¡å¼ï¼Œç”»å¸ƒåº•ä¸‹æœ‰ä¸€ä¸ª UIClickEffect ç•Œé¢ã€‚</p><p>ç•Œé¢åº•ä¸‹æœ‰ä¸€ä¸ª Effect ç©ºèŠ‚ç‚¹ï¼Œå®ƒå¸¦æœ‰ RectTransform ç»„ä»¶ï¼Œåç»­ä¼šé€šè¿‡è¿™ä¸ªç©ºèŠ‚ç‚¹è®¾ç½®ç‰¹æ•ˆçš„ä½ç½®ã€‚</p><p>Effect ç©ºèŠ‚ç‚¹åº•ä¸‹åˆ™æ˜¯ç¾æœ¯åˆ¶ä½œå¥½çš„ç‰¹æ•ˆã€‚</p><p><img src="/../images/unity-screen-click-effect/%E7%94%BB%E5%B8%83.png"></p><p><img src="/../images/unity-screen-click-effect/%E7%A9%BA%E8%8A%82%E7%82%B9.png"></p><h2 id="åˆ›å»ºè„šæœ¬"><a href="#åˆ›å»ºè„šæœ¬" class="headerlink" title="åˆ›å»ºè„šæœ¬"></a>åˆ›å»ºè„šæœ¬</h2><h3 id="æ£€æµ‹è¾“å…¥"><a href="#æ£€æµ‹è¾“å…¥" class="headerlink" title="æ£€æµ‹è¾“å…¥"></a>æ£€æµ‹è¾“å…¥</h3><p>åˆ›å»º <code>ScreenClickEffect.cs</code> è„šæœ¬ï¼Œæ·»åŠ ç‰¹æ•ˆè®¾ç½®ç›¸å…³çš„å­—æ®µã€‚</p><p>åœ¨ <code>Start</code> çš„æ—¶å€™æŠŠç‰¹æ•ˆé¢„åˆ¶ä½“é»˜è®¤éšè—ï¼Œé˜²æ­¢åˆå§‹åŒ–æ—¶ä¼šæ’­æ”¾ä¸€æ¬¡ç‰¹æ•ˆã€‚</p><p>åœ¨ <code>Update</code> ä¸­æ£€æµ‹é¼ æ ‡å’Œè§¦æ‘¸è¾“å…¥ï¼ŒæŠŠç‚¹å‡»çš„ä½ç½® <code>clickPosition</code> ä¼ å…¥ <code>PlayClickEffect</code> æ–¹æ³•ä¸­ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ScreenClickEffect</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;ç‰¹æ•ˆè®¾ç½®&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> GameObject clickEffectPrefab;  <span class="hljs-comment">// ç‰¹æ•ˆé¢„åˆ¶ä½“</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> effectDuration = <span class="hljs-number">1f</span>;     <span class="hljs-comment">// ç‰¹æ•ˆæŒç»­æ—¶é—´</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab != <span class="hljs-literal">null</span>)<br>            clickEffectPrefab.SetActive(<span class="hljs-literal">false</span>);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        HandleInput();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">HandleInput</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Vector3 clickPosition = Vector3.zero;<br>        <span class="hljs-built_in">bool</span> hasInput = <span class="hljs-literal">false</span>;<br>        <br>        <span class="hljs-comment">// æ£€æµ‹é¼ æ ‡ç‚¹å‡»</span><br>        <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">0</span>))<br>        &#123;<br>            clickPosition = Input.mousePosition;<br>            hasInput = <span class="hljs-literal">true</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// æ£€æµ‹è§¦æ‘¸è¾“å…¥ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰</span><br>        <span class="hljs-keyword">if</span> (Input.touchCount &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            Touch touch = Input.GetTouch(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">if</span> (touch.phase == TouchPhase.Began)<br>            &#123;<br>                clickPosition = touch.position;<br>                hasInput = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (hasInput)<br>        &#123;<br>            PlayClickEffect(clickPosition);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PlayClickEffect</span>(<span class="hljs-params">Vector3 screenPosition</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;ç‚¹å‡»ç‰¹æ•ˆé¢„åˆ¶ä½“æœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®ä¾‹åŒ–ç‰¹æ•ˆ"><a href="#å®ä¾‹åŒ–ç‰¹æ•ˆ" class="headerlink" title="å®ä¾‹åŒ–ç‰¹æ•ˆ"></a>å®ä¾‹åŒ–ç‰¹æ•ˆ</h3><p>æ·»åŠ èŠ‚ç‚¹ç»„ä»¶å­—æ®µï¼Œè·å¾—ç”»å¸ƒå’Œç•Œé¢çš„å˜æ¢ç»„ä»¶ã€‚</p><p>ç»§ç»­å®Œå–„ <code>PlayClickEffect</code> æ–¹æ³•ï¼Œä½¿ç”¨ <code>RectTransformUtility.ScreenPointToLocalPointInRectangle</code> æŠŠå±å¹•åæ ‡è½¬æ¢æˆå½“å‰ç•Œé¢å†…çš„æœ¬åœ°åæ ‡ï¼ŒæŠŠè½¬æ¢åçš„ <code>localPosition</code> èµ‹å€¼ç»™å®ä¾‹åŒ–å‡ºæ¥çš„ç‰¹æ•ˆå¯¹è±¡ã€‚</p><p>æœ€åï¼Œå»¶è¿Ÿ <code>effectDuration</code> ç§’åé”€æ¯ç‰¹æ•ˆã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ScreenClickEffect</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;èŠ‚ç‚¹ç»„ä»¶&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> Canvas targetCanvas;           <span class="hljs-comment">// ç”»å¸ƒ</span><br>    <span class="hljs-keyword">public</span> RectTransform rectTransform;   <span class="hljs-comment">// ç•Œé¢å˜æ¢ç»„ä»¶</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-keyword">if</span> (targetCanvas == <span class="hljs-literal">null</span>)<br>            targetCanvas = FindObjectOfType&lt;Canvas&gt;();<br><br>        <span class="hljs-keyword">if</span> (rectTransform == <span class="hljs-literal">null</span>)<br>            rectTransform = GetComponent&lt;RectTransform&gt;();<br>    &#125;<br>    <br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PlayClickEffect</span>(<span class="hljs-params">Vector3 screenPosition</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;ç‚¹å‡»ç‰¹æ•ˆé¢„åˆ¶ä½“æœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (targetCanvas == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;ç›®æ ‡Canvasæœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (RectTransformUtility.ScreenPointToLocalPointInRectangle(<br>            rectTransform, screenPosition, targetCanvas.worldCamera, <span class="hljs-keyword">out</span> Vector2 localPosition))<br>        &#123;<br>            <span class="hljs-comment">// å®ä¾‹åŒ–ç‰¹æ•ˆ</span><br>            GameObject effectInstance;<br>            effectInstance = Instantiate(clickEffectPrefab, transform);<br>            effectInstance.SetActive(<span class="hljs-literal">true</span>);<br>            <br>            <span class="hljs-comment">// è®¾ç½®ä½ç½®</span><br>            <span class="hljs-keyword">if</span> (effectInstance.TryGetComponent&lt;RectTransform&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> effectRect))<br>            &#123;<br>                effectRect.localPosition = localPosition;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                effectInstance.transform.localPosition = (Vector3)localPosition;<br>            &#125;<br>            <br>            <span class="hljs-comment">// å»¶è¿Ÿé”€æ¯ç‰¹æ•ˆ</span><br>            Destroy(effectInstance, effectDuration);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>èŠ‚ç‚¹ç»„ä»¶çš„å¼•ç”¨å¦‚å›¾ï¼š</p><p><img src="/../images/unity-screen-click-effect/%E6%8B%96%E6%8B%BD%E5%BC%95%E7%94%A8.png"></p><p>è¿è¡Œæ¸¸æˆæ•ˆæœï¼š</p><p><img src="/../images/unity-screen-click-effect/%E7%82%B9%E5%87%BB%E5%B1%8F%E5%B9%95%E6%95%88%E6%9E%9C.gif"></p><h3 id="å¯¹è±¡æ± ä¼˜åŒ–"><a href="#å¯¹è±¡æ± ä¼˜åŒ–" class="headerlink" title="å¯¹è±¡æ± ä¼˜åŒ–"></a>å¯¹è±¡æ± ä¼˜åŒ–</h3><p>å› ä¸ºå±å¹•ç‚¹å‡»ç‰¹æ•ˆä¼šæ¯”è¾ƒé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯ï¼Œå¯ä»¥ä½¿ç”¨ Unity å†…ç½®çš„å¯¹è±¡æ± è¿›è¡Œä¼˜åŒ–ã€‚</p><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª <code>useObjectPool</code> å­—æ®µï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©æ˜¯å¦å¯ç”¨å¯¹è±¡æ± ï¼Œå¦‚æœä¸ç”¨çš„è¯ï¼Œå°±è¿˜æ˜¯ä»¥åˆ›å»ºé”€æ¯çš„æ–¹å¼æ’­æ”¾ç‚¹å‡»ç‰¹æ•ˆã€‚</p><p>å…³äºå¯¹è±¡æ± çš„å®¹é‡è®¾ç½®ï¼Œå¯å‚è€ƒä»¥ä¸‹å»ºè®®ï¼š</p><ul><li>ä¼‘é—²æ¸¸æˆï¼Œå®¹é‡4-8ï¼Œå¯ç”¨å¯¹è±¡æ± ï¼Œå¹³è¡¡æ€§èƒ½å’Œå†…å­˜</li><li>éŸ³æ¸¸&#x2F;å¿«èŠ‚å¥ï¼Œå®¹é‡10-20ï¼Œå¯ç”¨å¯¹è±¡æ± ï¼Œä¼˜å…ˆä¿è¯æµç•…åº¦</li><li>ä½ç«¯è®¾å¤‡ï¼Œå®¹é‡2-4ï¼Œå¯å…³é—­å¯¹è±¡æ± ï¼Œå‡å°‘å†…å­˜å ç”¨</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ScreenClickEffect</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;å¯¹è±¡æ± è®¾ç½®&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> useObjectPool = <span class="hljs-literal">true</span>;     <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨å¯¹è±¡æ± </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> defaultCapacity = <span class="hljs-number">4</span>;       <span class="hljs-comment">// å¯¹è±¡æ± é»˜è®¤å®¹é‡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> maxSize = <span class="hljs-number">8</span>;               <span class="hljs-comment">// å¯¹è±¡æ± æœ€å¤§å®¹é‡</span><br>    <br>    <span class="hljs-keyword">private</span> ObjectPool&lt;GameObject&gt; effectPool;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-keyword">if</span> (useObjectPool)<br>            SetupObjectPool();<br>    &#125;<br>    <br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SetupObjectPool</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;æ— æ³•è®¾ç½®å¯¹è±¡æ± ï¼šç‰¹æ•ˆé¢„åˆ¶ä½“æœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        effectPool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(<br>            createFunc: CreateEffect,<br>            actionOnGet: OnGetEffect,<br>            actionOnRelease: OnReleaseEffect,<br>            actionOnDestroy: OnDestroyEffect,<br>            collectionCheck: <span class="hljs-literal">true</span>,<br>            defaultCapacity: defaultCapacity,<br>            maxSize: maxSize<br>        );<br>    &#125;<br>    <br>    <span class="hljs-function">GameObject <span class="hljs-title">CreateEffect</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject effect = Instantiate(clickEffectPrefab, transform);<br>        effect.SetActive(<span class="hljs-literal">false</span>);<br>        <span class="hljs-keyword">return</span> effect;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGetEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        effect.SetActive(<span class="hljs-literal">true</span>);<br>        <br>        <span class="hljs-comment">// é‡ç½®ç²’å­ç³»ç»Ÿ</span><br>        <span class="hljs-keyword">if</span> (effect.TryGetComponent&lt;ParticleSystem&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> particles))<br>        &#123;<br>            particles.Clear();<br>            particles.Play();<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnReleaseEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span>)<br>        &#123;<br>            effect.SetActive(<span class="hljs-literal">false</span>);<br>            <br>            <span class="hljs-comment">// åœæ­¢ç²’å­ç³»ç»Ÿ</span><br>            <span class="hljs-keyword">if</span> (effect.TryGetComponent&lt;ParticleSystem&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> particles))<br>            &#123;<br>                particles.Stop();<br>                particles.Clear();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDestroyEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Destroy(effect);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDestroy</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ¸…ç†å¯¹è±¡æ± </span><br>        effectPool?.Dispose();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PlayClickEffect</span>(<span class="hljs-params">Vector3 screenPosition</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <br>        <span class="hljs-keyword">if</span> (RectTransformUtility.ScreenPointToLocalPointInRectangle(<br>            rectTransform, screenPosition, targetCanvas.worldCamera, <span class="hljs-keyword">out</span> Vector2 localPosition))<br>        &#123;<br>            GameObject effectInstance;<br>            <br>            <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± æˆ–ä¼ ç»Ÿæ–¹å¼åˆ›å»ºç‰¹æ•ˆ</span><br>            <span class="hljs-keyword">if</span> (useObjectPool &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>            &#123;<br>                effectInstance = effectPool.Get();<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                effectInstance = Instantiate(clickEffectPrefab, transform);<br>                effectInstance.SetActive(<span class="hljs-literal">true</span>);<br>            &#125;<br>            <br>            <span class="hljs-comment">// è®¾ç½®ä½ç½®</span><br>            <span class="hljs-keyword">if</span> (effectInstance.TryGetComponent&lt;RectTransform&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> effectRect))<br>            &#123;<br>                effectRect.localPosition = localPosition;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                effectInstance.transform.localPosition = (Vector3)localPosition;<br>            &#125;<br>            <br>            <span class="hljs-comment">// å¤„ç†ç‰¹æ•ˆç”Ÿå‘½å‘¨æœŸ</span><br>            <span class="hljs-keyword">if</span> (useObjectPool &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>            &#123;<br>                <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± ï¼Œå»¶è¿Ÿå½’è¿˜</span><br>                StartCoroutine(ReleaseEffectAfterDelay(effectInstance, effectDuration));<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼é”€æ¯</span><br>                Destroy(effectInstance, effectDuration);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function">IEnumerator <span class="hljs-title">ReleaseEffectAfterDelay</span>(<span class="hljs-params">GameObject effect, <span class="hljs-built_in">float</span> delay</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForSeconds</span>(<span class="hljs-params">delay</span>)</span>;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span> &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>        &#123;<br>            effectPool.Release(effect);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p><code>ScreenClickEffect.cs</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ScreenClickEffect</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;ç‰¹æ•ˆè®¾ç½®&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> GameObject clickEffectPrefab;  <span class="hljs-comment">// ç‰¹æ•ˆé¢„åˆ¶ä½“</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> effectDuration = <span class="hljs-number">1f</span>;     <span class="hljs-comment">// ç‰¹æ•ˆæŒç»­æ—¶é—´</span><br><br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;èŠ‚ç‚¹ç»„ä»¶&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> Canvas targetCanvas;           <span class="hljs-comment">// ç”»å¸ƒ</span><br>    <span class="hljs-keyword">public</span> RectTransform rectTransform;   <span class="hljs-comment">// ç•Œé¢å˜æ¢ç»„ä»¶</span><br><br>    [<span class="hljs-meta">Header(<span class="hljs-meta-string">&quot;å¯¹è±¡æ± è®¾ç½®&quot;</span>)</span>]<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> useObjectPool = <span class="hljs-literal">true</span>;     <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨å¯¹è±¡æ± </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> defaultCapacity = <span class="hljs-number">4</span>;       <span class="hljs-comment">// å¯¹è±¡æ± é»˜è®¤å®¹é‡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> maxSize = <span class="hljs-number">8</span>;               <span class="hljs-comment">// å¯¹è±¡æ± æœ€å¤§å®¹é‡</span><br><br>    <span class="hljs-keyword">private</span> ObjectPool&lt;GameObject&gt; effectPool;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab != <span class="hljs-literal">null</span>)<br>            clickEffectPrefab.SetActive(<span class="hljs-literal">false</span>);<br><br>        <span class="hljs-keyword">if</span> (targetCanvas == <span class="hljs-literal">null</span>)<br>            targetCanvas = FindObjectOfType&lt;Canvas&gt;();<br><br>        <span class="hljs-keyword">if</span> (rectTransform == <span class="hljs-literal">null</span>)<br>            rectTransform = GetComponent&lt;RectTransform&gt;();<br><br>        <span class="hljs-keyword">if</span> (useObjectPool)<br>            SetupObjectPool();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SetupObjectPool</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;æ— æ³•è®¾ç½®å¯¹è±¡æ± ï¼šç‰¹æ•ˆé¢„åˆ¶ä½“æœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        effectPool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(<br>            createFunc: CreateEffect,<br>            actionOnGet: OnGetEffect,<br>            actionOnRelease: OnReleaseEffect,<br>            actionOnDestroy: OnDestroyEffect,<br>            collectionCheck: <span class="hljs-literal">true</span>,<br>            defaultCapacity: defaultCapacity,<br>            maxSize: maxSize<br>        );<br>    &#125;<br><br>    <span class="hljs-function">GameObject <span class="hljs-title">CreateEffect</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject effect = Instantiate(clickEffectPrefab, transform);<br>        effect.SetActive(<span class="hljs-literal">false</span>);<br>        <span class="hljs-keyword">return</span> effect;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGetEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        effect.SetActive(<span class="hljs-literal">true</span>);<br>        <br>        <span class="hljs-comment">// é‡ç½®ç²’å­ç³»ç»Ÿ</span><br>        <span class="hljs-keyword">if</span> (effect.TryGetComponent&lt;ParticleSystem&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> particles))<br>        &#123;<br>            particles.Clear();<br>            particles.Play();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnReleaseEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span>)<br>        &#123;<br>            effect.SetActive(<span class="hljs-literal">false</span>);<br>            <br>            <span class="hljs-comment">// åœæ­¢ç²’å­ç³»ç»Ÿ</span><br>            <span class="hljs-keyword">if</span> (effect.TryGetComponent&lt;ParticleSystem&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> particles))<br>            &#123;<br>                particles.Stop();<br>                particles.Clear();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDestroyEffect</span>(<span class="hljs-params">GameObject effect</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Destroy(effect);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        HandleInput();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">HandleInput</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Vector3 clickPosition = Vector3.zero;<br>        <span class="hljs-built_in">bool</span> hasInput = <span class="hljs-literal">false</span>;<br>        <br>        <span class="hljs-comment">// æ£€æµ‹é¼ æ ‡ç‚¹å‡»</span><br>        <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">0</span>))<br>        &#123;<br>            clickPosition = Input.mousePosition;<br>            hasInput = <span class="hljs-literal">true</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// æ£€æµ‹è§¦æ‘¸è¾“å…¥ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰</span><br>        <span class="hljs-keyword">if</span> (Input.touchCount &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            Touch touch = Input.GetTouch(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">if</span> (touch.phase == TouchPhase.Began)<br>            &#123;<br>                clickPosition = touch.position;<br>                hasInput = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (hasInput)<br>        &#123;<br>            PlayClickEffect(clickPosition);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PlayClickEffect</span>(<span class="hljs-params">Vector3 screenPosition</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (clickEffectPrefab == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;ç‚¹å‡»ç‰¹æ•ˆé¢„åˆ¶ä½“æœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (targetCanvas == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogWarning(<span class="hljs-string">&quot;ç›®æ ‡Canvasæœªè®¾ç½®ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (RectTransformUtility.ScreenPointToLocalPointInRectangle(<br>            rectTransform, screenPosition, targetCanvas.worldCamera, <span class="hljs-keyword">out</span> Vector2 localPosition))<br>        &#123;<br>            GameObject effectInstance;<br>            <br>            <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± æˆ–ä¼ ç»Ÿæ–¹å¼åˆ›å»ºç‰¹æ•ˆ</span><br>            <span class="hljs-keyword">if</span> (useObjectPool &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>            &#123;<br>                effectInstance = effectPool.Get();<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                effectInstance = Instantiate(clickEffectPrefab, transform);<br>                effectInstance.SetActive(<span class="hljs-literal">true</span>);<br>            &#125;<br>            <br>            <span class="hljs-comment">// è®¾ç½®ä½ç½®</span><br>            <span class="hljs-keyword">if</span> (effectInstance.TryGetComponent&lt;RectTransform&gt;(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> effectRect))<br>            &#123;<br>                effectRect.localPosition = localPosition;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                effectInstance.transform.localPosition = (Vector3)localPosition;<br>            &#125;<br>            <br>            <span class="hljs-comment">// å¤„ç†ç‰¹æ•ˆç”Ÿå‘½å‘¨æœŸ</span><br>            <span class="hljs-keyword">if</span> (useObjectPool &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>            &#123;<br>                <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± ï¼Œå»¶è¿Ÿå½’è¿˜</span><br>                StartCoroutine(ReleaseEffectAfterDelay(effectInstance, effectDuration));<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼é”€æ¯</span><br>                Destroy(effectInstance, effectDuration);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function">IEnumerator <span class="hljs-title">ReleaseEffectAfterDelay</span>(<span class="hljs-params">GameObject effect, <span class="hljs-built_in">float</span> delay</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title">WaitForSeconds</span>(<span class="hljs-params">delay</span>)</span>;<br>        <span class="hljs-keyword">if</span> (effect != <span class="hljs-literal">null</span> &amp;&amp; effectPool != <span class="hljs-literal">null</span>)<br>        &#123;<br>            effectPool.Release(effect);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDestroy</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ¸…ç†å¯¹è±¡æ± </span><br>        effectPool?.Dispose();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å½©è‰²æ‰“å°</title>
    <link href="/2025/05/25/unity-color-log/"/>
    <url>/2025/05/25/unity-color-log/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è‡ªå®šä¹‰å½©è‰²æ‰“å°çš„å®ç°ã€‚</p><span id="more"></span><h1 id="å½©è‰²æ‰“å°"><a href="#å½©è‰²æ‰“å°" class="headerlink" title="å½©è‰²æ‰“å°"></a>å½©è‰²æ‰“å°</h1><h2 id="å¸¸ç”¨æ‰“å°"><a href="#å¸¸ç”¨æ‰“å°" class="headerlink" title="å¸¸ç”¨æ‰“å°"></a>å¸¸ç”¨æ‰“å°</h2><p>åœ¨ Unity æ§åˆ¶å°ä¸­æ‰“å°ä¿¡æ¯ï¼Œé€šå¸¸ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªæ¥å£ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp">Debug.Log(<span class="hljs-string">&quot;This is a normal message.&quot;</span>);<br>Debug.LogWarning(<span class="hljs-string">&quot;This is a warning message.&quot;</span>);<br>Debug.LogError(<span class="hljs-string">&quot;This is an error message.&quot;</span>);<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><img src="/../images/unity-color-log/%E5%B8%B8%E7%94%A8%E6%89%93%E5%8D%B0.png"></p><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯ <code>Debug.Log</code>ï¼Œç”¨äºæ‰“å°ä¸€äº›æ™®é€šçš„æ—¥å¿—ï¼Œæµ‹è¯•ä»£ç æµç¨‹ã€‚è€Œå¦å¤–ä¸¤ä¸ªæ‰“å°ï¼Œåˆ™æ˜¯ç”¨äºä¸€äº›å¼‚å¸¸æƒ…å†µçš„æŠ¥é”™æç¤ºã€‚</p><p>é€šå¸¸é¡¹ç›®ä¸­çš„æ‰“å°ä¼šéå¸¸å¤šï¼Œæœ‰æ—¶å€™éš¾ä»¥è§‚å¯Ÿåˆ°è‡ªå·±æ‰€éœ€è¦çš„æ‰“å°ï¼Œå½“ç„¶ï¼Œä¹Ÿæœ‰äººä¼šä½¿ç”¨å¦å¤–ä¸¤ä¸ªæ‰“å°ï¼Œçªå‡ºæ˜¾ç¤ºï¼Œä¸è¿‡å¼Šç«¯å°±æ˜¯å®¹æ˜“å¿½ç•¥çœŸæ­£çš„æŠ¥é”™ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç¨åŠ æ”¹é€ ï¼Œæ·»åŠ ä¸€äº›è‡ªå®šä¹‰çš„é¢œè‰²ï¼ŒåŠ å¤§å­—å·ï¼Œè®©æ‰“å°æ›´åŠ æ˜æ˜¾ã€‚</p><h2 id="è‡ªå®šä¹‰æ‰“å°"><a href="#è‡ªå®šä¹‰æ‰“å°" class="headerlink" title="è‡ªå®šä¹‰æ‰“å°"></a>è‡ªå®šä¹‰æ‰“å°</h2><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªé™æ€ç±» <code>ColorLog</code>ï¼Œå®šä¹‰é¢œè‰²ã€å­—ä½“å¤§å°ã€æ‰“å°å¼€å…³ï¼ˆç”¨äºæ‰“æ­£å¼åŒ…æ—¶ç»Ÿä¸€å…³é—­æ‰“å°ï¼‰ã€‚</p><p>æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹å¤–çš„å‡½æ•° <code>Pink</code>ï¼Œæ¥æ”¶ä¸å®šé•¿çš„å‚æ•°åˆ—è¡¨ï¼Œå†…éƒ¨è°ƒç”¨å°è£…å¥½çš„ <code>Log</code> å‡½æ•°ã€‚</p><p><code>Log</code> å‡½æ•°å®é™…ä¸Šæ˜¯è°ƒç”¨ <code>Debug.Log</code>ï¼Œåªæ˜¯æ·»åŠ äº†ä¸€äº›å¯Œæ–‡æœ¬æ ‡ç­¾ï¼Œå¦‚ <code>&lt;color&gt;&lt;/color&gt;</code> å’Œ <code>&lt;size&gt;&lt;/size&gt;</code>ï¼ŒæŠŠå‚æ•°åˆ—è¡¨ç”¨ç©ºæ ¼è¿›è¡Œæ‹¼æ¥ï¼Œç„¶åå¡«å…¥å­—ç¬¦ä¸²ä¸­ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ColorLog</span><br>&#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> pinkColorHex = <span class="hljs-string">&quot;#fbbac1&quot;</span>;   <span class="hljs-comment">// ç²‰è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> fontSize = <span class="hljs-number">15</span>;                 <span class="hljs-comment">// å­—ä½“å¤§å°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isDebug = <span class="hljs-literal">true</span>;                 <span class="hljs-comment">// æ‰“å°å¼€å…³</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pink</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(pinkColorHex, args);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (!isDebug) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.Log(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;<span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">ColorLog.Pink(<span class="hljs-string">&quot;This is a pink message.&quot;</span>);<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><img src="/../images/unity-color-log/%E7%B2%89%E8%89%B2%E6%89%93%E5%8D%B0.png"></p><p>æˆ‘ä»¬è¿˜å¯ä»¥æŠŠæ¥æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œç”¨ä½œæ ‡é¢˜åŠ ç²—æ˜¾ç¤ºã€‚</p><p>åœ¨ <code>ColorLog</code> ç±»ä¸­æ·»åŠ ä¸€ä¸ªé‡è½½å‡½æ•° <code>Pink(string title, params object[] args)</code>ï¼Œå†…éƒ¨è°ƒç”¨çš„ <code>Log</code> å‡½æ•°ä¹Ÿæ·»åŠ é‡è½½ã€‚</p><p>ä¸ä¹‹å‰çš„ <code>Log</code> å¯¹æ¯”ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œå­—ç¬¦ä¸²ä¸­æ·»åŠ äº†æ ‡ç­¾ <code>&lt;b&gt;&lt;/b&gt;</code>ï¼ŒæŠŠ <code>title</code> å‚æ•°åŠ ç²—æ˜¾ç¤ºã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ColorLog</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pink</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(pinkColorHex, title, args);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (!isDebug) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.Log(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;&lt;b&gt;<span class="hljs-subst">&#123;title&#125;</span>&lt;/b&gt; <span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">ColorLog.Pink(<span class="hljs-number">1000</span>);<br>ColorLog.Pink(<span class="hljs-string">&quot;[Coin]&quot;</span>, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><p><img src="/../images/unity-color-log/%E6%A0%87%E9%A2%98%E5%8A%A0%E7%B2%97.png"></p><p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å„ç§é¢œè‰²çš„æ‰“å°ï¼š</p><p><img src="/../images/unity-color-log/%E5%BD%A9%E8%89%B2%E6%89%93%E5%8D%B0.png"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ColorLog</span><br>&#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> redColorHex = <span class="hljs-string">&quot;#bf5959&quot;</span>;    <span class="hljs-comment">// çº¢è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> yellowColorHex = <span class="hljs-string">&quot;#ffbb00&quot;</span>; <span class="hljs-comment">// é»„è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> blueColorHex = <span class="hljs-string">&quot;#5489ce&quot;</span>;   <span class="hljs-comment">// è“è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> greenColorHex = <span class="hljs-string">&quot;#3cb472&quot;</span>;  <span class="hljs-comment">// ç»¿è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> pinkColorHex = <span class="hljs-string">&quot;#fbbac1&quot;</span>;   <span class="hljs-comment">// ç²‰è‰²</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> fontSize = <span class="hljs-number">15</span>;                 <span class="hljs-comment">// å­—ä½“å¤§å°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isDebug = <span class="hljs-literal">true</span>;                 <span class="hljs-comment">// æ‰“å°å¼€å…³</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Red</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        LogError(redColorHex, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Red</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        LogError(redColorHex, title, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Yellow</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        LogWarning(yellowColorHex, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Yellow</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        LogWarning(yellowColorHex, title, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Blue</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(blueColorHex, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Blue</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(blueColorHex, title, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Green</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(greenColorHex, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Green</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(greenColorHex, title, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pink</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(pinkColorHex, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Pink</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Log(pinkColorHex, title, args);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (!isDebug) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.Log(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;<span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (!isDebug) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.Log(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;&lt;b&gt;<span class="hljs-subst">&#123;title&#125;</span>&lt;/b&gt; <span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogWarning</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.LogWarning(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;<span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogWarning</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.LogWarning(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;&lt;b&gt;<span class="hljs-subst">&#123;title&#125;</span>&lt;/b&gt; <span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogError</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.LogError(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;<span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogError</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> color, <span class="hljs-built_in">string</span> title, <span class="hljs-keyword">params</span> <span class="hljs-built_in">object</span>[] args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> content = args.Length &gt; <span class="hljs-number">0</span> ? <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot; &quot;</span>, args) : <span class="hljs-built_in">string</span>.Empty;<br>        Debug.LogError(<span class="hljs-string">$&quot;&lt;size=<span class="hljs-subst">&#123;fontSize&#125;</span>&gt;&lt;color=<span class="hljs-subst">&#123;color&#125;</span>&gt;&lt;b&gt;<span class="hljs-subst">&#123;title&#125;</span>&lt;/b&gt; <span class="hljs-subst">&#123;content&#125;</span>&lt;/color&gt;&lt;/size&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git è¿œç¨‹ä»“åº“</title>
    <link href="/2025/04/13/git-remote/"/>
    <url>/2025/04/13/git-remote/</url>
    
    <content type="html"><![CDATA[<p>Git å…¥é—¨ç¬”è®° è¿œç¨‹ä»“åº“</p><span id="more"></span><h1 id="Git-è¿œç¨‹ä»“åº“"><a href="#Git-è¿œç¨‹ä»“åº“" class="headerlink" title="Git è¿œç¨‹ä»“åº“"></a>Git è¿œç¨‹ä»“åº“</h1><p>Git è¿œç¨‹ä»“åº“æ˜¯ä¸€ä¸ªæ‰˜ç®¡åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šçš„ä»£ç ä»“åº“ï¼Œå®ƒæ˜¯å›¢é˜Ÿåä½œå¼€å‘çš„æ ¸å¿ƒã€‚</p><p>é€šè¿‡è¿œç¨‹ä»“åº“ï¼Œå¼€å‘è€…å¯ä»¥å…±äº«ä»£ç ã€åŒæ­¥æ›´æ–°ï¼Œå®ç°åˆ†å¸ƒå¼åä½œã€‚</p><h2 id="SSH-å¯†é’¥"><a href="#SSH-å¯†é’¥" class="headerlink" title="SSH å¯†é’¥"></a>SSH å¯†é’¥</h2><p>SSH å¯†é’¥å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ Git æ—¶å®‰å…¨åœ°è¿æ¥è¿œç¨‹ä»“åº“ï¼Œæ— éœ€æ¯æ¬¡éƒ½è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p><ol><li>æ£€æŸ¥ç°æœ‰ SSH å¯†é’¥</li></ol><p>æ£€æŸ¥ <code>C:\Users\ä½ çš„ç”¨æˆ·å</code> æ–‡ä»¶å¤¹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ <code>.ssh</code> æ–‡ä»¶å¤¹ï¼Œå†çœ‹çœ‹æœ‰æ²¡æœ‰ <code>id_rsa</code> å’Œ <code>id_rsa.pub</code> æ–‡ä»¶ã€‚</p><p>å¦‚æœæœ‰çš„è¯ï¼Œå°±ä¸ç”¨ç”Ÿæˆäº†ï¼Œç›´æ¥è·³è¿‡ä¸‹ä¸€æ­¥ã€‚</p><p>å¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±éœ€è¦è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œç”Ÿæˆå¯†é’¥ã€‚</p><ol start="2"><li>ç”Ÿæˆæ–°çš„ SSH å¯†é’¥å¯¹</li></ol><p>æ‰“å¼€ Git Bashï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼šï¼ˆæœ€åé‚£ä¸ªå­—ç¬¦ä¸²æ˜¯ä½ çš„é‚®ç®±åœ°å€ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä¿æŒé»˜è®¤å€¼ï¼Œä¸€ç›´æŒ‰å›è½¦é”®ã€‚</p><p>å®Œæˆåï¼Œå¯ä»¥åœ¨ç¬¬ä¸€æ­¥æåˆ°çš„æ–‡ä»¶å¤¹é‡Œï¼Œçœ‹åˆ°é‚£ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><ol start="3"><li>æ·»åŠ å¯†é’¥</li></ol><p>ç™»å½• Githubï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œæ‰¾åˆ° <code>Settings</code>ï¼Œåœ¨å·¦ä¾§çš„å¯¼èˆªæ ä¸­ï¼Œæ‰¾åˆ° <code>SSH and GPG keys</code> é€‰é¡¹ã€‚</p><p><img src="/../images/git-remote/github%E8%AE%BE%E7%BD%AE.png"></p><p>ç‚¹å‡» <code>New SSH key</code>ï¼Œå¡«å†™ Titleï¼ŒæŠŠ <code>id_rsa.pub</code> æ–‡ä»¶çš„å†…å®¹å¤åˆ¶ï¼Œç²˜è´´åˆ° Key é‚£ä¸€æ ï¼Œæœ€åç‚¹å‡» <code>Add SSH key</code> å°±æ·»åŠ å®Œæˆäº†ã€‚</p><p><img src="/../images/git-remote/%E6%B7%BB%E5%8A%A0SSH.png"></p><p><img src="/../images/git-remote/%E8%AE%BE%E7%BD%AESSH.png"></p><h2 id="è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="è¿œç¨‹ä»“åº“æ“ä½œ"></a>è¿œç¨‹ä»“åº“æ“ä½œ</h2><h3 id="è¿œç¨‹ä»“åº“ç®¡ç†"><a href="#è¿œç¨‹ä»“åº“ç®¡ç†" class="headerlink" title="è¿œç¨‹ä»“åº“ç®¡ç†"></a>è¿œç¨‹ä»“åº“ç®¡ç†</h3><ul><li>å…‹éš†è¿œç¨‹ä»“åº“ï¼š<code>git clone ä»“åº“åœ°å€</code></li><li>æŸ¥çœ‹è¿œç¨‹ä»“åº“ï¼š<code>git remote -v</code></li><li>æ·»åŠ è¿œç¨‹ä»“åº“ï¼š<code>git remote add è¿œç¨‹ä»“åº“å ä»“åº“åœ°å€</code></li><li>åˆ é™¤è¿œç¨‹ä»“åº“ï¼š<code>git remote remove è¿œç¨‹ä»“åº“å</code></li><li>é‡å‘½åè¿œç¨‹ä»“åº“ï¼š<code>git remote rename æ—§åç§° æ–°åç§°</code></li></ul><h3 id="è¿œç¨‹åˆ†æ”¯æ“ä½œ"><a href="#è¿œç¨‹åˆ†æ”¯æ“ä½œ" class="headerlink" title="è¿œç¨‹åˆ†æ”¯æ“ä½œ"></a>è¿œç¨‹åˆ†æ”¯æ“ä½œ</h3><ul><li>æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼š<code>git branch -r</code></li><li>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼š<code>git branch -a</code></li><li>æŸ¥çœ‹åˆ†æ”¯è·Ÿè¸ªï¼š<code>git branch -vv</code></li><li>æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼š<code>git pull origin åˆ†æ”¯å</code></li><li>æ¨é€æœ¬åœ°åˆ†æ”¯ï¼š<code>git push origin åˆ†æ”¯å</code></li><li>åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼š<code>git push origin --delete åˆ†æ”¯å</code></li><li>è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯ï¼š<code>git branch --track åˆ†æ”¯å origin/åˆ†æ”¯å</code></li></ul><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><h3 id="åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="åˆ›å»ºè¿œç¨‹ä»“åº“"></a>åˆ›å»ºè¿œç¨‹ä»“åº“</h3><p>ç™»å½• Githubï¼Œç‚¹å‡»å³ä¸Šè§’çš„åŠ å·ï¼Œç‚¹å‡» <code>New repository</code>ï¼Œå¡«å†™ä»“åº“åç§°ï¼Œç‚¹å‡» <code>Create repository</code> å³å¯åˆ›å»ºè¿œç¨‹ä»“åº“ã€‚</p><p><img src="/../images/git-remote/%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93.png"></p><p><img src="/../images/git-remote/%E4%BB%93%E5%BA%93%E4%BF%A1%E6%81%AF.png"></p><p>åˆ›å»ºå®Œæˆåï¼Œä»“åº“é»˜è®¤æ˜¯ç©ºçš„ï¼Œç‚¹å‡» SSH æŒ‰é’®ï¼Œå³ä¾§æ˜¾ç¤ºäº†ä»“åº“çš„åœ°å€ã€‚ç‚¹å‡»æœ€å³ä¾§çš„å¤åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŠŠè¿™ä¸ªåœ°å€å¤åˆ¶ä¸‹æ¥ã€‚</p><p><img src="/../images/git-remote/%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80.png"></p><h3 id="å…‹éš†åˆ°æœ¬åœ°"><a href="#å…‹éš†åˆ°æœ¬åœ°" class="headerlink" title="å…‹éš†åˆ°æœ¬åœ°"></a>å…‹éš†åˆ°æœ¬åœ°</h3><p>åœ¨æœ¬åœ°æ‰¾ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ Git Bash çª—å£ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">clone</span> ä»“åº“åœ°å€<br></code></pre></td></tr></table></figure><p>å°±å¯ä»¥æŠŠè¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°äº†ã€‚</p><p><img src="/../images/git-remote/%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93.png"></p><h3 id="åˆ›å»ºæœ¬åœ°æ–‡ä»¶"><a href="#åˆ›å»ºæœ¬åœ°æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæœ¬åœ°æ–‡ä»¶"></a>åˆ›å»ºæœ¬åœ°æ–‡ä»¶</h3><p>è¿›å…¥ MyProject æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ª README.md æ–‡ä»¶ï¼Œè¾“å…¥ä¸€è¡Œæ–‡æœ¬ã€‚</p><p><img src="/../images/git-remote/%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6.png"></p><h3 id="æäº¤å¹¶æ¨é€"><a href="#æäº¤å¹¶æ¨é€" class="headerlink" title="æäº¤å¹¶æ¨é€"></a>æäº¤å¹¶æ¨é€</h3><p>å›åˆ° Git Bash çª—å£ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ <span class="hljs-built_in">cd</span> MyProject<br></code></pre></td></tr></table></figure><p>è¿›å…¥ MyProject æ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œç®€å•çš„æäº¤å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git add README.md<br>$ git commit -m <span class="hljs-string">&quot;Add README&quot;</span><br></code></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬æ˜¯ä»è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œåªæœ‰ä¸€ä¸ª main åˆ†æ”¯ï¼Œæœ¬åœ°çš„ main åˆ†æ”¯å’Œè¿œç¨‹çš„ main åˆ†æ”¯æ˜¯å…³è”çš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git push<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æäº¤çš„ README.md æ–‡ä»¶å°±è¢«æ¨é€åˆ°è¿œç¨‹ä»“åº“äº†ã€‚</p><p><img src="/../images/git-remote/%E6%8F%90%E4%BA%A4%E5%B9%B6%E6%8E%A8%E9%80%81.png"></p><h3 id="è¿œç¨‹ä¿®æ”¹æ–‡ä»¶"><a href="#è¿œç¨‹ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="è¿œç¨‹ä¿®æ”¹æ–‡ä»¶"></a>è¿œç¨‹ä¿®æ”¹æ–‡ä»¶</h3><p>åœ¨ Github é¡µé¢ä¸Šï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®ã€‚</p><p><img src="/../images/git-remote/%E8%BF%9C%E7%A8%8B%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6.png"></p><p>ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶å†…å®¹ï¼Œç‚¹å‡» <code>Commit changes</code> æŒ‰é’®è¿›è¡Œæäº¤ã€‚</p><p><img src="/../images/git-remote/%E8%BF%9C%E7%A8%8B%E6%8F%90%E4%BA%A4.png"></p><p>æ­¤æ—¶è¿œç¨‹ä»“åº“å°±æœ‰äº†ä¸¤æ¬¡æäº¤ï¼Œè€Œæœ¬åœ°ä»“åº“åªæœ‰ä¸€æ¬¡ã€‚</p><h3 id="æ‹‰å–æ›´æ–°"><a href="#æ‹‰å–æ›´æ–°" class="headerlink" title="æ‹‰å–æ›´æ–°"></a>æ‹‰å–æ›´æ–°</h3><p>ç°åœ¨è¦ä»è¿œç¨‹ä»“åº“æ‹‰å–æ›´æ–°ï¼ŒæŠŠæœ¬åœ°ä»“åº“çš„å†…å®¹ä¹Ÿæ›´åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git pull<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆåï¼Œæœ¬åœ°çš„æ–‡ä»¶å°±è·Ÿè¿œç¨‹ä»“åº“åŒæ­¥ç‰ˆæœ¬äº†ã€‚</p><p><img src="/../images/git-remote/%E6%8B%89%E5%8F%96%E6%9B%B4%E6%96%B0.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>ç‰ˆæœ¬æ§åˆ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git åˆ†æ”¯</title>
    <link href="/2025/03/30/git-branch/"/>
    <url>/2025/03/30/git-branch/</url>
    
    <content type="html"><![CDATA[<p>Git å…¥é—¨ç¬”è®° åˆ†æ”¯</p><span id="more"></span><h1 id="Git-åˆ†æ”¯ç®¡ç†"><a href="#Git-åˆ†æ”¯ç®¡ç†" class="headerlink" title="Git åˆ†æ”¯ç®¡ç†"></a>Git åˆ†æ”¯ç®¡ç†</h1><p>Git åˆ†æ”¯æ˜¯ç‰ˆæœ¬æ§åˆ¶ä¸­æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ä¸å½±å“ä¸»çº¿å¼€å‘çš„æƒ…å†µä¸‹è¿›è¡Œå¹¶è¡Œå¼€å‘ã€‚</p><p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» Git åˆ†æ”¯çš„æ¦‚å¿µå’Œå¸¸ç”¨æ“ä½œã€‚</p><h2 id="åˆ†æ”¯åŸºç¡€"><a href="#åˆ†æ”¯åŸºç¡€" class="headerlink" title="åˆ†æ”¯åŸºç¡€"></a>åˆ†æ”¯åŸºç¡€</h2><h3 id="ä»€ä¹ˆæ˜¯åˆ†æ”¯"><a href="#ä»€ä¹ˆæ˜¯åˆ†æ”¯" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†æ”¯"></a>ä»€ä¹ˆæ˜¯åˆ†æ”¯</h3><p>åˆ†æ”¯æœ¬è´¨ä¸Šæ˜¯æŒ‡å‘æäº¤å¯¹è±¡çš„å¯å˜æŒ‡é’ˆã€‚</p><p>Git é»˜è®¤åˆ†æ”¯åç§°æ˜¯ <code>master</code>ï¼ˆç°åœ¨æ¨èä½¿ç”¨ <code>main</code>ï¼‰ã€‚</p><p>æ¯æ¬¡æäº¤ï¼Œåˆ†æ”¯æŒ‡é’ˆéƒ½ä¼šè‡ªåŠ¨å‘å‰ç§»åŠ¨ã€‚</p><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><ul><li>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch åˆ†æ”¯å</code></li><li>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout åˆ†æ”¯å</code> æˆ– <code>git switch åˆ†æ”¯å</code></li><li>åˆ›å»ºå¹¶åˆ‡æ¢ï¼š<code>git checkout -b åˆ†æ”¯å</code> æˆ– <code>git switch -c åˆ†æ”¯å</code></li><li>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼š<code>git branch</code></li><li>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d åˆ†æ”¯å</code></li><li>ä¸¢å¼ƒä¿®æ”¹ï¼š<code>git checkout -- æ–‡ä»¶å</code></li></ul><h3 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h3><p>åˆå¹¶åˆ†æ”¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge åˆ†æ”¯å</code></li><li>ä½¿ç”¨å¿«è¿›æ¨¡å¼åˆå¹¶ï¼š<code>git merge --ff åˆ†æ”¯å</code></li><li>ç¦ç”¨å¿«è¿›æ¨¡å¼åˆå¹¶ï¼š<code>git merge --no-ff -m &quot;åˆå¹¶ä¿¡æ¯&quot; åˆ†æ”¯å</code></li><li>ç»ˆæ­¢åˆå¹¶ï¼š<code>git merge --abort</code></li></ul><p>åˆå¹¶åˆ†æ”¯æ—¶ï¼Œé»˜è®¤ä½¿ç”¨å¿«è¿›æ¨¡å¼è¿›è¡Œåˆå¹¶ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚</p><p>å¦‚æœç¦ç”¨å¿«è¿›æ¨¡å¼ï¼Œåœ¨åˆå¹¶æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æäº¤ï¼Œéœ€è¦å¡«å†™æäº¤ä¿¡æ¯ï¼Œå¯ä»¥å†™æ˜æ˜¯ä»å“ªä¸ªåˆ†æ”¯åˆå¹¶è¿‡æ¥çš„ã€‚</p><p>åˆå¹¶æ—¶å¯èƒ½ä¼šé‡åˆ°å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³å†²çªåå†æäº¤ã€‚</p><h3 id="è§£å†³å†²çª"><a href="#è§£å†³å†²çª" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h3><p>å½“ä¸¤ä¸ªåˆ†æ”¯ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€éƒ¨åˆ†æ—¶ï¼ŒGit æ— æ³•è‡ªåŠ¨åˆå¹¶ï¼Œä¼šäº§ç”Ÿå†²çªã€‚</p><p>å†²çªæ–‡ä»¶ä¼šåŒ…å«å¦‚ä¸‹æ ‡è®°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>å½“å‰åˆ†æ”¯çš„å†…å®¹<br>=======<br>è¦åˆå¹¶åˆ†æ”¯çš„å†…å®¹<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch-name<br></code></pre></td></tr></table></figure><p>è§£å†³å†²çªçš„æ­¥éª¤ï¼š</p><ol><li>æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œæ‰¾åˆ°å†²çªä½ç½®ï¼ˆç”±ä¸Šè¿°æ ‡è®°æ ‡è¯†ï¼‰</li><li>å†³å®šä¿ç•™å“ªäº›å†…å®¹ï¼Œåˆ é™¤å†²çªæ ‡è®°</li><li>æ·»åŠ ä¿®æ”¹åçš„æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼š<code>git add æ–‡ä»¶å</code></li><li>æäº¤æ›´æ”¹ï¼š<code>git commit -m &quot;è§£å†³å†²çª&quot;</code></li></ol><h2 id="åˆ†æ”¯æ“ä½œå®è·µ"><a href="#åˆ†æ”¯æ“ä½œå®è·µ" class="headerlink" title="åˆ†æ”¯æ“ä½œå®è·µ"></a>åˆ†æ”¯æ“ä½œå®è·µ</h2><h3 id="åˆ›å»ºå’ŒæŸ¥çœ‹åˆ†æ”¯"><a href="#åˆ›å»ºå’ŒæŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="åˆ›å»ºå’ŒæŸ¥çœ‹åˆ†æ”¯"></a>åˆ›å»ºå’ŒæŸ¥çœ‹åˆ†æ”¯</h3><p>æŸ¥çœ‹åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch<br></code></pre></td></tr></table></figure><p>å½“å‰åªæœ‰ä¸€ä¸ª main åˆ†æ”¯ã€‚</p><p>åˆ›å»ºå¹¶åˆ‡æ¢åˆ° dev åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout -b dev<br></code></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å½“å‰æœ‰ä¸¤ä¸ªåˆ†æ”¯ dev å’Œ mainï¼Œå¹¶ä¸” dev å‰é¢æœ‰ä¸ª * å·ï¼Œè¡¨ç¤ºå½“å‰å¤„äº dev åˆ†æ”¯ã€‚</p><p><img src="/../images/git-branch/%E6%9F%A5%E7%9C%8B%E5%92%8C%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF.png"></p><h3 id="ä¿®æ”¹åˆ†æ”¯å†…å®¹åŠåˆå¹¶"><a href="#ä¿®æ”¹åˆ†æ”¯å†…å®¹åŠåˆå¹¶" class="headerlink" title="ä¿®æ”¹åˆ†æ”¯å†…å®¹åŠåˆå¹¶"></a>ä¿®æ”¹åˆ†æ”¯å†…å®¹åŠåˆå¹¶</h3><p>ä¿®æ”¹æ–‡æœ¬å†…å®¹ï¼Œæ·»åŠ  The branch is dev</p><p><img src="/../images/git-branch/%E4%BF%AE%E6%94%B9dev%E6%96%87%E6%9C%AC.png"></p><p>æäº¤ä¿®æ”¹çš„å†…å®¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add test.txt<br>git commit -m <span class="hljs-string">&quot;modify dev branch&quot;</span><br></code></pre></td></tr></table></figure><p>åˆ‡æ¢å› main åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br></code></pre></td></tr></table></figure><p>æŠŠ dev åˆ†æ”¯åˆå¹¶åˆ°å½“å‰ main åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git merge dev<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° merge çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„æ˜¯ Fast-forwardï¼Œè¡¨ç¤ºè¿™æ¬¡åˆå¹¶å¾ˆé¡ºåˆ©ï¼Œä½¿ç”¨äº†å¿«è¿›æ¨¡å¼ã€‚</p><p><img src="/../images/git-branch/%E6%8F%90%E4%BA%A4dev%E5%88%86%E6%94%AF%E7%84%B6%E5%90%8E%E5%90%88%E5%B9%B6%E5%88%B0main%E5%88%86%E6%94%AF.png"></p><p>æ­¤æ—¶å¯ä»¥åˆ æ‰ dev åˆ†æ”¯ï¼Œä¿æŒåˆ†æ”¯æ•´æ´ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch -d dev<br></code></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ²¡æœ‰ dev åˆ†æ”¯äº†ï¼Œåªå‰©ä¸‹ä¸€ä¸ª main åˆ†æ”¯ã€‚</p><p><img src="/../images/git-branch/%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF.png"></p><h3 id="åˆå¹¶æ—¶äº§ç”Ÿå†²çªå¹¶è§£å†³"><a href="#åˆå¹¶æ—¶äº§ç”Ÿå†²çªå¹¶è§£å†³" class="headerlink" title="åˆå¹¶æ—¶äº§ç”Ÿå†²çªå¹¶è§£å†³"></a>åˆå¹¶æ—¶äº§ç”Ÿå†²çªå¹¶è§£å†³</h3><p>åˆ›å»ºå¹¶åˆ‡æ¢åˆ° bug åˆ†æ”¯ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout -b bug<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡æœ¬å†…å®¹ä¸º The branch is bug</p><p><img src="/../images/git-branch/%E4%BF%AE%E6%94%B9bug%E6%96%87%E6%9C%AC.png"></p><p>ç„¶åæäº¤æœ¬æ¬¡ä¿®æ”¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add test.txt<br>git commit -m <span class="hljs-string">&quot;modify bug branch&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../images/git-branch/%E6%8F%90%E4%BA%A4bug%E5%88%86%E6%94%AF.png"></p><p>åˆ‡æ¢åˆ° main åˆ†æ”¯ï¼ŒåŒæ ·ä¿®æ”¹æ–‡æœ¬å†…å®¹ï¼Œå¹¶æäº¤ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br></code></pre></td></tr></table></figure><p><img src="/../images/git-branch/%E5%88%87%E6%8D%A2%E5%88%B0main%E5%88%86%E6%94%AF%E5%B9%B6%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add test.txt<br>git commit -m <span class="hljs-string">&quot;modify main branch&quot;</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ bug åˆ†æ”¯å’Œ main åˆ†æ”¯éƒ½å¯¹åŒä¸€è¡Œæ–‡æœ¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¹¶ä¸”åœ¨å„è‡ªçš„åˆ†æ”¯ä¸Šæäº¤äº†ã€‚</p><p>ç°åœ¨æ‰§è¡Œåˆå¹¶ï¼ŒæŠŠ bug åˆ†æ”¯åˆå¹¶åˆ°å½“å‰çš„ main åˆ†æ”¯ä¸Šã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git merge bug<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨äº§ç”Ÿäº†ä¸€ä¸ªå†²çªï¼Œä¸èƒ½è‡ªåŠ¨åˆå¹¶æäº¤äº†ã€‚</p><p><img src="/../images/git-branch/%E4%BA%A7%E7%94%9F%E5%86%B2%E7%AA%81.png"></p><p>æ–‡æœ¬çš„å†…å®¹ä¹Ÿå‡ºç°äº†æ ‡è®°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ä¸‹é¢çš„å†…å®¹æ˜¯å½“å‰ main åˆ†æ”¯çš„å†…å®¹<br><br>======= æ˜¯åˆ†éš”è¡Œ<br><br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; bug ä¸Šé¢çš„å†…å®¹æ˜¯è¦åˆå¹¶è¿‡æ¥çš„ bug åˆ†æ”¯çš„å†…å®¹<br></code></pre></td></tr></table></figure><p><img src="/../images/git-branch/%E5%86%B2%E7%AA%81%E6%A0%87%E8%AE%B0.png"></p><p>ç°åœ¨éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªæ–‡æœ¬ï¼ŒæŠŠè®¤ä¸ºæ­£ç¡®çš„å†…å®¹å†™ä¸Šå»ï¼Œå¹¶åˆ é™¤æ ‡è®°ã€‚</p><p><img src="/../images/git-branch/%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81.png"></p><p>ç„¶åæŠŠè¿™æ¬¡ä¿®æ”¹å†²çªçš„å†…å®¹æäº¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add test.txt<br>git commit -m <span class="hljs-string">&quot;resolve conflict&quot;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æäº¤çš„è¿‡ç¨‹ä¸­ï¼Œmain åˆ†æ”¯åé¢æ˜¾ç¤º MERGINGï¼Œè¡¨ç¤ºæ­£åœ¨è¿›è¡Œåˆå¹¶ï¼Œæäº¤åå°±æ²¡æœ‰è¿™ä¸ªçŠ¶æ€äº†ã€‚</p><p><img src="/../images/git-branch/%E6%8F%90%E4%BA%A4%E8%A7%A3%E5%86%B3%E7%BB%93%E6%9E%9C.png"></p><p>å¦‚æœäº§ç”Ÿå†²çªçš„æ—¶å€™ï¼Œä¸æƒ³è§£å†³ï¼Œè€Œæ˜¯æƒ³å–æ¶ˆè¿™æ¬¡åˆå¹¶ï¼Œæ¢å¤åˆ°åŸæ¥çš„æ ·å­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git merge --abort<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¹Ÿå¯ä»¥æ¶ˆé™¤ MERGING çŠ¶æ€å’Œå†²çªã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>ç‰ˆæœ¬æ§åˆ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git å…¥é—¨</title>
    <link href="/2025/02/23/git-introduction/"/>
    <url>/2025/02/23/git-introduction/</url>
    
    <content type="html"><![CDATA[<p>Git å…¥é—¨ç¬”è®°</p><span id="more"></span><h1 id="Git-å…¥é—¨"><a href="#Git-å…¥é—¨" class="headerlink" title="Git å…¥é—¨"></a>Git å…¥é—¨</h1><p>Git æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¹¿æ³›ç”¨äºè½¯ä»¶å¼€å‘ä¸­ã€‚</p><p>å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…è·Ÿè¸ªä»£ç çš„å˜åŒ–ï¼Œåä½œå¼€å‘ï¼Œå¹¶ç®¡ç†é¡¹ç›®çš„ä¸åŒç‰ˆæœ¬ã€‚</p><h2 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h2><h3 id="åœ¨-Windows-ä¸Šå®‰è£…"><a href="#åœ¨-Windows-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ Windows ä¸Šå®‰è£…"></a>åœ¨ Windows ä¸Šå®‰è£…</h3><ol><li>ä¸‹è½½ Git å®‰è£…ç¨‹åºï¼š<a href="https://git-scm.com/downloads/win">Git for Windows</a></li><li>è¿è¡Œä¸‹è½½çš„å®‰è£…ç¨‹åºï¼Œå¹¶æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…ã€‚</li></ol><h3 id="åœ¨-macOS-ä¸Šå®‰è£…"><a href="#åœ¨-macOS-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ macOS ä¸Šå®‰è£…"></a>åœ¨ macOS ä¸Šå®‰è£…</h3><ol><li>æ‰“å¼€ç»ˆç«¯ã€‚</li><li>è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰å›è½¦ï¼š <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">brew install git<br></code></pre></td></tr></table></figure> è¿™å°†ä½¿ç”¨ Homebrew åŒ…ç®¡ç†å™¨å®‰è£… Gitã€‚</li></ol><h3 id="åœ¨-Linux-ä¸Šå®‰è£…"><a href="#åœ¨-Linux-ä¸Šå®‰è£…" class="headerlink" title="åœ¨ Linux ä¸Šå®‰è£…"></a>åœ¨ Linux ä¸Šå®‰è£…</h3><ol><li>æ‰“å¼€ç»ˆç«¯ã€‚</li><li>è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¹¶æŒ‰å›è½¦ï¼š <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo apt-get install git<br></code></pre></td></tr></table></figure> è¿™å°†ä½¿ç”¨ APT åŒ…ç®¡ç†å™¨å®‰è£… Gitã€‚</li></ol><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç„¶åå³é”®ç‚¹å‡»ç©ºç™½å¤„ï¼Œé€‰æ‹© Open Git Bash hereï¼Œæ‰“å¼€ Bash ç•Œé¢ã€‚</p><p><img src="/../images/git-introduction/%E6%89%93%E5%BC%80Bash%E7%95%8C%E9%9D%A2.png"></p><h3 id="é…ç½®-Git"><a href="#é…ç½®-Git" class="headerlink" title="é…ç½® Git"></a>é…ç½® Git</h3><p>å…ˆé…ç½®ä¸€ä¸‹ Git çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git config --global user.name <span class="hljs-string">&quot;ä½ çš„åå­—&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;ä½ çš„é‚®ç®±&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªç”¨æˆ·åå’Œé‚®ç®±ï¼Œä¸»è¦æ˜¯ç”¨äºæäº¤æ—¶çš„ä½œè€…ä¿¡æ¯ã€‚</p><h3 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><p>è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Git ä»“åº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git init<br></code></pre></td></tr></table></figure><p>è¿™å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ Git ä»“åº“ã€‚</p><p><img src="/../images/git-introduction/%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93.png"></p><h3 id="åˆ›å»ºæ–‡ä»¶"><a href="#åˆ›å»ºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ–‡ä»¶"></a>åˆ›å»ºæ–‡ä»¶</h3><p>åœ¨ç©ºæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ test.txtã€‚</p><p><img src="/../images/git-introduction/%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6.png"></p><p>ç„¶ååœ¨æ–‡æ¡£ä¸­å†™å…¥ä¸€è¡Œæ–‡æœ¬ã€‚</p><p><img src="/../images/git-introduction/%E5%86%99%E5%85%A5%E4%B8%80%E8%A1%8C%E6%96%87%E6%9C%AC.png"></p><h3 id="æäº¤æ›´æ”¹"><a href="#æäº¤æ›´æ”¹" class="headerlink" title="æäº¤æ›´æ”¹"></a>æäº¤æ›´æ”¹</h3><ol><li>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼š <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add æ–‡ä»¶å<br></code></pre></td></tr></table></figure></li><li>æäº¤æ›´æ”¹ï¼š <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git commit -m <span class="hljs-string">&quot;æäº¤ä¿¡æ¯&quot;</span><br></code></pre></td></tr></table></figure></li></ol><p><img src="/../images/git-introduction/%E6%B7%BB%E5%8A%A0%E5%B9%B6%E6%8F%90%E4%BA%A4.png"></p><p>ç°åœ¨ï¼Œä»“åº“é‡Œè®°å½•äº† test.txt è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æœ‰ä¸€æ¡æäº¤è®°å½•ï¼Œæäº¤ä¿¡æ¯ä¸º Add Test Documentã€‚</p><h3 id="æŸ¥çœ‹çŠ¶æ€"><a href="#æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€"></a>æŸ¥çœ‹çŠ¶æ€</h3><p>è¦æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git status<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ test.txt çš„å†…å®¹ï¼ŒåŠ ä¸Šä¸€è¡Œæ–‡æœ¬ã€‚</p><p><img src="/../images/git-introduction/%E5%86%99%E5%85%A5%E7%AC%AC%E4%BA%8C%E8%A1%8C%E6%96%87%E6%9C%AC.png"></p><p>ç„¶åä½¿ç”¨ä¸Šè¿°çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ä»“åº“çš„çŠ¶æ€ã€‚</p><p><img src="/../images/git-introduction/%E6%9F%A5%E7%9C%8B%E4%BB%93%E5%BA%93%E7%8A%B6%E6%80%81.png"></p><p>å¯ä»¥çœ‹åˆ°ä¸€è¡Œçº¢è‰²çš„å­—ä½“ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œtest.txt è¿™ä¸ªæ–‡ä»¶è¢« modifiedï¼ˆä¿®æ”¹ï¼‰äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨ git add å’Œ git commit å‘½ä»¤ï¼ŒæŠŠè¿™æ¬¡çš„ä¿®æ”¹æäº¤åˆ° Git ä»“åº“é‡Œã€‚</p><p><img src="/../images/git-introduction/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E6%8F%90%E4%BA%A4.png"></p><h3 id="æŸ¥çœ‹å†å²è®°å½•"><a href="#æŸ¥çœ‹å†å²è®°å½•" class="headerlink" title="æŸ¥çœ‹å†å²è®°å½•"></a>æŸ¥çœ‹å†å²è®°å½•</h3><p>è¦æŸ¥çœ‹æäº¤å†å²ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»åœ¨ä»“åº“ä¸­æäº¤äº†ä¸¤æ¬¡ã€‚</p><p><img src="/../images/git-introduction/%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2.png"></p><h3 id="æŸ¥çœ‹æ–‡ä»¶å·®å¼‚"><a href="#æŸ¥çœ‹æ–‡ä»¶å·®å¼‚" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶å·®å¼‚"></a>æŸ¥çœ‹æ–‡ä»¶å·®å¼‚</h3><p>è¦æŸ¥çœ‹æ–‡ä»¶å·®å¼‚ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹ test.txt çš„å†…å®¹ï¼ŒåŠ ä¸Šä¸€è¡Œæ–‡æœ¬ã€‚</p><p><img src="/../images/git-introduction/%E5%86%99%E5%85%A5%E7%AC%AC%E4%B8%89%E8%A1%8C%E6%96%87%E6%9C%AC.png"></p><p>ç„¶åæŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„å·®å¼‚ã€‚</p><p><img src="/../images/git-introduction/%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E5%B7%AE%E5%BC%82.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥çš„ Hello Git è¢«åˆ é™¤ï¼Œæ–°å¢äº† Hello Git å’Œ Hello â€¦ ä¸¤è¡Œï¼Œå› ä¸º Hello Git åé¢å¤šäº†ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ä¼šè¢« Git è®¤ä¸ºåŸæ¥é‚£è¡Œè¢«åˆ é™¤äº†ã€‚</p><h3 id="å›é€€ç‰ˆæœ¬"><a href="#å›é€€ç‰ˆæœ¬" class="headerlink" title="å›é€€ç‰ˆæœ¬"></a>å›é€€ç‰ˆæœ¬</h3><p>è¦å›é€€ç‰ˆæœ¬ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">git reset --hard HEAD^   å›åˆ°ä¸Šä¸ªç‰ˆæœ¬çš„å·²æäº¤çŠ¶æ€<br>git reset --soft HEAD^   å›åˆ°ä¸Šä¸ªç‰ˆæœ¬çš„æœªæäº¤çŠ¶æ€<br>git reset --mixed HEAD^  å›åˆ°ä¸Šä¸ªç‰ˆæœ¬çš„å·²æ·»åŠ ä½†æœªæäº¤çŠ¶æ€<br><br>HEAD^     ä¸Šä¸ªç‰ˆæœ¬<br>HEAD^^    ä¸Šä¸Šä¸ªç‰ˆæœ¬<br>HEAD~100  å¾€ä¸Š 100 ä¸ªç‰ˆæœ¬<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€è¡Œå‘½ä»¤ï¼Œè®©æ–‡ä»¶å›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬ã€‚</p><p><img src="/../images/git-introduction/%E5%9B%9E%E9%80%80%E7%89%88%E6%9C%AC.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨ HEAD å·²ç»æŒ‡å‘äº†ç¬¬ä¸€æ¬¡æäº¤ï¼ˆAdd Test Documentï¼‰ï¼Œç¬¬äºŒæ¬¡æäº¤çš„å†…å®¹ã€ç¬¬ä¸‰æ¬¡ä¿®æ”¹ä½†æœªæäº¤çš„å†…å®¹å°±éƒ½ä¸è§äº†ã€‚</p><p><img src="/../images/git-introduction/%E5%9B%9E%E9%80%80%E5%90%8E%E7%9A%84%E5%86%85%E5%AE%B9.png"></p><h3 id="æŸ¥çœ‹å‘½ä»¤å†å²"><a href="#æŸ¥çœ‹å‘½ä»¤å†å²" class="headerlink" title="æŸ¥çœ‹å‘½ä»¤å†å²"></a>æŸ¥çœ‹å‘½ä»¤å†å²</h3><p>è¦æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git reflog<br></code></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬ç°åœ¨åæ‚”äº†ï¼Œæƒ³è¦æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰¾å›ç¬¬äºŒæ¬¡æäº¤çš„å†…å®¹ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹å‘½ä»¤å†å²ã€‚</p><p><img src="/../images/git-introduction/%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E5%8E%86%E5%8F%B2.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æäº¤äº†ä¸¤æ¬¡ï¼Œåˆå›é€€äº†ä¸€æ¬¡ã€‚</p><p>ç¬¬äºŒæ¬¡çš„æäº¤å‘½ä»¤ï¼Œå®ƒçš„ id æ˜¯ b037670ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å›é€€å‘½ä»¤ï¼Œå¸¦ä¸Šè¿™ä¸ªå‘½ä»¤çš„ idï¼Œå°±èƒ½å¤Ÿå›åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p><p><img src="/../images/git-introduction/%E5%9B%9E%E9%80%80%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC.png"></p><p>ç°åœ¨ï¼Œæ–‡æœ¬æ–‡æ¡£çš„å†…å®¹å°±æ¢å¤åˆ°ç¬¬äºŒæ¬¡æäº¤çš„çŠ¶æ€äº†ã€‚</p><p><img src="/../images/git-introduction/%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E5%86%85%E5%AE%B9.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>ç‰ˆæœ¬æ§åˆ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­¦ä¹ èµ„æ–™æ”¶è— æ¸¸æˆå¼€å‘</title>
    <link href="/2025/01/27/learning-materials-collection-game-development/"/>
    <url>/2025/01/27/learning-materials-collection-game-development/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ•´ç†äº†æœ¬äººåœ¨å­¦ä¹  Unity3D æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­çŸ¥æ™“çš„ä¸€äº›å­¦ä¹ èµ„æ–™ã€‚</p><span id="more"></span><hr><p>è§†é¢‘æ•™ç¨‹</p><p><a href="https://www.sikiedu.com/">sikiå­¦é™¢</a></p><p><a href="https://space.bilibili.com/370283072">M_Studio</a></p><p><a href="https://learn.u3d.cn/">Unityä¸­æ–‡è¯¾å ‚</a></p><hr><p>åšå®¢</p><p><a href="https://blog.csdn.net/linxinfa?type=blog">æ—æ–°å‘</a></p><p><a href="https://blog.csdn.net/poem_qianmo?type=blog">æµ…å¢¨_æ¯›æ˜Ÿäº‘</a></p><p><a href="https://blog.csdn.net/candycat1992?type=blog">å†¯ä¹ä¹</a></p><p><a href="https://roystan.net/">Roystan</a></p><p><a href="https://sorumi.xyz/">Sorumi</a></p><p><a href="https://www.xuanyusong.com/">å®£é›¨æ¾</a></p><p><a href="http://www.luzexi.com/">é™†æ³½è¥¿</a></p><hr><p>ä¹¦ç±</p><p>ã€ŠUnity æ¸¸æˆè®¾è®¡ä¸å®ç°ã€‹ï¼ˆåŠ è—¤æ”¿æ ‘ï¼‰</p><p>ã€ŠUnity Shader å…¥é—¨ç²¾è¦ã€‹ï¼ˆå†¯ä¹ä¹ï¼‰</p><p>ã€ŠUnity3D é«˜çº§ç¼–ç¨‹ï¼šä¸»ç¨‹æ‰‹è®°ã€‹ï¼ˆé™†æ³½è¥¿ï¼‰</p><p>ã€Šæ¸¸æˆç¼–ç¨‹æ¨¡å¼ã€‹ï¼ˆRobert Nystromï¼‰</p><p>ã€ŠUnity æ¸¸æˆä¼˜åŒ–ã€‹ï¼ˆChris Dickinsonï¼‰</p><p>ã€ŠShader å¼€å‘å®æˆ˜ã€‹ï¼ˆKyle Halladayï¼‰</p><hr><p>ç´ æèµ„æº</p><p><a href="https://www.aigei.com/">çˆ±ç»™ç½‘</a></p><p><a href="https://itch.io/">itch</a></p><hr><p>Shader</p><p><a href="http://www.shaderslab.com/index.html">Shaders Laboratory</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>å­¦ä¹ èµ„æ–™æ”¶è—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D UI åµŒå¥—æ»šåŠ¨è§†å›¾</title>
    <link href="/2024/12/01/unity-ui-nested-scrollview/"/>
    <url>/2024/12/01/unity-ui-nested-scrollview/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è§£å†³ UI åµŒå¥—æ»šåŠ¨è§†å›¾æ»‘åŠ¨é—®é¢˜ã€‚</p><span id="more"></span><h1 id="åµŒå¥—æ»šåŠ¨è§†å›¾"><a href="#åµŒå¥—æ»šåŠ¨è§†å›¾" class="headerlink" title="åµŒå¥—æ»šåŠ¨è§†å›¾"></a>åµŒå¥—æ»šåŠ¨è§†å›¾</h1><h2 id="æ»‘åŠ¨é—®é¢˜"><a href="#æ»‘åŠ¨é—®é¢˜" class="headerlink" title="æ»‘åŠ¨é—®é¢˜"></a>æ»‘åŠ¨é—®é¢˜</h2><p>åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªæ»šåŠ¨è§†å›¾åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ª item è¿˜åŒ…å«äº†ä¸€ä¸ªå†…åµŒçš„æ»šåŠ¨è§†å›¾ã€‚</p><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨æ»‘åŠ¨å¤–å±‚çš„æ»šåŠ¨è§†å›¾æ—¶ï¼Œå¦‚æœç‚¹å‡»ä½ç½®åœ¨å†…åµŒçš„æ»šåŠ¨è§†å›¾ä¸Šï¼Œå¾ˆå¯èƒ½æ»‘ä¸åŠ¨ï¼Œå†…å¤–å±‚æ»šåŠ¨è§†å›¾çš„æ»‘åŠ¨äº‹ä»¶å‡ºç°äº†å†²çªã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»ä½ç½®åœ¨å¥–åŠ±æ–‡æœ¬ä¸Šæ—¶ï¼Œæ˜¯å¯ä»¥æ­£å¸¸æ»‘åŠ¨çš„ã€‚ä½†æ˜¯ï¼Œç‚¹å‡»ä½ç½®åœ¨å¥–åŠ±åˆ—è¡¨æ—¶ï¼Œæ»‘åŠ¨æ–¹å‘å˜æˆäº†å·¦å³ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„ä¸Šä¸‹æ»‘åŠ¨ã€‚</p><p><img src="/../images/unity-ui-nested-scrollview/%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81.gif"></p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæ ¹æ®æ‹–æ‹½çš„å¢é‡ï¼Œåˆ¤æ–­æ»‘åŠ¨çš„æ–¹å‘ï¼Œå¦‚æœæ–¹å‘ä¸å†…å±‚çš„æ–¹å‘ç›¸åŒï¼Œåˆ™ä¼˜å…ˆæ»‘åŠ¨å†…å±‚ï¼›å¦‚æœæ–¹å‘ä¸åŒï¼Œåˆ™ä¼ é€’æ»‘åŠ¨äº‹ä»¶ç»™å¤–å±‚çš„æ»šåŠ¨è§†å›¾ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè„šæœ¬ <code>CustomScrollRect.cs</code>ï¼Œç»§æ‰¿ <code>ScrollRect</code>ï¼Œå¹¶é‡å†™å®ƒçš„ä¸€äº›æ–¹æ³•ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.Awake();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.OnBeginDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.OnDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.OnEndDrag(eventData);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnScroll</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.OnScroll(eventData);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œåœ¨ <code>Awake</code> ä¸­ï¼Œè·å–çˆ¶èŠ‚ç‚¹çš„ <code>CustomScrollRect</code> ç»„ä»¶ã€‚</p><p>è¿™é‡Œä½¿ç”¨çš„ <code>GetComponentInParent</code>ï¼Œä¼šä»å½“å‰èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾ï¼Œé€’å½’éå†å…¶çˆ¶èŠ‚ç‚¹ã€‚</p><p>æ‰€ä»¥è¦ä» <code>transform.parent</code> å¼€å§‹éå†ï¼Œé¿å…è·å–åˆ°è‡ªå·±èº«ä¸Šçš„ <code>CustomScrollRect</code> ç»„ä»¶ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    CustomScrollRect parent;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.Awake();<br><br>        <span class="hljs-keyword">if</span> (parent == <span class="hljs-literal">null</span>)<br>        &#123;<br>            parent = transform.parent.GetComponentInParent&lt;CustomScrollRect&gt;();<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œåœ¨ç±»å†…éƒ¨å®šä¹‰ä¸€ä¸ªæ–¹å‘æšä¸¾ï¼Œåœ¨ <code>Awake</code> æ—¶ï¼Œè®°å½•å½“å‰çš„æ–¹å‘ã€‚</p><p>è¿™é‡Œä»…åˆ¤æ–­æ˜¯æ°´å¹³è¿˜æ˜¯å‚ç›´ï¼Œé€šå¸¸ä¸ä¼šæœ‰ä¸¤ä¸ªæ–¹å‘éƒ½èƒ½æ»‘åŠ¨çš„æƒ…å†µã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    CustomScrollRect parent;<br><br>    <span class="hljs-built_in">enum</span> Direction<br>    &#123;<br>        horizontal,<br>        vertical<br>    &#125;<br><br>    Direction curDirection;<br>    Direction dragDirection;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.Awake();<br><br>        <span class="hljs-keyword">if</span> (parent == <span class="hljs-literal">null</span>)<br>        &#123;<br>            parent = transform.parent.GetComponentInParent&lt;CustomScrollRect&gt;();<br>        &#125;<br><br>        curDirection = horizontal ? Direction.horizontal : Direction.vertical;<br>    &#125;<br>    <br>    <span class="hljs-comment">// ..</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨å¼€å§‹æ‹–æ‹½æ—¶ï¼Œæ ¹æ® <code>eventData.delta</code> çš„ <code>x</code> å’Œ <code>y</code> å˜é‡å¢å¹…å“ªä¸ªè¾ƒå¤§ï¼Œåˆ¤æ–­æ»‘åŠ¨çš„æ–¹å‘ã€‚</p><p>å½“æ‹–æ‹½çš„æ–¹å‘å’Œå½“å‰æ–¹å‘ä¸åŒï¼Œä¸”æœ‰å¤–å±‚æ»šåŠ¨è§†å›¾æ—¶ï¼ŒæŠŠ <code>beginDragHandler</code> ä¼ é€’ç»™å¤–å±‚ï¼Œå¦‚æœä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™æ‰§è¡Œè‡ªèº«çš„ <code>OnBeginDrag</code> äº‹ä»¶ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ¤æ–­æ‹–æ‹½çš„æ–¹å‘</span><br>        dragDirection = Mathf.Abs(eventData.delta.x) &gt; Mathf.Abs(eventData.delta.y)<br>        ? Direction.horizontal : Direction.vertical;<br><br>        <span class="hljs-comment">// æ‹–æ‹½çš„æ–¹å‘å’Œå½“å‰æ–¹å‘ä¸åŒï¼Œä¸”æœ‰å¤–å±‚æ»šåŠ¨è§†å›¾</span><br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            <span class="hljs-comment">// æŠŠ beginDragHandler ä¼ é€’ç»™å¤–å±‚</span><br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.beginDragHandler);<br><br>            <span class="hljs-comment">// ä¸æ‰§è¡Œè‡ªèº«çš„ OnBeginDrag äº‹ä»¶</span><br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// æ‰§è¡Œè‡ªèº«çš„ OnBeginDrag äº‹ä»¶</span><br>        <span class="hljs-keyword">base</span>.OnBeginDrag(eventData);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾æ­¤ç±»æ¨ï¼Œåœ¨å…¶ä»–æ–¹æ³•ä¸­ä¹ŸåŠ ä¸Šè¿™æ ·çš„åˆ¤æ–­ï¼ˆ<code>dragDirection</code> å¯ä»¥ä»…åœ¨å¼€å§‹æ‹–æ‹½æ—¶èµ‹å€¼ï¼‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ</p><ul><li><code>OnBeginDrag</code> æ–¹æ³•ä¼ é€’çš„äº‹ä»¶æ˜¯ <code>beginDragHandler</code></li><li><code>OnDrag</code> æ–¹æ³•ä¼ é€’çš„äº‹ä»¶æ˜¯ <code>dragHandler</code></li><li><code>OnEndDrag</code> æ–¹æ³•ä¼ é€’çš„äº‹ä»¶æ˜¯ <code>endDragHandler</code></li><li><code>OnScroll</code> æ–¹æ³•ä¼ é€’çš„äº‹ä»¶æ˜¯ <code>scrollHandler</code></li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.dragHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.endDragHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnEndDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnScroll</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.scrollHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnScroll(eventData);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><p>ç§»é™¤æ‰åŸæ¥çš„ <code>ScrollRect</code> ç»„ä»¶ï¼Œæ¢ä¸Š <code>CustomScrollRect</code> ç»„ä»¶ã€‚</p><p>è®°å¾—è¦æ‹–æ‹½ Viewport å’Œ Content èŠ‚ç‚¹ã€‚</p><p>å†…å¤–å±‚æ»šåŠ¨è§†å›¾éƒ½éœ€è¦æ¢ä¸Š <code>CustomScrollRect</code> ç»„ä»¶ã€‚</p><p><img src="/../images/unity-ui-nested-scrollview/%E6%9B%B4%E6%8D%A2%E7%BB%84%E4%BB%B6.gif"></p><p>æœ€ç»ˆæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="/../images/unity-ui-nested-scrollview/%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C.gif"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><p><code>CustomScrollRect.cs</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomScrollRect</span> : <span class="hljs-title">ScrollRect</span><br>&#123;<br>    CustomScrollRect parent;<br><br>    <span class="hljs-built_in">enum</span> Direction<br>    &#123;<br>        horizontal,<br>        vertical<br>    &#125;<br><br>    Direction curDirection;<br>    Direction dragDirection;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">base</span>.Awake();<br><br>        <span class="hljs-keyword">if</span> (parent == <span class="hljs-literal">null</span>)<br>        &#123;<br>            parent = transform.parent.GetComponentInParent&lt;CustomScrollRect&gt;();<br>        &#125;<br><br>        curDirection = horizontal ? Direction.horizontal : Direction.vertical;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ¤æ–­æ‹–æ‹½çš„æ–¹å‘</span><br>        dragDirection = Mathf.Abs(eventData.delta.x) &gt; Mathf.Abs(eventData.delta.y)<br>        ? Direction.horizontal : Direction.vertical;<br><br>        <span class="hljs-comment">// æ‹–æ‹½çš„æ–¹å‘å’Œå½“å‰æ–¹å‘ä¸åŒï¼Œä¸”æœ‰å¤–å±‚æ»šåŠ¨è§†å›¾</span><br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            <span class="hljs-comment">// æŠŠ beginDragHandler ä¼ é€’ç»™å¤–å±‚</span><br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.beginDragHandler);<br><br>            <span class="hljs-comment">// ä¸æ‰§è¡Œè‡ªèº«çš„ OnBeginDrag äº‹ä»¶</span><br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// æ‰§è¡Œè‡ªèº«çš„ OnBeginDrag äº‹ä»¶</span><br>        <span class="hljs-keyword">base</span>.OnBeginDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.dragHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.endDragHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnEndDrag(eventData);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnScroll</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (dragDirection != curDirection &amp;&amp; parent != <span class="hljs-literal">null</span>)<br>        &#123;<br>            ExecuteEvents.Execute(parent.gameObject, eventData,<br>            ExecuteEvents.scrollHandler);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">base</span>.OnScroll(eventData);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D æˆªå›¾</title>
    <link href="/2024/11/24/unity-screenshot-tool/"/>
    <url>/2024/11/24/unity-screenshot-tool/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ Unity3D è‡ªå¸¦çš„æˆªå›¾æ¥å£ï¼Œåˆ¶ä½œæˆªå›¾å·¥å…·ã€‚</p><span id="more"></span><h1 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³å¯¹ Unity çš„çª—å£è¿›è¡Œæˆªå›¾ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ä¸€äº›æˆªå›¾å·¥å…·ï¼Œå¾ˆéš¾æˆªå–åˆ°ä¸€å¼ å®Œæ•´åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼ˆä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æˆªå–ä¸€å¼  1920 * 1080 çš„å›¾ç‰‡ï¼‰ã€‚</p><p>å…¶å® Unity æœ‰æä¾›æˆªå›¾çš„æ¥å£ï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªè„šæœ¬ï¼ŒæŠŠæˆªå›¾æ¥å£åšæˆç®€å•çš„èœå•æ å·¥å…·å³å¯ã€‚</p><h2 id="åˆ›å»ºå·¥å…·è„šæœ¬"><a href="#åˆ›å»ºå·¥å…·è„šæœ¬" class="headerlink" title="åˆ›å»ºå·¥å…·è„šæœ¬"></a>åˆ›å»ºå·¥å…·è„šæœ¬</h2><p>åˆ›å»ºè„šæœ¬ <code>ScreenshotTool.cs</code>ï¼Œå†™ä¸€ä¸ª <code>CaptureFull</code> æ–¹æ³•ï¼Œè°ƒç”¨ Unity æä¾›çš„ <code>ScreenCapture.CaptureScreenshot</code> æ–¹æ³•å³å¯ã€‚</p><p>æˆªå›¾æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿æ‰¾åˆ°ï¼Œä¿å­˜çš„è·¯å¾„æ˜¯ Assets æ–‡ä»¶å¤¹ï¼ˆ<code>Application.dataPath</code>ï¼‰ï¼Œæˆªå›¾çš„åç§°æ˜¯ Screenshot æ‹¼æ¥äº†å½“å‰çš„æ—¶é—´ï¼ˆå¦‚æœåç§°ä¸€æ ·ï¼Œæ¯æ¬¡æˆªå›¾éƒ½ä¼šè¦†ç›–åŸæ¥çš„å›¾ç‰‡ï¼‰ã€‚</p><p>æˆ‘ä»¬åœ¨ <code>CaptureFull</code> æ–¹æ³•ä¸Šé¢æ·»åŠ ä¸€ä¸ª <code>MenuItem</code>ï¼Œå°±å¯ä»¥åœ¨èœå•æ æ‰¾åˆ°å®ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Alt + Q å¿«æ·é”®ï¼ˆå³è·¯å¾„æœ«å°¾çš„ <code>&amp;Q</code>ï¼‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ScreenshotTool</span><br>&#123;<br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æˆªå›¾/æˆªå–å…¨å± &amp;Q&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CaptureFull</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> time = DateTime.Now.ToString(<span class="hljs-string">&quot;yyyy-MM-dd_HH-mm-ss&quot;</span>);<br>        <span class="hljs-built_in">string</span> path = <span class="hljs-string">$&quot;<span class="hljs-subst">&#123;Application.dataPath&#125;</span>/Screenshot_<span class="hljs-subst">&#123;time&#125;</span>.png&quot;</span>;<br>        ScreenCapture.CaptureScreenshot(path);<br>        Debug.Log(<span class="hljs-string">&quot;Screenshot saved at: &quot;</span> + path);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æˆªå›¾æ•ˆæœ"><a href="#æˆªå›¾æ•ˆæœ" class="headerlink" title="æˆªå›¾æ•ˆæœ"></a>æˆªå›¾æ•ˆæœ</h2><p>å¦‚å›¾ï¼Œèœå•æ å‡ºç°æŒ‰é’®ï¼Œå¹¶ä¸”æœ‰å¿«æ·é”®çš„æè¿°ã€‚</p><p>è¿è¡Œæ¸¸æˆæ—¶ï¼Œç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œæˆ–è€…æŒ‰ä¸‹ Alt + Qï¼Œæ§åˆ¶å°ä¼šæ‰“å°æˆªå›¾çš„ä¿å­˜è·¯å¾„ã€‚</p><p>å½“ Unity èµ„æºæ–‡ä»¶å¤¹åˆ·æ–°æ—¶ï¼Œä¹Ÿä¼šçœ‹åˆ° Assets æ–‡ä»¶å¤¹ä¸‹å¤šå‡ºæ¥ä¸€å¼ å›¾ç‰‡ï¼Œå°ºå¯¸æ˜¯ 1920 * 1080ï¼ˆå½“å‰ Game çª—å£çš„åˆ†è¾¨ç‡ï¼‰ã€‚</p><p><img src="/../images/unity-screenshot-tool/%E6%88%AA%E5%9B%BE%E6%95%88%E6%9E%9C.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D UI åŒå‡»å’Œé•¿æŒ‰</title>
    <link href="/2024/11/10/unity-ui-double-click-and-long-press/"/>
    <url>/2024/11/10/unity-ui-double-click-and-long-press/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®ç° UI å…ƒç´ åŒå‡»å’Œé•¿æŒ‰åŠŸèƒ½ã€‚</p><span id="more"></span><h1 id="UI-åŒå‡»å’Œé•¿æŒ‰"><a href="#UI-åŒå‡»å’Œé•¿æŒ‰" class="headerlink" title="UI åŒå‡»å’Œé•¿æŒ‰"></a>UI åŒå‡»å’Œé•¿æŒ‰</h1><p>ä¸Šä¸€ç¯‡æ–‡ç« å®ç°äº†æ‹–æ‹½æ¥å£ï¼Œè¿™ç¯‡æ–‡ç« æ¥å®ç° UI çš„åŒå‡»å’Œé•¿æŒ‰ã€‚</p><h2 id="åŒå‡»"><a href="#åŒå‡»" class="headerlink" title="åŒå‡»"></a>åŒå‡»</h2><p>åˆ›å»ºè„šæœ¬ <code>UIDoubleClick.cs</code>ï¼Œåˆ›å»ºä¸€ä¸ª Imageï¼Œå¹¶æŠŠè„šæœ¬æŒ‚è½½åˆ°å®ƒèº«ä¸Šã€‚</p><p>åœ¨è„šæœ¬ä¸­ï¼Œç»§æ‰¿ <code>IPointerClickHandler</code> æ¥å£ï¼Œå®ç° <code>OnPointerClick</code> ç‚¹å‡»æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶ï¼Œè®°å½•ç‚¹å‡»çš„æ—¶é—´ï¼Œå¦‚æœç¬¬äºŒæ¬¡ç‚¹å‡»çš„æ—¶é—´ï¼Œå’Œä¸Šæ¬¡ç‚¹å‡»æ—¶é—´çš„é—´éš”éå¸¸çŸ­ï¼Œåˆ™åˆ¤å®šä¸ºåŒå‡»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIDoubleClick</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IPointerClickHandler</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> doubleClickThreshold = <span class="hljs-number">0.2f</span>; <span class="hljs-comment">// åŒå‡»çš„æ—¶é—´é—´éš”</span><br>    <span class="hljs-built_in">float</span> lastClickTime = <span class="hljs-number">0f</span>; <span class="hljs-comment">// è®°å½•ä¸Šæ¬¡ç‚¹å‡»çš„æ—¶é—´</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPointerClick</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è·å–å½“å‰ç‚¹å‡»çš„æ—¶é—´</span><br>        <span class="hljs-built_in">float</span> currentTime = Time.time;<br><br>        <span class="hljs-comment">// åˆ¤æ–­ä¸¤æ¬¡ç‚¹å‡»æ—¶é—´é—´éš”æ˜¯å¦åœ¨é˜ˆå€¼èŒƒå›´å†…</span><br>        <span class="hljs-keyword">if</span> (currentTime - lastClickTime &lt; doubleClickThreshold)<br>        &#123;<br>            OnDoubleClick();<br>        &#125;<br><br>        <span class="hljs-comment">// æ›´æ–°ä¸Šä¸€æ¬¡ç‚¹å‡»çš„æ—¶é—´</span><br>        lastClickTime = currentTime;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDoubleClick</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;åŒå‡»&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-ui-double-click-and-long-press/%E5%8F%8C%E5%87%BB.gif"></p><h2 id="é•¿æŒ‰"><a href="#é•¿æŒ‰" class="headerlink" title="é•¿æŒ‰"></a>é•¿æŒ‰</h2><p>åˆ›å»ºè„šæœ¬ <code>UILongPress.cs</code>ï¼Œå¹¶æŒ‚è½½åˆ° Image èº«ä¸Šã€‚</p><p>åœ¨è„šæœ¬ä¸­ï¼Œç»§æ‰¿ <code>IPointerDownHandler</code> å’Œ <code>IPointerUpHandler</code> æ¥å£ï¼Œå®ç° <code>OnPointerDown</code>ï¼ˆæŒ‰ä¸‹ï¼‰å’Œ <code>OnPointerUp</code>ï¼ˆæŠ¬èµ·ï¼‰æ–¹æ³•ã€‚</p><p>æŒ‰ä¸‹æ—¶ï¼Œè®°å½•æŒ‰ä¸‹çš„æ—¶é—´å’ŒæŒ‰ä½çš„çŠ¶æ€ï¼Œåœ¨ <code>Update</code> ä¸­æ£€æŸ¥é•¿æŒ‰çš„æ—¶é—´å’ŒçŠ¶æ€ï¼Œè¾¾åˆ°é•¿æŒ‰çš„æ—¶é—´é˜ˆå€¼åï¼Œæ‰§è¡Œä¸€æ¬¡é•¿æŒ‰çš„é€»è¾‘ï¼Œå¹¶æŠŠé•¿æŒ‰çŠ¶æ€é‡ç½®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UILongPress</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IPointerDownHandler</span>, <span class="hljs-title">IPointerUpHandler</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> longPressThreshold = <span class="hljs-number">1.0f</span>; <span class="hljs-comment">// é•¿æŒ‰çš„æ—¶é—´é˜ˆå€¼</span><br>    <span class="hljs-built_in">float</span> pressStartTime; <span class="hljs-comment">// æŒ‰ä¸‹çš„æ—¶é—´</span><br>    <span class="hljs-built_in">bool</span> isPressing = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦æŒ‰ä½</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPointerDown</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        isPressing = <span class="hljs-literal">true</span>;<br>        pressStartTime = Time.time;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPointerUp</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        isPressing = <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åœ¨é•¿æŒ‰çŠ¶æ€</span><br>        <span class="hljs-keyword">if</span> (isPressing &amp;&amp; (Time.time - pressStartTime) &gt; longPressThreshold)<br>        &#123;<br>            OnLongPress();<br>            isPressing = <span class="hljs-literal">false</span>; <span class="hljs-comment">// åªè§¦å‘ä¸€æ¬¡é•¿æŒ‰äº‹ä»¶</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnLongPress</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;é•¿æŒ‰&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-ui-double-click-and-long-press/%E9%95%BF%E6%8C%89.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D UI æ‹–æ‹½</title>
    <link href="/2024/11/03/unity-ui-drag/"/>
    <url>/2024/11/03/unity-ui-drag/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®ç° UI å…ƒç´ æ‹–æ‹½åŠŸèƒ½ã€‚</p><span id="more"></span><h1 id="UI-æ‹–æ‹½"><a href="#UI-æ‹–æ‹½" class="headerlink" title="UI æ‹–æ‹½"></a>UI æ‹–æ‹½</h1><p>é€šå¸¸ç”»å¸ƒä¸Šçš„ UI å…ƒç´ éƒ½æ˜¯å›ºå®šä½ç½®çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°æ‹–æ‹½æ¥å£ï¼Œè®© UI å…ƒç´ å¯ä»¥è¢«æ‹–æ‹½åˆ°å…¶ä»–ä½ç½®ã€‚</p><h2 id="æ‹–æ‹½æ¥å£"><a href="#æ‹–æ‹½æ¥å£" class="headerlink" title="æ‹–æ‹½æ¥å£"></a>æ‹–æ‹½æ¥å£</h2><p>åˆ›å»ºä¸€ä¸ªè„šæœ¬ <code>UIDrag.cs</code>ï¼Œåœ¨é»˜è®¤ç»§æ‰¿çš„ <code>MonoBehaviour</code> åé¢ï¼Œå†ç»§æ‰¿ä¸‰ä¸ªæ¥å£ã€‚</p><ul><li><code>IBeginDragHandler</code>ï¼ˆå¼€å§‹æ‹–æ‹½ï¼‰</li><li><code>IDragHandler</code>ï¼ˆæ‹–æ‹½ä¸­ï¼‰</li><li><code>IEndDragHandler</code>ï¼ˆç»“æŸæ‹–æ‹½ï¼‰</li></ul><p>ç»§æ‰¿æ¥å£ä¹‹åï¼Œè¦åœ¨è„šæœ¬ä¸­å®ç°æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå³ <code>OnBeginDrag</code>ã€<code>OnDrag</code>ã€<code>OnEndDrag</code>ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIDrag</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IBeginDragHandler</span>, <span class="hljs-title">IDragHandler</span>, <span class="hljs-title">IEndDragHandler</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        transform.position = eventData.position;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå…ˆåœ¨ <code>OnDrag</code> æ–¹æ³•ä¸­ï¼ŒæŠŠ <code>eventData.position</code> èµ‹å€¼ç»™ <code>transform.position</code>ã€‚</p><p>ç„¶ååˆ›å»ºä¸€ä¸ª Imageï¼ŒæŠŠ <code>UIDrag</code> è„šæœ¬æ‹–æ‹½åˆ° Image ä¸Šã€‚</p><p><img src="/../images/unity-ui-drag/%E6%8C%82%E8%BD%BD%E7%BB%84%E4%BB%B6.png"></p><p>è¿è¡Œæ¸¸æˆï¼Œç‚¹å‡»æ‹–æ‹½å›¾ç‰‡ã€‚</p><p><img src="/../images/unity-ui-drag/%E6%8B%96%E6%8B%BD%E6%95%88%E6%9E%9C.gif"></p><h2 id="ç”»å¸ƒæ¸²æŸ“æ¨¡å¼"><a href="#ç”»å¸ƒæ¸²æŸ“æ¨¡å¼" class="headerlink" title="ç”»å¸ƒæ¸²æŸ“æ¨¡å¼"></a>ç”»å¸ƒæ¸²æŸ“æ¨¡å¼</h2><p>ä¸Šè¿°çš„æ‹–æ‹½å®ç°ï¼Œæ˜¯åŸºäºç”»å¸ƒçš„ Overlay æ¨¡å¼ã€‚</p><p><img src="/../images/unity-ui-drag/Overlay%E6%A8%A1%E5%BC%8F.png"></p><p>å¦‚æœæŠŠç”»å¸ƒæ¸²æŸ“æ¨¡å¼æ”¹æˆ Camera æ¨¡å¼ï¼Œä¸Šè¿°çš„ä»£ç å®ç°å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>å› ä¸º Camera æ¨¡å¼çš„ç”»å¸ƒä¼šè¢«ç¼©å°åˆ°ç›¸æœºçš„è§†é‡èŒƒå›´å†…ï¼Œåæ ‡çš„æ•°å€¼ä¼šå˜å¾—å¾ˆå°ã€‚</p><p><img src="/../images/unity-ui-drag/Camera%E6%A8%A1%E5%BC%8F.png"></p><p>æ­¤æ—¶çš„è¿è¡Œæ•ˆæœï¼Œæ‹–æ‹½åå›¾ç‰‡é£åˆ°äº†ç¦»ç”»å¸ƒå¾ˆè¿œçš„ä½ç½®ï¼Œåæ ‡é”™è¯¯ã€‚</p><p><img src="/../images/unity-ui-drag/%E5%9D%90%E6%A0%87%E9%94%99%E8%AF%AF.gif"></p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹æ‹–æ‹½æ—¶è·å¾—çš„åæ ‡ä½ç½®è¿›è¡Œè½¬æ¢ã€‚</p><h2 id="åæ ‡è½¬æ¢"><a href="#åæ ‡è½¬æ¢" class="headerlink" title="åæ ‡è½¬æ¢"></a>åæ ‡è½¬æ¢</h2><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ª <code>RectTransform</code> å˜é‡ï¼Œåœ¨ <code>Awake</code> æ—¶è¿›è¡Œèµ‹å€¼ã€‚</p><p>ç„¶ååˆ©ç”¨ <code>RectTransformUtility.ScreenPointToWorldPointInRectangle</code> æ–¹æ³•ï¼ŒæŠŠè‡ªèº«çš„ <code>rect</code>ã€<code>eventData.position</code>ã€<code>eventData.pressEventCamera</code> ä¼ å…¥ï¼Œå¦‚æœåæ ‡è½¬æ¢æ­£å¸¸ï¼Œåˆ™ä¼šè¿”å›è½¬æ¢åçš„ <code>worldPoint</code>ï¼ŒæŠŠè¿™ä¸ªåæ ‡èµ‹å€¼ç»™ <code>rect.position</code> å°±å¯ä»¥äº†ã€‚</p><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥æŠŠå±å¹•ç©ºé—´åæ ‡è½¬æ¢æˆ UI å…ƒç´ æ‰€åœ¨çš„ä¸–ç•Œåæ ‡ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIDrag</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IBeginDragHandler</span>, <span class="hljs-title">IDragHandler</span>, <span class="hljs-title">IEndDragHandler</span><br>&#123;<br>    RectTransform rect;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        rect = GetComponent&lt;RectTransform&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (RectTransformUtility.ScreenPointToWorldPointInRectangle(rect, eventData.position,<br>        eventData.pressEventCamera, <span class="hljs-keyword">out</span> Vector3 worldPoint))<br>        &#123;<br>            rect.position = worldPoint;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ä»£ç åï¼Œæ— è®ºç”»å¸ƒæ˜¯ Overlay è¿˜æ˜¯ Camera æ¨¡å¼ï¼Œéƒ½å¯ä»¥æ­£å¸¸æ‹–æ‹½ã€‚</p><p><img src="/../images/unity-ui-drag/%E5%88%87%E6%8D%A2%E6%A8%A1%E5%BC%8F.gif"></p><h2 id="å¼€å§‹ä¸ç»“æŸæ‹–æ‹½"><a href="#å¼€å§‹ä¸ç»“æŸæ‹–æ‹½" class="headerlink" title="å¼€å§‹ä¸ç»“æŸæ‹–æ‹½"></a>å¼€å§‹ä¸ç»“æŸæ‹–æ‹½</h2><p>å•çº¯çš„æ‹–æ‹½ï¼Œåªéœ€è¦ <code>OnDrag</code> æ–¹æ³•ï¼Œè€Œ <code>OnBeginDrag</code> å’Œ <code>OnEndDrag</code> å¯ä»¥ä¸ºæ‹–æ‹½æ“ä½œæ·»åŠ æ›´å¤šçš„é€»è¾‘å¤„ç†ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨åœºæ™¯ä¸­æ·»åŠ ä¸¤ä¸ª Imageï¼Œä¿®æ”¹åå­—ï¼Œæ”¹å˜é¢œè‰²å’Œä¸é€æ˜åº¦ï¼Œæ”¾ç½®åˆ°å·¦å³ä¸¤è¾¹ã€‚</p><p><img src="/../images/unity-ui-drag/%E6%B7%BB%E5%8A%A0%E5%AE%B9%E5%99%A8.png"></p><p>ç„¶ååœ¨ä»£ç ä¸­æ·»åŠ æ›´å¤šçš„é€»è¾‘ï¼Œæ·»åŠ ä¸€ä¸ª <code>raycastResults</code> ç”¨äºä¿å­˜å°„çº¿æ£€æµ‹åˆ°çš„ UI å…ƒç´ åˆ—è¡¨ï¼Œé€šè¿‡ <code>EventSystem.current.RaycastAll</code> æ–¹æ³•ï¼ŒæŠŠé¼ æ ‡ç»è¿‡çš„ UI å…ƒç´ éƒ½æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼ˆåŒ…å« Image è‡ªå·±ï¼‰ã€‚</p><p>å¦‚æœé¼ æ ‡ç»è¿‡çš„ UI å…ƒç´ çš„åå­—åŒ…å« Containerï¼Œå°±æŠŠç›®æ ‡å…ƒç´ èµ‹å€¼ç»™ <code>target</code>ï¼›å¦‚æœåˆ—è¡¨ä¸­åªæœ‰ Image è‡ªå·±ï¼Œåˆ™ <code>target</code> ä¸ºç©ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>OnBeginDrag</code> ä¸­ï¼ŒæŠŠ Image åŸæ¥çš„ä½ç½®ä¿å­˜èµ·æ¥ã€‚åœ¨ <code>OnEndDrag</code> ä¸­ï¼Œæ£€æŸ¥ <code>target</code> ä¸ºç©ºæ—¶ï¼ŒæŠŠåŸæ¥çš„ä½ç½®èµ‹å€¼ç»™ Imageï¼Œå›åˆ°åŸä½ã€‚åªæœ‰åœ¨ <code>target</code> ä¸ä¸ºç©ºæ—¶ï¼ŒImage æ‰ä¼šç§»åŠ¨åˆ°ç›®æ ‡å®¹å™¨ä½ç½®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.EventSystems;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIDrag</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IBeginDragHandler</span>, <span class="hljs-title">IDragHandler</span>, <span class="hljs-title">IEndDragHandler</span><br>&#123;<br>    RectTransform rect;<br><br>    List&lt;RaycastResult&gt; raycastResults;<br>    GameObject target;<br>    Vector3 originPos;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        rect = GetComponent&lt;RectTransform&gt;();<br><br>        raycastResults = <span class="hljs-keyword">new</span> List&lt;RaycastResult&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnBeginDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        originPos = transform.position;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (RectTransformUtility.ScreenPointToWorldPointInRectangle(rect, eventData.position,<br>        eventData.pressEventCamera, <span class="hljs-keyword">out</span> Vector3 worldPoint))<br>        &#123;<br>            rect.position = worldPoint;<br>        &#125;<br><br>        <span class="hljs-comment">// æ¸…ç©ºä¸Šä¸€æ¬¡çš„å°„çº¿æ£€æµ‹ç»“æœ</span><br>        raycastResults.Clear();<br><br>        <span class="hljs-comment">// è¿›è¡Œå°„çº¿æ£€æµ‹</span><br>        EventSystem.current.RaycastAll(eventData, raycastResults);<br>        <br>        <span class="hljs-comment">// åŒ…å«ä¸¤ä¸ª UI å…ƒç´ ä»¥ä¸Š</span><br>        <span class="hljs-keyword">if</span> (raycastResults.Count &gt; <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-comment">// éå†æ£€æµ‹ç»“æœ</span><br>            <span class="hljs-keyword">foreach</span> (RaycastResult result <span class="hljs-keyword">in</span> raycastResults)<br>            &#123;<br>                <span class="hljs-comment">// è·³è¿‡è‡ªèº«å¯¹è±¡çš„æ£€æµ‹</span><br>                <span class="hljs-keyword">if</span> (result.gameObject == gameObject) <span class="hljs-keyword">continue</span>;<br><br>                <span class="hljs-comment">// æ£€æµ‹åˆ°ç›®æ ‡å®¹å™¨</span><br>                <span class="hljs-keyword">if</span> (result.gameObject.name.Contains(<span class="hljs-string">&quot;Container&quot;</span>))<br>                &#123;<br>                    target = result.gameObject;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// åªåŒ…å«è‡ªå·±ï¼Œæ²¡æœ‰ç›®æ ‡</span><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            target = <span class="hljs-literal">null</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEndDrag</span>(<span class="hljs-params">PointerEventData eventData</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">null</span>)<br>        &#123;<br>            transform.position = originPos;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            transform.position = target.transform.position;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-ui-drag/%E6%8B%96%E5%88%B0%E5%AE%B9%E5%99%A8.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D é¢è¯•é¢˜æ”¶å½•</title>
    <link href="/2024/10/20/unity-interview-questions/"/>
    <url>/2024/10/20/unity-interview-questions/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®¢æˆ·ç«¯é¢è¯•é¢˜æ”¶å½•ï¼ˆæŒç»­æ›´æ–°~ï¼‰</p><span id="more"></span><h1 id="é¢è¯•é¢˜æ”¶å½•"><a href="#é¢è¯•é¢˜æ”¶å½•" class="headerlink" title="é¢è¯•é¢˜æ”¶å½•"></a>é¢è¯•é¢˜æ”¶å½•</h1><p>æœ¬æ–‡æ”¶å½•ä¸€äº›å¯¹äº Unity3D å®¢æˆ·ç«¯å¯èƒ½é‡åˆ°çš„é¢è¯•é¢˜ï¼ˆæŒç»­æ›´æ–°~ï¼‰ï¼Œç­”æ¡ˆä»…å‡ºäºä¸ªäººç†è§£ï¼Œå¦‚æœ‰åå·®ï¼Œå¸Œæœ›æŒ‡æ­£ã€‚</p><h2 id="Unity3D"><a href="#Unity3D" class="headerlink" title="Unity3D"></a>Unity3D</h2><hr><h3 id="MonoBehaviour-ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªå›è°ƒå‡½æ•°"><a href="#MonoBehaviour-ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªå›è°ƒå‡½æ•°" class="headerlink" title="MonoBehaviour ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªå›è°ƒå‡½æ•°"></a>MonoBehaviour ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªå›è°ƒå‡½æ•°</h3><ul><li><code>Awake()</code>ï¼šåˆå§‹åŒ–ï¼Œæ—©äº <code>Start()</code> è°ƒç”¨ã€‚</li><li><code>Start()</code>ï¼šä¾èµ–å…¶ä»–å¯¹è±¡æ—¶çš„åˆå§‹åŒ–ã€‚</li><li><code>FixedUpdate()</code>ï¼šæ¯ä¸ªå›ºå®šæ—¶é—´æ­¥é•¿è°ƒç”¨ï¼Œå¤„ç†ç‰©ç†æ›´æ–°ã€‚</li><li><code>Update()</code>ï¼šæ¯å¸§è°ƒç”¨ï¼Œå¤„ç†å¤§å¤šæ•°æ¸¸æˆé€»è¾‘ã€‚</li><li><code>LateUpdate()</code>ï¼šæ¯å¸§è°ƒç”¨ï¼Œåœ¨ <code>Update()</code> ä¹‹åï¼Œé€šå¸¸ç”¨äºç›¸æœºè·Ÿéšã€‚</li><li><code>OnEnable()</code> å’Œ <code>OnDisable()</code>ï¼šåœ¨ç»„ä»¶å¯ç”¨å’Œç¦ç”¨æ—¶è°ƒç”¨ã€‚</li><li><code>OnDestroy()</code>ï¼šåœ¨å¯¹è±¡é”€æ¯æ—¶è°ƒç”¨ã€‚</li></ul><hr><h3 id="Prefab-æ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ä½œç”¨"><a href="#Prefab-æ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ä½œç”¨" class="headerlink" title="Prefab æ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ä½œç”¨"></a>Prefab æ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ä½œç”¨</h3><p>Prefabï¼ˆé¢„åˆ¶ä½“ï¼‰ æ˜¯ä¸€ç§å­˜å‚¨å’Œå¤ç”¨æ¸¸æˆå¯¹è±¡ï¼ˆ<code>GameObject</code>ï¼‰åŠå…¶ç»„ä»¶çš„æ¨¡æ¿ã€‚å®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªæ¸¸æˆå¯¹è±¡çš„åŸå‹ï¼Œå¹¶å¯ä»¥åœ¨åœºæ™¯ä¸­åå¤å®ä¾‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚</p><hr><h3 id="Unity-å¸¸ç”¨çš„èµ„æºæ–‡ä»¶å¤¹æœ‰å“ªäº›"><a href="#Unity-å¸¸ç”¨çš„èµ„æºæ–‡ä»¶å¤¹æœ‰å“ªäº›" class="headerlink" title="Unity å¸¸ç”¨çš„èµ„æºæ–‡ä»¶å¤¹æœ‰å“ªäº›"></a>Unity å¸¸ç”¨çš„èµ„æºæ–‡ä»¶å¤¹æœ‰å“ªäº›</h3><ul><li><code>Resources</code>ï¼šä»»ä½•æ”¾åœ¨ <code>Resources</code> æ–‡ä»¶å¤¹ä¸­çš„èµ„æºå¯ä»¥é€šè¿‡ <code>Resources.Load()</code> æ–¹æ³•åœ¨è¿è¡Œæ—¶åŠ è½½ã€‚è¯¥æ–‡ä»¶å¤¹çš„å†…å®¹ä¼šè¢« Unity æ‰“åŒ…è¿›æœ€ç»ˆçš„æ¸¸æˆæ„å»ºä¸­ã€‚</li><li><code>StreamingAssets</code>ï¼šè¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾åœ¨è¿è¡Œæ—¶éœ€è¦ç›´æ¥è®¿é—®çš„æ–‡ä»¶ï¼ˆå¦‚è§†é¢‘ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰ã€‚åœ¨æ„å»ºæ—¶ï¼ŒUnity ä¸ä¼šå¯¹å…¶å†…å®¹è¿›è¡Œå‹ç¼©æˆ–è½¬æ¢ï¼Œä¿æŒåŸå§‹æ ¼å¼ã€‚è®¿é—®è¿™äº›æ–‡ä»¶æ—¶éœ€è¦ä½¿ç”¨æ–‡ä»¶è·¯å¾„ã€‚</li><li><code>Editor</code>ï¼šè¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç¼–è¾‘å™¨æ‰©å±•è„šæœ¬ã€‚è¿™äº›è„šæœ¬åªèƒ½åœ¨ Unity ç¼–è¾‘å™¨ä¸­ä½¿ç”¨ï¼Œè€Œä¸ä¼šåŒ…å«åœ¨æœ€ç»ˆçš„æ¸¸æˆæ„å»ºä¸­ã€‚</li><li><code>Plugins</code>ï¼šç”¨äºå­˜æ”¾æ’ä»¶ï¼ˆå¦‚ DLL æ–‡ä»¶æˆ–ç¬¬ä¸‰æ–¹åº“ï¼‰ã€‚åœ¨ Unity ä¸­ï¼Œæ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„åº“ä¼šè¢«è‡ªåŠ¨è¯†åˆ«ä¸ºæ’ä»¶ã€‚</li></ul><hr><h2 id="C"><a href="#C" class="headerlink" title="C#"></a>C#</h2><hr><h3 id="å°è£…ã€ç»§æ‰¿ã€å¤šæ€ä¸‰å¤§é¢å‘å¯¹è±¡ç‰¹æ€§"><a href="#å°è£…ã€ç»§æ‰¿ã€å¤šæ€ä¸‰å¤§é¢å‘å¯¹è±¡ç‰¹æ€§" class="headerlink" title="å°è£…ã€ç»§æ‰¿ã€å¤šæ€ä¸‰å¤§é¢å‘å¯¹è±¡ç‰¹æ€§"></a>å°è£…ã€ç»§æ‰¿ã€å¤šæ€ä¸‰å¤§é¢å‘å¯¹è±¡ç‰¹æ€§</h3><p>å°è£…æ˜¯å°†å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºå°è£…åœ¨ä¸€èµ·ï¼Œé€šè¿‡è®¿é—®æ§åˆ¶æœºåˆ¶ï¼ˆå¦‚ <code>private</code>ã€<code>protected</code>ã€<code>public</code> ç­‰ä¿®é¥°ç¬¦ï¼‰æ¥éšè—å¯¹è±¡çš„å†…éƒ¨å®ç°ç»†èŠ‚ã€‚å¤–éƒ¨åªèƒ½é€šè¿‡å…¬å¼€çš„æ–¹æ³•ï¼ˆå³å…¬å…±æ¥å£ï¼‰ä¸å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè€Œä¸èƒ½ç›´æ¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨æ•°æ®ã€‚è¿™ç§æœºåˆ¶æé«˜äº†ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ç»§æ‰¿æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»æ¥åŸºäºå·²æœ‰ç±»æ‰©å±•å…¶åŠŸèƒ½çš„èƒ½åŠ›ã€‚é€šè¿‡ç»§æ‰¿ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶å¯ä»¥é‡å†™æˆ–æ‰©å±•è¿™äº›åŠŸèƒ½ã€‚ç»§æ‰¿æ”¯æŒä»£ç çš„å¤ç”¨å’Œé€»è¾‘çš„æ‰©å±•ã€‚</p><p>å¤šæ€å…è®¸ä¸åŒç±»å‹çš„å¯¹è±¡ä»¥ç»Ÿä¸€çš„æ¥å£è¿›è¡Œæ“ä½œã€‚C# ä¸­çš„å¤šæ€æ€§ä¸»è¦ä½“ç°åœ¨æ–¹æ³•çš„é‡è½½ï¼ˆç¼–è¯‘æ—¶å¤šæ€ï¼‰å’Œæ–¹æ³•çš„é‡å†™ï¼ˆè¿è¡Œæ—¶å¤šæ€ï¼‰ã€‚é€šè¿‡å¤šæ€ï¼Œçˆ¶ç±»çš„å¼•ç”¨å¯ä»¥æŒ‡å‘å­ç±»çš„å¯¹è±¡ï¼Œæ‰§è¡Œå­ç±»é‡å†™çš„æ–¹æ³•ã€‚</p><hr><h3 id="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«"><a href="#å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«" class="headerlink" title="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«"></a>å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«</h3><p>å€¼ç±»å‹</p><ul><li>å­˜å‚¨ä½ç½®ï¼šæ ˆ</li><li>æ•°æ®å­˜å‚¨ï¼šç›´æ¥å­˜å‚¨æ•°æ®</li><li>èµ‹å€¼è¡Œä¸ºï¼šå¤åˆ¶æ•°æ®ï¼ˆç›¸äº’ç‹¬ç«‹ï¼‰</li><li>å¸¸è§ç±»å‹ï¼š<code>int</code>ã€<code>float</code>ã€<code>struct</code>ã€<code>enum</code></li><li>æ€§èƒ½ï¼šå¿«ï¼Œåˆ†é…å’Œå›æ”¶é€Ÿåº¦é«˜</li></ul><p>å¼•ç”¨ç±»å‹</p><ul><li>å­˜å‚¨ä½ç½®ï¼šå †ï¼ˆæ•°æ®ï¼‰ã€æ ˆï¼ˆå¼•ç”¨ï¼‰</li><li>æ•°æ®å­˜å‚¨ï¼šå­˜å‚¨å¼•ç”¨ï¼ˆæŒ‡å‘å †ä¸­çš„æ•°æ®ï¼‰</li><li>èµ‹å€¼è¡Œä¸ºï¼šå¤åˆ¶å¼•ç”¨ï¼ˆæŒ‡å‘åŒä¸€æ•°æ®ï¼Œäº’ç›¸å½±å“ï¼‰</li><li>å¸¸è§ç±»å‹ï¼š<code>class</code>ã€<code>interface</code>ã€<code>array</code>ã€<code>string</code></li><li>æ€§èƒ½ï¼šç›¸å¯¹è¾ƒæ…¢ï¼ˆæ¶‰åŠåƒåœ¾å›æ”¶ï¼‰</li></ul><hr><h3 id="æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«"><a href="#æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«" class="headerlink" title="æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«"></a>æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«</h3><p>æµ…æ‹·è´</p><ul><li>å¤åˆ¶å†…å®¹ï¼šä»…å¤åˆ¶å¯¹è±¡çš„ç›´æ¥å­—æ®µï¼Œå¯¹äºå¼•ç”¨ç±»å‹å­—æ®µï¼Œåªå¤åˆ¶å¼•ç”¨ï¼Œä¸å¤åˆ¶å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚</li><li>å®ç°æ–¹å¼ï¼šå¯ä»¥é€šè¿‡ <code>MemberwiseClone()</code> æ–¹æ³•å®ç°ã€‚</li><li>æ•ˆæœï¼šåŸå¯¹è±¡å’Œæ–°å¯¹è±¡ä¸­çš„å¼•ç”¨ç±»å‹å­—æ®µæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªçš„å¼•ç”¨ç±»å‹å­—æ®µä¼šå½±å“å¦ä¸€ä¸ªã€‚å€¼ç±»å‹å­—æ®µåˆ™äº’ä¸å½±å“ã€‚</li></ul><p>æ·±æ‹·è´</p><ul><li>å¤åˆ¶å†…å®¹ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡ã€‚</li><li>å®ç°æ–¹å¼ï¼šå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ‹·è´æ–¹æ³•ã€åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ã€ç¬¬ä¸‰æ–¹åº“ç­‰æ–¹å¼æ¥å®ç°ã€‚</li><li>æ•ˆæœï¼šåŸå¯¹è±¡å’Œæ–°å¯¹è±¡å®Œå…¨ç‹¬ç«‹ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚</li></ul><blockquote><p>æ³¨æ„ï¼šå¦‚æœç›´æ¥ä½¿ç”¨ <code>=</code> å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡å˜é‡ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æµ…æ‹·è´ï¼Œè€Œæ˜¯èµ‹å€¼å¼•ç”¨ï¼Œè®©ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªçš„å±æ€§ä¼šå½±å“å¦ä¸€ä¸ªã€‚</p><p>ä½¿ç”¨ <code>MemberwiseClone()</code> è¿›è¡Œæµ…æ‹·è´ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å®ä¾‹ï¼Œå€¼ç±»å‹å­—æ®µä¼šè¢«å¤åˆ¶ï¼Œå¼•ç”¨ç±»å‹å­—æ®µä¼šå…±äº«å¼•ç”¨ã€‚</p></blockquote><hr><h3 id="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"><a href="#é‡è½½å’Œé‡å†™çš„åŒºåˆ«" class="headerlink" title="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"></a>é‡è½½å’Œé‡å†™çš„åŒºåˆ«</h3><p>é‡è½½æ˜¯ä¸€ç§åœ¨åŒä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªåŒåæ–¹æ³•ï¼Œä½†å‚æ•°ä¸åŒã€‚å®ƒæä¾›ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼Œå…è®¸æ–¹æ³•åœ¨åŒåçš„æƒ…å†µä¸‹å¤„ç†ä¸åŒçš„è¾“å…¥ã€‚</p><p>é‡å†™æ˜¯å­ç±»é€šè¿‡ <code>override</code> å…³é”®å­—é‡æ–°å®šä¹‰çˆ¶ç±»ä¸­çš„è™šæ–¹æ³•ã€‚å®ƒæä¾›è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼Œå…è®¸å­ç±»æä¾›ç‰¹å®šçš„å®ç°ï¼Œå–ä»£çˆ¶ç±»çš„è¡Œä¸ºã€‚</p><hr><h3 id="å§”æ‰˜å’Œäº‹ä»¶çš„åŒºåˆ«"><a href="#å§”æ‰˜å’Œäº‹ä»¶çš„åŒºåˆ«" class="headerlink" title="å§”æ‰˜å’Œäº‹ä»¶çš„åŒºåˆ«"></a>å§”æ‰˜å’Œäº‹ä»¶çš„åŒºåˆ«</h3><p>å§”æ‰˜æ˜¯ C# ä¸­çš„ä¸€ç§ç±»å‹ï¼Œç±»ä¼¼äºå‡½æ•°æŒ‡é’ˆã€‚å®ƒå…è®¸å°†æ–¹æ³•ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’å’Œè°ƒç”¨ã€‚é€šè¿‡å§”æ‰˜ï¼Œä½ å¯ä»¥å­˜å‚¨å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚</p><p>äº‹ä»¶æ˜¯åŸºäºå§”æ‰˜çš„å°è£…ï¼Œé€‚ç”¨äºå‘å¸ƒ-è®¢é˜…åœºæ™¯ã€‚äº‹ä»¶åªèƒ½åœ¨å£°æ˜å®ƒçš„ç±»å†…éƒ¨è§¦å‘ï¼Œå¤–éƒ¨ç±»ä¸èƒ½ç›´æ¥è°ƒç”¨äº‹ä»¶ï¼Œåªèƒ½ä½¿ç”¨ <code>+=</code> æˆ– <code>-=</code> è¿›è¡Œæ³¨å†Œå’Œå–æ¶ˆè®¢é˜…ï¼Œé˜²æ­¢äº†äº‹ä»¶çš„è¯¯ç”¨ã€‚</p><hr><h2 id="Lua"><a href="#Lua" class="headerlink" title="Lua"></a>Lua</h2><hr><h3 id="pairs-å’Œ-ipairs-çš„åŒºåˆ«"><a href="#pairs-å’Œ-ipairs-çš„åŒºåˆ«" class="headerlink" title="pairs å’Œ ipairs çš„åŒºåˆ«"></a>pairs å’Œ ipairs çš„åŒºåˆ«</h3><p><code>pairs</code> ç”¨äºéå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œé€‚ç”¨äºä¸è§„åˆ™çš„è¡¨æˆ–é”®ä¸ºå­—ç¬¦ä¸²çš„å…³è”è¡¨ï¼Œéå†é¡ºåºä¸å›ºå®šã€‚</p><p><code>ipairs</code> ç”¨äºéå†æ•°ç»„å½¢å¼çš„è¡¨ï¼Œé€‚ç”¨äºæ•°å€¼é”®ä¸ºè¿ç»­ç´¢å¼•çš„åœºåˆï¼ˆä» 1 å¼€å§‹ï¼‰ï¼Œå¹¶åœ¨é‡åˆ°ç¬¬ä¸€ä¸ª <code>nil</code> æ—¶åœæ­¢ã€‚</p><hr><h3 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ª-table-ä¸ºç©º"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ª-table-ä¸ºç©º" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ª table ä¸ºç©º"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ª table ä¸ºç©º</h3><p>åœ¨ Lua ä¸­åˆ¤æ–­ä¸€ä¸ª <code>table</code> æ˜¯å¦ä¸ºç©ºå¹¶æ²¡æœ‰å†…ç½®çš„å‡½æ•°ï¼Œä½†å¯ä»¥é€šè¿‡éå† <code>table</code> æ¥åˆ¤æ–­å…¶ä¸­æ˜¯å¦æœ‰ä»»ä½•å…ƒç´ ã€‚</p><p>ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>next()</code> å‡½æ•°æ¥æ£€æŸ¥ <code>table</code> ä¸­æ˜¯å¦å­˜åœ¨ä»»ä½•é”®å€¼å¯¹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isTableEmpty</span><span class="hljs-params">(t)</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span>(t) == <span class="hljs-literal">nil</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><code>next(t)</code>ï¼šè¿”å› <code>t</code> ä¸­çš„ç¬¬ä¸€ä¸ªé”®å€¼å¯¹ã€‚å¦‚æœ <code>t</code> ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ ï¼Œåˆ™è¿”å› <code>nil</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼šä¸èƒ½ç›´æ¥é€šè¿‡ <code>#t</code>ï¼ˆé•¿åº¦è¿ç®—ç¬¦ï¼‰æ¥åˆ¤æ–­è¡¨æ˜¯å¦ä¸ºç©ºï¼Œå› ä¸º <code>#t</code> åªå¯¹å…·æœ‰ <strong>è¿ç»­æ•´æ•°é”®</strong> çš„æ•°ç»„éƒ¨åˆ†æœ‰æ•ˆã€‚</p><p>ä¹Ÿä¸èƒ½ç®€å•åˆ¤æ–­ <code>t == nil</code>ï¼Œå› ä¸ºè¦åˆ¤æ–­çš„æ˜¯ table é‡Œé¢æ˜¯å¦æœ‰å…ƒç´ ï¼Œè€Œä¸æ˜¯ t å˜é‡æ˜¯å¦æœ‰å¼•ç”¨ã€‚</p></blockquote><hr><h3 id="if-0-çš„ç»“æœ"><a href="#if-0-çš„ç»“æœ" class="headerlink" title="if 0 çš„ç»“æœ"></a>if 0 çš„ç»“æœ</h3><p>åœ¨ Lua ä¸­ï¼Œåªæœ‰ <strong><code>false</code></strong> å’Œ <strong><code>nil</code></strong> è¢«è®¤ä¸ºæ˜¯ <code>å‡</code>ï¼Œå…¶ä»–æ‰€æœ‰å€¼ï¼ˆåŒ…æ‹¬ <code>0</code> å’Œç©ºå­—ç¬¦ä¸² <code>&quot;&quot;</code>ï¼‰éƒ½è¢«è®¤ä¸ºæ˜¯ <code>çœŸ</code>ã€‚</p><hr><h3 id="loadfileã€dofileã€require-çš„åŒºåˆ«"><a href="#loadfileã€dofileã€require-çš„åŒºåˆ«" class="headerlink" title="loadfileã€dofileã€require çš„åŒºåˆ«"></a>loadfileã€dofileã€require çš„åŒºåˆ«</h3><p><code>loadfile</code></p><ul><li>ç¼–è¯‘ä½†ä¸æ‰§è¡Œä»£ç ã€‚</li><li>è¿”å›ç¼–è¯‘å¥½çš„å‡½æ•°ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨æ¥æ‰§è¡Œã€‚</li></ul><p><code>dofile</code></p><ul><li>ç«‹å³åŠ è½½å¹¶æ‰§è¡Œä»£ç ã€‚</li><li>ä¸ç¼“å­˜ç»“æœï¼Œæ¯æ¬¡è°ƒç”¨éƒ½é‡æ–°åŠ è½½å’Œæ‰§è¡Œæ–‡ä»¶ã€‚</li></ul><p><code>require</code></p><ul><li>ä¸“ä¸ºæ¨¡å—ç³»ç»Ÿè®¾è®¡ã€‚</li><li>ä»…åŠ è½½å’Œæ‰§è¡Œä¸€æ¬¡æ¨¡å—ï¼Œåç»­è°ƒç”¨è¿”å›ç¼“å­˜ç»“æœã€‚</li><li>æ”¯æŒåŸºäº package.path å’Œ package.cpath æŸ¥æ‰¾æ¨¡å—ã€‚</li></ul><hr><h3 id="å¦‚ä½•å®ç°é¢å‘å¯¹è±¡"><a href="#å¦‚ä½•å®ç°é¢å‘å¯¹è±¡" class="headerlink" title="å¦‚ä½•å®ç°é¢å‘å¯¹è±¡"></a>å¦‚ä½•å®ç°é¢å‘å¯¹è±¡</h3><p>Lua å¹¶ä¸ç›´æ¥æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>table</code> å’Œ <code>metatable</code> æ¥æ¨¡æ‹Ÿé¢å‘å¯¹è±¡ã€‚</p><p>é€šå¸¸ä¼šç”¨ä¸€ä¸ª <code>table</code> è¡¨ç¤ºç±»ï¼ŒæŠŠå®ƒçš„ <code>__index</code> å…ƒæ–¹æ³•æŒ‡å‘è‡ªå·±ï¼Œå®šä¹‰ä¸€ä¸ª <code>new</code> æ„é€ å‡½æ•°ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>table</code> ä½œä¸ºå¯¹è±¡ï¼Œé€šè¿‡ <code>setmetatable</code> ä¸ºå¯¹è±¡è®¾ç½®å…ƒè¡¨ï¼Œæœ€åè¿”å›å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs lua">Person = &#123;&#125;  <span class="hljs-comment">-- å®šä¹‰ä¸€ä¸ªç±» Person</span><br>Person.<span class="hljs-built_in">__index</span> = Person  <span class="hljs-comment">-- è®¾ç½® __index å…ƒæ–¹æ³•</span><br><br><span class="hljs-comment">-- ç±»çš„æ„é€ å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person:new</span><span class="hljs-params">(name, age)</span></span><br>    <span class="hljs-keyword">local</span> obj = &#123;&#125;  <span class="hljs-comment">-- åˆ›å»ºä¸€ä¸ªæ–°è¡¨æ¥è¡¨ç¤ºå¯¹è±¡</span><br>    <span class="hljs-built_in">setmetatable</span>(obj, Person)  <span class="hljs-comment">-- è®¾ç½® metatableï¼Œè¡¨ç¤º obj æ˜¯ Person ç±»çš„å®ä¾‹</span><br>    obj.name = name <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;Unknown&quot;</span><br>    obj.age = age <span class="hljs-keyword">or</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> obj<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- å®šä¹‰ä¸€ä¸ªæ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person:speak</span><span class="hljs-params">()</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;name = &quot;</span> .. <span class="hljs-built_in">self</span>.name .. <span class="hljs-string">&quot;, age = &quot;</span> .. <span class="hljs-built_in">self</span>.age)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- åˆ›å»ºå¯¹è±¡</span><br><span class="hljs-keyword">local</span> p1 = Person:new(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">10</span>)<br><span class="hljs-keyword">local</span> p2 = Person:new(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">20</span>)<br><br>p1:speak()  <span class="hljs-comment">-- è¾“å‡ºï¼šname = Alice, age = 10</span><br>p2:speak()  <span class="hljs-comment">-- è¾“å‡ºï¼šname = Bob, age = 20</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¹‹æ‰€ä»¥æŠŠç±»çš„ <code>__index</code> å…ƒæ–¹æ³•æŒ‡å‘è‡ªå·±ï¼Œæ˜¯ä¸ºäº†å®ç° Lua çš„æŸ¥æ‰¾æœºåˆ¶ã€‚å½“æˆ‘ä»¬è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å­—æ®µæˆ–æ–¹æ³•æ—¶ï¼ŒLua ä¼šæŸ¥æ‰¾è¯¥å¯¹è±¡çš„å…ƒè¡¨ï¼ˆ<code>metatable</code>ï¼‰ï¼Œå¹¶å°è¯•è°ƒç”¨å…¶ <code>__index</code> å…ƒæ–¹æ³•ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è§‚å¯Ÿè€…æ¨¡å¼</title>
    <link href="/2024/10/13/unity-observer/"/>
    <url>/2024/10/13/unity-observer/</url>
    
    <content type="html"><![CDATA[<p>Unity3D æ³›å‹äº‹ä»¶ç³»ç»Ÿ</p><span id="more"></span><h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h1><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡è®¢é˜…æœºåˆ¶ï¼Œå¯ä»¥è®©å¯¹è±¡è§¦å‘äº‹ä»¶æ—¶ï¼Œé€šçŸ¥å¤šä¸ªå…¶ä»–å¯¹è±¡ã€‚</p><p>åœ¨æ¸¸æˆé€»è¾‘ä¸­ï¼ŒUI ç•Œé¢é€šå¸¸ä¼šç›‘å¬ä¸€äº›äº‹ä»¶ï¼Œå½“æ•°æ®å±‚å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡è§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥ UI ç•Œé¢è¿›è¡Œåˆ·æ–°ã€‚</p><h2 id="å®šä¹‰äº‹ä»¶ç±»å‹"><a href="#å®šä¹‰äº‹ä»¶ç±»å‹" class="headerlink" title="å®šä¹‰äº‹ä»¶ç±»å‹"></a>å®šä¹‰äº‹ä»¶ç±»å‹</h2><p>å…ˆè¿›è¡Œç®€å•çš„ä¸€æ­¥ï¼Œåˆ›å»º <code>GameEventType.cs</code> è„šæœ¬ï¼Œå®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå¯ä»¥åœ¨æšä¸¾ä¸­æ·»åŠ å¤šä¸ªäº‹ä»¶åã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> GameEventType<br>&#123;<br>    PlayerAttack,  <span class="hljs-comment">// ç©å®¶æ”»å‡»</span><br>    PlayerDeath,   <span class="hljs-comment">// ç©å®¶é˜µäº¡</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äº‹ä»¶ç®¡ç†å™¨"><a href="#äº‹ä»¶ç®¡ç†å™¨" class="headerlink" title="äº‹ä»¶ç®¡ç†å™¨"></a>äº‹ä»¶ç®¡ç†å™¨</h2><p>æ¥ç€ï¼Œåˆ›å»º <code>EventManager.cs</code> è„šæœ¬ï¼Œå®šä¹‰å¤šä¸ªæ³›å‹å§”æ‰˜ï¼Œè¿™é‡Œå£°æ˜äº†å•å‚æ•°å’Œä¸¤ä¸ªå‚æ•°çš„å§”æ‰˜ï¼Œå‚æ•°ç±»å‹æ˜¯æ³›å‹ Tã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><br><span class="hljs-comment">// å•å‚æ•°äº‹ä»¶å¤„ç†å§”æ‰˜</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EventDelegate</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">T param</span>)</span>;<br><br><span class="hljs-comment">// ä¸¤ä¸ªå‚æ•°çš„äº‹ä»¶å¤„ç†å§”æ‰˜</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EventDelegate</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">T1 param1, T2 param2</span>)</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventManager</span><br>&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ EventManager ç±»ä¸­ï¼Œå®šä¹‰ä¸¤ä¸ªå­—å…¸ï¼Œåˆ†åˆ«å­˜å‚¨å•å‚æ•°å’Œä¸¤ä¸ªå‚æ•°çš„å§”æ‰˜åˆ—è¡¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventManager</span><br>&#123;<br>    <span class="hljs-comment">// å•å‚æ•°äº‹ä»¶çš„å­—å…¸ï¼Œé”®æ˜¯äº‹ä»¶ç±»å‹ï¼Œå€¼æ˜¯å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨</span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-title">Dictionary</span>&lt;<span class="hljs-title">int</span>, <span class="hljs-title">Delegate</span>&gt; eventTableSingle</span> = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, Delegate&gt;();<br><br>    <span class="hljs-comment">// ä¸¤ä¸ªå‚æ•°äº‹ä»¶çš„å­—å…¸</span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-title">Dictionary</span>&lt;<span class="hljs-title">int</span>, <span class="hljs-title">Delegate</span>&gt; eventTableDouble</span> = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, Delegate&gt;();<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ†åˆ«æ·»åŠ ä¸‰ä¸ªæ¥å£ï¼šè®¢é˜…ã€å–æ¶ˆè®¢é˜…ã€è§¦å‘ã€‚</p><ul><li>è®¢é˜…ï¼Œæ¥æ”¶äº‹ä»¶åå’Œå‡½æ•°ï¼Œåˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨äº‹ä»¶åï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ æ–°çš„äº‹ä»¶ï¼Œç„¶åæŠŠå‡½æ•°è¿æ¥åˆ°å§”æ‰˜ä¸­ã€‚</li><li>å–æ¶ˆè®¢é˜…ï¼Œæ¥æ”¶äº‹ä»¶åå’Œå‡½æ•°ï¼Œåˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨äº‹ä»¶åï¼Œå­˜åœ¨åˆ™ä»å§”æ‰˜ä¸­ç§»é™¤å‡½æ•°ã€‚</li><li>è§¦å‘ï¼Œæ¥æ”¶äº‹ä»¶åå’Œå‚æ•°ï¼Œåˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨äº‹ä»¶åï¼Œå­˜åœ¨åˆ™å–å‡ºå§”æ‰˜å¹¶è°ƒç”¨ã€‚</li></ul><p>å¦‚æœåç»­è¿˜éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¾æ­¤ç±»æ¨ï¼Œæ·»åŠ å­—å…¸å’Œæ¥å£ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventManager</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-comment">// è®¢é˜…å•å‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddListener</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">GameEventType gameEventType, EventDelegate&lt;T&gt; handler</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (!eventTableSingle.ContainsKey(eventType))<br>        &#123;<br>            eventTableSingle.Add(eventType, <span class="hljs-literal">null</span>);<br>        &#125;<br>        eventTableSingle[eventType] = (EventDelegate&lt;T&gt;)eventTableSingle[eventType] + handler;<br>    &#125;<br><br>    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…å•å‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RemoveListener</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">GameEventType gameEventType, EventDelegate&lt;T&gt; handler</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (eventTableSingle.ContainsKey(eventType))<br>        &#123;<br>            eventTableSingle[eventType] = (EventDelegate&lt;T&gt;)eventTableSingle[eventType] - handler;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è§¦å‘å•å‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Trigger</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">GameEventType gameEventType, T param</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (eventTableSingle.ContainsKey(eventType))<br>        &#123;<br>            <span class="hljs-keyword">var</span> callback = eventTableSingle[eventType] <span class="hljs-keyword">as</span> EventDelegate&lt;T&gt;;<br>            callback?.Invoke(param);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è®¢é˜…åŒå‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddListener</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">GameEventType gameEventType, EventDelegate&lt;T1, T2&gt; handler</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (!eventTableDouble.ContainsKey(eventType))<br>        &#123;<br>            eventTableDouble.Add(eventType, <span class="hljs-literal">null</span>);<br>        &#125;<br>        eventTableDouble[eventType] = (EventDelegate&lt;T1, T2&gt;)eventTableDouble[eventType] + handler;<br>    &#125;<br><br>    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…åŒå‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RemoveListener</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">GameEventType gameEventType, EventDelegate&lt;T1, T2&gt; handler</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (eventTableDouble.ContainsKey(eventType))<br>        &#123;<br>            eventTableDouble[eventType] = (EventDelegate&lt;T1, T2&gt;)eventTableDouble[eventType] - handler;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è§¦å‘åŒå‚æ•°äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Trigger</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">GameEventType gameEventType, T1 param1, T2 param2</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> eventType = (<span class="hljs-built_in">int</span>)gameEventType;<br>        <span class="hljs-keyword">if</span> (eventTableDouble.ContainsKey(eventType))<br>        &#123;<br>            <span class="hljs-keyword">var</span> callback = eventTableDouble[eventType] <span class="hljs-keyword">as</span> EventDelegate&lt;T1, T2&gt;;<br>            callback?.Invoke(param1, param2);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ å’Œç§»é™¤ç›‘å¬"><a href="#æ·»åŠ å’Œç§»é™¤ç›‘å¬" class="headerlink" title="æ·»åŠ å’Œç§»é™¤ç›‘å¬"></a>æ·»åŠ å’Œç§»é™¤ç›‘å¬</h2><p>åˆ›å»º <code>PlayerEvent.cs</code> è„šæœ¬ï¼Œåœ¨åœºæ™¯ä¸­ä¹Ÿåˆ›å»ºä¸€ä¸ªæ¸¸æˆç‰©ä½“ï¼ŒæŒ‚è½½è¯¥è„šæœ¬ã€‚</p><p><img src="/../images/unity-observer/%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC.png"></p><p>åœ¨ OnEnable æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ <code>EventManager.AddListener</code> æ·»åŠ äº‹ä»¶ç›‘å¬ã€‚</p><p>åœ¨ OnDisable æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ <code>EventManager.RemoveListener</code> ç§»é™¤äº‹ä»¶ç›‘å¬ã€‚</p><p>æ­¤æ—¶å¯ä»¥ç¡®å®šæ³›å‹å‚æ•°çš„å®é™…ç±»å‹ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­æ¥æ”¶å‚æ•°ï¼Œè¿›è¡Œé€»è¾‘å¤„ç†ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerEvent</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEnable</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        EventManager.AddListener&lt;<span class="hljs-built_in">int</span>&gt;(GameEventType.PlayerAttack, OnPlayerAttack);<br>        EventManager.AddListener&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;(GameEventType.PlayerDeath, OnPlayerDeath);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnDisable</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        EventManager.RemoveListener&lt;<span class="hljs-built_in">int</span>&gt;(GameEventType.PlayerAttack, OnPlayerAttack);<br>        EventManager.RemoveListener&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;(GameEventType.PlayerDeath, OnPlayerDeath);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnPlayerAttack</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> damage</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;ç©å®¶å‘èµ·æ”»å‡»ï¼Œé€ æˆä¼¤å®³ <span class="hljs-subst">&#123;damage&#125;</span>&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnPlayerDeath</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> reason, <span class="hljs-built_in">int</span> damage</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;ç©å®¶é˜µäº¡ï¼ŒåŸå›  <span class="hljs-subst">&#123;reason&#125;</span>ï¼Œå—åˆ°ä¼¤å®³ <span class="hljs-subst">&#123;damage&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è§¦å‘äº‹ä»¶"><a href="#è§¦å‘äº‹ä»¶" class="headerlink" title="è§¦å‘äº‹ä»¶"></a>è§¦å‘äº‹ä»¶</h2><p>åˆ›å»º <code>PlayerEventTest.cs</code> è„šæœ¬ï¼Œåœ¨ Update æ–¹æ³•ä¸­ï¼Œæ ¹æ®é”®ç›˜æŒ‰é”®ï¼Œè§¦å‘ä¸åŒçš„äº‹ä»¶ã€‚</p><p>è¿™é‡Œå®šä¹‰ <code>PlayerEvent</code> å˜é‡ï¼ŒæŒ‰ä¸‹ E é”®å¯¹å…¶æ¸¸æˆç‰©ä½“è¿›è¡Œæ˜¾ç¤ºéšè—ï¼Œæ˜¯ä¸ºäº†æµ‹è¯•äº‹ä»¶çš„æ·»åŠ å’Œç§»é™¤ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerEventTest</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> PlayerEvent playerEvent;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Q))<br>        &#123;<br>            EventManager.Trigger(GameEventType.PlayerAttack, <span class="hljs-number">100</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.W))<br>        &#123;<br>            EventManager.Trigger(GameEventType.PlayerDeath, <span class="hljs-string">&quot;Bossæ”»å‡»&quot;</span>, <span class="hljs-number">999</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.E))<br>        &#123;<br>            <span class="hljs-built_in">bool</span> isActive = playerEvent.gameObject.activeInHierarchy;<br>            playerEvent.gameObject.SetActive(!isActive);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åœºæ™¯ä¸­æ·»åŠ æ¸¸æˆç‰©ä½“ï¼Œå¹¶æŒ‚è½½è¯¥è„šæœ¬ï¼Œæ‹–æ‹½å¼•ç”¨ã€‚</p><p><img src="/../images/unity-observer/%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6.png"></p><p>è¿è¡Œæ¸¸æˆï¼š</p><ul><li>æŒ‰ä¸‹ Q é”®è§¦å‘äº† <code>PlayerAttack</code> äº‹ä»¶</li><li>æŒ‰ä¸‹ W é”®è§¦å‘äº† <code>PlayerDeath</code> äº‹ä»¶</li><li>æŒ‰ä¸‹ E é”®éšè—äº† <code>PlayerEvent</code> æ¸¸æˆç‰©ä½“ï¼ŒåŒæ—¶äº‹ä»¶è¢«ç§»é™¤ï¼Œä¸ä¼šå†å“åº” Q å’Œ W é”®ï¼Œé™¤éå†æ¬¡æŒ‰ä¸‹ E é”®ï¼Œæ˜¾ç¤ºæ¸¸æˆç‰©ä½“å¹¶æ·»åŠ äº‹ä»¶ã€‚</li></ul><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/../images/unity-observer/%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å•ä¾‹æ¨¡å¼</title>
    <link href="/2024/10/06/unity-singleton/"/>
    <url>/2024/10/06/unity-singleton/</url>
    
    <content type="html"><![CDATA[<p>Unity3D æ³›å‹å•ä¾‹</p><span id="more"></span><h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œèƒ½å¤Ÿä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæä¾›è®¿é—®å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹ã€‚</p><p>é€šå¸¸ä¼šæŠŠä¸€äº›ç®¡ç†ç±»è®¾ç½®æˆå•ä¾‹ï¼Œä¾‹å¦‚ <code>GameManager</code>ã€<code>UIManager</code> ç­‰ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›ç®¡ç†ç±»å•ä¾‹ï¼Œå­˜å‚¨å˜é‡å’Œè°ƒç”¨æ¥å£ã€‚</p><h2 id="æ‰‹åŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹"><a href="#æ‰‹åŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹" class="headerlink" title="æ‰‹åŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹"></a>æ‰‹åŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹</h2><p>åˆ›å»º <code>SingletonMono.cs</code> è„šæœ¬ï¼Œåœ¨ç±»ååé¢æ·»åŠ æ³›å‹å’Œçº¦æŸï¼Œå®šä¹‰æ³›å‹å˜é‡ï¼Œå¹¶ä¸”åœ¨ <code>Awake</code> æ–¹æ³•ä¸­å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p><p>è¿™é‡Œçš„ <code>Awake</code> æ–¹æ³•æ˜¯è™šæ–¹æ³•ï¼Œå½“æœ‰ç®¡ç†ç±»ç»§æ‰¿è¿™ä¸ª <code>SingletonMono</code> æ—¶ï¼Œå¯ä»¥é‡å†™ <code>Awake</code> æ–¹æ³•è¿›è¡Œé¢å¤–çš„æ“ä½œã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingletonMono</span>&lt;<span class="hljs-title">T</span>&gt; : <span class="hljs-title">MonoBehaviour</span> <span class="hljs-keyword">where</span> <span class="hljs-title">T</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">static</span> T instance;  <span class="hljs-comment">// ç§æœ‰é™æ€å®ä¾‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T Instance &#123; <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> instance; &#125; &#125;  <span class="hljs-comment">// å…¬å¼€å®ä¾‹å±æ€§</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>)<br>        &#123;<br>            instance = <span class="hljs-keyword">this</span> <span class="hljs-keyword">as</span> T;<br>            <span class="hljs-comment">// åˆ‡æ¢åœºæ™¯æ—¶ä¸é”€æ¯è¿™ä¸ªæ¸¸æˆç‰©ä½“</span><br>            DontDestroyOnLoad(gameObject);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-comment">// åˆ‡æ¢åœºæ™¯æ—¶ï¼Œå¦‚æœåœºæ™¯é‡Œæœ‰å•ä¾‹æ¸¸æˆç‰©ä½“ï¼Œåœ¨å·²ç»åˆ›å»ºå•ä¾‹çš„æƒ…å†µä¸‹ï¼Œé”€æ¯å¤šä½™çš„æ¸¸æˆç‰©ä½“</span><br>            Destroy(gameObject);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»º <code>GameManager.cs</code> è„šæœ¬ï¼Œç»§æ‰¿ <code>SingletonMono</code> è¿™ä¸ªç±»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameManager</span> : <span class="hljs-title">SingletonMono</span>&lt;<span class="hljs-title">GameManager</span>&gt;<br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> score;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è°ƒç”¨åŸºç±»çš„ Awake æ–¹æ³•</span><br>        <span class="hljs-keyword">base</span>.Awake();<br>        <span class="hljs-comment">// å¯ä»¥è¿›è¡Œé¢å¤–çš„åˆå§‹åŒ–æ“ä½œ</span><br>        score = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºæ¸¸æˆç‰©ä½“ï¼ŒæŠŠ <code>GameManager</code> è„šæœ¬æ‰‹åŠ¨æŒ‚è½½åˆ°æ¸¸æˆç‰©ä½“ä¸Šã€‚</p><p><img src="/../images/unity-singleton/%E6%89%8B%E5%8A%A8%E6%8C%82%E8%BD%BD.png"></p><p>åˆ›å»º <code>SingletonTest.cs</code> è„šæœ¬ï¼Œç®€å•ä½¿ç”¨ä¸€ä¸‹ <code>GameManager.Instance</code> å•ä¾‹çš„å˜é‡ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingletonTest</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> score = GameManager.Instance.score;<br>        Debug.Log(<span class="hljs-string">$&quot;score = <span class="hljs-subst">&#123;score&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼Œå¯ä»¥çœ‹åˆ° <code>GameManager</code> åœ¨ <code>DontDestroyOnLoad</code> åœºæ™¯ä¸­ï¼Œå¯ä»¥è·å–åˆ° <code>score</code> å˜é‡è¿›è¡Œæ‰“å°ã€‚</p><p><img src="/../images/unity-singleton/%E4%BD%BF%E7%94%A8%E5%8D%95%E4%BE%8B.png"></p><h2 id="è‡ªåŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹"><a href="#è‡ªåŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹" class="headerlink" title="è‡ªåŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹"></a>è‡ªåŠ¨æŒ‚è½½çš„æ³›å‹å•ä¾‹</h2><p>åˆ›å»º <code>SingletonMonoAuto.cs</code> è„šæœ¬ï¼Œåœ¨ç±»ååé¢æ·»åŠ æ³›å‹å’Œçº¦æŸï¼Œå®šä¹‰æ³›å‹å˜é‡ã€‚</p><p>å› ä¸ºå®ƒå¹¶ä¸éœ€è¦åœ¨åœºæ™¯ä¸­æ‰‹åŠ¨åˆ›å»ºæ¸¸æˆç‰©ä½“ï¼Œä¹Ÿä¸ä¼šé€šè¿‡ <code>Awake</code> æ–¹æ³•å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p><p>æ‰€ä»¥åœ¨è·å– Instance å±æ€§æ—¶ï¼Œå¦‚æœå±æ€§ä¸ºç©ºï¼Œå°±é€šè¿‡ä»£ç åˆ›å»ºä¸€ä¸ªä¸ä¼šé”€æ¯çš„æ¸¸æˆç‰©ä½“ï¼Œå¹¶è‡ªåŠ¨æŒ‚è½½å•ä¾‹ç»„ä»¶ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingletonMonoAuto</span>&lt;<span class="hljs-title">T</span>&gt; : <span class="hljs-title">MonoBehaviour</span> <span class="hljs-keyword">where</span> <span class="hljs-title">T</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">static</span> T instance;  <span class="hljs-comment">// ç§æœ‰é™æ€å®ä¾‹</span><br><br>    <span class="hljs-comment">// å…¬å¼€å®ä¾‹å±æ€§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T Instance<br>    &#123;<br>        <span class="hljs-keyword">get</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>)<br>            &#123;<br>                <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„æ¸¸æˆç‰©ä½“</span><br>                GameObject obj = <span class="hljs-keyword">new</span> GameObject();<br>                <span class="hljs-comment">// æ ¹æ®ç±»å‹è¿›è¡Œé‡å‘½å</span><br>                obj.name = <span class="hljs-keyword">typeof</span>(T).ToString();<br>                <span class="hljs-comment">// è‡ªåŠ¨æŒ‚è½½å•ä¾‹ç»„ä»¶</span><br>                instance = obj.AddComponent&lt;T&gt;();<br>                <span class="hljs-comment">// ä¸å¯é”€æ¯</span><br>                DontDestroyOnLoad(obj);<br>            &#125;<br>            <span class="hljs-comment">// è¿”å›å®ä¾‹</span><br>            <span class="hljs-keyword">return</span> instance;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª <code>UIManager.cs</code> è„šæœ¬ï¼Œç»§æ‰¿ <code>SingletonMonoAuto</code> è¿™ä¸ªç±»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIManager</span> : <span class="hljs-title">SingletonMonoAuto</span>&lt;<span class="hljs-title">UIManager</span>&gt;<br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;åˆå§‹åŒ– UIManager&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ <code>SingletonTest.cs</code> è„šæœ¬ï¼Œç®€å•ä½¿ç”¨ä¸€ä¸‹ <code>UIManager.Instance</code> å•ä¾‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SingletonTest</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> score = GameManager.Instance.score;<br>        Debug.Log(<span class="hljs-string">$&quot;score = <span class="hljs-subst">&#123;score&#125;</span>&quot;</span>);<br><br>        UIManager uiManager = UIManager.Instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼Œå¯ä»¥çœ‹åˆ° <code>UIManager</code> åœ¨ <code>DontDestroyOnLoad</code> åœºæ™¯ä¸­è‡ªåŠ¨åˆ›å»ºã€‚</p><p><img src="/../images/unity-singleton/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å®¢æˆ·ç«¯å¤šå¼€</title>
    <link href="/2024/09/29/unity-client-open-more/"/>
    <url>/2024/09/29/unity-client-open-more/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®ç°å®¢æˆ·ç«¯å¤šå¼€</p><span id="more"></span><h1 id="å®¢æˆ·ç«¯å¤šå¼€"><a href="#å®¢æˆ·ç«¯å¤šå¼€" class="headerlink" title="å®¢æˆ·ç«¯å¤šå¼€"></a>å®¢æˆ·ç«¯å¤šå¼€</h1><p>æœ€è¿‘åœ¨åšå¥½å‹èŠå¤©ç³»ç»Ÿï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œéœ€è¦å†å¼€ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚</p><p>ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥æ‹·è´ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œä½†æ˜¯éœ€è¦å¾ˆå¤šæ—¶é—´å’Œå ç”¨ç©ºé—´ã€‚</p><p>æŸ¥é˜…äº†ç½‘ç»œèµ„æ–™ï¼Œå‘ç°æœ‰ä¸€ç§è½¯é“¾æ¥ï¼Œå¯ä»¥ä»…é€šè¿‡åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå°±èƒ½å®ç°å¤šå¼€ã€‚</p><h2 id="mklink"><a href="#mklink" class="headerlink" title="mklink"></a>mklink</h2><p>æŒ‰ä¸‹ win + R é”®ï¼Œæ‰“å¼€ cmd å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥ <code>mklink</code>ï¼Œå¯ä»¥çœ‹åˆ°å…³äºè¯¥å‘½ä»¤çš„ä¸€äº›å‚æ•°ä»‹ç»ã€‚</p><p><img src="/../images/unity-client-open-more/%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6.png"></p><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>mklink</code> å‘½ä»¤ï¼Œå¯¹ä¸‰ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œè½¯é“¾æ¥ã€‚</p><ul><li>Assets</li><li>Packages</li><li>ProjectSettings</li></ul><p>å¦‚å›¾ï¼Œé«˜äº®çš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ã€‚</p><p><img src="/../images/unity-client-open-more/%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95.png"></p><h2 id="åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹"></a>åˆ›å»ºæ–‡ä»¶å¤¹</h2><p>ç°åœ¨æœ‰ä¸€ä¸ªå·¥ç¨‹ï¼Œè·¯å¾„æ˜¯</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProject<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè·¯å¾„æ˜¯ï¼ˆä¹Ÿå¯ä»¥æ”¾åˆ°åˆ«çš„ç£ç›˜ç›®å½•ï¼‰</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProjectCopy<br></code></pre></td></tr></table></figure><p><img src="/../images/unity-client-open-more/%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥ <code>mklink /j ç›®æ ‡æ–‡ä»¶å¤¹ æºæ–‡ä»¶å¤¹</code></p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">mklink /j C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProjectCopy<span class="hljs-symbol">\A</span>ssets C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProject<span class="hljs-symbol">\A</span>ssets<br></code></pre></td></tr></table></figure><p>æŒ‰ä¸‹å›è½¦é”®åï¼Œæç¤ºåˆ›å»ºäº†è”æ¥ã€‚</p><p><img src="/../images/unity-client-open-more/%E5%88%9B%E5%BB%BA%E8%BD%AF%E9%93%BE%E6%8E%A5.png"></p><p>çœ‹çœ‹ MyProjectCopy çš„æ–‡ä»¶å¤¹ç›®å½•ï¼Œå·²ç»æœ‰ä¸€ä¸ª Assets æ–‡ä»¶å¤¹äº†ï¼Œå¹¶ä¸”å·¦ä¸‹è§’æœ‰ä¸€ä¸ªç±»ä¼¼å¿«æ·æ–¹å¼çš„å›¾æ ‡ï¼Œä½†è·Ÿå¿«æ·æ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p><img src="/../images/unity-client-open-more/%E6%96%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><p>ç»§ç»­è¾“å…¥å‘½ä»¤ï¼Œç›´åˆ°æŠŠä¸‰ä¸ªæ–‡ä»¶å¤¹éƒ½è”æ¥ä¸Šã€‚</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">mklink /j C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProjectCopy<span class="hljs-symbol">\P</span>ackages C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProject<span class="hljs-symbol">\P</span>ackages<br></code></pre></td></tr></table></figure><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">mklink /j C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProjectCopy<span class="hljs-symbol">\P</span>rojectSettings C:<span class="hljs-symbol">\B</span>uild<span class="hljs-symbol">\M</span>yProject<span class="hljs-symbol">\P</span>rojectSettings<br></code></pre></td></tr></table></figure><h2 id="æ‰“å¼€æ–°å·¥ç¨‹"><a href="#æ‰“å¼€æ–°å·¥ç¨‹" class="headerlink" title="æ‰“å¼€æ–°å·¥ç¨‹"></a>æ‰“å¼€æ–°å·¥ç¨‹</h2><p>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨ hub æ‰“å¼€æ–°çš„å·¥ç¨‹ç›®å½•äº†ã€‚</p><p><img src="/../images/unity-client-open-more/%E6%89%93%E5%BC%80%E6%96%B0%E5%B7%A5%E7%A8%8B.png"></p><p>å¦‚å›¾ï¼Œå·²ç»æ‰“å¼€äº†ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯åŒä¸€å¥—èµ„æºä»£ç ã€‚</p><p><img src="/../images/unity-client-open-more/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%8C%E5%BC%80.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ 03 è›‡çš„ç¢°æ’</title>
    <link href="/2024/09/22/unity-pixel-snake-3/"/>
    <url>/2024/09/22/unity-pixel-snake-3/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ ç¬¬ä¸‰æœŸ è›‡çš„ç¢°æ’ï¼ˆå®Œç»“ï¼‰</p><span id="more"></span><h1 id="åƒç´ è´ªåƒè›‡"><a href="#åƒç´ è´ªåƒè›‡" class="headerlink" title="åƒç´ è´ªåƒè›‡"></a>åƒç´ è´ªåƒè›‡</h1><h2 id="ç¢°æ’è›‡èº«"><a href="#ç¢°æ’è›‡èº«" class="headerlink" title="ç¢°æ’è›‡èº«"></a>ç¢°æ’è›‡èº«</h2><p>å½“è›‡å¤´ç¢°æ’åˆ°è›‡èº«æ—¶ï¼Œæ¸¸æˆåº”è¯¥åˆ¤å®šä¸ºå¤±è´¥ã€‚</p><p>æ‰¾åˆ°è›‡èº«é¢„åˆ¶ä½“ï¼Œæ·»åŠ  Body æ ‡ç­¾å’Œç¢°æ’ä½“ï¼Œç¢°æ’ä½“çš„å¤§å°ä¸º 0.5ï¼Œè·Ÿè›‡å¤´å’Œè›‡èº«çš„ç¢°æ’ä½“èŒƒå›´ä¸€æ ·ï¼Œé¿å…å› ç¢°æ’èŒƒå›´è¿‡å¤§è€Œäº§ç”Ÿé”™è¯¯çš„ç¢°æ’æ•ˆæœã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E6%B7%BB%E5%8A%A0%E8%9B%87%E8%BA%AB%E6%A0%87%E7%AD%BE.png"></p><p>ä¿®æ”¹ä¸€ä¸‹ OnTriggerEnter2D æ–¹æ³•ï¼Œåˆ¤æ–­ç¢°æ’åˆ° Body æ ‡ç­¾çš„ç‰©ä½“ï¼Œåˆ¤å®šæ¸¸æˆå¤±è´¥ï¼Œè›‡åœæ­¢ç§»åŠ¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Food&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Body&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// å–æ¶ˆå®šæ—¶å™¨</span><br>            CancelInvoke(<span class="hljs-keyword">nameof</span>(Move));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæ­¤æ—¶è¿è¡Œæ¸¸æˆï¼Œä¼šå‘ç°è›‡ä¸€å¼€å§‹å°±ä¸åŠ¨äº†ã€‚å› ä¸ºä¹‹å‰åˆå§‹ç”Ÿæˆèº«ä½“æ—¶ï¼Œéƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”Ÿæˆï¼Œä¸€å¼€å§‹å°±ä¼šç¢°æ’è›‡èº«ã€‚</p><p>ä¿®æ”¹ä¸€ä¸‹ä¹‹å‰çš„é€»è¾‘ï¼Œè®©åˆå§‹ç”Ÿæˆçš„è›‡èº«åç§»ä½ç½®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    Vector2 initPos;  <span class="hljs-comment">// åˆå§‹ä½ç½®</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        initPos = transform.position;<br><br>        <span class="hljs-comment">// åˆå§‹ç”Ÿæˆèº«ä½“</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; initBodyCount; i++)<br>        &#123;<br>            GenerateBody(<span class="hljs-literal">true</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GenerateBody</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> isInit = <span class="hljs-literal">false</span></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(body);<br><br>        <span class="hljs-comment">// åˆå§‹ç”Ÿæˆ</span><br>        <span class="hljs-keyword">if</span> (isInit)<br>        &#123;<br>            obj.transform.position = initPos + Vector2.left;<br>            initPos = obj.transform.position;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-comment">// å·²æœ‰èº«ä½“</span><br>            <span class="hljs-keyword">if</span> (bodyList.Count &gt; <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-comment">// è·å–æœ€åä¸€ä¸ªèº«ä½“ï¼Œåœ¨å®ƒçš„ä½ç½®ç”Ÿæˆ</span><br>                GameObject lastBody = bodyList[bodyList.Count - <span class="hljs-number">1</span>];<br>                obj.transform.position = lastBody.transform.position;<br>            &#125;<br>            <span class="hljs-comment">// æ²¡æœ‰èº«ä½“</span><br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-comment">// ä»¥è›‡å¤´çš„ä½ç½®ç”Ÿæˆèº«ä½“</span><br>                obj.transform.position = transform.position;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨è¿è¡Œæ¸¸æˆï¼Œè›‡èº«çš„åˆå§‹ä½ç½®å°±ä¸ä¼šè·Ÿè›‡å¤´é‡å äº†ã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E5%88%9D%E5%A7%8B%E4%BD%8D%E7%BD%AE.png"></p><p>å¦å¤–ï¼Œè›‡å¤´çš„å±‚çº§ä¹Ÿè¦è°ƒæ•´ä¸€ä¸‹ï¼Œå½“è›‡å¤´ä¸è›‡èº«é‡å æ—¶ï¼Œè®©è›‡å¤´èƒ½å¤Ÿæ˜¾ç¤ºåœ¨è›‡èº«ä¹‹ä¸Šã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E8%B0%83%E6%95%B4%E5%B1%82%E7%BA%A7.png"></p><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-3/%E8%9B%87%E5%A4%B4%E7%A2%B0%E6%92%9E%E8%9B%87%E8%BA%AB.gif"></p><h2 id="æ·»åŠ å¢™å£"><a href="#æ·»åŠ å¢™å£" class="headerlink" title="æ·»åŠ å¢™å£"></a>æ·»åŠ å¢™å£</h2><p>åˆ›å»ºå››ä¸ªæ­£æ–¹å½¢ï¼Œè°ƒæ•´ç¼©æ”¾å’Œä½ç½®ï¼Œè°ƒæ•´é¢œè‰²ï¼Œåˆ†åˆ«å¸ƒç½®åœ¨ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ã€‚</p><p>å› ä¸ºè›‡çš„ç§»åŠ¨èŒƒå›´ï¼Œåœ¨ X è½´æ˜¯ <code>[-8, 8]</code>ï¼Œåœ¨ Y è½´æ˜¯ <code>[-4, 4]</code>ï¼Œæ‰€ä»¥å·¦å³çš„å¢™å£åˆ†åˆ«æ”¾ç½®åœ¨ X è½´çš„ -9 å’Œ 9 çš„ä½ç½®ï¼Œä¸Šä¸‹çš„å¢™å£åˆ†åˆ«æ”¾ç½®åœ¨ Y è½´çš„ 5 å’Œ -5 çš„ä½ç½®ã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E5%B8%83%E7%BD%AE%E5%A2%99%E5%A3%81.png"></p><p>ç„¶åç»™å¢™å£ä¹Ÿæ·»åŠ æ ‡ç­¾ Wallï¼Œå¹¶ä¸”è¦æ·»åŠ ç¢°æ’ä½“ï¼Œç¢°æ’ä½“çš„å¤§å°ä¿æŒé»˜è®¤çš„ 1 å³å¯ã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E6%B7%BB%E5%8A%A0%E5%A2%99%E5%A3%81%E6%A0%87%E7%AD%BE.png"></p><p>åœ¨ä»£ç ä¸­ä¹Ÿæ·»åŠ ç¢°æ’å¢™å£çš„é€»è¾‘ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Food&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Body&quot;</span>) || other.CompareTag(<span class="hljs-string">&quot;Wall&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// å–æ¶ˆå®šæ—¶å™¨</span><br>            CancelInvoke(<span class="hljs-keyword">nameof</span>(Move));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-3/%E8%9B%87%E5%A4%B4%E7%A2%B0%E6%92%9E%E5%A2%99%E5%A3%81.gif"></p><h2 id="æ¸¸æˆå¤±è´¥"><a href="#æ¸¸æˆå¤±è´¥" class="headerlink" title="æ¸¸æˆå¤±è´¥"></a>æ¸¸æˆå¤±è´¥</h2><h3 id="æ˜¾ç¤ºå¤±è´¥ç•Œé¢"><a href="#æ˜¾ç¤ºå¤±è´¥ç•Œé¢" class="headerlink" title="æ˜¾ç¤ºå¤±è´¥ç•Œé¢"></a>æ˜¾ç¤ºå¤±è´¥ç•Œé¢</h3><p>ç®€å•æ­å»ºä¸€ä¸ªæ¸¸æˆå¤±è´¥ç•Œé¢ã€‚</p><p><img src="/../images/unity-pixel-snake-3/%E6%B8%B8%E6%88%8F%E5%A4%B1%E8%B4%A5%E7%95%8C%E9%9D%A2.png"></p><p>åˆ›å»ºä¸€ä¸ª <code>UIGameOver.cs</code> è„šæœ¬ï¼Œå¼•ç”¨å‘½åç©ºé—´ <code>UnityEngine.UI</code>ï¼Œå®šä¹‰ UI ç»„ä»¶å˜é‡ï¼Œæ‹–æ‹½å¼•ç”¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIGameOver</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Button btnRestart;<br>    <span class="hljs-keyword">public</span> CanvasGroup canvasGroup;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/../images/unity-pixel-snake-3/%E6%8B%96%E6%8B%BD%E5%BC%95%E7%94%A8.png"></p><p>åˆ›å»ºä¸€ä¸ª <code>GameManager.cs</code> è„šæœ¬ï¼Œå¼•ç”¨å‘½åç©ºé—´ <code>System</code>ï¼Œåˆ›å»ºå•ä¾‹ã€‚</p><p>å®šä¹‰ä¸€ä¸ª <code>Action</code> äº‹ä»¶ <code>showGameOver</code>ï¼Œå¸¦ä¸€ä¸ªå¸ƒå°”å€¼å‚æ•°ï¼Œå¹¶å¯¹å¤–æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè§¦å‘äº‹ä»¶ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GameManager instance;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> Action&lt;<span class="hljs-built_in">bool</span>&gt; showGameOver;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>)<br>        &#123;<br>            instance = <span class="hljs-keyword">this</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            Destroy(gameObject);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TriggerGameOver</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> isShow</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        showGameOver.Invoke(isShow);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç•Œé¢è„šæœ¬æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œæ ¹æ®æ˜¯å¦æ˜¾ç¤ºç•Œé¢ï¼Œä¿®æ”¹ <code>canvasGroup</code> çš„å‚æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIGameOver</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Button btnRestart;<br>    <span class="hljs-keyword">public</span> CanvasGroup canvasGroup;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameManager.instance.showGameOver += (isShow) =&gt;<br>        &#123;<br>            canvasGroup.alpha = isShow ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>            canvasGroup.blocksRaycasts = isShow;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“è›‡ç¢°æ’æ—¶ï¼Œè§¦å‘äº‹ä»¶æ˜¾ç¤ºæ¸¸æˆå¤±è´¥ç•Œé¢ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Food&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Body&quot;</span>) || other.CompareTag(<span class="hljs-string">&quot;Wall&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// å–æ¶ˆå®šæ—¶å™¨</span><br>            CancelInvoke(<span class="hljs-keyword">nameof</span>(Move));<br>            <span class="hljs-comment">// æ˜¾ç¤ºæ¸¸æˆå¤±è´¥ç•Œé¢</span><br>            GameManager.instance.TriggerGameOver(<span class="hljs-literal">true</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-3/%E6%98%BE%E7%A4%BA%E6%B8%B8%E6%88%8F%E5%A4%B1%E8%B4%A5.gif"></p><h3 id="é‡å¼€æ¸¸æˆ"><a href="#é‡å¼€æ¸¸æˆ" class="headerlink" title="é‡å¼€æ¸¸æˆ"></a>é‡å¼€æ¸¸æˆ</h3><p>åœ¨ <code>UIGameOver.cs</code> è„šæœ¬ä¸Šæ·»åŠ æŒ‰é’®äº‹ä»¶ï¼Œéšè—å¤±è´¥ç•Œé¢ï¼Œé‡æ–°å¼€å§‹æ¸¸æˆã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIGameOver</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Button btnRestart;<br>    <span class="hljs-keyword">public</span> CanvasGroup canvasGroup;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        btnRestart.onClick.AddListener(()=&gt;<br>        &#123;<br>            GameManager.instance.TriggerGameOver(<span class="hljs-literal">false</span>);<br>            GameManager.instance.RestartGame();<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ <code>GameManager.cs</code> è„šæœ¬ä¸Šæ·»åŠ é‡å¼€æ¸¸æˆçš„äº‹ä»¶å’Œè§¦å‘æ¥å£ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">//...</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> Action restartGame;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RestartGame</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        restartGame.Invoke();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ <code>FoodManager.cs</code> è„šæœ¬ä¸Šæ·»åŠ é‡ç½®ç½‘æ ¼æ¥å£ï¼ŒåŒæ—¶å®šä¹‰ä¸€ä¸ªå˜é‡è®°å½•å½“å‰ç”Ÿæˆçš„é£Ÿç‰©ï¼Œåœ¨é‡ç½®ç½‘æ ¼æ—¶é”€æ¯å½“å‰é£Ÿç‰©ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-keyword">public</span> GameObject currentFood;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateFood</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        currentFood = obj;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ResetGrid</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        gridList.Clear();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; rowMax; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; colMax; j++)<br>            &#123;<br>                gridList.Add(<span class="hljs-keyword">new</span> Vector3(borderLeft + j, borderTop - i, <span class="hljs-number">0</span>));<br>            &#125;<br>        &#125;<br>        Destroy(currentFood);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œåœ¨ <code>Snake.cs</code> è„šæœ¬ä¸Šæ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œé‡ç½®ç½‘æ ¼ã€è›‡å¤´ã€è›‡èº«ã€é£Ÿç‰©ï¼Œæœ€åå†æ¬¡å¼€å¯å®šæ—¶å™¨ï¼Œè®©è›‡å¤´é‡æ–°å¼€å§‹ç§»åŠ¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <br>        <span class="hljs-comment">// é‡å¼€æ¸¸æˆï¼Œé‡ç½®æ¸¸æˆç‰©ä½“</span><br>        GameManager.instance.restartGame += ()=&gt;<br>        &#123;<br>            <span class="hljs-comment">// é‡ç½®ç½‘æ ¼</span><br>            FoodManager.instance.ResetGrid();<br><br>            <span class="hljs-comment">// é”€æ¯è›‡èº«</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; bodyList.Count; i++)<br>            &#123;<br>                Destroy(bodyList[i]);<br>            &#125;<br>            bodyList.Clear();<br><br>            <span class="hljs-comment">// é‡ç½®è›‡å¤´ä½ç½®å’Œæ–¹å‘</span><br>            transform.position = Vector3.zero;<br>            FoodManager.instance.MarkGridList(transform.position, <span class="hljs-literal">true</span>);<br>            direction = Vector2.right;<br>            lastDirection = Vector2.right;<br>            firstDirection = Vector2.right;<br><br>            initPos = transform.position;<br><br>            <span class="hljs-comment">// åˆå§‹ç”Ÿæˆèº«ä½“</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; initBodyCount; i++)<br>            &#123;<br>                GenerateBody(<span class="hljs-literal">true</span>);<br>            &#125;<br><br>            <span class="hljs-comment">// åˆå§‹ç”Ÿæˆé£Ÿç‰©</span><br>            FoodManager.instance.GenerateFood();<br><br>            <span class="hljs-comment">// é‡æ–°å¼€å§‹ç§»åŠ¨</span><br>            InvokeRepeating(<span class="hljs-keyword">nameof</span>(Move), time, time);<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-3/%E9%87%8D%E5%BC%80%E6%B8%B8%E6%88%8F.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ 02 è›‡çš„è§…é£Ÿ</title>
    <link href="/2024/09/15/unity-pixel-snake-2/"/>
    <url>/2024/09/15/unity-pixel-snake-2/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ ç¬¬äºŒæœŸ è›‡çš„è§…é£Ÿ</p><span id="more"></span><h1 id="åƒç´ è´ªåƒè›‡"><a href="#åƒç´ è´ªåƒè›‡" class="headerlink" title="åƒç´ è´ªåƒè›‡"></a>åƒç´ è´ªåƒè›‡</h1><h2 id="é£Ÿç‰©ç”Ÿæˆ"><a href="#é£Ÿç‰©ç”Ÿæˆ" class="headerlink" title="é£Ÿç‰©ç”Ÿæˆ"></a>é£Ÿç‰©ç”Ÿæˆ</h2><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ª 2D æ­£æ–¹å½¢ï¼Œè°ƒæ•´é¢œè‰²ï¼Œæ·»åŠ  Tag å¹¶ä¿®æ”¹ä¸º Foodã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E5%88%9B%E5%BB%BA%E9%A3%9F%E7%89%A9.png"></p><p>ç„¶åæ‹–æ‹½åˆ° Assets æ–‡ä»¶å¤¹ä¸­å˜æˆé¢„åˆ¶ä½“ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>åˆ›å»ºé£Ÿç‰©ç®¡ç†å™¨ <code>FoodManager.cs</code>ï¼Œæ·»åŠ å•ä¾‹ï¼Œå¯ä»¥è®¾ç½®é£Ÿç‰©ç”Ÿæˆçš„åæ ‡èŒƒå›´ï¼Œæä¾›ç”Ÿæˆä¸€ä¸ªé£Ÿç‰©çš„æ–¹æ³•ã€‚</p><p>å› ä¸º <code>Random.Range</code> çš„å–å€¼èŒƒå›´æ˜¯ <code>[min, max)</code>ï¼Œä¸ºäº†å–åˆ° max çš„å€¼ï¼Œéœ€è¦ç»™å³è¾¹ç•ŒåŠ ä¸€ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> FoodManager instance;<br><br>    <span class="hljs-keyword">public</span> GameObject food;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> borderLeft = <span class="hljs-number">-8</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> borderRight = <span class="hljs-number">8</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> borderTop = <span class="hljs-number">4</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> borderBottom = <span class="hljs-number">-4</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>)<br>        &#123;<br>            instance = <span class="hljs-keyword">this</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            Destroy(gameObject);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆå§‹ç”Ÿæˆä¸€ä¸ªé£Ÿç‰©</span><br>        GenerateFood();<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç”Ÿæˆé£Ÿç‰©</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateFood</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(food, transform);<br>        <span class="hljs-built_in">int</span> x = Random.Range(borderLeft, borderRight + <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">int</span> y = Random.Range(borderBottom, borderTop + <span class="hljs-number">1</span>);<br>        obj.transform.position = <span class="hljs-keyword">new</span> Vector3(x, y, <span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºèŠ‚ç‚¹ï¼ŒæŒ‚ä¸Šè„šæœ¬ï¼Œæ‹–æ‹½å¼•ç”¨ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E9%A3%9F%E7%89%A9%E7%AE%A1%E7%90%86%E5%99%A8.png"></p><p>è¿è¡Œæ¸¸æˆï¼Œå¯ä»¥çœ‹åˆ°åœºæ™¯ä¸­ç”Ÿæˆäº†ä¸€ä¸ªé£Ÿç‰©ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E9%A3%9F%E7%89%A9.png"></p><h2 id="åƒæ‰é£Ÿç‰©"><a href="#åƒæ‰é£Ÿç‰©" class="headerlink" title="åƒæ‰é£Ÿç‰©"></a>åƒæ‰é£Ÿç‰©</h2><p>ç»™é£Ÿç‰©çš„é¢„åˆ¶ä½“æ·»åŠ ç¢°æ’ä½“ï¼Œå‹¾é€‰ <code>Is Trigger</code>ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E6%B7%BB%E5%8A%A0%E7%A2%B0%E6%92%9E%E4%BD%93.png"></p><p>åŒæ ·ï¼Œè›‡å¤´ä¹Ÿè¦æ·»åŠ ç¢°æ’ä½“ï¼Œè¿˜è¦å†æ·»åŠ ä¸€ä¸ªåˆšä½“ï¼Œ<code>Body Type</code> è®¾ç½®ä¸º <code>Kinematic</code>ï¼Œä¸éœ€è¦å—åˆ°é‡åŠ›å½±å“ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E6%B7%BB%E5%8A%A0%E5%88%9A%E4%BD%93.png"></p><p>åœ¨ <code>Snake.cs</code> ä¸­æ·»åŠ ç¢°æ’å‡½æ•°ï¼Œåˆ¤æ–­ç¢°æ’ç‰©ä½“çš„æ ‡ç­¾æ˜¯ Foodï¼Œå°±é”€æ¯é£Ÿç‰©ï¼Œç”Ÿæˆæ–°çš„è›‡èº«ï¼Œå¹¶ç”Ÿæˆä¸‹ä¸€ä¸ªé£Ÿç‰©ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter2D</span>(<span class="hljs-params">Collider2D other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">&quot;Food&quot;</span>))<br>        &#123;<br>            Destroy(other.gameObject);<br>            GenerateBody();<br>            FoodManager.instance.GenerateFood();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œæ¸¸æˆï¼Œè›‡å¤´å¯ä»¥åƒæ‰é£Ÿç‰©äº†ã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å€™è›‡å¤´è¿˜æœªåˆ°è¾¾é£Ÿç‰©çš„ä½ç½®ï¼Œé£Ÿç‰©å°±è¢«åƒæ‰äº†ï¼Œç”šè‡³è›‡å¤´åªæ˜¯ç»è¿‡é£Ÿç‰©çš„é™„è¿‘ï¼Œé£Ÿç‰©ä¹Ÿæ¶ˆå¤±äº†ã€‚è¿™æ˜¯å› ä¸ºç¢°æ’ä½“çš„èŒƒå›´é—®é¢˜ï¼Œé»˜è®¤çš„ Size æ˜¯ <code>(1, 1)</code>ï¼Œå¯ä»¥ç¨å¾®è°ƒå°ä¸€äº›ï¼Œä¾‹å¦‚ <code>(0.5, 0.5)</code>ã€‚</p><p><img src="/../images/unity-pixel-snake-2/%E8%B0%83%E6%95%B4%E7%A2%B0%E6%92%9E%E4%BD%93%E5%A4%A7%E5%B0%8F.png"></p><p>è°ƒæ•´åçš„æ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-2/%E5%90%83%E6%8E%89%E9%A3%9F%E7%89%A9.gif"></p><h2 id="é£Ÿç‰©ä½ç½®"><a href="#é£Ÿç‰©ä½ç½®" class="headerlink" title="é£Ÿç‰©ä½ç½®"></a>é£Ÿç‰©ä½ç½®</h2><p>ç›®å‰åœºæ™¯èŒƒå›´é€‚ä¸­ï¼Œç”Ÿæˆçš„é£Ÿç‰©éƒ½åœ¨ç©ºåœ°ï¼Œä½†æ˜¯å½“è›‡è¶Šæ¥è¶Šé•¿çš„æ—¶å€™ï¼Œä¼šå‘ç°é£Ÿç‰©ç”Ÿæˆçš„ä½ç½®æœ‰å¯èƒ½åœ¨è›‡çš„èº«ä¸Šã€‚</p><p>æˆ‘ä»¬åº”è¯¥è®©é£Ÿç‰©å§‹ç»ˆéƒ½åœ¨ç©ºåœ°ç”Ÿæˆã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºä¸€ä¸ªåæ ‡æ˜¯å¦ä¸ºç©ºåœ°ï¼Œå°±éœ€è¦åšä¸€äº›æ ‡è®°ã€‚</p><h3 id="ç½‘æ ¼"><a href="#ç½‘æ ¼" class="headerlink" title="ç½‘æ ¼"></a>ç½‘æ ¼</h3><p>ç›®å‰é£Ÿç‰©ç”Ÿæˆçš„åæ ‡å–å€¼èŒƒå›´ï¼Œåœ¨ X è½´æ˜¯ <code>[-8, 8]</code>ï¼Œåœ¨ Y è½´æ˜¯ <code>[-4, 4]</code>ã€‚</p><p>å¦‚æœæŠŠè¿™äº›åæ ‡ç‚¹çœ‹æˆæ˜¯ä¸€ä¸ªç½‘æ ¼ï¼Œå¯ä»¥æŒ‰ç…§è¡Œåˆ—æ¥çœ‹ã€‚</p><p>å·¦ä¸Šè§’æ˜¯ <code>(-8, 4)</code>ï¼Œæ˜¯ç¬¬ 0 è¡Œï¼Œç¬¬ 0 åˆ—ï¼Œç´¢å¼•ä¸º 0ã€‚</p><p>å³ä¸Šè§’æ˜¯ <code>(8, 4)</code>ï¼Œæ˜¯ç¬¬ 0 è¡Œï¼Œç¬¬ 16 åˆ—ï¼Œç´¢å¼•ä¸º 16ã€‚</p><p>å·¦ä¸‹è§’æ˜¯ <code>(-8, -4)</code>ï¼Œæ˜¯ç¬¬ 8 è¡Œï¼Œç¬¬ 0 åˆ—ï¼Œç´¢å¼•ä¸º 136ã€‚</p><p>å³ä¸‹è§’æ˜¯ <code>(8, -4)</code>ï¼Œæ˜¯ç¬¬ 8 è¡Œï¼Œç¬¬ 16 åˆ—ï¼Œç´¢å¼•ä¸º 152ã€‚</p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œçš„ç´¢å¼•æ˜¯ä»ç¬¬ 0 è¡Œå¼€å§‹ï¼Œä»å·¦åˆ°å³é€’å¢ã€‚è¡Œæ•°å¢åŠ æ—¶ï¼Œç´¢å¼•ç»§ç»­è®¡æ•°ã€‚</p></blockquote><p><img src="/../images/unity-pixel-snake-2/%E7%BD%91%E6%A0%BC.png"></p><h3 id="ç½‘æ ¼åˆ—è¡¨"><a href="#ç½‘æ ¼åˆ—è¡¨" class="headerlink" title="ç½‘æ ¼åˆ—è¡¨"></a>ç½‘æ ¼åˆ—è¡¨</h3><p>åœ¨ <code>FoodManager.cs</code> ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª <code>Vector3</code> åˆ—è¡¨ï¼ŒX å’Œ Y è®°å½•åæ ‡ï¼ŒZ è®°å½•æ˜¯å¦ç©ºåœ°ï¼ˆ0 è¡¨ç¤ºç©ºåœ°ï¼Œ1 è¡¨ç¤ºæœ‰ç‰©ä½“å ç”¨ï¼‰ã€‚</p><p>è¿™é‡Œæ€»è¡Œæ•°æ˜¯ä¸Šè¾¹ç•Œå‡å»ä¸‹è¾¹ç•Œï¼Œè¿˜è¦åŠ ä¸Šä¸€ä¸ªç«¯ç‚¹ï¼Œæ€»å…± 9 è¡Œã€‚</p><p>æ€»åˆ—æ•°æ˜¯å³è¾¹ç•Œå‡å»å·¦è¾¹ç•Œï¼Œè¿˜è¦åŠ ä¸Šä¸€ä¸ªç«¯ç‚¹ï¼Œæ€»å…± 17 åˆ—ã€‚</p><p>æ ¹æ®è¡Œåˆ—æ•°ï¼Œä¾æ¬¡æ·»åŠ  <code>Vector3</code> åˆ°åˆ—è¡¨ä¸­ï¼ŒZ é»˜è®¤æ˜¯ 0ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> List&lt;Vector3&gt; gridList;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> rowMax = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> colMax = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        rowMax = borderTop - borderBottom + <span class="hljs-number">1</span>;<br>        colMax = borderRight - borderLeft + <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; rowMax; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; colMax; j++)<br>            &#123;<br>                gridList.Add(<span class="hljs-keyword">new</span> Vector3(borderLeft + j, borderTop - i, <span class="hljs-number">0</span>));<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæä¾›ä¸€ä¸ªæ ‡è®°ç½‘æ ¼åˆ—è¡¨çš„æ–¹æ³•ï¼ŒæŠŠä¼ å…¥çš„åæ ‡è½¬æˆ intï¼Œåˆ¤æ–­è¾¹ç•Œï¼Œæ¢ç®—è¡Œåˆ—ï¼Œè®¡ç®—ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•ä»ç½‘æ ¼åˆ—è¡¨ä¸­å–å‡ºä¸€ä¸ªç½‘æ ¼ç‚¹ï¼Œæ›´æ–°æ ‡è®°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ ‡è®°ç½‘æ ¼åˆ—è¡¨</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;pos&quot;&gt;</span>åæ ‡ä½ç½®<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;flag&quot;&gt;</span>æ ‡è®°<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">MarkGridList</span>(<span class="hljs-params">Vector3 pos, <span class="hljs-built_in">bool</span> flag</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> x = (<span class="hljs-built_in">int</span>)pos.x;<br>        <span class="hljs-built_in">int</span> y = (<span class="hljs-built_in">int</span>)pos.y;<br><br>        <span class="hljs-comment">// åæ ‡è¶…å‡ºè¾¹ç•Œ</span><br>        <span class="hljs-keyword">if</span> (x &lt; borderLeft || x &gt; borderRight) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">if</span> (y &lt; borderBottom || y &gt; borderTop) <span class="hljs-keyword">return</span>;<br><br>        <span class="hljs-comment">// æ¢ç®—è¡Œåˆ—</span><br>        <span class="hljs-built_in">int</span> row = borderTop - y;<br>        <span class="hljs-built_in">int</span> col = x - borderLeft;<br><br>        <span class="hljs-comment">// è®¡ç®—ç´¢å¼•</span><br>        <span class="hljs-built_in">int</span> index = col + row * colMax;<br><br>        <span class="hljs-comment">// ç´¢å¼•è¶…å‡ºè¾¹ç•Œ</span><br>        <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt; gridList.Count - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br><br>        <span class="hljs-comment">// å–å‡ºç½‘æ ¼ç‚¹ï¼Œæ ‡è®°æ˜¯å¦ç©ºåœ°</span><br>        Vector3 grid = gridList[index];<br>        grid.z = flag ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// æ›´æ–°ç½‘æ ¼ç‚¹</span><br>        gridList[index] = grid;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ ‡è®°ç½‘æ ¼"><a href="#æ ‡è®°ç½‘æ ¼" class="headerlink" title="æ ‡è®°ç½‘æ ¼"></a>æ ‡è®°ç½‘æ ¼</h3><p>åœ¨æ¸¸æˆå¼€å§‹æ—¶ï¼Œè›‡å¤´ä¼šå ç”¨ä¸€ä¸ªç½‘æ ¼ï¼Œç”Ÿæˆçš„èº«ä½“ä¹Ÿéœ€è¦æ ‡è®°ç½‘æ ¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆå§‹ç”Ÿæˆèº«ä½“</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; initBodyCount; i++)<br>        &#123;<br>            GenerateBody();<br>        &#125;<br><br>        FoodManager.instance.MarkGridList(transform.position, <span class="hljs-literal">true</span>);<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GenerateBody</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(body);<br><br>        <span class="hljs-comment">// ...</span><br><br>        FoodManager.instance.MarkGridList(obj.transform.position, <span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è›‡çš„ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¦åŠ¨æ€åœ°æ ‡è®°ç½‘æ ¼ã€‚</p><p>è›‡å¤´å’Œèº«ä½“ç§»åŠ¨åéƒ½è¦æ ‡è®°ç½‘æ ¼å·²ç»è¢«å ç”¨ï¼Œåªæœ‰åœ¨æœ€åä¸€ä¸ªèº«ä½“ç§»åŠ¨å‰ï¼Œæ ‡è®°å½“å‰ç½‘æ ¼ä½ç½®ä¸ºç©ºåœ°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-comment">// ç§»åŠ¨å‰ï¼Œå…ˆæ ‡è®°æ—§çš„ä½ç½®</span><br>        posMarkFirst = transform.position;<br>        transform.Translate(direction);<br><br>        <span class="hljs-comment">// æ ‡è®°è›‡å¤´ç§»åŠ¨åçš„ç½‘æ ¼ä½ç½®</span><br>        FoodManager.instance.MarkGridList(transform.position, <span class="hljs-literal">true</span>);<br><br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; bodyList.Count; i++)<br>        &#123;<br>            <span class="hljs-comment">// æœ€åä¸€ä¸ªèº«ä½“ç§»åŠ¨å‰ï¼Œæ ‡è®°å½“å‰ç½‘æ ¼ä½ç½®ä¸ºç©ºåœ°</span><br>            <span class="hljs-keyword">if</span> (i == bodyList.Count - <span class="hljs-number">1</span>)<br>            &#123;<br>                FoodManager.instance.MarkGridList(bodyList[i].transform.position, <span class="hljs-literal">false</span>);<br>            &#125;<br><br>            <span class="hljs-comment">// ...</span><br><br>            <span class="hljs-comment">// æ¯ä¸ªèº«ä½“ç§»åŠ¨åï¼Œæ ‡è®°å½“å‰ç½‘æ ¼ä½ç½®</span><br>            FoodManager.instance.MarkGridList(bodyList[i].transform.position, <span class="hljs-literal">true</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é£Ÿç‰©ä¹Ÿä¼šå ç”¨ç½‘æ ¼ï¼Œæ¯æ¬¡ç”Ÿæˆé£Ÿç‰©æ—¶ï¼Œä¹Ÿè¦æ ‡è®°ç½‘æ ¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateFood</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(food, transform);<br>        <span class="hljs-built_in">int</span> x = Random.Range(borderLeft, borderRight + <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">int</span> y = Random.Range(borderBottom, borderTop + <span class="hljs-number">1</span>);<br>        obj.transform.position = <span class="hljs-keyword">new</span> Vector3(x, y, <span class="hljs-number">0</span>);<br>        <br>        <span class="hljs-comment">// æ ‡è®°é£Ÿç‰©å ç”¨çš„ç½‘æ ¼ä½ç½®</span><br>        MarkGridList(obj.transform.position, <span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç­›é€‰ç©ºåœ°"><a href="#ç­›é€‰ç©ºåœ°" class="headerlink" title="ç­›é€‰ç©ºåœ°"></a>ç­›é€‰ç©ºåœ°</h3><p>åœ¨é£Ÿç‰©ç”Ÿæˆæ—¶ï¼Œä¸èƒ½å•çº¯ç”¨éšæœºæ•°æ¥ç¡®å®šåæ ‡ä½ç½®ï¼Œè€Œæ˜¯è¦ä»ç½‘æ ¼åˆ—è¡¨ä¸­ï¼Œç­›é€‰æœªè¢«å ç”¨çš„ç½‘æ ¼ç‚¹ï¼Œç„¶åä»è¿™äº›ç½‘æ ¼ç‚¹ä¸­éšæœºå–å‡ºä¸€ä¸ªä½ç½®ã€‚</p><p>å®šä¹‰ä¸€ä¸ª <code>filterList</code>ï¼Œç”¨æ¥å­˜å‚¨ç­›é€‰åçš„ç½‘æ ¼ç‚¹ã€‚</p><p>æ¯æ¬¡ç”Ÿæˆé£Ÿç‰©æ—¶ï¼Œéœ€è¦å…ˆæ¸…ç† <code>filterList</code>ï¼Œç„¶åä»ç½‘æ ¼åˆ—è¡¨ä¸­ï¼Œç­›é€‰ Z ä¸º 0ï¼ˆè¡¨ç¤ºæœªè¢«å ç”¨ï¼‰çš„ç½‘æ ¼ç‚¹ï¼Œæ·»åŠ åˆ°ç­›é€‰åˆ—è¡¨ä¸­ã€‚</p><p>ç„¶åå†ç”Ÿæˆéšæœºæ•°ï¼Œä»ç­›é€‰åˆ—è¡¨ä¸­å–å‡ºç½‘æ ¼ç‚¹ï¼Œèµ‹å€¼ä½ç½®ç»™ç”Ÿæˆçš„é£Ÿç‰©ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FoodManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> List&lt;Vector3&gt; filterList;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateFood</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ¸…ç†ç­›é€‰åˆ—è¡¨</span><br>        filterList.Clear();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; gridList.Count; i++)<br>        &#123;<br>            <span class="hljs-comment">// ç­›é€‰æœªè¢«å ç”¨çš„ç½‘æ ¼ç‚¹</span><br>            <span class="hljs-keyword">if</span> (gridList[i].z == <span class="hljs-number">0</span>)<br>            &#123;<br>                filterList.Add(gridList[i]);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// æ²¡æœ‰ç©ºåœ°äº†</span><br>        <span class="hljs-keyword">if</span> (filterList.Count == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>        <span class="hljs-comment">// éšæœºå–å‡ºä¸€ä¸ªç©ºåœ°</span><br>        <span class="hljs-built_in">int</span> index = Random.Range(<span class="hljs-number">0</span>, filterList.Count);<br>        Vector3 pos = filterList[index];<br><br>        GameObject obj = Instantiate(food, transform);<br>        <span class="hljs-comment">// int x = Random.Range(borderLeft, borderRight + 1);</span><br>        <span class="hljs-comment">// int y = Random.Range(borderBottom, borderTop + 1);</span><br>        <span class="hljs-comment">// obj.transform.position = new Vector3(x, y, 0);</span><br>        obj.transform.position = pos;<br><br>        <span class="hljs-comment">// æ ‡è®°é£Ÿç‰©å ç”¨çš„ç½‘æ ¼ä½ç½®</span><br>        MarkGridList(obj.transform.position, <span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå½“è›‡èº«è¶Šæ¥è¶Šé•¿æ—¶ï¼Œä¹Ÿä¸ä¼šå‡ºç°é£Ÿç‰©ç”Ÿæˆåœ¨è›‡èº«ä¸Šçš„æƒ…å†µäº†ã€‚</p><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-pixel-snake-2/%E9%A3%9F%E7%89%A9%E4%BD%8D%E7%BD%AE.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ 01 è›‡çš„ç§»åŠ¨</title>
    <link href="/2024/09/08/unity-pixel-snake-1/"/>
    <url>/2024/09/08/unity-pixel-snake-1/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å°æ¡ˆä¾‹ åƒç´ è´ªåƒè›‡ ç¬¬ä¸€æœŸ è›‡çš„ç§»åŠ¨</p><span id="more"></span><h1 id="åƒç´ è´ªåƒè›‡"><a href="#åƒç´ è´ªåƒè›‡" class="headerlink" title="åƒç´ è´ªåƒè›‡"></a>åƒç´ è´ªåƒè›‡</h1><p>ä»Šå¤©æ¥ç®€å•åˆ¶ä½œä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œç»å…¸çš„åƒç´ è´ªåƒè›‡ã€‚</p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>é¦–å…ˆè°ƒæ•´ä¸€ä¸‹ç›¸æœºçš„è®¾ç½®ï¼Œè¿™é‡Œä½¿ç”¨ç°è‰²çš„çº¯è‰²èƒŒæ™¯ï¼Œæ­£äº¤è§†å›¾ã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E7%9B%B8%E6%9C%BA%E8%AE%BE%E7%BD%AE.png"></p><p>æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢ï¼Œä¿å­˜ä¸ºé¢„åˆ¶ä½“ï¼Œä¸€ä¸ªè›‡å¤´ï¼Œä¸€ä¸ªè›‡èº«ã€‚è›‡èº«ç¨å¾®è°ƒæˆç°è‰²ã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E5%88%9B%E5%BB%BA%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><h2 id="åˆå§‹ç”Ÿæˆ"><a href="#åˆå§‹ç”Ÿæˆ" class="headerlink" title="åˆå§‹ç”Ÿæˆ"></a>åˆå§‹ç”Ÿæˆ</h2><p>åˆ›å»ºè„šæœ¬ <code>Snake.cs</code>ï¼ŒæŒ‚åˆ° Snake é¢„åˆ¶ä½“ä¸Šã€‚</p><p>è¿™é‡Œå…ˆå®šä¹‰åˆå§‹èº«ä½“æ•°é‡ï¼Œèº«ä½“é¢„åˆ¶ä½“ï¼Œèº«ä½“åˆ—è¡¨ã€‚</p><p>åœ¨ Start æ–¹æ³•é‡Œï¼Œåˆå§‹ç”Ÿæˆä¸€å®šæ•°é‡çš„èº«ä½“ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> initBodyCount = <span class="hljs-number">3</span>;  <span class="hljs-comment">// åˆå§‹èº«ä½“æ•°é‡</span><br><br>    <span class="hljs-keyword">public</span> GameObject body;  <span class="hljs-comment">// èº«ä½“é¢„åˆ¶ä½“</span><br><br>    List&lt;GameObject&gt; bodyList = <span class="hljs-keyword">new</span> List&lt;GameObject&gt;();  <span class="hljs-comment">// èº«ä½“åˆ—è¡¨</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆå§‹ç”Ÿæˆèº«ä½“</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; initBodyCount; i++)<br>        &#123;<br>            GenerateBody();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç”Ÿæˆèº«ä½“</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GenerateBody</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(body);<br><br>        <span class="hljs-comment">// å·²æœ‰èº«ä½“</span><br>        <span class="hljs-keyword">if</span> (bodyList.Count &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-comment">// è·å–æœ€åä¸€ä¸ªèº«ä½“ï¼Œåœ¨å®ƒçš„ä½ç½®ç”Ÿæˆ</span><br>            GameObject lastBody = bodyList[bodyList.Count - <span class="hljs-number">1</span>];<br>            obj.transform.position = lastBody.transform.position;<br>        &#125;<br>        <span class="hljs-comment">// æ²¡æœ‰èº«ä½“</span><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-comment">// ä»¥è›‡å¤´çš„ä½ç½®ç”Ÿæˆèº«ä½“</span><br>            obj.transform.position = transform.position;<br>        &#125;<br><br>        bodyList.Add(obj);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‹–æ‹½é¢„åˆ¶ä½“å¼•ç”¨ï¼Œç„¶åè¦†ç›–åˆ°é¢„åˆ¶ä½“ã€‚</p><p>åœºæ™¯é‡Œé¢çš„ SnakeBody å¯ä»¥åˆ æ‰ã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E5%BC%95%E7%94%A8%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>è¿è¡Œæ¸¸æˆï¼Œä¼šåœ¨è›‡å¤´çš„ä½ç½®ç”Ÿæˆä¸‰ä¸ªèº«ä½“ï¼Œæ­¤æ—¶èº«ä½“éƒ½æ˜¯é‡å çš„ã€‚</p><h2 id="è›‡çš„ç§»åŠ¨"><a href="#è›‡çš„ç§»åŠ¨" class="headerlink" title="è›‡çš„ç§»åŠ¨"></a>è›‡çš„ç§»åŠ¨</h2><p>å®šä¹‰ç§»åŠ¨æ–¹å‘å’Œç§»åŠ¨é€Ÿåº¦ï¼Œåœ¨ Start æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ <code>InvokeRepeating</code> å®šæ—¶å™¨ï¼Œæ ¹æ®é€Ÿåº¦è®¡ç®—å‡ºå®šæ—¶å™¨çš„è°ƒç”¨æ—¶é—´é—´éš”ï¼Œæ¯æ¬¡è°ƒç”¨ <code>Move</code> æ–¹æ³•å¾€å½“å‰æ–¹å‘ç§»åŠ¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> Vector2 direction = Vector2.right;  <span class="hljs-comment">// ç§»åŠ¨æ–¹å‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">1</span>;  <span class="hljs-comment">// ç§»åŠ¨é€Ÿåº¦</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-built_in">float</span> time = <span class="hljs-number">1</span> / speed;<br>        InvokeRepeating(<span class="hljs-keyword">nameof</span>(Move), time, time);<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç§»åŠ¨</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        transform.Translate(direction);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶åªæœ‰è›‡å¤´ä¼šç§»åŠ¨ï¼Œèº«ä½“æ˜¯ä¸åŠ¨çš„ã€‚</p><p>è¦è®©èº«ä½“è·Ÿç€è›‡å¤´ç§»åŠ¨ï¼Œéœ€è¦åœ¨è›‡å¤´ç§»åŠ¨å‰ï¼Œæ ‡è®°ä½ç½®ï¼Œå†æŠŠæ—§çš„ä½ç½®èµ‹å€¼ç»™ç¬¬ä¸€ä¸ªèº«ä½“ã€‚</p><p>ç¬¬ä¸€ä¸ªèº«ä½“ç§»åŠ¨å‰ï¼Œä¹Ÿè¦å…ˆæ ‡è®°ä½ç½®ï¼Œç„¶åèµ‹å€¼ç»™ç¬¬äºŒä¸ªèº«ä½“ã€‚</p><p>æ‰€ä»¥è¦ä½¿ç”¨ä¸¤ä¸ª <code>Vector2</code> å˜é‡ï¼Œå¾ªç¯æ ‡è®°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    Vector2 posMarkFirst;  <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæ ‡è®°ä½ç½®</span><br>    Vector2 posMarkLast;   <span class="hljs-comment">// ç¬¬äºŒä¸ªæ ‡è®°ä½ç½®</span><br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç§»åŠ¨</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ç§»åŠ¨å‰ï¼Œå…ˆæ ‡è®°æ—§çš„ä½ç½®</span><br>        posMarkFirst = transform.position;<br>        transform.Translate(direction);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; bodyList.Count; i++)<br>        &#123;<br>            <span class="hljs-comment">// åˆ©ç”¨å¥‡å¶æ•°ï¼Œäº¤æ›¿æ ‡è®°æ—§çš„ä½ç½®</span><br>            <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br>            &#123;<br>                posMarkLast = bodyList[i].transform.position;<br>                bodyList[i].transform.position = posMarkFirst;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                posMarkFirst = bodyList[i].transform.position;<br>                bodyList[i].transform.position = posMarkLast;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè›‡å¼€å§‹ç§»åŠ¨äº†ã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E7%A7%BB%E5%8A%A8.gif"></p><h2 id="æ§åˆ¶æ–¹å‘"><a href="#æ§åˆ¶æ–¹å‘" class="headerlink" title="æ§åˆ¶æ–¹å‘"></a>æ§åˆ¶æ–¹å‘</h2><p>åœ¨ <code>Update</code> æ–¹æ³•ä¸­ï¼Œè·å–é”®ç›˜è¾“å…¥ï¼Œæ”¹å˜è›‡å¤´çš„ç§»åŠ¨æ–¹å‘ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">float</span> h = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-built_in">float</span> v = Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>);<br><br>        <span class="hljs-comment">// æ£€æµ‹åˆ°æŒ‰é”®è¾“å…¥</span><br>        <span class="hljs-keyword">if</span>(h != <span class="hljs-number">0</span> || v != <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-comment">// æ”¹å˜è›‡å¤´çš„æ–¹å‘</span><br>            direction.x = h;<br>            direction.y = v;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼Œå¯ä»¥é€šè¿‡é”®ç›˜æ–¹å‘é”®ï¼Œæ”¹å˜è›‡çš„ç§»åŠ¨æ–¹å‘ã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E6%8E%A7%E5%88%B6%E6%96%B9%E5%90%91.gif"></p><p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè›‡å¤´å¯ä»¥å¾€åæ–¹å‘ç§»åŠ¨ï¼Œè¿˜å¯ä»¥æ–œç€ç§»åŠ¨ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦æ’é™¤çš„æƒ…å†µã€‚</p><p>ç®€å•åˆ†æä¸€ä¸‹ï¼Œè›‡å¤´çš„ç§»åŠ¨æ–¹å‘ï¼Œç”¨äºŒç»´å‘é‡æ¥å˜é‡ï¼Œæœ‰å››ç§æƒ…å†µã€‚</p><ul><li>å‘ä¸Š <code>(0, 1)</code></li><li>å‘ä¸‹ <code>(0, -1)</code></li><li>å‘å·¦ <code>(-1, 0)</code></li><li>å‘å³ <code>(1, 0)</code></li></ul><p>å½“è›‡å¤´å‘å³ç§»åŠ¨æ—¶ï¼Œå¦‚æœæŒ‰é”®è¾“å…¥å‘å·¦ï¼Œé‚£ä¹ˆ X åæ ‡ç›¸åŠ ç­‰äº 0ã€‚</p><p>åŒç†ï¼Œå‘ä¸Šç§»åŠ¨æ—¶ï¼Œå¦‚æœæŒ‰é”®è¾“å…¥å‘ä¸‹ï¼Œé‚£ä¹ˆ Y åæ ‡ç›¸åŠ ç­‰äº 0ã€‚</p><p>æ‰€ä»¥åœ¨æ”¹å˜æ–¹å‘æ—¶ï¼Œåˆ¤æ–­å½“å‰æ–¹å‘å’ŒæŒ‰é”®è¾“å…¥æ–¹å‘çš„ç›¸åŠ æƒ…å†µï¼Œè¿›è¡Œæ’é™¤ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">float</span> h = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-built_in">float</span> v = Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>);<br><br>        <span class="hljs-comment">// æ£€æµ‹åˆ°æŒ‰é”®è¾“å…¥</span><br>        <span class="hljs-keyword">if</span>(h != <span class="hljs-number">0</span> || v != <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (direction.x + h == <span class="hljs-number">0</span> || direction.y + v == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>            <span class="hljs-comment">// æ”¹å˜è›‡å¤´çš„æ–¹å‘</span><br>            direction.x = h;<br>            direction.y = v;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–œç€ç§»åŠ¨æ—¶ï¼Œä¹Ÿæœ‰å››ç§æƒ…å†µã€‚</p><ul><li>å·¦ä¸Š <code>(-1, 1)</code></li><li>å³ä¸Š <code>(1, 1)</code></li><li>å·¦ä¸‹ <code>(-1, -1)</code></li><li>å³ä¸‹ <code>(1, -1)</code></li></ul><p>å®ƒä»¬çš„è§„å¾‹æ˜¯ï¼Œè¦ä¹ˆ X åæ ‡å’Œ Y åæ ‡ç›¸ç­‰ï¼Œè¦ä¹ˆ X åæ ‡å’Œ Y åæ ‡ç›¸åŠ ç­‰äº 0ã€‚</p><p>æ‰€ä»¥åœ¨æ”¹å˜æ–¹å‘æ—¶ï¼Œåˆ¤æ–­ä»¥ä¸Šæƒ…å†µï¼Œè¿›è¡Œæ’é™¤ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">float</span> h = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-built_in">float</span> v = Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>);<br><br>        <span class="hljs-comment">// æ£€æµ‹åˆ°æŒ‰é”®è¾“å…¥</span><br>        <span class="hljs-keyword">if</span>(h != <span class="hljs-number">0</span> || v != <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (direction.x + h == <span class="hljs-number">0</span> || direction.y + v == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>            <span class="hljs-keyword">if</span> (h == v || h + v == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>            <span class="hljs-comment">// æ”¹å˜è›‡å¤´çš„æ–¹å‘</span><br>            direction.x = h;<br>            direction.y = v;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯è¿˜æ²¡æœ‰å®Œå…¨è§£å†³é—®é¢˜ï¼Œå½“è›‡å¤´å‘å³ç§»åŠ¨æ—¶ï¼Œå¦‚æœå¿«é€ŸæŒ‰å‘ä¸Šé”®ï¼Œå†æŒ‰å‘å·¦é”®ï¼Œè›‡å¤´ä¾ç„¶ä¼šå¾€åæ–¹å‘ç§»åŠ¨ï¼Œå› ä¸ºä»¥ä¸Šè§„åˆ™åœ¨äºŒæ¬¡æŒ‰é”®æ—¶ï¼Œå¯ä»¥é¡ºåˆ©åˆ‡æ¢æ–¹å‘ã€‚</p><p>æ‰€ä»¥ï¼Œæ¯å½“å®šæ—¶å™¨è§¦å‘ç§»åŠ¨æ—¶ï¼Œè¿˜éœ€è¦å†è¿›è¡Œæ–¹å‘ä¿®æ­£ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆè®°å½•ç¬¬ä¸€æ¬¡æŒ‰é”®çš„æ–¹å‘ï¼Œæ­¤æ—¶è¯¥æ–¹å‘æ˜¯åˆç†çš„ã€‚å½“è§¦å‘ç§»åŠ¨æ—¶ï¼Œå¦‚æœå½“å‰æ–¹å‘å’Œä¸Šæ¬¡ç§»åŠ¨çš„æ–¹å‘æ­£å¥½ç›¸åï¼Œé‚£ä¹ˆåˆ¤å®šå½“å‰æ–¹å‘æ˜¯è¿›è¡Œäº†äºŒæ¬¡æŒ‰é”®ï¼ŒæŠŠå½“å‰æ–¹å‘ä¿®æ­£ä¸ºç¬¬ä¸€æ¬¡æŒ‰é”®çš„åˆç†æ–¹å‘ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-keyword">public</span> Vector2 lastDirection = Vector2.right;   <span class="hljs-comment">// ä¸Šæ¬¡çš„ç§»åŠ¨æ–¹å‘</span><br>    <span class="hljs-keyword">public</span> Vector2 firstDirection = Vector2.right;  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æŒ‰é”®çš„ç§»åŠ¨æ–¹å‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> firstPress = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ˜¯å¦è®°å½•ç¬¬ä¸€æ¬¡æŒ‰é”®</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">float</span> h = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-built_in">float</span> v = Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>);<br><br>        <span class="hljs-comment">// æ£€æµ‹åˆ°æŒ‰é”®è¾“å…¥</span><br>        <span class="hljs-keyword">if</span>(h != <span class="hljs-number">0</span> || v != <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (direction.x + h == <span class="hljs-number">0</span> || direction.y + v == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>            <span class="hljs-keyword">if</span> (h == v || h + v == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>            <span class="hljs-comment">// æ”¹å˜è›‡å¤´çš„æ–¹å‘</span><br>            direction.x = h;<br>            direction.y = v;<br>            <br>            <span class="hljs-comment">// ä»…è®°å½•ç¬¬ä¸€æ¬¡æŒ‰é”®</span><br>            <span class="hljs-keyword">if</span> (firstPress)<br>            &#123;<br>                firstPress = <span class="hljs-literal">false</span>;<br>                firstDirection.x = h;<br>                firstDirection.y = v;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç§»åŠ¨</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å½“å‰ç§»åŠ¨æ–¹å‘å’Œä¸Šæ¬¡æ–¹å‘ç›¸åï¼Œä¿®æ­£ä¸ºç¬¬ä¸€æ¬¡æŒ‰é”®çš„æ–¹å‘</span><br>        <span class="hljs-keyword">if</span> (direction.x + lastDirection.x == <span class="hljs-number">0</span> || direction.y + lastDirection.y == <span class="hljs-number">0</span>)<br>        &#123;<br>            direction.x = firstDirection.x;<br>            direction.y = firstDirection.y;<br>        &#125;<br><br>        <span class="hljs-comment">// ç§»åŠ¨å‰ï¼Œå…ˆæ ‡è®°æ—§çš„ä½ç½®</span><br>        posMarkFirst = transform.position;<br>        transform.Translate(direction);<br><br>        <span class="hljs-comment">// è®°å½•ä¸Šæ¬¡çš„ç§»åŠ¨æ–¹å‘</span><br>        lastDirection = direction;<br>        <span class="hljs-comment">// å¯é‡æ–°è®°å½•ç¬¬ä¸€æ¬¡æŒ‰é”®çš„ç§»åŠ¨æ–¹å‘</span><br>        firstPress = <span class="hljs-literal">true</span>;<br>        <br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆçš„ç§»åŠ¨æ•ˆæœã€‚</p><p><img src="/../images/unity-pixel-snake-1/%E6%9C%80%E7%BB%88%E7%A7%BB%E5%8A%A8%E6%95%88%E6%9E%9C.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D èµ„æºå¼•ç”¨åˆ—è¡¨</title>
    <link href="/2024/09/01/unity-resource-reference/"/>
    <url>/2024/09/01/unity-resource-reference/</url>
    
    <content type="html"><![CDATA[<p>Unity3D çª—å£ç»˜åˆ¶èµ„æºå¼•ç”¨åˆ—è¡¨ã€‚</p><span id="more"></span><h1 id="èµ„æºå¼•ç”¨åˆ—è¡¨"><a href="#èµ„æºå¼•ç”¨åˆ—è¡¨" class="headerlink" title="èµ„æºå¼•ç”¨åˆ—è¡¨"></a>èµ„æºå¼•ç”¨åˆ—è¡¨</h1><p>æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå®šä¹‰çª—å£ä¸Šç»˜åˆ¶ä¸€ä¸ªèµ„æºå¼•ç”¨åˆ—è¡¨ï¼Œç­›é€‰èµ„æºï¼Œç‚¹å‡»å¼•ç”¨ï¼Œå¿«é€Ÿå®šä½åˆ°èµ„æºæ–‡ä»¶å¤¹çš„æŸä¸ªèµ„æºã€‚</p><p>å…³äºè‡ªå®šä¹‰çª—å£çš„åŸºæœ¬å®ç°ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€ŠUnity3D è‡ªå®šä¹‰çª—å£ã€‹ã€‚</p><h2 id="è·å–èµ„æºå¼•ç”¨"><a href="#è·å–èµ„æºå¼•ç”¨" class="headerlink" title="è·å–èµ„æºå¼•ç”¨"></a>è·å–èµ„æºå¼•ç”¨</h2><p>åœ¨ Editor æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºè„šæœ¬ <code>ResourceReference.cs</code>ã€‚</p><p>å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€ŠUnity3D éå†é¢„åˆ¶ä½“ã€‹ï¼Œéå† Assets æ–‡ä»¶å¤¹ä¸‹çš„é¢„åˆ¶ä½“ï¼Œè·å–ä¸€äº›èµ„æºå¼•ç”¨ï¼Œå­˜å‚¨åˆ° objects åˆ—è¡¨ä¸­ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> path = <span class="hljs-string">&quot;Assets/&quot;</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">Object</span>&gt; objects</span> = <span class="hljs-keyword">new</span> List&lt;Object&gt;();<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æœç´¢å·¥å…·/èµ„æºå¼•ç”¨åˆ—è¡¨&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OpenWindow</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£å¯¹è±¡</span><br>        ResourceReference window = GetWindow&lt;ResourceReference&gt;();<br><br>        <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span><br>        window.titleContent = <span class="hljs-keyword">new</span> GUIContent(<span class="hljs-string">&quot;èµ„æºå¼•ç”¨åˆ—è¡¨&quot;</span>);<br><br>        <span class="hljs-comment">// æ˜¾ç¤ºçª—å£</span><br>        window.Show();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GUILayout.Label(<span class="hljs-string">&quot;è‡ªå®šä¹‰æœç´¢å·¥å…·ï¼Œå¯ä»¥éå†èµ„æºå¹¶ä¿®æ”¹&quot;</span>);<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        path = EditorGUILayout.TextField(<span class="hljs-string">&quot;æ ¹ç›®å½•&quot;</span>, path);<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            objects.Clear();<br>            TraversePrefab();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            GameObject go = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(file);<br>            <span class="hljs-keyword">if</span> (go)<br>            &#123;<br>                Debug.Log(go);<br>                objects.Add(go);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œæ‰“å¼€çª—å£ã€‚</p><p><img src="/../images/unity-resource-reference/%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8C%89%E9%92%AE.png"></p><p>ç‚¹å‡»çª—å£å†…çš„æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°çš„ä¿¡æ¯ï¼Œæ­¤æ—¶èµ„æºå·²ç»è¢«æ·»åŠ åˆ° objects åˆ—è¡¨ä¸­ï¼Œæš‚æ—¶çœ‹ä¸åˆ°ã€‚</p><p><img src="/../images/unity-resource-reference/%E6%90%9C%E7%B4%A2%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè¦è°ƒç”¨ <code>objects.Clear()</code> æ¸…ç©ºåˆ—è¡¨ï¼Œé˜²æ­¢é‡å¤æ·»åŠ ã€‚</p></blockquote><h2 id="ç»˜åˆ¶å•ä¸ªèµ„æºå¼•ç”¨"><a href="#ç»˜åˆ¶å•ä¸ªèµ„æºå¼•ç”¨" class="headerlink" title="ç»˜åˆ¶å•ä¸ªèµ„æºå¼•ç”¨"></a>ç»˜åˆ¶å•ä¸ªèµ„æºå¼•ç”¨</h2><p>ä½¿ç”¨ <code>EditorGUILayout.ObjectField</code> ç»˜åˆ¶ä¸€ä¸ªèµ„æºå¼•ç”¨ï¼Œä¼ å…¥éœ€è¦æ˜¾ç¤ºçš„ object ä»¥åŠå®ƒå¯ä»¥è¢«èµ‹å€¼çš„ç±»å‹ï¼ˆç›´æ¥ç”¨å®ƒæœ¬èº«çš„ç±»å‹ Object å³å¯ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå¸ƒå°”å‚æ•°è¡¨ç¤ºå¯ä»¥èµ‹å€¼åœºæ™¯ä¸­çš„ç‰©ä½“ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        DrawNode();<br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawNode</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; objects.Count; i++)<br>        &#123;<br>            Object obj = objects[i];<br>            EditorGUILayout.ObjectField(obj, obj.GetType(), <span class="hljs-literal">true</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£é‡Œå°±æ˜¾ç¤ºäº†è¢«æ·»åŠ åˆ° objects åˆ—è¡¨ä¸­çš„é¢„åˆ¶ä½“èµ„æºå¼•ç”¨ï¼Œç‚¹å‡»å®ƒä»¬è¿˜å¯ä»¥å¿«é€Ÿå®šä½åˆ° Assets æ–‡ä»¶å¤¹çš„èµ„æºã€‚</p><p><img src="/../images/unity-resource-reference/%E7%BB%98%E5%88%B6%E8%B5%84%E6%BA%90%E5%BC%95%E7%94%A8.png"></p><h2 id="å®šä¹‰é“¾è¡¨èŠ‚ç‚¹"><a href="#å®šä¹‰é“¾è¡¨èŠ‚ç‚¹" class="headerlink" title="å®šä¹‰é“¾è¡¨èŠ‚ç‚¹"></a>å®šä¹‰é“¾è¡¨èŠ‚ç‚¹</h2><p>ç°åœ¨åˆ—è¡¨ä¸­åªèƒ½å±•ç¤ºé¢„åˆ¶ä½“ï¼Œå¦‚æœè¦å±•ç¤ºé¢„åˆ¶ä½“ä¸­çš„æŸä¸ªèŠ‚ç‚¹æˆ–ç»„ä»¶ï¼Œä¸ºäº†è®©è§†å›¾æ›´åŠ æ¸…æ™°åœ°å±•ç¤ºé¢„åˆ¶ä½“ä¸å…¶èŠ‚ç‚¹çš„å…³è”æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é“¾è¡¨ç»“æ„ã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰é“¾è¡¨èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®ã€ç±»å‹ã€æŒ‡é’ˆï¼Œå¹¶æä¾› Add æ–¹æ³•ï¼Œåœ¨èŠ‚ç‚¹å°¾ç«¯é“¾æ¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Node</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Object data;   <span class="hljs-comment">// é“¾è¡¨æ•°æ®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> type;   <span class="hljs-comment">// é“¾è¡¨ç±»å‹</span><br>    <span class="hljs-keyword">public</span> Node next;     <span class="hljs-comment">// é“¾è¡¨æŒ‡é’ˆ</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Node</span>(<span class="hljs-params">Object data, <span class="hljs-built_in">string</span> type</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">this</span>.data = data;<br>        <span class="hljs-keyword">this</span>.type = type;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> é“¾è¡¨å°¾æ’æ³•</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;data&quot;&gt;</span>é“¾è¡¨æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Node <span class="hljs-title">Add</span>(<span class="hljs-params">Object data, <span class="hljs-built_in">string</span> type</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Node node = <span class="hljs-keyword">new</span> Node(data, type);<br>        <span class="hljs-keyword">this</span>.next = node;<br>        <span class="hljs-keyword">return</span> node;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»˜åˆ¶é“¾å¼èµ„æºå¼•ç”¨"><a href="#ç»˜åˆ¶é“¾å¼èµ„æºå¼•ç”¨" class="headerlink" title="ç»˜åˆ¶é“¾å¼èµ„æºå¼•ç”¨"></a>ç»˜åˆ¶é“¾å¼èµ„æºå¼•ç”¨</h2><p>ä¿®æ”¹ä¸€ä¸‹ objects åˆ—è¡¨çš„ç±»å‹ï¼Œæ”¹æˆ Nodeã€‚</p><p>åœ¨ <code>TraversePrefab</code> æ–¹æ³•ä¸­ï¼Œå°è¯•å»è·å– <code>SpriteRenderer</code> ç»„ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ª Node èŠ‚ç‚¹ï¼Œå…ˆæŠŠé¢„åˆ¶ä½“ go å­˜å…¥ï¼Œå¹¶è®°å½•å®ƒçš„ç±»å‹æ˜¯ <code>&quot;prefab&quot;</code>ã€‚</p><p>æ¥ç€ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Node èŠ‚ç‚¹çš„ Add æ–¹æ³•ï¼Œç»§ç»­æ·»åŠ å®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠ <code>&quot;SpriteRenderer&quot;</code> å’Œ <code>&quot;sprite&quot;</code> éƒ½æ·»åŠ åˆ°èŠ‚ç‚¹é“¾æ¥ä¸­ã€‚</p><p>åœ¨ <code>DrawNode</code> æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <code>do while</code> å…ˆç»˜åˆ¶é¦–ä¸ªèŠ‚ç‚¹çš„å†…å®¹ï¼ˆprefabï¼‰ï¼Œç„¶åè·å–å®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ç»§ç»­ç»˜åˆ¶ï¼Œç›´åˆ°æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ­¢ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">Node</span>&gt; objects</span> = <span class="hljs-keyword">new</span> List&lt;Node&gt;();<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            GameObject go = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(file);<br>            <span class="hljs-keyword">if</span> (go)<br>            &#123;<br>                SpriteRenderer sr = go.GetComponent&lt;SpriteRenderer&gt;();<br>                <span class="hljs-keyword">if</span> (sr)<br>                &#123;<br>                    Node node = <span class="hljs-keyword">new</span> Node(go, <span class="hljs-string">&quot;prefab&quot;</span>);<br>                    node.Add(sr, <span class="hljs-string">&quot;SpriteRenderer&quot;</span>).Add(sr.sprite, <span class="hljs-string">&quot;sprite&quot;</span>);<br>                    objects.Add(node);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawNode</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; objects.Count; i++)<br>        &#123;<br>            Node node = objects[i];<br>            <span class="hljs-keyword">do</span><br>            &#123;<br>                EditorGUILayout.ObjectField(node.data, node.data.GetType(), <span class="hljs-literal">true</span>);<br>                node = node.next;<br>            &#125; <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨é‡æ–°ç‚¹ç¡®å®šæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°åˆ—è¡¨çš„å†…å®¹å‘ç”Ÿäº†æ”¹å˜ï¼Œç­›é€‰äº†åŒ…å« <code>SpriteRenderer</code> ç»„ä»¶çš„é¢„åˆ¶ä½“ï¼Œå¹¶ä¸”æŠŠå®ƒå¼•ç”¨çš„å›¾ç‰‡ä¹Ÿå±•ç¤ºäº†å‡ºæ¥ï¼Œç‚¹å‡» Sprite å›¾ç‰‡ä¹Ÿå¯ä»¥å¿«é€Ÿå®šä½åˆ°èµ„æºã€‚</p><p><img src="/../images/unity-resource-reference/%E7%BB%98%E5%88%B6%E9%93%BE%E8%A1%A8%E8%8A%82%E7%82%B9.png"></p><p>ä¸è¿‡ç°åœ¨åˆ—è¡¨çš„å†…å®¹æ˜¯å•åˆ—ç»˜åˆ¶çš„ï¼Œæ”¹æˆä¸‰åˆ—æ‰èƒ½å¾ˆå¥½åœ°è¾¾åˆ°é¢„æœŸçš„æ•ˆæœã€‚</p><p>åªéœ€è¦åœ¨ DrawNode æ–¹æ³•ä¸­ï¼Œç»˜åˆ¶æ¯ä¸ª prefab èŠ‚ç‚¹æ—¶ï¼ŒåŠ ä¸Šæ°´å¹³å¸ƒå±€ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawNode</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; objects.Count; i++)<br>        &#123;<br>            EditorGUILayout.BeginHorizontal();<br><br>            Node node = objects[i];<br>            <span class="hljs-keyword">do</span><br>            &#123;<br>                EditorGUILayout.ObjectField(node.data, node.data.GetType(), <span class="hljs-literal">true</span>);<br>                node = node.next;<br>            &#125; <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>);<br><br>            EditorGUILayout.EndHorizontal();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨åˆ—è¡¨å°±æ˜¯ä¸‰åˆ—çš„å¸ƒå±€äº†ã€‚</p><p><img src="/../images/unity-resource-reference/%E4%B8%89%E5%88%97%E5%B8%83%E5%B1%80.png"></p><h2 id="ç»˜åˆ¶æ»šåŠ¨è§†å›¾"><a href="#ç»˜åˆ¶æ»šåŠ¨è§†å›¾" class="headerlink" title="ç»˜åˆ¶æ»šåŠ¨è§†å›¾"></a>ç»˜åˆ¶æ»šåŠ¨è§†å›¾</h2><p>ç›®å‰åˆ—è¡¨é‡Œåªæœ‰ä¸¤è¡Œèµ„æºå¼•ç”¨ï¼Œå¦‚æœé¡¹ç›®é‡Œæœ‰å¾ˆå¤šèµ„æºçš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨æ»šåŠ¨è§†å›¾æ¥å±•ç¤ºã€‚</p><p>å…ˆå®šä¹‰ä¸€ä¸ª <code>Vector2 scrollPos</code> è®°å½•æ»šåŠ¨è§†å›¾å½“å‰çš„ä½ç½®ã€‚</p><p>ç„¶ååœ¨ <code>DrawNode</code> æ–¹æ³•å‰åæ·»åŠ æ»šåŠ¨è§†å›¾ä»£ç ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    Vector2 scrollPos = Vector2.zero;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        scrollPos = EditorGUILayout.BeginScrollView(scrollPos);<br><br>        DrawNode();<br><br>        EditorGUILayout.EndScrollView();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šå¤åˆ¶å‡ ä¸ªé¢„åˆ¶ä½“ï¼Œè§†å›¾å°±ä¸°å¯Œèµ·æ¥äº†ã€‚</p><p><img src="/../images/unity-resource-reference/%E7%BB%98%E5%88%B6%E6%BB%9A%E5%8A%A8%E8%A7%86%E5%9B%BE.png"></p><h2 id="ç®€å•åº”ç”¨ï¼šæ‰¹é‡æ›¿æ¢å›¾ç‰‡"><a href="#ç®€å•åº”ç”¨ï¼šæ‰¹é‡æ›¿æ¢å›¾ç‰‡" class="headerlink" title="ç®€å•åº”ç”¨ï¼šæ‰¹é‡æ›¿æ¢å›¾ç‰‡"></a>ç®€å•åº”ç”¨ï¼šæ‰¹é‡æ›¿æ¢å›¾ç‰‡</h2><h3 id="ç»˜åˆ¶å›¾ç‰‡èµ„æºå¼•ç”¨"><a href="#ç»˜åˆ¶å›¾ç‰‡èµ„æºå¼•ç”¨" class="headerlink" title="ç»˜åˆ¶å›¾ç‰‡èµ„æºå¼•ç”¨"></a>ç»˜åˆ¶å›¾ç‰‡èµ„æºå¼•ç”¨</h3><p>é¦–å…ˆï¼Œåœ¨çª—å£ä¸Šç»˜åˆ¶ä¸€ä¸ªå›¾ç‰‡èµ„æºå¼•ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨é€‰æ‹©è¦æ›¿æ¢æˆå“ªå¼ å›¾ç‰‡ã€‚</p><p>éœ€è¦å®šä¹‰ä¸€ä¸ª <code>Sprite replaceSprite</code> å˜é‡ï¼Œåœ¨ <code>OnFocus</code> æ–¹æ³•ä¸­ï¼ŒåŠ è½½ä¸€å¼ é»˜è®¤çš„å›¾ç‰‡è¿›è¡Œèµ‹å€¼ã€‚</p><p>åœ¨ <code>OnGUI</code> æ–¹æ³•ä¸­ï¼Œåˆ¤æ–­ <code>replaceSprite</code> æ˜¯å¦ä¸ºç©ºï¼Œç„¶åå†è¿›è¡Œç»˜åˆ¶ï¼Œæœ«å°¾åŠ ä¸Š <code>as Sprite</code> æŠŠ Object ç±»å‹è½¬æ¢æˆ Spriteã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä¼ å…¥ <code>EditorGUILayout.ObjectField</code> çš„å¯¹è±¡æœªèµ‹å€¼ï¼Œçª—å£ç»˜åˆ¶æ—¶ä¼šæŠ¥é”™ï¼Œåœ¨ OnFocus æ–¹æ³•ä¸­è¿›è¡Œèµ‹å€¼ï¼Œæ¯æ¬¡èšç„¦åˆ°çª—å£æ—¶å°±èƒ½ä¿è¯ replaceSprite ä¸ä¸ºç©ºã€‚</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Sprite replaceSprite;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnFocus</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (replaceSprite == <span class="hljs-literal">null</span>)<br>        &#123;<br>            replaceSprite = AssetDatabase.LoadAssetAtPath&lt;Sprite&gt;(<span class="hljs-string">&quot;Assets/Textures/Default.png&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-keyword">if</span> (replaceSprite != <span class="hljs-literal">null</span>)<br>        &#123;<br>            replaceSprite = EditorGUILayout.ObjectField(<span class="hljs-string">&quot;æ›¿æ¢å›¾ç‰‡&quot;</span>, replaceSprite,<br>                replaceSprite.GetType(), <span class="hljs-literal">true</span>) <span class="hljs-keyword">as</span> Sprite;<br>        &#125;<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£é‡Œå°±å‡ºç°äº†ä¸€å¼ é»˜è®¤çš„æ›¿æ¢å›¾ç‰‡ï¼Œç‚¹å‡»å›¾ç‰‡è¿˜å¯ä»¥æ‰“å¼€å›¾ç‰‡é€‰æ‹©çª—å£ï¼Œè‡ªç”±é€‰æ‹©å…¶ä»–å›¾ç‰‡ã€‚</p><p><img src="/../images/unity-resource-reference/%E7%BB%98%E5%88%B6%E6%9B%BF%E6%8D%A2%E5%9B%BE%E7%89%87.png"></p><h3 id="æ›¿æ¢å›¾ç‰‡"><a href="#æ›¿æ¢å›¾ç‰‡" class="headerlink" title="æ›¿æ¢å›¾ç‰‡"></a>æ›¿æ¢å›¾ç‰‡</h3><p>é¦–å…ˆï¼Œç»˜åˆ¶ä¸€ä¸ªæ›¿æ¢æŒ‰é’®ï¼ŒæŠŠå›¾ç‰‡èµ„æºå¼•ç”¨å’Œæ›¿æ¢æŒ‰é’®æ”¾åœ¨ä¸€ä¸ªæ°´å¹³å¸ƒå±€ä¸­ã€‚</p><p>æ›¿æ¢æŒ‰é’®è°ƒç”¨ <code>ReplaceSprite</code> æ–¹æ³•ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        EditorGUILayout.BeginHorizontal();<br><br>        <span class="hljs-keyword">if</span> (replaceSprite != <span class="hljs-literal">null</span>)<br>        &#123;<br>            replaceSprite = EditorGUILayout.ObjectField(<span class="hljs-string">&quot;æ›¿æ¢å›¾ç‰‡&quot;</span>, replaceSprite,<br>                replaceSprite.GetType(), <span class="hljs-literal">true</span>) <span class="hljs-keyword">as</span> Sprite;<br>        &#125;<br><br>        GUILayout.Space(<span class="hljs-number">50</span>);<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;æ›¿æ¢&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            ReplaceSprite();<br>        &#125;<br><br>        EditorGUILayout.EndHorizontal();<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ç€å®ç° <code>ReplaceSprite</code> æ–¹æ³•ã€‚</p><p>å¯ä»¥å…ˆåˆ¤æ–­ä¸€ä¸‹ <code>replaceSprite</code> å’Œ <code>objects</code> åˆ—è¡¨æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œå°±å¼¹çª—æç¤ºã€‚</p><p>ç„¶åéå† objects åˆ—è¡¨ï¼Œå…ˆå–å‡º prefab æ•°æ®ï¼Œåœ¨ <code>do while</code> ä¸­æŸ¥æ‰¾ <code>&quot;SpriteRenderer&quot;</code> ç±»å‹çš„æ•°æ®ï¼Œä¿®æ”¹å®ƒçš„ sprite å±æ€§ï¼ŒåŒæ—¶ä¿®æ”¹ <code>&quot;sprite&quot;</code> ç±»å‹çš„æ•°æ®ï¼Œè®©çª—å£åˆ—è¡¨çš„ç¬¬ä¸‰åˆ—æ•°æ®èƒ½å¤Ÿåˆ·æ–°ã€‚</p><p>å®Œæˆå›¾ç‰‡æ›¿æ¢åï¼Œä½¿ç”¨ <code>PrefabUtility.SavePrefabAsset</code> ä¿å­˜é¢„å…ˆå–å‡ºçš„ prefab æ•°æ®ï¼Œè®© Assets æ–‡ä»¶å¤¹ä¸­çš„é¢„åˆ¶ä½“èµ„æºåŒæ­¥ä¿®æ”¹ï¼Œç„¶åä½¿ç”¨ <code>AssetDatabase.Refresh</code> åˆ·æ–° Assets æ–‡ä»¶å¤¹ã€‚</p><p>æœ€åå¯ä»¥ç»™ä¸€ä¸ªå¼¹çª—æç¤ºï¼Œè¡¨ç¤ºå·²ç»å®Œæˆäº†å›¾ç‰‡çš„æ›¿æ¢ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceReference</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReplaceSprite</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (replaceSprite == <span class="hljs-literal">null</span>)<br>        &#123;<br>            EditorUtility.DisplayDialog(<span class="hljs-string">&quot;æ¸©é¦¨æç¤º&quot;</span>, <span class="hljs-string">&quot;æ›¿æ¢å›¾ç‰‡ä¸ºç©º&quot;</span>, <span class="hljs-string">&quot;okk&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <br>        <span class="hljs-keyword">if</span> (objects.Count == <span class="hljs-number">0</span>)<br>        &#123;<br>            EditorUtility.DisplayDialog(<span class="hljs-string">&quot;æ¸©é¦¨æç¤º&quot;</span>, <span class="hljs-string">&quot;èŠ‚ç‚¹åˆ—è¡¨ä¸ºç©º&quot;</span>, <span class="hljs-string">&quot;okk&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; objects.Count; i++)<br>        &#123;<br>            Node node = objects[i];<br>            GameObject prefab = node.data <span class="hljs-keyword">as</span> GameObject;<br>            <span class="hljs-keyword">do</span><br>            &#123;<br>                <span class="hljs-keyword">if</span> (node.type == <span class="hljs-string">&quot;SpriteRenderer&quot;</span>)<br>                &#123;<br>                    SpriteRenderer sr = node.data <span class="hljs-keyword">as</span> SpriteRenderer;<br>                    sr.sprite = replaceSprite;<br>                &#125;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.type == <span class="hljs-string">&quot;sprite&quot;</span>)<br>                &#123;<br>                    node.data = replaceSprite;<br>                &#125;<br>                node = node.next;<br>            &#125; <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>);<br><br>            PrefabUtility.SavePrefabAsset(prefab);<br>        &#125;<br><br>        AssetDatabase.Refresh();<br><br>        EditorUtility.DisplayDialog(<span class="hljs-string">&quot;æ¸©é¦¨æç¤º&quot;</span>, <span class="hljs-string">&quot;æ›¿æ¢å›¾ç‰‡æˆåŠŸ&quot;</span>, <span class="hljs-string">&quot;okk&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ›¿æ¢å›¾ç‰‡æ¼”ç¤ºï¼š</p><p><img src="/../images/unity-resource-reference/%E6%9B%BF%E6%8D%A2%E5%9B%BE%E7%89%87%E6%BC%94%E7%A4%BA.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D éå†é¢„åˆ¶ä½“</title>
    <link href="/2024/08/25/unity-traverse-prefab/"/>
    <url>/2024/08/25/unity-traverse-prefab/</url>
    
    <content type="html"><![CDATA[<p>Unity3D éå†é¢„åˆ¶ä½“è¿›è¡Œæ‰¹é‡åŒ–å¤„ç†ã€‚</p><span id="more"></span><h1 id="éå†é¢„åˆ¶ä½“"><a href="#éå†é¢„åˆ¶ä½“" class="headerlink" title="éå†é¢„åˆ¶ä½“"></a>éå†é¢„åˆ¶ä½“</h1><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸€äº›é¢„åˆ¶ä½“èµ„æºè¿›è¡Œæ‰¹é‡åŒ–å¤„ç†ï¼Œå¦‚æœæ¯ä¸€ä¸ªé¢„åˆ¶ä½“éƒ½æ‰‹åŠ¨å¤„ç†ï¼Œå°±ä¼šè€—è´¹å¾ˆå¤šæ—¶é—´ç²¾åŠ›ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªè„šæœ¬éå†é¢„åˆ¶ä½“ï¼Œå¯¹é¢„åˆ¶ä½“è¿›è¡Œä¿®æ”¹ï¼Œç„¶åä¿å­˜ã€‚</p><h2 id="éå†æ–‡ä»¶è·¯å¾„"><a href="#éå†æ–‡ä»¶è·¯å¾„" class="headerlink" title="éå†æ–‡ä»¶è·¯å¾„"></a>éå†æ–‡ä»¶è·¯å¾„</h2><p>åœ¨ <code>Editor</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªè„šæœ¬ <code>TraverseAssets.cs</code>ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³• <code>TraversePrefab</code>ï¼ŒåŠ ä¸Š <code>MenuItem</code> åˆ›å»ºä¸€ä¸ªèœå•æ æŒ‰é’®ã€‚</p><p>ä½¿ç”¨ <code>Directory.GetFiles</code> æ–¹æ³•ï¼Œä¼ å…¥æ ¹ç›®å½•çš„è·¯å¾„ path å’Œé€šé…ç¬¦ <code>*.prefab</code>ï¼Œè¡¨ç¤ºä» Assets æ–‡ä»¶å¤¹ä¸‹è·å–æ‰€æœ‰ä»¥ <code>.prefab</code> ç»“å°¾çš„æ–‡ä»¶è·¯å¾„ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TraverseAssets</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> path = <span class="hljs-string">&quot;Assets/&quot;</span>;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æœç´¢å·¥å…·/éå†é¢„åˆ¶ä½“&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            Debug.Log(file);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œèœå•æ å°±æœ‰äº†<kbd>æœç´¢å·¥å…·</kbd>-&gt;<kbd>éå†é¢„åˆ¶ä½“</kbd>æŒ‰é’®äº†ã€‚</p><p><img src="/../images/unity-traverse-assets/%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8C%89%E9%92%AE.png"></p><p>ç‚¹å‡»æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰“å°äº†é¢„åˆ¶ä½“çš„è·¯å¾„ä¿¡æ¯ã€‚</p><p><img src="/../images/unity-traverse-assets/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E4%BF%A1%E6%81%AF.png"></p><p>æ¥ä¸‹æ¥ï¼Œæ ¹æ®è·¯å¾„ä¿¡æ¯ï¼ŒåŠ è½½é¢„åˆ¶ä½“ã€‚</p><p>ä½¿ç”¨ <code>AssetDatabase.LoadAssetAtPath</code> æ–¹æ³•ï¼ŒæŠŠè·¯å¾„ä¼ å…¥ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª <code>GameObject</code>ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TraverseAssets</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> path = <span class="hljs-string">&quot;Assets/&quot;</span>;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æœç´¢å·¥å…·/éå†é¢„åˆ¶ä½“&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            GameObject go = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(file);<br>            <span class="hljs-keyword">if</span> (go)<br>            &#123;<br>                Debug.Log(go.name);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å†æ¬¡ç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰“å°çš„æ˜¯å·²åŠ è½½é¢„åˆ¶ä½“çš„åç§°äº†ã€‚</p><p><img src="/../images/unity-traverse-assets/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E9%A2%84%E5%88%B6%E4%BD%93%E5%90%8D%E7%A7%B0.png"></p><h2 id="ä¿®æ”¹é¢„åˆ¶ä½“å¹¶ä¿å­˜"><a href="#ä¿®æ”¹é¢„åˆ¶ä½“å¹¶ä¿å­˜" class="headerlink" title="ä¿®æ”¹é¢„åˆ¶ä½“å¹¶ä¿å­˜"></a>ä¿®æ”¹é¢„åˆ¶ä½“å¹¶ä¿å­˜</h2><p>å‡è®¾ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼Œæœç´¢å¸¦æœ‰ <code>SpriteRenderer</code> ç»„ä»¶çš„é¢„åˆ¶ä½“ï¼ŒæŠŠç»„ä»¶ä¸Šçš„ <code>Order in Layer</code> ç»Ÿä¸€æ”¹æˆ 100ã€‚</p><p>ç›®å‰å·¥ç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªé¢„åˆ¶ä½“å¸¦æœ‰è¯¥ç»„ä»¶ï¼Œå¹¶ä¸”ç›®æ ‡å‚æ•°æ­¤æ—¶çš„å€¼ä¸º 0ã€‚å¦å¤–ä¸¤ä¸ªé¢„åˆ¶ä½“æ²¡æœ‰è¯¥ç»„ä»¶ã€‚</p><p><img src="/../images/unity-traverse-assets/%E9%A2%84%E5%88%B6%E4%BD%93%E9%A2%84%E8%A7%88.png"></p><p>ä¿®æ”¹ä¸€ä¸‹è„šæœ¬ï¼Œä»åŠ è½½å‡ºæ¥çš„ <code>GameObject</code> ä¸Šè·å– <code>SpriteRenderer</code> ç»„ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™å¯¹ <code>sortingOrder</code> è¿›è¡Œä¿®æ”¹ï¼Œç„¶åä½¿ç”¨ <code>PrefabUtility.SavePrefabAsset</code> æ–¹æ³•ä¿å­˜é¢„åˆ¶ä½“ã€‚</p><p>åœ¨å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨ <code>AssetDatabase.Refresh</code> å¯¹èµ„æºè¿›è¡Œåˆ·æ–°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TraverseAssets</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> path = <span class="hljs-string">&quot;Assets/&quot;</span>;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æœç´¢å·¥å…·/éå†é¢„åˆ¶ä½“&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            GameObject go = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(file);<br>            <span class="hljs-keyword">if</span> (go)<br>            &#123;<br>                SpriteRenderer sr = go.GetComponent&lt;SpriteRenderer&gt;();<br>                <span class="hljs-keyword">if</span> (sr)<br>                &#123;<br>                    sr.sortingOrder = <span class="hljs-number">100</span>;<br>                &#125;<br>            &#125;<br>            PrefabUtility.SavePrefabAsset(go);<br>        &#125;<br>        <br>        AssetDatabase.Refresh();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°é¢„åˆ¶ä½“å·²ç»è¢«ä¿®æ”¹äº†ï¼Œ<code>Order in Layer</code> éƒ½å˜æˆäº† 100ã€‚</p><p><img src="/../images/unity-traverse-assets/%E9%A2%84%E5%88%B6%E4%BD%93%E4%BF%AE%E6%94%B9%E5%90%8E.png"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿéå†èµ„æºæ–‡ä»¶å¤¹ï¼Œæ‰¾å‡ºé¢„åˆ¶ä½“ï¼Œå¯¹å®ƒä»¬ç»Ÿä¸€è¿›è¡Œéœ€æ±‚ä¸Šçš„å¤„ç†ï¼Œå¹¶ä¿å­˜ä¿®æ”¹ã€‚</p><h2 id="ç¼–è¾‘çª—å£"><a href="#ç¼–è¾‘çª—å£" class="headerlink" title="ç¼–è¾‘çª—å£"></a>ç¼–è¾‘çª—å£</h2><p>ç»“åˆä¸Šä¸€ç¯‡æ–‡ç« ã€ŠUnity3D è‡ªå®šä¹‰çª—å£ã€‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ªçª—å£ï¼ŒæŠŠè„šæœ¬é‡Œçš„ä¸€äº›å‚æ•°æå–å‡ºæ¥ï¼Œæ–¹ä¾¿ç¼–è¾‘ã€‚</p><p>ä¸»è¦æ˜¯ä½¿ç”¨ <code>EditorGUILayout.TextField</code> æŠŠå‚æ•°å‘ˆç°åˆ°æ–‡æœ¬è¾“å…¥æ¡†ï¼Œä¾‹å¦‚ path å’Œ sortingOrderï¼Œåœ¨ç”¨æˆ·ä¿®æ”¹äº†æ–‡æœ¬è¾“å…¥æ¡†çš„å†…å®¹åï¼Œè¿™ä¸¤ä¸ªå˜é‡å‚æ•°ä¹Ÿä¼šéšä¹‹ä¿®æ”¹ï¼Œåœ¨å…·ä½“é€»è¾‘å¤„ä½¿ç”¨è¿™ä¸¤ä¸ªå˜é‡å‚æ•°å³å¯ã€‚</p><blockquote><p>æ³¨æ„ï¼šå› ä¸ºæ–‡æœ¬è¾“å…¥æ¡†çš„å†…å®¹æ˜¯ string ç±»å‹ï¼Œè¿™é‡Œçš„ sortingOrder éœ€è¦ä½¿ç”¨ <code>int.Parse</code> è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TraverseAssets</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> path = <span class="hljs-string">&quot;Assets/&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> sortingOrder = <span class="hljs-string">&quot;100&quot;</span>;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;æœç´¢å·¥å…·/éå†é¢„åˆ¶ä½“&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OpenWindow</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£å¯¹è±¡</span><br>        TraverseAssets window = GetWindow&lt;TraverseAssets&gt;();<br><br>        <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span><br>        window.titleContent = <span class="hljs-keyword">new</span> GUIContent(<span class="hljs-string">&quot;æœç´¢å·¥å…·&quot;</span>);<br><br>        <span class="hljs-comment">// æ˜¾ç¤ºçª—å£</span><br>        window.Show();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GUILayout.Label(<span class="hljs-string">&quot;è‡ªå®šä¹‰æœç´¢å·¥å…·ï¼Œå¯ä»¥éå†èµ„æºå¹¶ä¿®æ”¹&quot;</span>);<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        path = EditorGUILayout.TextField(<span class="hljs-string">&quot;æ ¹ç›®å½•&quot;</span>, path);<br>        sortingOrder = EditorGUILayout.TextField(<span class="hljs-string">&quot;å±‚çº§æ’åº&quot;</span>, sortingOrder);<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            TraversePrefab();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TraversePrefab</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">var</span> allfiles = Directory.GetFiles(path, <span class="hljs-string">&quot;*.prefab&quot;</span>, SearchOption.AllDirectories);<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> file <span class="hljs-keyword">in</span> allfiles)<br>        &#123;<br>            GameObject go = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(file);<br>            <span class="hljs-keyword">if</span> (go)<br>            &#123;<br>                SpriteRenderer sr = go.GetComponent&lt;SpriteRenderer&gt;();<br>                <span class="hljs-keyword">if</span> (sr)<br>                &#123;<br>                    sr.sortingOrder = <span class="hljs-built_in">int</span>.Parse(sortingOrder);<br>                &#125;<br>            &#125;<br>            PrefabUtility.SavePrefabAsset(go);<br>        &#125;<br>        <br>        AssetDatabase.Refresh();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œå°±ä¼šæ‰“å¼€ä¸€ä¸ªç¼–è¾‘çª—å£ï¼Œå¯ä»¥ä¿®æ”¹å‚æ•°ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®å°±ä¼šå¯¹é¢„åˆ¶ä½“è¿›è¡Œä¿®æ”¹å¹¶ä¿å­˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ ¹ç›®å½•ï¼ŒæŒ‡å®šæŸä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œå¯¹éƒ¨åˆ†é¢„åˆ¶ä½“è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå±‚çº§æ’åºï¼Œä¸éœ€è¦ä¿®æ”¹è„šæœ¬ã€‚</p><p><img src="/../images/unity-traverse-assets/%E7%BC%96%E8%BE%91%E7%AA%97%E5%8F%A3.png"></p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>ä½¿ç”¨çš„æ–¹æ³•ï¼š</p><ul><li>éå†èµ„æºæ–‡ä»¶ <code>Directory.GetFiles</code></li><li>æ ¹æ®è·¯å¾„åŠ è½½èµ„æº <code>AssetDatabase.LoadAssetAtPath</code></li><li>ä¿å­˜é¢„åˆ¶ä½“ <code>PrefabUtility.SavePrefabAsset</code></li><li>åˆ·æ–°èµ„æº <code>AssetDatabase.Refresh</code></li></ul><p>å¯ä»¥åˆ¶ä½œä¸€ä¸ªç¼–è¾‘çª—å£ï¼Œè®©å‚æ•°çš„ç¼–è¾‘æ›´åŠ æ–¹ä¾¿ã€‚</p><p>é™¤äº†ä¿®æ”¹å±‚çº§æ’åºï¼Œè¿˜å¯ä»¥æ›¿æ¢å›¾ç‰‡ã€ä¿®æ”¹æè´¨ç­‰ï¼Œå¯ä»¥è‡ªè¡Œæ‰©å±•åŠŸèƒ½ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è‡ªå®šä¹‰çª—å£</title>
    <link href="/2024/08/18/unity-customize-window/"/>
    <url>/2024/08/18/unity-customize-window/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è‡ªå®šä¹‰çª—å£çš„å®ç°ã€‚</p><span id="more"></span><h1 id="è‡ªå®šä¹‰çª—å£"><a href="#è‡ªå®šä¹‰çª—å£" class="headerlink" title="è‡ªå®šä¹‰çª—å£"></a>è‡ªå®šä¹‰çª—å£</h1><p>Unity3D å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç ï¼Œæ‰©å±•ç¼–è¾‘å™¨çš„èœå•æ å’Œçª—å£ã€‚</p><p>ç®€å•çš„åŠŸèƒ½å¯ä»¥ç›´æ¥ä¸€ä¸ªèœå•æŒ‰é’®å®ç°ï¼Œå¤æ‚çš„åŠŸèƒ½å°±éœ€è¦ç»˜åˆ¶ä¸€ä¸ªçª—å£å±•ç¤ºæ›´å¤šçš„ä¿¡æ¯ã€‚</p><p>ç¼–è¾‘å™¨æ‰©å±•çš„è„šæœ¬ï¼Œéœ€è¦æ”¾åœ¨ Editor æ–‡ä»¶å¤¹ä¸­ã€‚</p><p><img src="/../images/unity-customize-window/%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><h2 id="èœå•æ "><a href="#èœå•æ " class="headerlink" title="èœå•æ "></a>èœå•æ </h2><p>é¦–å…ˆï¼Œéœ€è¦å¼•ç”¨å‘½åç©ºé—´ <code>UnityEditor</code>ï¼Œç„¶ååœ¨ç±»é‡Œç¼–å†™é™æ€æ–¹æ³•ï¼Œåœ¨æ–¹æ³•çš„å¤´é¡¶ä¸Šé¢æ·»åŠ  <code>MenuItem</code>ï¼Œå¡«å†™èœå•æ çš„è·¯å¾„ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span><br>&#123;<br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;è‡ªå®šä¹‰çª—å£/æ‰“å¼€çª—å£&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OpenWindow</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ä¸€ä¸‹ï¼Œå°±èƒ½çœ‹åˆ°å¤šå‡ºäº†ä¸€ä¸ªèœå•æ é€‰é¡¹ã€‚</p><p><img src="/../images/unity-customize-window/%E8%8F%9C%E5%8D%95%E6%A0%8F.png"></p><h2 id="çª—å£"><a href="#çª—å£" class="headerlink" title="çª—å£"></a>çª—å£</h2><p>éœ€è¦ç»§æ‰¿ <code>EditorWindow</code>ï¼Œé€šè¿‡ <code>GetWindow</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªçª—å£å¯¹è±¡ï¼Œè°ƒç”¨ <code>Show</code> æ–¹æ³•æ˜¾ç¤ºã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>titleContent</code> è®¾ç½®çª—å£æ ‡é¢˜ã€‚</p><p>è¿™é‡Œçš„ <code>GUIContent</code> éœ€è¦å¼•ç”¨å‘½åç©ºé—´ <code>UnityEngine</code>ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;è‡ªå®šä¹‰çª—å£/æ‰“å¼€çª—å£&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OpenWindow</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£å¯¹è±¡</span><br>        CustomizeWindow window = GetWindow&lt;CustomizeWindow&gt;();<br><br>        <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span><br>        window.titleContent = <span class="hljs-keyword">new</span> GUIContent(<span class="hljs-string">&quot;è‡ªå®šä¹‰çª—å£&quot;</span>);<br><br>        <span class="hljs-comment">// æ˜¾ç¤ºçª—å£</span><br>        window.Show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨å†å»ç‚¹å‡»èœå•æ çš„<kbd>æ‰“å¼€çª—å£</kbd>æŒ‰é’®ï¼Œå°±èƒ½æ˜¾ç¤ºè‡ªå®šä¹‰çª—å£äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AA%97%E5%8F%A3.png"></p><h3 id="æŒ‰é’®"><a href="#æŒ‰é’®" class="headerlink" title="æŒ‰é’®"></a>æŒ‰é’®</h3><p>ç°åœ¨çª—å£ç©ºè¡è¡çš„ï¼Œå¯ä»¥å…ˆåŠ ä¸¤ä¸ªæŒ‰é’®ã€‚</p><p>åœ¨çª—å£ä¸­ç»˜åˆ¶ UI å…ƒç´ ï¼Œéœ€è¦å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•° <code>OnGUI</code> é‡Œé¢ï¼Œä½¿ç”¨ <code>GUILayout.Button</code> åˆ›å»ºæŒ‰é’®ï¼Œä½¿ç”¨ <code>GUILayout.Height</code> è®¾ç½®æŒ‰é’®é«˜åº¦ã€‚</p><p>åˆ›å»ºæŒ‰é’®çš„ä»£ç ä¹‹æ‰€ä»¥æ”¾åœ¨ if è¯­å¥çš„æ¡ä»¶åˆ¤æ–­é‡Œï¼Œæ˜¯å› ä¸ºç‚¹å‡»æŒ‰é’®åä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¯ä»¥åˆ¤æ–­æŒ‰é’®æ˜¯å¦è¢«ç‚¹å‡»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;å–æ¶ˆ&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            <br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£å°±æœ‰äº†ä¸¤ä¸ªæŒ‰é’®äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E7%BB%98%E5%88%B6%E6%8C%89%E9%92%AE.png"></p><h3 id="æ–‡æœ¬"><a href="#æ–‡æœ¬" class="headerlink" title="æ–‡æœ¬"></a>æ–‡æœ¬</h3><p>ä½¿ç”¨ <code>GUILayout.Label</code> ç»˜åˆ¶æ–‡æœ¬ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GUILayout.Label(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„çª—å£ï¼Œå¯ä»¥è‡ªç”±ç¼–å†™åŠŸèƒ½&quot;</span>);<br>        <br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£æœ‰æ–‡æœ¬äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC.png"></p><h3 id="æ–‡æœ¬è¾“å…¥æ¡†"><a href="#æ–‡æœ¬è¾“å…¥æ¡†" class="headerlink" title="æ–‡æœ¬è¾“å…¥æ¡†"></a>æ–‡æœ¬è¾“å…¥æ¡†</h3><p>ä½¿ç”¨ <code>EditorGUILayout.TextField</code> ç»˜åˆ¶æ–‡æœ¬è¾“å…¥æ¡†ï¼Œå®ƒæœ‰è¿”å›å€¼ï¼Œæ˜¯è¾“å…¥æ¡†çš„å†…å®¹ã€‚</p><p>å¯ä»¥åœ¨æŒ‰é’®é‡Œé¢æ‰“å°ä¸€ä¸‹æ–‡æœ¬è¾“å…¥æ¡†çš„å†…å®¹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-built_in">string</span> input = <span class="hljs-string">&quot;è¯·è¾“å…¥...&quot;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <br>        input = EditorGUILayout.TextField(input);<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;input = &quot;</span> + input);<br>        &#125;<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£æœ‰æ–‡æœ¬è¾“å…¥æ¡†äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5%E6%A1%86.png"></p><h3 id="æ ·å¼"><a href="#æ ·å¼" class="headerlink" title="æ ·å¼"></a>æ ·å¼</h3><p>æŒ‰é’®æ–‡æœ¬çš„æ ·å¼ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</p><p>å…ˆå®šä¹‰ <code>GUIStyle</code> å˜é‡ï¼Œåœ¨ <code>InitGUIStyle</code> æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«å¯¹ä¸‰ç§æ§ä»¶çš„æ ·å¼è¿›è¡Œåˆå§‹åŒ–è®¾ç½®ï¼Œç„¶åä¼ é€’ç»™æ§ä»¶çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    GUIStyle buttonStyle;<br>    GUIStyle labelStyle;<br>    GUIStyle textFieldStyle;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        InitGUIStyle();<br><br>        GUILayout.Label(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„çª—å£ï¼Œå¯ä»¥è‡ªç”±ç¼–å†™åŠŸèƒ½&quot;</span>, labelStyle);<br><br>        input = EditorGUILayout.TextField(input, textFieldStyle);<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;input = &quot;</span> + input);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;å–æ¶ˆ&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            <br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">InitGUIStyle</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (buttonStyle == <span class="hljs-literal">null</span>)<br>        &#123;<br>            buttonStyle = <span class="hljs-keyword">new</span> GUIStyle(GUI.skin.button);<br>            buttonStyle.fontSize = <span class="hljs-number">14</span>;<br>            buttonStyle.margin.left = <span class="hljs-number">20</span>;<br>            buttonStyle.margin.right = <span class="hljs-number">20</span>;<br>            buttonStyle.margin.top = <span class="hljs-number">20</span>;<br>            buttonStyle.margin.bottom = <span class="hljs-number">20</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (labelStyle == <span class="hljs-literal">null</span>)<br>        &#123;<br>            labelStyle = <span class="hljs-keyword">new</span> GUIStyle(EditorStyles.boldLabel);<br>            labelStyle.fontSize = <span class="hljs-number">14</span>;<br>            labelStyle.margin.left = <span class="hljs-number">20</span>;<br>            labelStyle.margin.right = <span class="hljs-number">20</span>;<br>            labelStyle.margin.top = <span class="hljs-number">20</span>;<br>            labelStyle.margin.bottom = <span class="hljs-number">20</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (textFieldStyle == <span class="hljs-literal">null</span>)<br>        &#123;<br>            textFieldStyle = <span class="hljs-keyword">new</span> GUIStyle(EditorStyles.toolbarTextField);<br>            textFieldStyle.fontSize = <span class="hljs-number">14</span>;<br>            textFieldStyle.fixedHeight = <span class="hljs-number">30</span>;<br>            textFieldStyle.margin.left = <span class="hljs-number">20</span>;<br>            textFieldStyle.margin.right = <span class="hljs-number">20</span>;<br>            textFieldStyle.margin.top = <span class="hljs-number">20</span>;<br>            textFieldStyle.margin.bottom = <span class="hljs-number">20</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨çª—å£ç„•ç„¶ä¸€æ–°ã€‚</p><p><img src="/../images/unity-customize-window/%E6%A0%B7%E5%BC%8F.png"></p><h3 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h3><p>çª—å£å†…çš„æ§ä»¶å¯ä»¥è°ƒæ•´æ‘†æ”¾çš„å¸ƒå±€ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŠŠä¸¤ä¸ªå‚ç›´æ‘†æ”¾çš„æŒ‰é’®ï¼Œæ”¹æˆæ°´å¹³å¸ƒå±€ã€‚</p><ul><li>åœ¨æŒ‰é’®ä»£ç çš„å¼€å¤´åŠ ä¸Š <code>EditorGUILayout.BeginHorizontal();</code></li><li>åœ¨æŒ‰é’®ä»£ç çš„ç»“å°¾åŠ ä¸Š <code>EditorGUILayout.EndHorizontal();</code></li></ul><p>è¢«è¿™ä¸¤è¡Œä»£ç åŒ…å›´çš„æ§ä»¶ï¼Œå°±ä¼šå¤„äºåŒä¸€ä¸ªæ°´å¹³å¸ƒå±€ä¹‹ä¸­ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        EditorGUILayout.BeginHorizontal();<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;input = &quot;</span> + input);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;å–æ¶ˆ&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            <br>        &#125;<br><br>        EditorGUILayout.EndHorizontal();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ä¸¤ä¸ªæŒ‰é’®å°±åœ¨åŒä¸€ä¸ªæ°´å¹³å¸ƒå±€ä¹‹ä¸­äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E5%B8%83%E5%B1%80.png"></p><h3 id="é—´éš”"><a href="#é—´éš”" class="headerlink" title="é—´éš”"></a>é—´éš”</h3><p>ä½¿ç”¨ <code>GUILayout.Space</code> ç»˜åˆ¶é—´éš”ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨æ–‡æœ¬è¾“å…¥æ¡†å’ŒæŒ‰é’®ä¹‹é—´ï¼ŒåŠ å…¥ 10 çš„é—´éš”ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        input = EditorGUILayout.TextField(input, textFieldStyle);<br><br>        GUILayout.Space(<span class="hljs-number">10</span>);<br><br>        EditorGUILayout.BeginHorizontal();<br><br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨æ–‡æœ¬è¾“å…¥æ¡†å’ŒæŒ‰é’®ä¹‹é—´å°±ä¸ä¼šé‚£ä¹ˆè´´è¿‘äº†ã€‚</p><p><img src="/../images/unity-customize-window/%E9%97%B4%E9%9A%94.png"></p><h3 id="æ»šåŠ¨è§†å›¾"><a href="#æ»šåŠ¨è§†å›¾" class="headerlink" title="æ»šåŠ¨è§†å›¾"></a>æ»šåŠ¨è§†å›¾</h3><p>æ»šåŠ¨è§†å›¾ä¹Ÿæ˜¯ä¸¤è¡Œä»£ç åŒ…å›´æ§ä»¶ã€‚</p><ul><li><code>EditorGUILayout.BeginScrollView(scrollPos);</code></li><li><code>EditorGUILayout.EndScrollView();</code></li></ul><p>ä¸è¿‡æ»šåŠ¨è§†å›¾éœ€è¦å®šä¹‰ä¸€ä¸ª <code>Vector2 scrollPos</code>ï¼Œåœ¨æ»šåŠ¨æ—¶è®°å½•å½“å‰çš„ä½ç½®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    GUIStyle scrollViewStyle;<br><br>    Vector2 scrollPos = Vector2.zero;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        GUILayout.Label(<span class="hljs-string">&quot;æœç´¢ç»“æœ&quot;</span>, labelStyle);<br><br>        scrollPos = EditorGUILayout.BeginScrollView(scrollPos, scrollViewStyle);<br><br>        GUILayout.Label(<span class="hljs-string">&quot;ç»“æœ 1&quot;</span>, labelStyle);<br><br>        GUILayout.Label(<span class="hljs-string">&quot;ç»“æœ 2&quot;</span>, labelStyle);<br><br>        EditorGUILayout.EndScrollView();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">InitGUIStyle</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-keyword">if</span> (scrollViewStyle == <span class="hljs-literal">null</span>)<br>        &#123;<br>            scrollViewStyle = <span class="hljs-keyword">new</span> GUIStyle(GUI.skin.scrollView);<br>            scrollViewStyle.fontSize = <span class="hljs-number">14</span>;<br>            scrollViewStyle.margin.left = <span class="hljs-number">20</span>;<br>            scrollViewStyle.margin.right = <span class="hljs-number">20</span>;<br>            scrollViewStyle.margin.top = <span class="hljs-number">20</span>;<br>            scrollViewStyle.margin.bottom = <span class="hljs-number">20</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨å°±æœ‰äº†ä¸€ä¸ªå±•ç¤ºç»“æœåˆ—è¡¨çš„æ»šåŠ¨è§†å›¾ã€‚</p><p><img src="/../images/unity-customize-window/%E6%BB%9A%E5%8A%A8%E8%A7%86%E5%9B%BE.png"></p><h2 id="å¼¹çª—"><a href="#å¼¹çª—" class="headerlink" title="å¼¹çª—"></a>å¼¹çª—</h2><p>ç°åœ¨ç‚¹æŒ‰é’®æ˜¯æ²¡æœ‰åé¦ˆçš„ï¼Œé€šå¸¸æƒ…å†µä¸‹å¯ä»¥ç»™ä¸€ä¸ªå¼¹çª—æç¤ºã€‚</p><ul><li>å¼¹çª—é™„å¸¦ä¸€ä¸ªç¡®å®šå’Œä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œä½¿ç”¨ <code>EditorUtility.DisplayDialog</code>ï¼Œè¿”å› true æˆ–è€… false</li><li>å¼¹çª—é™„å¸¦ä¸€ä¸ªç¡®å®šã€ä¸€ä¸ªå–æ¶ˆã€ä¸€ä¸ªå¯é€‰å’Œä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œä½¿ç”¨ <code>EditorUtility.DisplayDialogComplex</code>ï¼Œè¿”å› 0ã€1ã€2</li></ul><p>ä¾‹å¦‚ï¼Œåœ¨ç¡®å®šå’Œå–æ¶ˆæŒ‰é’®ä¸­æ·»åŠ å¼¹çª—æç¤ºã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEditor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomizeWindow</span> : <span class="hljs-title">EditorWindow</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;ç¡®å®š&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            <span class="hljs-built_in">int</span> id = EditorUtility.DisplayDialogComplex(<span class="hljs-string">&quot;æ¸©é¦¨æç¤º&quot;</span>, <span class="hljs-string">&quot;æœç´¢å®Œæˆ&quot;</span>, <span class="hljs-string">&quot;okk&quot;</span>, <span class="hljs-string">&quot;oh no&quot;</span>, <span class="hljs-string">&quot;good&quot;</span>);<br>            Debug.Log(id);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (GUILayout.Button(<span class="hljs-string">&quot;å–æ¶ˆ&quot;</span>, buttonStyle, GUILayout.Height(<span class="hljs-number">50</span>)))<br>        &#123;<br>            <span class="hljs-built_in">bool</span> flag = EditorUtility.DisplayDialog(<span class="hljs-string">&quot;æ¸©é¦¨æç¤º&quot;</span>, <span class="hljs-string">&quot;å·²å–æ¶ˆ&quot;</span>, <span class="hljs-string">&quot;okk&quot;</span>);<br>            Debug.Log(flag);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œå¼¹å‡ºé™„å¸¦ä¸‰ä¸ªæŒ‰é’®å’Œå…³é—­æŒ‰é’®çš„å¼¹çª—ã€‚</p><p><img src="/../images/unity-customize-window/%E5%A4%8D%E6%9D%82%E5%BC%B9%E7%AA%97.png"></p><p>ç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œå¼¹å‡ºé™„å¸¦ä¸€ä¸ªæŒ‰é’®å’Œå…³é—­æŒ‰é’®çš„å¼¹çª—ã€‚</p><p><img src="/../images/unity-customize-window/%E7%AE%80%E5%8D%95%E5%BC%B9%E7%AA%97.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D MD5 ç­¾åç®—æ³•</title>
    <link href="/2024/08/11/unity-md5-sign/"/>
    <url>/2024/08/11/unity-md5-sign/</url>
    
    <content type="html"><![CDATA[<p>Unity3D MD5 ç­¾åç®—æ³•å®ç°æµç¨‹ã€‚</p><span id="more"></span><h1 id="MD5-ç­¾åç®—æ³•"><a href="#MD5-ç­¾åç®—æ³•" class="headerlink" title="MD5 ç­¾åç®—æ³•"></a>MD5 ç­¾åç®—æ³•</h1><p>ä¹‹å‰åœ¨å’Œè¿è¥å¯¹æ¥æ”¯ä»˜è®¢å•æ¨¡å—æ—¶ï¼Œéœ€è¦å‘ä»–ä»¬çš„æœåŠ¡å™¨å‘é€æŸ¥å•è¯·æ±‚ï¼Œå…¶ä¸­æœ‰ä¸ªå‚æ•°æ˜¯ signï¼Œè¦æ±‚æŠŠè®¢å•çš„ç›¸å…³ä¿¡æ¯ï¼Œè½¬æ¢æˆ MD5 çš„å½¢å¼ã€‚</p><p>ç®€è¦æµç¨‹ï¼š</p><ol><li>å…ˆå¯¹å‚æ•°åˆ—è¡¨æŒ‰ç…§ ASCII ç æ’åº</li><li>å‚æ•°åˆ—è¡¨æ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œæœ«å°¾æ‹¼æ¥å¯†é’¥</li><li>æ‹¼æ¥åçš„å­—ç¬¦ä¸²åš MD5 è®¡ç®—</li></ol><h2 id="å‚æ•°åˆ—è¡¨æ’åº"><a href="#å‚æ•°åˆ—è¡¨æ’åº" class="headerlink" title="å‚æ•°åˆ—è¡¨æ’åº"></a>å‚æ•°åˆ—è¡¨æ’åº</h2><p>é¦–å…ˆï¼Œå‡è®¾æœ‰å¦‚ä¸‹å‚æ•°ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestMD5</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;<br>        &#123;<br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_id&quot;</span></span>] = <span class="hljs-number">100001</span>,         <span class="hljs-comment">// äº§å“ id</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_name&quot;</span></span>] = <span class="hljs-string">&quot;é‡‘å¸ç¤¼åŒ…&quot;</span>,    <span class="hljs-comment">// äº§å“åç§°</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;amount&quot;</span></span>] = <span class="hljs-number">1</span>,                  <span class="hljs-comment">// æ•°é‡</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;price&quot;</span></span>] = <span class="hljs-number">600</span>                  <span class="hljs-comment">// ä»·æ ¼</span><br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨éœ€è¦å…ˆå¯¹å­—å…¸ä¸­çš„å‚æ•°æŒ‰ç…§ ASCII ç è¿›è¡Œæ’åºã€‚</p><p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªé™æ€ç±» <code>MD5Sign.cs</code> ä½œä¸ºå·¥å…·ç±»ä½¿ç”¨ã€‚</p><p>æ·»åŠ æ–¹æ³• <code>AsciiDicToStr</code>ï¼Œæ¥æ”¶å­—å…¸ç±»å‹çš„å‚æ•°ï¼Œè¿”å›å­—ç¬¦ä¸²ã€‚</p><p>å¼•ç”¨ <code>System.Linq</code> å‘½åç©ºé—´ï¼Œå¯ä»¥æ‰©å±•å­—å…¸çš„æ–¹æ³•ï¼Œä¾‹å¦‚ ToArrayï¼ŒæŠŠå­—å…¸çš„ key å€¼å–å‡ºï¼Œå˜æˆæ•°ç»„ã€‚</p><p>åˆ©ç”¨ <code>Array.Sort</code> è¿›è¡Œæ’åºï¼ˆéœ€è¦å‘½åç©ºé—´ <code>System</code>ï¼‰ï¼Œä¼ å…¥å‚æ•° <code>string.CompareOrdinal</code> å°±å¯ä»¥æŒ‰ç…§ ASCII ç ä»å°åˆ°å¤§è¿›è¡Œæ’åºäº†ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.Linq;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä»¥å‚æ•°åçš„ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">AsciiDicToStr</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å–å‡º key é›†åˆå¹¶è½¬æ¢æˆæ•°ç»„</span><br>        <span class="hljs-built_in">string</span>[] keysArray = args.Keys.ToArray();<br><br>        <span class="hljs-comment">// å¯¹ key æ•°ç»„è¿›è¡Œæ’åºï¼ˆASCII ç ä»å°åˆ°å¤§ï¼‰</span><br>        Array.Sort(keysArray, <span class="hljs-built_in">string</span>.CompareOrdinal);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚æ•°æ‹¼æ¥å­—ç¬¦ä¸²"><a href="#å‚æ•°æ‹¼æ¥å­—ç¬¦ä¸²" class="headerlink" title="å‚æ•°æ‹¼æ¥å­—ç¬¦ä¸²"></a>å‚æ•°æ‹¼æ¥å­—ç¬¦ä¸²</h2><p>ç»§ç»­æ‰©å±• <code>AsciiDicToStr</code> æ–¹æ³•ã€‚</p><p>å¼•ç”¨å‘½åç©ºé—´ <code>System.Text</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>StringBuilder</code> æ¥æ‹¼æ¥å­—ç¬¦ä¸²äº†ã€‚</p><p>éå† key æ•°ç»„ï¼ŒæŒ‰ç…§ <code>key=value&amp;</code> çš„å½¢å¼æ‹¼æ¥ï¼Œå‚æ•°å€¼ä¸º null æˆ–è€… â€œâ€ ä¸å‚ä¸ç­¾åã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.Linq;<br><span class="hljs-keyword">using</span> System.Text;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä»¥å‚æ•°åçš„ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">AsciiDicToStr</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å–å‡º key é›†åˆå¹¶è½¬æ¢æˆæ•°ç»„</span><br>        <span class="hljs-built_in">string</span>[] keysArray = args.Keys.ToArray();<br><br>        <span class="hljs-comment">// å¯¹ key æ•°ç»„è¿›è¡Œæ’åºï¼ˆASCII ç ä»å°åˆ°å¤§ï¼‰</span><br>        Array.Sort(keysArray, <span class="hljs-built_in">string</span>.CompareOrdinal);<br><br>        <span class="hljs-comment">// æŒ‰ç…§æ’åºåçš„ key æ•°ç»„ä¾æ¬¡ä»å­—å…¸ä¸­å–å‡ºå€¼è¿›è¡Œæ‹¼æ¥</span><br>        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> keysArray)<br>        &#123;<br>            <span class="hljs-built_in">string</span> <span class="hljs-keyword">value</span> = args[key]?.ToString();<br><br>            <span class="hljs-comment">// å‚æ•°å€¼ä¸º null æˆ–è€… &quot;&quot; ä¸å‚ä¸ç­¾å</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">string</span>.Empty.Equals(<span class="hljs-keyword">value</span>))<br>            &#123;<br>                sb.Append(key);<br>                sb.Append(<span class="hljs-string">&quot;=&quot;</span>);<br>                sb.Append(<span class="hljs-keyword">value</span>);<br>                sb.Append(<span class="hljs-string">&quot;&amp;&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> sb.ToString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥å†æ·»åŠ ä¸€ä¸ªæ–¹æ³• <code>ComputeSign</code> æä¾›ç»™å¤–éƒ¨è°ƒç”¨ã€‚</p><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå¯†é’¥ï¼Œå†…å®¹æ˜¯éšä¾¿è¾“å…¥çš„ï¼Œç”¨äºæ¼”ç¤ºï¼Œé€šå¸¸æƒ…å†µä¸‹å¯†é’¥ä¸ä¼šæ”¾åœ¨å®¢æˆ·ç«¯ï¼Œé˜²æ­¢è¢«ç ´è§£è·å–ï¼Œåº”è¯¥æ”¾åˆ°æœåŠ¡ç«¯ã€‚</p><p>è°ƒç”¨ä¸Šé¢å†™çš„ <code>AsciiDicToStr</code> æ–¹æ³•ï¼Œä¼ å…¥å­—å…¸ï¼Œå¾—åˆ° resultï¼Œåœ¨æœ«å°¾ç»§ç»­æ‹¼æ¥ <code>key=signKey</code>ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment">// å¯†é’¥ï¼Œé€šå¸¸åº”è¯¥æ”¾åˆ°æœåŠ¡ç«¯ï¼Œæ­¤å¤„ä¸ºäº†æ¼”ç¤ºå…ˆæ”¾å®¢æˆ·ç«¯</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> signKey = <span class="hljs-string">&quot;abcdefg&quot;</span>;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®¡ç®—å‚æ•°ç­¾å</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ComputeSign</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰ç…§ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>        <span class="hljs-built_in">string</span> result = AsciiDicToStr(args);<br><br>        <span class="hljs-comment">// æ‹¼æ¥å¯†é’¥</span><br>        result += <span class="hljs-string">$&quot;key=<span class="hljs-subst">&#123;signKey&#125;</span>&quot;</span>;<br><br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥å…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒæŸ¥çœ‹æ‹¼æ¥åçš„ç»“æœã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestMD5</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;<br>        &#123;<br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_id&quot;</span></span>] = <span class="hljs-number">100001</span>,         <span class="hljs-comment">// äº§å“ id</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_name&quot;</span></span>] = <span class="hljs-string">&quot;é‡‘å¸ç¤¼åŒ…&quot;</span>,    <span class="hljs-comment">// äº§å“åç§°</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;amount&quot;</span></span>] = <span class="hljs-number">1</span>,                  <span class="hljs-comment">// æ•°é‡</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;price&quot;</span></span>] = <span class="hljs-number">600</span>                  <span class="hljs-comment">// ä»·æ ¼</span><br>        &#125;;<br><br>        <span class="hljs-built_in">string</span> result = MD5Sign.ComputeSign(args);<br>        Debug.Log(<span class="hljs-string">$&quot;result = <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>);<br>        <br>        <span class="hljs-comment">// result = amount=1&amp;price=600&amp;product_id=100001&amp;product_name=é‡‘å¸ç¤¼åŒ…&amp;key=abcdefg</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è®¡ç®—-MD5"><a href="#è®¡ç®—-MD5" class="headerlink" title="è®¡ç®— MD5"></a>è®¡ç®— MD5</h2><p>åœ¨é™æ€ç±» <code>MD5Sign.cs</code> ä¸­ç»§ç»­æ·»åŠ æ–¹æ³• <code>ComputeStringMD5</code>ï¼Œæ¥æ”¶å­—ç¬¦ä¸²ï¼Œè¿”å›å­—ç¬¦ä¸²ã€‚</p><p>åœ¨ C# ä¸­ï¼Œæœ‰æä¾›ç”¨äºåŠ å¯†ç®—æ³•çš„ç±»ï¼Œéœ€è¦å¼•ç”¨å‘½åç©ºé—´ <code>System.Security.Cryptography</code>ã€‚</p><p>åˆ›å»ºä¸€ä¸ª MD5 å¯¹è±¡ï¼Œå…ˆé€šè¿‡ <code>Encoding.UTF8.GetBytes</code> æ–¹æ³•ï¼ŒæŠŠå­—ç¬¦ä¸²è½¬æˆ byte æ•°ç»„ï¼Œä¼ ç»™ MD5 å¯¹è±¡çš„ <code>ComputeHash</code> æ–¹æ³•ï¼ŒåŒæ ·å¾—åˆ° byte æ•°ç»„ï¼Œéå†è¿™ä¸ª byte æ•°ç»„ï¼Œä½¿ç”¨ <code>ToString(&quot;X2&quot;)</code> çš„æ ¼å¼è¿›è¡Œæ‹¼æ¥ï¼ˆ<code>X2</code> è¡¨ç¤ºä½¿ç”¨å¤§å†™åå…­è¿›åˆ¶ï¼Œä¸è¶³ä¸¤ä½æ—¶å‰é¢è¡¥ 0ï¼‰ã€‚</p><p>å› ä¸º byte æ•°ç»„çš„é•¿åº¦æ˜¯ 16ï¼Œæ¯ä¸ªå€¼éƒ½è½¬æˆä¸¤ä½å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯ 32 ä½å­—ç¬¦ä¸²ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">// ...</span><br><span class="hljs-keyword">using</span> System.Security.Cryptography;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®¡ç®—å­—ç¬¦ä¸²çš„ MD5 å€¼</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;str&quot;&gt;</span>å­—ç¬¦ä¸²<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ComputeStringMD5</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> str</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br><br>        <span class="hljs-comment">// åˆ›å»º MD5 å¯¹è±¡</span><br>        <span class="hljs-keyword">using</span> (MD5 md5 = MD5.Create())<br>        &#123;<br>            <span class="hljs-comment">// å­—ç¬¦ä¸²è½¬ byte æ•°ç»„</span><br>            <span class="hljs-built_in">byte</span>[] buffer = Encoding.UTF8.GetBytes(str);<br><br>            <span class="hljs-comment">// è®¡ç®— MD5 å€¼</span><br>            <span class="hljs-built_in">byte</span>[] mdBytes = md5.ComputeHash(buffer);<br>            md5.Clear();<br><br>            <span class="hljs-comment">// å°† byte æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»¥å¤§å†™åå…­è¿›åˆ¶å­—ç¬¦ä¸²çš„æ–¹å¼æ‹¼æ¥</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; mdBytes.Length; i++)<br>            &#123;<br>                sb.Append(mdBytes[i].ToString(<span class="hljs-string">&quot;X2&quot;</span>));<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> sb.ToString();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åæŠŠè¿™ä¸ªæ–¹æ³•æ¥å…¥ <code>ComputeSign</code> æ–¹æ³•ä¸­ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®¡ç®—å‚æ•°ç­¾å</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ComputeSign</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰ç…§ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>        <span class="hljs-built_in">string</span> result = AsciiDicToStr(args);<br><br>        <span class="hljs-comment">// æ‹¼æ¥å¯†é’¥</span><br>        result += <span class="hljs-string">$&quot;key=<span class="hljs-subst">&#123;signKey&#125;</span>&quot;</span>;<br><br>        <span class="hljs-comment">// è®¡ç®—æ‹¼æ¥åçš„å­—ç¬¦ä¸²çš„ MD5 å€¼</span><br>        <span class="hljs-built_in">string</span> md5 = ComputeStringMD5(result);<br><br>        <span class="hljs-keyword">return</span> md5;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥å¾—åˆ°è®¡ç®— MD5 ä¹‹åçš„ç»“æœäº†ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestMD5</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;<br>        &#123;<br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_id&quot;</span></span>] = <span class="hljs-number">100001</span>,         <span class="hljs-comment">// äº§å“ id</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;product_name&quot;</span></span>] = <span class="hljs-string">&quot;é‡‘å¸ç¤¼åŒ…&quot;</span>,    <span class="hljs-comment">// äº§å“åç§°</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;amount&quot;</span></span>] = <span class="hljs-number">1</span>,                  <span class="hljs-comment">// æ•°é‡</span><br>            [<span class="hljs-meta"><span class="hljs-meta-string">&quot;price&quot;</span></span>] = <span class="hljs-number">600</span>                  <span class="hljs-comment">// ä»·æ ¼</span><br>        &#125;;<br><br>        <span class="hljs-built_in">string</span> result = MD5Sign.ComputeSign(args);<br>        Debug.Log(<span class="hljs-string">$&quot;result = <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>);<br>        <br>        <span class="hljs-comment">// result = EF4834EF466F73319545057E703E73E2</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><p><code>MD5Sign.cs</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> System.Linq;<br><span class="hljs-keyword">using</span> System.Text;<br><span class="hljs-keyword">using</span> System.Security.Cryptography;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MD5Sign</span><br>&#123;<br>    <span class="hljs-comment">// å¯†é’¥ï¼Œé€šå¸¸åº”è¯¥æ”¾åˆ°æœåŠ¡ç«¯ï¼Œæ­¤å¤„ä¸ºäº†æ¼”ç¤ºå…ˆæ”¾å®¢æˆ·ç«¯</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> signKey = <span class="hljs-string">&quot;abcdefg&quot;</span>;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®¡ç®—å‚æ•°ç­¾å</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ComputeSign</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰ç…§ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>        <span class="hljs-built_in">string</span> result = AsciiDicToStr(args);<br><br>        <span class="hljs-comment">// æ‹¼æ¥å¯†é’¥</span><br>        result += <span class="hljs-string">$&quot;key=<span class="hljs-subst">&#123;signKey&#125;</span>&quot;</span>;<br><br>        <span class="hljs-comment">// è®¡ç®—æ‹¼æ¥åçš„å­—ç¬¦ä¸²çš„ MD5 å€¼</span><br>        <span class="hljs-built_in">string</span> md5 = ComputeStringMD5(result);<br><br>        <span class="hljs-keyword">return</span> md5;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä»¥å‚æ•°åçš„ ASCII ç ä»å°åˆ°å¤§æ’åºå¹¶æ‹¼æ¥</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;args&quot;&gt;</span>å‚æ•°åˆ—è¡¨<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">AsciiDicToStr</span>(<span class="hljs-params">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; args</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å–å‡º key é›†åˆå¹¶è½¬æ¢æˆæ•°ç»„</span><br>        <span class="hljs-built_in">string</span>[] keysArray = args.Keys.ToArray();<br><br>        <span class="hljs-comment">// å¯¹ key æ•°ç»„è¿›è¡Œæ’åºï¼ˆASCII ç ä»å°åˆ°å¤§ï¼‰</span><br>        Array.Sort(keysArray, <span class="hljs-built_in">string</span>.CompareOrdinal);<br><br>        <span class="hljs-comment">// æŒ‰ç…§æ’åºåçš„ key æ•°ç»„ä¾æ¬¡ä»å­—å…¸ä¸­å–å‡ºå€¼è¿›è¡Œæ‹¼æ¥</span><br>        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br><br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> keysArray)<br>        &#123;<br>            <span class="hljs-built_in">string</span> <span class="hljs-keyword">value</span> = args[key]?.ToString();<br><br>            <span class="hljs-comment">// å‚æ•°å€¼ä¸º null æˆ–è€… &quot;&quot; ä¸å‚ä¸ç­¾å</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">string</span>.Empty.Equals(<span class="hljs-keyword">value</span>))<br>            &#123;<br>                sb.Append(key);<br>                sb.Append(<span class="hljs-string">&quot;=&quot;</span>);<br>                sb.Append(<span class="hljs-keyword">value</span>);<br>                sb.Append(<span class="hljs-string">&quot;&amp;&quot;</span>);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> sb.ToString();<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®¡ç®—å­—ç¬¦ä¸²çš„ MD5 å€¼</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;str&quot;&gt;</span>å­—ç¬¦ä¸²<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ComputeStringMD5</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> str</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br><br>        <span class="hljs-comment">// åˆ›å»º MD5 å¯¹è±¡</span><br>        <span class="hljs-keyword">using</span> (MD5 md5 = MD5.Create())<br>        &#123;<br>            <span class="hljs-comment">// å­—ç¬¦ä¸²è½¬ byte æ•°ç»„</span><br>            <span class="hljs-built_in">byte</span>[] buffer = Encoding.UTF8.GetBytes(str);<br><br>            <span class="hljs-comment">// è®¡ç®— MD5 å€¼</span><br>            <span class="hljs-built_in">byte</span>[] mdBytes = md5.ComputeHash(buffer);<br>            md5.Clear();<br><br>            <span class="hljs-comment">// å°† byte æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»¥å¤§å†™åå…­è¿›åˆ¶å­—ç¬¦ä¸²çš„æ–¹å¼æ‹¼æ¥</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; mdBytes.Length; i++)<br>            &#123;<br>                sb.Append(mdBytes[i].ToString(<span class="hljs-string">&quot;X2&quot;</span>));<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> sb.ToString();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D ç‰©ä½“åœ†å‘¨è¿åŠ¨</title>
    <link href="/2024/08/04/unity-circular-motion/"/>
    <url>/2024/08/04/unity-circular-motion/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®ç°ä¸€ä¸ª 2D ç‰©ä½“æ²¿ç€åœ†å‘¨è¿›è¡Œè¿åŠ¨ã€‚</p><span id="more"></span><h1 id="ç‰©ä½“åœ†å‘¨è¿åŠ¨"><a href="#ç‰©ä½“åœ†å‘¨è¿åŠ¨" class="headerlink" title="ç‰©ä½“åœ†å‘¨è¿åŠ¨"></a>ç‰©ä½“åœ†å‘¨è¿åŠ¨</h1><p>å‰æ®µæ—¶é—´åœ¨å¼€å‘ä¸€ä¸ªå°æ¸¸æˆæ—¶ï¼Œéœ€è¦å®ç°ç«ç®­æ²¿ç€ä¸€ä¸ªåœ†å½¢è½¨é“è¿›è¡Œåœ†å‘¨è¿åŠ¨ã€‚</p><p>ä»¥å‰é¢è¯•çš„æ—¶å€™ä¹Ÿè¢«é—®åˆ°è¿‡è¿™ç±»é—®é¢˜ï¼ˆå¦‚ä½•è®©ä¸€ä¸ª 2D ç‰©ä½“åšåœ†å‘¨è¿åŠ¨ï¼‰ï¼Œæ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹å®ç°æ€è·¯ã€‚</p><h2 id="å‡†å¤‡ç´ æ"><a href="#å‡†å¤‡ç´ æ" class="headerlink" title="å‡†å¤‡ç´ æ"></a>å‡†å¤‡ç´ æ</h2><p>å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸¤å¼ å›¾ç‰‡ç´ æï¼Œåªè¦æ˜¯ä¸€ä¸ªç‰©ä½“å’Œä¸€ä¸ªåœ†åœˆå°±è¡Œäº†ï¼Œè¿™é‡Œå°±å…ˆä¸æä¾›ç´ æå•¦ã€‚</p><p><img src="/../images/unity-circular-motion/%E5%87%86%E5%A4%87%E7%B4%A0%E6%9D%90.png"></p><p>ç„¶åç›´æ¥æŠŠæ¯å¼ å›¾ç‰‡ç´ æåˆ†åˆ«æ‹–æ‹½åˆ°åœºæ™¯ä¸­ã€‚</p><p><img src="/../images/unity-circular-motion/%E6%8B%96%E5%88%B0%E5%9C%BA%E6%99%AF.png"></p><h2 id="æ•°å­¦çŸ¥è¯†"><a href="#æ•°å­¦çŸ¥è¯†" class="headerlink" title="æ•°å­¦çŸ¥è¯†"></a>æ•°å­¦çŸ¥è¯†</h2><p>åœ¨çœ‹åˆ°è¿™ä¸ªåœºæ™¯æ—¶ï¼Œå¯ä»¥è”æƒ³åˆ°ä¸€ä¸ªå•ä½åœ†ï¼Œä¸‰è§’å‡½æ•°ä¹‹ç±»çš„æ•°å­¦çŸ¥è¯†ã€‚</p><p>ä¾‹å¦‚ä¸‹å›¾ï¼Œåœ†çš„åŠå¾„ r &#x3D; 1ï¼Œç‚¹ P è½åœ¨åœ†å‘¨ä¸Šï¼Œç›´çº¿ OP ä¸ x è½´çš„å¤¹è§’ä¸º $Î±$ã€‚</p><p>å› ä¸º aï¼Œbï¼Œr ä¸‰æ¡è¾¹æ„æˆäº†ä¸€ä¸ªä¸‰è§’å½¢ï¼Œå¯ä»¥ä½¿ç”¨æ­£å¼¦ã€ä½™å¼¦å’Œæ­£åˆ‡çš„æ¦‚å¿µï¼Œè·Ÿå¤¹è§’è”ç³»èµ·æ¥ï¼Œå³<br>$$<br>sin Î± &#x3D; å¯¹è¾¹&#x2F;æ–œè¾¹ &#x3D; b&#x2F;r &#x3D; b<br>$$</p><p>$$<br>cos Î± &#x3D; é‚»è¾¹&#x2F;æ–œè¾¹ &#x3D; a&#x2F;r &#x3D; a<br>$$</p><p>$$<br>tan Î± &#x3D; å¯¹è¾¹&#x2F;é‚»è¾¹ &#x3D; b&#x2F;a<br>$$</p><p><img src="/../images/unity-circular-motion/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86.png"></p><p>é‚£ä¹ˆï¼Œå½“å¤¹è§’å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£å¼¦å’Œä½™å¼¦è®¡ç®—å‡ºç‚¹ P çš„åæ ‡ã€‚</p><p>è¿‡ç‚¹ P ä½œç›´çº¿ PQ å‚ç›´äºç›´çº¿ OPï¼Œç›´çº¿ PQ æ˜¯ç‚¹ P å¤„çš„åˆ‡çº¿ã€‚</p><p><img src="/../images/unity-circular-motion/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%E5%88%87%E7%BA%BF.png"></p><h2 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h2><h3 id="è®¡ç®—åæ ‡ä½ç½®"><a href="#è®¡ç®—åæ ‡ä½ç½®" class="headerlink" title="è®¡ç®—åæ ‡ä½ç½®"></a>è®¡ç®—åæ ‡ä½ç½®</h3><p>åˆ›å»ºè„šæœ¬ CircularMotion.csï¼ŒæŒ‚è½½åˆ°ç«ç®­ä¸Šã€‚</p><p>è„šæœ¬ä¸­æœ‰ä¸‰ä¸ªå˜é‡ï¼š</p><ul><li>radius æ§åˆ¶åœ†çš„åŠå¾„ï¼Œæ”¹å˜ç«ç®­ç§»åŠ¨çš„è½¨è¿¹ã€‚</li><li>angle å®æ—¶å˜åŒ–çš„è§’åº¦ï¼Œåœ¨ Update ä¸­ä¸æ–­å˜åŒ–ã€‚</li><li>speed æ§åˆ¶è§’åº¦å˜åŒ–çš„é€Ÿåº¦ã€‚</li></ul><p>åœ¨ Update ä¸­ï¼Œå…ˆæŠŠè§’åº¦è½¬æˆå¼§åº¦ï¼Œè¿™æ˜¯å› ä¸º <code>Mathf.Sin</code> å’Œ <code>Mathf.Cos</code> æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¼§åº¦å€¼ã€‚</p><p>åªéœ€è¦è®©è§’åº¦ä¹˜ä¸Š <code>Mathf.Deg2Rad</code> è¿™ä¸ªå¸¸é‡å€¼å³å¯ã€‚</p><p>æ¥ç€ï¼Œé€šè¿‡å¼§åº¦å€¼ï¼Œè®¡ç®—å‡ºæ­£å¼¦å’Œä½™å¼¦ï¼Œä¹˜ä¸ŠåŠå¾„ï¼ˆä¹Ÿå°±æ˜¯æ–œè¾¹ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”åŠå¾„çš„åœ†å‘¨ä¸Šçš„åæ ‡ç‚¹ï¼Œä¿®æ”¹ç«ç®­çš„ä½ç½®ã€‚</p><p>æœ€åå®æ—¶æ›´æ–°è§’åº¦ï¼Œé€šè¿‡ speed å˜é‡æ§åˆ¶é€Ÿåº¦å¿«æ…¢ï¼Œä¹˜ä¸Š <code>Time.deltaTime</code> ä¿è¯è§’åº¦å˜åŒ–ä¸å—å¸§ç‡å½±å“ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CircularMotion</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> radius = <span class="hljs-number">3f</span>;  <span class="hljs-comment">// åœ†çš„åŠå¾„</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> angle = <span class="hljs-number">0f</span>;   <span class="hljs-comment">// å®æ—¶å˜åŒ–çš„è§’åº¦</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">50f</span>;  <span class="hljs-comment">// è§’åº¦å˜åŒ–é€Ÿåº¦</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è§’åº¦è½¬å¼§åº¦</span><br>        <span class="hljs-built_in">float</span> radians = Mathf.Deg2Rad * angle;<br>        <br>        <span class="hljs-comment">// å•ä½åœ†çš„åæ ‡ç‚¹</span><br>        <span class="hljs-built_in">float</span> a = Mathf.Cos(radians);<br>        <span class="hljs-built_in">float</span> b = Mathf.Sin(radians);<br>        <br>        <span class="hljs-comment">// æ ¹æ®åŠå¾„ç¼©æ”¾åæ ‡ç‚¹</span><br>        <span class="hljs-built_in">float</span> x = a * radius;<br>        <span class="hljs-built_in">float</span> y = b * radius;<br><br>        <span class="hljs-comment">// è®¾ç½®ç‰©ä½“ä½ç½®</span><br>        transform.position = <span class="hljs-keyword">new</span> Vector2(x, y);<br><br>        <span class="hljs-comment">// æ›´æ–°è§’åº¦</span><br>        angle += speed * Time.deltaTime;<br>        <br>        <span class="hljs-comment">// ç¡®ä¿è§’åº¦åœ¨åˆç†èŒƒå›´å†…ï¼ˆ0 åˆ° 360 åº¦ï¼‰</span><br>        <span class="hljs-keyword">if</span> (angle &gt;= <span class="hljs-number">360f</span>)<br>        &#123;<br>            angle -= <span class="hljs-number">360f</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (angle &lt;= <span class="hljs-number">0f</span>)<br>        &#123;<br>            angle += <span class="hljs-number">360f</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-circular-motion/%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C.gif"></p><h3 id="è®¡ç®—åˆ‡çº¿æ–¹å‘"><a href="#è®¡ç®—åˆ‡çº¿æ–¹å‘" class="headerlink" title="è®¡ç®—åˆ‡çº¿æ–¹å‘"></a>è®¡ç®—åˆ‡çº¿æ–¹å‘</h3><p>ç°åœ¨ç«ç®­è™½ç„¶èƒ½è¿›è¡Œåœ†å‘¨è¿åŠ¨äº†ï¼Œä½†æ˜¯æ–¹å‘çœ‹ä¸Šå»ä¸å¯¹ï¼Œç«ç®­çš„é¡¶ç«¯åº”è¯¥æœç€è½¨é“çš„åˆ‡çº¿æ–¹å‘æ—‹è½¬ã€‚</p><p>ç”±ä¸Šè¿°çš„æ•°å­¦çŸ¥è¯†å¯çŸ¥ï¼Œç›´çº¿ PQ æ˜¯ç‚¹ P å¤„çš„åˆ‡çº¿ï¼ŒæŠŠåˆ‡çº¿å¹³ç§»åˆ°åŸç‚¹å¤„ï¼Œä½œç›´çº¿ MNã€‚</p><p>ç‚¹ M å’Œ N éƒ½æ˜¯åœ†å‘¨ä¸Šçš„ç‚¹ï¼Œå®ƒä»¬æ„æˆçš„ä¸‰è§’å½¢éƒ½æ˜¯å…¨ç­‰çš„ï¼Œå®¹æ˜“å¾—å‡ºå®ƒä»¬çš„åæ ‡åˆ†åˆ«æ˜¯ (-b, a) å’Œ (b, -a)ã€‚</p><p><img src="/../images/unity-circular-motion/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%E6%96%B9%E5%90%91.png"></p><p>ç›®å‰ç«ç®­æ˜¯æŒ‰é€†æ—¶é’ˆæ–¹å‘ç§»åŠ¨çš„ï¼Œç«ç®­é¡¶ç«¯åº”è¯¥æœç€ç‚¹ M(-b, a) çš„æ–¹å‘ã€‚</p><p>è¿™é‡Œä½¿ç”¨ <code>Mathf.Atan2</code> å‡½æ•°ï¼Œæ³¨æ„å®ƒçš„å‚æ•°åˆ—è¡¨æ˜¯ <code>Atan2(float y, float x)</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ yï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ xã€‚</p><p>å®ƒä¹Ÿç»™å‡ºäº†æ³¨é‡Š <code>Returns the angle in radians whose Tan is y/x.</code></p><p>æ‰€ä»¥è°ƒç”¨æ—¶ï¼Œå†™æˆ <code>Mathf.Atan2(a, -b)</code>ã€‚</p><p>å› ä¸ºæ­¤å‡½æ•°çš„è¿”å›å€¼æ˜¯å¼§åº¦ï¼Œéœ€è¦è½¬æˆè§’åº¦ï¼Œåªéœ€è¦ä¹˜ä¸Š <code>Mathf.Rad2Deg</code> å³å¯ã€‚</p><p>è½¬æ¢åçš„è§’åº¦æ˜¯ä» X è½´çš„æ­£æ–¹å‘åˆ°å°„çº¿ OM çš„å¤¹è§’ $Î²$ï¼Œå–å€¼èŒƒå›´æ˜¯ -180Â° åˆ° 180Â°ã€‚</p><p>æœ€åä½¿ç”¨ <code>Quaternion.Euler</code> æ„é€ ä¸€ä¸ªæ¬§æ‹‰è§’ï¼Œèµ‹å€¼ç»™ <code>transform.rotation</code>ï¼Œä¿®æ”¹ç«ç®­çš„ Z è½´æ—‹è½¬ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CircularMotion</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> radius = <span class="hljs-number">3f</span>;  <span class="hljs-comment">// åœ†çš„åŠå¾„</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> angle = <span class="hljs-number">0f</span>;   <span class="hljs-comment">// å®æ—¶å˜åŒ–çš„è§’åº¦</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">50f</span>;  <span class="hljs-comment">// è§’åº¦å˜åŒ–é€Ÿåº¦</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è§’åº¦è½¬å¼§åº¦</span><br>        <span class="hljs-built_in">float</span> radians = Mathf.Deg2Rad * angle;<br><br>        <span class="hljs-comment">// å•ä½åœ†çš„åæ ‡ç‚¹</span><br>        <span class="hljs-built_in">float</span> a = Mathf.Cos(radians);<br>        <span class="hljs-built_in">float</span> b = Mathf.Sin(radians);<br>        <br>        <span class="hljs-comment">// æ ¹æ®åŠå¾„ç¼©æ”¾åæ ‡ç‚¹</span><br>        <span class="hljs-built_in">float</span> x = a * radius;<br>        <span class="hljs-built_in">float</span> y = b * radius;<br><br>        <span class="hljs-comment">// è®¾ç½®ç‰©ä½“ä½ç½®</span><br>        transform.position = <span class="hljs-keyword">new</span> Vector2(x, y);<br><br>        <span class="hljs-comment">// è®¡ç®—æ—‹è½¬è§’åº¦</span><br>        <span class="hljs-built_in">float</span> rotationAngle = Mathf.Atan2(a, -b) * Mathf.Rad2Deg;<br><br>        <span class="hljs-comment">// è®¾ç½®ç‰©ä½“çš„æ—‹è½¬</span><br>        transform.rotation = Quaternion.Euler(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, rotationAngle);<br><br>        <span class="hljs-comment">// æ›´æ–°è§’åº¦</span><br>        angle += speed * Time.deltaTime;<br>        <br>        <span class="hljs-comment">// ç¡®ä¿è§’åº¦åœ¨åˆç†èŒƒå›´å†…ï¼ˆ0 åˆ° 360 åº¦ï¼‰</span><br>        <span class="hljs-keyword">if</span> (angle &gt;= <span class="hljs-number">360f</span>)<br>        &#123;<br>            angle -= <span class="hljs-number">360f</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (angle &lt;= <span class="hljs-number">0f</span>)<br>        &#123;<br>            angle += <span class="hljs-number">360f</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-circular-motion/%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C2.gif"></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>æ•°å­¦æ–¹æ³•ï¼š</p><ul><li>è§’åº¦è½¬å¼§åº¦ radians &#x3D; Mathf.Deg2Rad * angle</li><li>å¼§åº¦è½¬è§’åº¦ angle &#x3D; Mathf.Rad2Deg * radians</li><li>æ­£å¼¦ Mathf.Sin(radians)</li><li>ä½™å¼¦ Mathf.Cos(radians)</li><li>åæ­£åˆ‡ Mathf.Atan2(y, x)</li></ul><p>è§’åº¦å’Œå¼§åº¦æ˜¯åº¦é‡è§’çš„ä¸¤ç§å•ä½ï¼Œè§’åº¦æ—‹è½¬ä¸€å‘¨æ˜¯ 360Â°ï¼Œå¼§åº¦åˆ™æ˜¯ $2Ï€$ï¼Œå³ $360Â°&#x3D;2Ï€$ã€‚</p><p>1 å¼§åº¦å¤§çº¦ç­‰äº 57.3Â°ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 05 å¹¿å‘Šå†…è´­</title>
    <link href="/2024/07/28/unity-wechat-minigame-5/"/>
    <url>/2024/07/28/unity-wechat-minigame-5/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼•ç³»åˆ—ï¼ˆç¬¬äº”æœŸ å®Œç»“ï¼‰</p><span id="more"></span><h1 id="å¹¿å‘Š"><a href="#å¹¿å‘Š" class="headerlink" title="å¹¿å‘Š"></a>å¹¿å‘Š</h1><p>åœ¨å°ç¨‹åºåå°é¡µé¢æ‰¾åˆ°<kbd>æ¨å¹¿</kbd>-&gt;<kbd>æµé‡ä¸»</kbd></p><p><img src="/../images/unity-wechat-minigame-5/%E6%B5%81%E9%87%8F%E4%B8%BB%E5%85%A5%E5%8F%A3.png"></p><p>å¼€é€šæ¡ä»¶å¦‚ä¸‹ï¼š</p><p><img src="/../images/unity-wechat-minigame-5/%E6%B5%81%E9%87%8F%E4%B8%BB%E5%BC%80%E9%80%9A%E6%9D%A1%E4%BB%B6.png"></p><p>å¼€é€šä¹‹åï¼Œéœ€è¦æ¥å…¥å¹¿å‘Šç»„ä»¶ã€‚</p><p>è°ƒç”¨åˆ›å»ºå¹¿å‘Šç»„ä»¶çš„æ¥å£æ—¶ï¼Œéœ€è¦ä¼ å…¥å‚æ•° <code>adUnitId</code>ï¼Œè¿™ä¸ªæ˜¯å¼€é€šæµé‡ä¸»ä¹‹åå¯ä»¥è·å¾—çš„ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¹¿å‘Šç»„ä»¶æ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œä»…éœ€åˆ›å»ºä¸€æ¬¡ï¼Œç›‘å¬äº‹ä»¶ä¹Ÿä»…éœ€æ³¨å†Œä¸€æ¬¡ï¼Œå¦åˆ™ä¼šæœ‰å¤šæ¬¡å›è°ƒã€‚</p></blockquote><p>å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>WXAdManager</code>ï¼Œæä¾›åˆå§‹åŒ–ã€æ˜¾ç¤ºå¹¿å‘Šçš„æ¥å£ï¼Œå…³é—­å¹¿å‘Šæ—¶ï¼Œåˆ¤æ–­å¹¿å‘Šæ˜¯å¦å®Œæ•´æ’­æ”¾ï¼Œå¹¶è°ƒç”¨å¥–åŠ±å›è°ƒã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> WeChatWASM;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WXAdManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">static</span> WXAdManager instance;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WXAdManager Instance<br>    &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> instance; &#125;<br>    &#125;<br><br>    WXRewardedVideoAd ad;    <span class="hljs-comment">// å¹¿å‘Šå•ä¾‹</span><br>    Action rewardCallback;   <span class="hljs-comment">// å¥–åŠ±å›è°ƒ</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Destroy(gameObject);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            instance = <span class="hljs-keyword">this</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        ad = WX.CreateRewardedVideoAd(<span class="hljs-keyword">new</span> WXCreateRewardedVideoAdParam()<br>        &#123;<br>            adUnitId = <span class="hljs-string">&quot;...&quot;</span> <span class="hljs-comment">// è‡ªå·±ç”³è¯·çš„å¹¿å‘Šå•å…ƒ ID</span><br>        &#125;);<br><br>        ad.OnLoad((res) =&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">$&quot;å¹¿å‘ŠåŠ è½½ = <span class="hljs-subst">&#123;res.errMsg&#125;</span>&quot;</span>);<br>        &#125;);<br>        ad.OnError((res) =&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">$&quot;å¹¿å‘Šé”™è¯¯ = <span class="hljs-subst">&#123;res.errMsg&#125;</span>&quot;</span>);<br>        &#125;);<br>        ad.OnClose((res) =&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">$&quot;å¹¿å‘Šå…³é—­  æ˜¯å¦çœ‹å®Œ = <span class="hljs-subst">&#123;res.isEnded&#125;</span>&quot;</span>);<br>            OnPlayEnd(res.isEnded);<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ˜¾ç¤ºå¹¿å‘Š</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;callback&quot;&gt;</span>çœ‹å®Œå¹¿å‘Šåçš„å›è°ƒ<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ShowAd</span>(<span class="hljs-params">Action callback</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æ˜¾ç¤ºå¹¿å‘Š&quot;</span>);<br>        ad.Show();<br>        rewardCallback = callback;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> å¹¿å‘Šçœ‹å®Œå›è°ƒ</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;isEnd&quot;&gt;</span>æ˜¯å¦çœ‹å®Œ<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnPlayEnd</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> isEnd</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (isEnd)<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å®Œæ•´çœ‹å®Œå¹¿å‘Š&quot;</span>);<br>            rewardCallback?.Invoke();<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;æ²¡æœ‰çœ‹å®Œå¹¿å‘Š&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶ï¼Œå…ˆè¿›è¡Œåˆå§‹åŒ–ï¼Œè¦åœ¨å¾®ä¿¡ SDK åˆå§‹åŒ–ä¹‹åè°ƒç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> WeChatWASM;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WXDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        WX.InitSDK((<span class="hljs-built_in">int</span> code)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡ SDK åˆå§‹åŒ–&quot;</span>);<br>            WXAdManager.Instance.Init();<br>            GameInit();<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameInit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æ¸¸æˆä¸»é€»è¾‘åˆå§‹åŒ–&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å…·ä½“é€»è¾‘çš„ä½ç½®ï¼Œè°ƒç”¨æ˜¾ç¤ºå¹¿å‘Šçš„æ¥å£ï¼Œå¹¶ä¼ å…¥å¥–åŠ±å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c#">WXAdManager.Instance.ShowAd(()=&gt;<br>&#123;<br>    <span class="hljs-comment">// å¥–åŠ±å›è°ƒ</span><br>    Debug.Log(<span class="hljs-string">&quot;å¹¿å‘Šå®Œæ•´æ’­æ”¾ï¼Œå‘æ”¾å¥–åŠ±&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="å†…è´­"><a href="#å†…è´­" class="headerlink" title="å†…è´­"></a>å†…è´­</h1><p>åœ¨å°ç¨‹åºåå°é¡µé¢æ‰¾åˆ°<kbd>åŠŸèƒ½</kbd>-&gt;<kbd>è™šæ‹Ÿæ”¯ä»˜</kbd></p><p><img src="/../images/unity-wechat-minigame-5/%E8%99%9A%E6%8B%9F%E6%94%AF%E4%BB%98%E5%85%A5%E5%8F%A3.png"></p><p>å¼€é€šæ¡ä»¶å¦‚ä¸‹ï¼š</p><p><img src="/../images/unity-wechat-minigame-5/%E8%99%9A%E6%8B%9F%E6%94%AF%E4%BB%98%E5%BC%80%E9%80%9A%E6%9D%A1%E4%BB%B6.png"></p><p>å¼€é€šä¹‹åï¼Œå¯ä»¥æ¥å…¥ç±³å¤§å¸ˆå®‰å“æ”¯ä»˜ï¼ŒiOS ç³»ç»Ÿæš‚æ—¶ä¸æ”¯æŒã€‚</p><p>å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>IAPManager</code>ï¼Œæä¾›è´­ä¹°çš„æ¥å£ï¼Œæ”¯ä»˜æˆåŠŸæ—¶ï¼Œæ ¹æ®äº§å“ ID å‘æ”¾å¥–åŠ±ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å¥–åŠ±å›è°ƒã€‚</p><blockquote><p>è¿™é‡Œéœ€è¦åˆ¤æ–­è¿è¡Œå¹³å° <code>platform</code> æ˜¯å®‰å“ï¼Œå¦‚ä½•è·å– <code>platform</code> å‚æ•°ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€ŠUnity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 03 å¾®ä¿¡SDKã€‹é‡Œé¢çš„<kbd>è·å–ç³»ç»Ÿå‚æ•°</kbd>éƒ¨åˆ†ã€‚</p></blockquote><p>åœ¨è°ƒç”¨æ”¯ä»˜æ¥å£æ—¶ï¼Œå‚æ•° <code>offerId</code> æ˜¯å¼€é€šè™šæ‹Ÿæ”¯ä»˜åå¯ä»¥è·å¾—çš„ã€‚</p><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå‚æ•° <code>buyQuantity</code> æ˜¯æœ‰é™åˆ¶çš„ï¼Œå…·ä½“é™åˆ¶å¯ä»¥å‚è€ƒ <a href="https://developers.weixin.qq.com/minigame/dev/api/midas-payment/wx.requestMidasPayment.html#buyQuantity-%E9%99%90%E5%88%B6%E8%AF%B4%E6%98%8E">buyQuantity é™åˆ¶è¯´æ˜</a>ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> WeChatWASM;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IAPManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">static</span> IAPManager instance;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IAPManager Instance<br>    &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> instance; &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> platform;          <span class="hljs-comment">// è¿è¡Œå¹³å°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> buyQuantityMul = <span class="hljs-number">10</span>;  <span class="hljs-comment">// è´­ä¹°æ•°é‡çš„å€æ•°</span><br>    Action rewardCallback;           <span class="hljs-comment">// å¥–åŠ±å›è°ƒ</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Destroy(gameObject);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            instance = <span class="hljs-keyword">this</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘èµ·æ”¯ä»˜</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;productID&quot;&gt;</span>äº§å“ ID<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;callback&quot;&gt;</span>æ”¯ä»˜æˆåŠŸçš„å›è°ƒå‡½æ•°<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Purchase</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> productID, Action callback</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        rewardCallback = callback;<br><br>        <span class="hljs-comment">// å®‰å“å¹³å°</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;android&quot;</span>.Equals(platform))<br>        &#123;<br>            <span class="hljs-comment">// ä»·æ ¼éœ€è¦è¯»è¡¨ï¼Œæ­¤å¤„åªåšæ¼”ç¤º</span><br>            <span class="hljs-built_in">double</span> price = <span class="hljs-number">1</span>;<br><br>            <span class="hljs-comment">// è§„åˆ™ï¼šbuyQuantity * æ¸¸æˆå¸å•ä»·ï¼ˆ0.1å…ƒï¼‰ = é™å®šçš„ä»·æ ¼ç­‰çº§</span><br>            <span class="hljs-comment">// ä¾‹å¦‚ï¼šè´­ä¹°ä»·æ ¼ä¸º 1 å…ƒï¼Œéœ€è¦ä¹˜ä»¥ 10ï¼Œè®¡ç®—å‡º buyQuantity = 10</span><br>            <span class="hljs-comment">// æ­¤æ—¶ buyQuantity = 10 æ»¡è¶³ä¸Šè¿°è§„åˆ™ï¼Œå³ 10 * 0.1 = 1ï¼ˆé™å®šçš„ä»·æ ¼ç­‰çº§ï¼‰</span><br>            <span class="hljs-built_in">double</span> quantity = price * buyQuantityMul;<br><br>            <span class="hljs-comment">// ç±³å¤§å¸ˆæ”¯ä»˜</span><br>            WX.RequestMidasPayment(<span class="hljs-keyword">new</span> RequestMidasPaymentOption()<br>            &#123;<br>                currencyType = <span class="hljs-string">&quot;CNY&quot;</span>,      <span class="hljs-comment">// å¸ç§</span><br>                mode = <span class="hljs-string">&quot;game&quot;</span>,             <span class="hljs-comment">// ç±»å‹</span><br>                offerId = <span class="hljs-string">&quot;...&quot;</span>,           <span class="hljs-comment">// åœ¨ç±³å¤§å¸ˆä¾§ç”³è¯·çš„åº”ç”¨ id</span><br>                buyQuantity = quantity,    <span class="hljs-comment">// è´­ä¹°æ•°é‡ mode=game æ—¶å¿…å¡«</span><br>                env = <span class="hljs-number">0</span>,                   <span class="hljs-comment">// 0: ç±³å¤§å¸ˆæ­£å¼ç¯å¢ƒ  1: ç±³å¤§å¸ˆæ²™ç®±ç¯å¢ƒ</span><br>                success = (res) =&gt;<br>                &#123;<br>                    PurchaseSuccessful(productID);<br>                &#125;,<br>                fail = (res) =&gt;<br>                &#123;<br>                    Debug.Log(<span class="hljs-string">$&quot;è´­ä¹°å¤±è´¥ = <span class="hljs-subst">&#123;res.errMsg&#125;</span>&quot;</span>);<br>                &#125;<br>            &#125;);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;æš‚ä¸æ”¯æŒå†…è´­&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è´­ä¹°æˆåŠŸ</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;productID&quot;&gt;</span>äº§å“ ID<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PurchaseSuccessful</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> productID</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;è´­ä¹° <span class="hljs-subst">&#123;productID&#125;</span> æˆåŠŸï¼Œå‘æ”¾å¥–åŠ±&quot;</span>);<br>        rewardCallback?.Invoke();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å…·ä½“é€»è¾‘çš„ä½ç½®ï¼Œè°ƒç”¨å‘èµ·æ”¯ä»˜çš„æ¥å£ï¼Œå¹¶ä¼ å…¥æ”¯ä»˜æˆåŠŸçš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c#">IAPManager.Instance.Purchase(<span class="hljs-string">&quot;1001&quot;</span>, ()=&gt;<br>&#123;<br>    <span class="hljs-comment">// å¥–åŠ±å›è°ƒ</span><br>    Debug.Log(<span class="hljs-string">&quot;æ”¯ä»˜æˆåŠŸï¼Œå‘æ”¾å¥–åŠ±&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 04 äº‘å­˜æ¡£</title>
    <link href="/2024/07/21/unity-wechat-minigame-4/"/>
    <url>/2024/07/21/unity-wechat-minigame-4/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼•ç³»åˆ—ï¼ˆç¬¬å››æœŸï¼‰</p><span id="more"></span><h1 id="äº‘å­˜æ¡£"><a href="#äº‘å­˜æ¡£" class="headerlink" title="äº‘å­˜æ¡£"></a>äº‘å­˜æ¡£</h1><h2 id="æ•°æ®åº“é›†åˆ"><a href="#æ•°æ®åº“é›†åˆ" class="headerlink" title="æ•°æ®åº“é›†åˆ"></a>æ•°æ®åº“é›†åˆ</h2><p>åœ¨äº‘å¼€å‘é¡µé¢æ‰“å¼€<kbd>æ•°æ®åº“</kbd>ï¼Œåœ¨å·¦ä¾§æ åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œä¾‹å¦‚ <code>UserData</code>ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88.png"></p><h2 id="äº‘å‡½æ•°é…ç½®"><a href="#äº‘å‡½æ•°é…ç½®" class="headerlink" title="äº‘å‡½æ•°é…ç½®"></a>äº‘å‡½æ•°é…ç½®</h2><h3 id="æ·»åŠ æ–‡ä»¶å¤¹"><a href="#æ·»åŠ æ–‡ä»¶å¤¹" class="headerlink" title="æ·»åŠ æ–‡ä»¶å¤¹"></a>æ·»åŠ æ–‡ä»¶å¤¹</h3><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€çš„é¡¹ç›®æ–‡ä»¶ä¸­æ‰¾åˆ° <code>project.config.json</code>ï¼Œæ·»åŠ ä¸€ä¸ªå­—æ®µï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  ...<br>  &quot;cloudfunctionRoot&quot;: &quot;cloudfunctions/&quot;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ·»åŠ ä½ç½®å¦‚å›¾ï¼š</p><p><img src="/../images/unity-wechat-minigame-4/%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE.png"></p><p>ç„¶ååœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª <code>cloudfunctions</code> æ–‡ä»¶å¤¹ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><h3 id="æ–°å»ºäº‘å‡½æ•°"><a href="#æ–°å»ºäº‘å‡½æ•°" class="headerlink" title="æ–°å»ºäº‘å‡½æ•°"></a>æ–°å»ºäº‘å‡½æ•°</h3><p>å³é”®ç‚¹å‡» <code>cloudfunctions</code> æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©<kbd>æ–°å»º Node.js äº‘å‡½æ•°</kbd>ï¼Œè®¾ç½®äº‘å‡½æ•°åç§°ï¼Œä¾‹å¦‚ <code>setUserData</code>ã€<code>getUserData</code>ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E6%96%B0%E5%BB%BA%E4%BA%91%E5%87%BD%E6%95%B0.png"></p><p><img src="/../images/unity-wechat-minigame-4/%E4%BA%91%E5%87%BD%E6%95%B0%E5%86%85%E5%AE%B9.png"></p><p>åˆ›å»ºäº‘å‡½æ•°åï¼Œå®ƒçš„æ–‡ä»¶å¤¹ä¸‹ä¼šæœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼š</p><ul><li><code>config.json</code></li><li><code>index.js</code></li><li><code>package.json</code></li></ul><h3 id="äº‘å‡½æ•°ä»£ç "><a href="#äº‘å‡½æ•°ä»£ç " class="headerlink" title="äº‘å‡½æ•°ä»£ç "></a>äº‘å‡½æ•°ä»£ç </h3><p>æ‰“å¼€ <code>setUserData</code> çš„ <code>index.js</code>ï¼Œä¿®æ”¹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span><br><span class="hljs-keyword">const</span> cloud = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;wx-server-sdk&#x27;</span>)<br><span class="hljs-comment">// ä½¿ç”¨å½“å‰äº‘ç¯å¢ƒ</span><br>cloud.init(&#123; <span class="hljs-attr">env</span>: cloud.DYNAMIC_CURRENT_ENV &#125;)<br><br><span class="hljs-comment">// è·å–æ•°æ®åº“</span><br><span class="hljs-keyword">const</span> db = cloud.database();<br><span class="hljs-keyword">const</span> userData = db.collection(<span class="hljs-string">&#x27;UserData&#x27;</span>);<br><br><span class="hljs-comment">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span><br><span class="hljs-built_in">exports</span>.main = <span class="hljs-keyword">async</span> (event, context) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> wxContext = cloud.getWXContext()<br><br>  <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å·²ç»ä¿å­˜è¿‡æ•°æ®</span><br>  <span class="hljs-keyword">let</span> hasData = <span class="hljs-keyword">await</span> userData.where(&#123;<br>    openid: wxContext.OPENID<br>  &#125;).get();<br><br>  <span class="hljs-comment">// æ²¡æœ‰æ•°æ®ï¼Œé¦–æ¬¡ä¿å­˜</span><br>  <span class="hljs-keyword">if</span> (hasData.data.length == <span class="hljs-number">0</span>)&#123;<br>    <span class="hljs-keyword">let</span> addData = &#123;<br>      openid: wxContext.OPENID,<br>      gamedata: event<br>    &#125;<br>    <span class="hljs-keyword">let</span> isAdd = <span class="hljs-keyword">await</span> userData.add(&#123;<br>      data: addData<br>    &#125;)<br>    <span class="hljs-keyword">return</span>&#123;<br>      code: <span class="hljs-number">0</span>,<br>      res: isAdd,<br>      data: addData<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// æœ‰æ•°æ®ï¼Œæ›´æ–°</span><br>  <span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> userData.where(&#123;<br>      openid: wxContext.OPENID<br>    &#125;).update(&#123;<br>      data: &#123;<br>        openid: wxContext.OPENID,<br>        gamedata: event<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰“å¼€ <code>getUserData</code> çš„ <code>index.js</code>ï¼Œä¿®æ”¹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span><br><span class="hljs-keyword">const</span> cloud = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;wx-server-sdk&#x27;</span>)<br><span class="hljs-comment">// ä½¿ç”¨å½“å‰äº‘ç¯å¢ƒ</span><br>cloud.init(&#123; <span class="hljs-attr">env</span>: cloud.DYNAMIC_CURRENT_ENV &#125;)<br><br><span class="hljs-comment">// è·å–æ•°æ®åº“</span><br><span class="hljs-keyword">const</span> db = cloud.database();<br><span class="hljs-keyword">const</span> userData = db.collection(<span class="hljs-string">&#x27;UserData&#x27;</span>);<br><br><span class="hljs-comment">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span><br><span class="hljs-built_in">exports</span>.main = <span class="hljs-keyword">async</span> (event, context) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> wxContext = cloud.getWXContext()<br><br>  <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å·²ç»ä¿å­˜è¿‡æ•°æ®</span><br>  <span class="hljs-keyword">let</span> hasData = <span class="hljs-keyword">await</span> userData.where(&#123;<br>    openid: wxContext.OPENID<br>  &#125;).get();<br><br>  <span class="hljs-comment">// æ²¡æœ‰æ•°æ®ï¼Œè¿”å› code 0</span><br>  <span class="hljs-keyword">if</span> (hasData.data.length == <span class="hljs-number">0</span>)&#123;<br>    <span class="hljs-keyword">return</span>&#123;<br>      code: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// æœ‰æ•°æ®ï¼Œè¿”å›å­˜æ¡£</span><br>  <span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">return</span>&#123;<br>      data: hasData.data[<span class="hljs-number">0</span>]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šäº‘å‡½æ•°ä»£ç ä¸­æœ‰ä¸€è¡Œ <code>const userData = db.collection(&#39;UserData&#39;);</code></p><p>è¿™é‡Œä¼ å…¥çš„é›†åˆåç§° UserData è¦å’Œæœ€å¼€å§‹åˆ›å»ºçš„é›†åˆåç§°ä¸€è‡´ã€‚</p></blockquote><h3 id="ä¸Šä¼ å¹¶éƒ¨ç½²"><a href="#ä¸Šä¼ å¹¶éƒ¨ç½²" class="headerlink" title="ä¸Šä¼ å¹¶éƒ¨ç½²"></a>ä¸Šä¼ å¹¶éƒ¨ç½²</h3><p>ä¿å­˜å¥½ <code>index.js</code> ä»£ç ä¹‹åï¼Œå³é”®ç‚¹å‡»äº‘å‡½æ•°æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©<kbd>ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–</kbd>ï¼Œä¹‹åå°±å¯ä»¥åœ¨äº‘å¼€å‘çš„<kbd>äº‘å‡½æ•°</kbd>é¡µé¢çœ‹åˆ°ä¸Šä¼ çš„äº‘å‡½æ•°äº†ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E4%B8%8A%E4%BC%A0%E4%BA%91%E5%87%BD%E6%95%B0.png"></p><p><img src="/../images/unity-wechat-minigame-4/%E5%B7%B2%E9%83%A8%E7%BD%B2.png"></p><h2 id="è°ƒç”¨äº‘å‡½æ•°"><a href="#è°ƒç”¨äº‘å‡½æ•°" class="headerlink" title="è°ƒç”¨äº‘å‡½æ•°"></a>è°ƒç”¨äº‘å‡½æ•°</h2><p>æœ‰äº†æ•°æ®åº“é›†åˆå’Œäº‘å‡½æ•°ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ C# ä»£ç é‡Œåˆå§‹åŒ–äº‘ç¯å¢ƒï¼Œå¹¶é€šè¿‡æ¥å£è°ƒç”¨äº‘å‡½æ•°ã€‚</p><p>åœ¨è°ƒç”¨äº‘å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»å…ˆ <code>åˆå§‹åŒ–äº‘å‡½æ•°</code>ï¼Œå¡«å…¥ <code>äº‘å¼€å‘çš„ç¯å¢ƒ ID</code>ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c#">WX.cloud.Init(<span class="hljs-keyword">new</span> CallFunctionInitParam()<br>&#123;<br>    env = <span class="hljs-string">&quot;meet-stars-5gylftdf4ee9f5de&quot;</span>,<br>    traceUser = <span class="hljs-literal">false</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>äº‘å¼€å‘çš„ç¯å¢ƒ ID</code>ï¼Œåœ¨äº‘å¼€å‘æ¦‚è§ˆé¡µé¢ï¼Œå¯ä»¥æ‰¾åˆ°ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E4%BA%91%E7%8E%AF%E5%A2%83ID.png"></p><h3 id="ä¸Šä¼ å­˜æ¡£"><a href="#ä¸Šä¼ å­˜æ¡£" class="headerlink" title="ä¸Šä¼ å­˜æ¡£"></a>ä¸Šä¼ å­˜æ¡£</h3><p>åœ¨éœ€è¦ä¸Šä¼ å­˜æ¡£æ—¶ï¼Œå¯ä»¥è°ƒç”¨ <code>setUserData</code>ï¼ŒæŠŠç©å®¶æ•°æ®è½¬æˆ jsonï¼Œä¼ å…¥ data ä¸­ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">string</span> json = <span class="hljs-string">&quot;&#123; \&quot;player_id\&quot;: 1001 &#125;&quot;</span>;<br>WX.cloud.CallFunction(<span class="hljs-keyword">new</span> CallFunctionParam()<br>&#123;<br>    name = <span class="hljs-string">&quot;setUserData&quot;</span>,<br>    data = json,<br>&#125;);<br></code></pre></td></tr></table></figure><p>è°ƒç”¨æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®åº“ä¸­å°±ç”Ÿæˆäº†ä¸€ä»½å­˜æ¡£ã€‚</p><p><img src="/../images/unity-wechat-minigame-4/%E7%94%9F%E6%88%90%E4%BA%91%E5%AD%98%E6%A1%A3.png"></p><h3 id="ä¸‹è½½å­˜æ¡£"><a href="#ä¸‹è½½å­˜æ¡£" class="headerlink" title="ä¸‹è½½å­˜æ¡£"></a>ä¸‹è½½å­˜æ¡£</h3><p>åœ¨éœ€è¦ä¸‹è½½å­˜æ¡£æ—¶ï¼Œå¯ä»¥è°ƒç”¨ <code>getUserData</code>ï¼Œåœ¨ success å›è°ƒå‡½æ•°ä¸­ï¼Œè·å¾— <code>res.result</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼šä¸‹è½½å­˜æ¡£æ—¶ï¼Œdata å‚æ•°æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œä½†æ˜¯éœ€è¦ä¼ ä¸€ä¸ª jsonï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#">WX.cloud.CallFunction(<span class="hljs-keyword">new</span> CallFunctionParam()<br>&#123;<br>    name = <span class="hljs-string">&quot;getUserData&quot;</span>,<br>    data = <span class="hljs-string">&quot;&#123;\&quot;player_data\&quot;:0&#125;&quot;</span>,  <span class="hljs-comment">// è¿™é‡Œçš„ data éœ€è¦éšä¾¿ä¼ ä¸€ä¸ª jsonï¼Œå¦åˆ™ä¼šæŠ¥é”™</span><br>    success = (res) =&gt; <br>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;è·å–äº‘å­˜æ¡£æˆåŠŸ <span class="hljs-subst">&#123;res.result&#125;</span>&quot;</span>);<br>    &#125;,<br>    fail = (res) =&gt;<br>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;è·å–äº‘å­˜æ¡£å¤±è´¥ <span class="hljs-subst">&#123;res.result&#125;</span>&quot;</span>);<br>    &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p>æ‰“å°å‡ºæ¥çš„ <code>res.result</code> çš„ç»“æ„å¦‚ä¸‹ï¼Œè¿™ä¸ªç»“æ„å…¶å®æ˜¯åœ¨å†™äº‘å‡½æ•°æ—¶å®šä¹‰çš„ï¼Œåœ¨ data ä¸­åŒ…å«äº† openid å’Œ gamedataï¼Œå…¶ä»–å­—æ®µæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;_id&quot;</span>: <span class="hljs-string">&quot;3f275c25669c7a3a001f15ce7106ca54&quot;</span>,<br>        <span class="hljs-attr">&quot;openid&quot;</span>: <span class="hljs-string">&quot;...&quot;</span>,<br>        <span class="hljs-attr">&quot;gamedata&quot;</span>: &#123;<br>            <span class="hljs-attr">&quot;player_id&quot;</span>: <span class="hljs-number">1001</span>,<br>            <span class="hljs-attr">&quot;tcbContext&quot;</span>: &#123;&#125;,<br>            <span class="hljs-attr">&quot;userInfo&quot;</span>: &#123;<br>                <span class="hljs-attr">&quot;appId&quot;</span>: <span class="hljs-string">&quot;...&quot;</span>,<br>                <span class="hljs-attr">&quot;openId&quot;</span>: <span class="hljs-string">&quot;...&quot;</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºä¸Šä¼ å­˜æ¡£æ—¶ï¼Œåªæ˜¯ä¸Šä¼ äº†ä¸€ä¸ªåŒ…å« player_id çš„ jsonï¼Œå­˜æ”¾åœ¨ gamedata å­—æ®µä¸­ï¼Œå®é™…å–ç”¨æ—¶ï¼Œåº”è¯¥æŠŠ gamedata è§£æå‡ºæ¥ã€‚</p><p>å¯ä»¥ä½¿ç”¨ LitJson åº“ï¼Œè°ƒç”¨ <code>JsonMapper.ToObject</code> æ–¹æ³•æŠŠ json å­—ç¬¦ä¸²è½¬æˆ <code>JsonData</code> å¯¹è±¡ï¼Œåˆ¤æ–­å¯¹è±¡çš„å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨ data å­—æ®µï¼Œä»¥æ­¤æ¥åˆ¤æ–­æ˜¯å¦æ‹¿åˆ°äº†å®Œæ•´çš„äº‘å­˜æ¡£ï¼Œå¹¶ä»ä¸­å–å‡º gamedata å¯¹åº”çš„å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> LitJson;  <span class="hljs-comment">// éœ€è¦å¼•ç”¨å‘½åç©ºé—´</span><br><br>WX.cloud.CallFunction(<span class="hljs-keyword">new</span> CallFunctionParam()<br>&#123;<br>    name = <span class="hljs-string">&quot;getUserData&quot;</span>,<br>    data = <span class="hljs-string">&quot;&#123;\&quot;player_data\&quot;:0&#125;&quot;</span>,<br>    success = (res) =&gt; <br>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;è·å–äº‘å­˜æ¡£æˆåŠŸ <span class="hljs-subst">&#123;res.result&#125;</span>&quot;</span>);<br>        <span class="hljs-keyword">var</span> jsonData = JsonMapper.ToObject(res.result);<br>        <span class="hljs-comment">// äº‘å­˜æ¡£æœ‰ dataï¼Œè§£æ json å¹¶å–å‡º gamedata</span><br>        <span class="hljs-keyword">if</span> (jsonData.ContainsKey(<span class="hljs-string">&quot;data&quot;</span>))<br>        &#123;<br>            <span class="hljs-keyword">var</span> allData = jsonData[<span class="hljs-string">&quot;data&quot;</span>];<br>            <span class="hljs-comment">// å–å‡º gamedata</span><br>            <span class="hljs-keyword">var</span> gameData = allData[<span class="hljs-string">&quot;gamedata&quot;</span>].ToJson();<br>            Debug.Log(<span class="hljs-string">$&quot;gameData = <span class="hljs-subst">&#123;gameData&#125;</span>&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// äº‘å­˜æ¡£æ²¡æœ‰ dataï¼Œè¯´æ˜æ•°æ®åº“æ²¡æœ‰å­˜æ¡£</span><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;äº‘å­˜æ¡£æ²¡æœ‰ dataï¼Œè¯´æ˜æ•°æ®åº“æ²¡æœ‰å­˜æ¡£&quot;</span>);<br>        &#125;<br>    &#125;,<br>    fail = (res) =&gt;<br>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;è·å–äº‘å­˜æ¡£å¤±è´¥ <span class="hljs-subst">&#123;res.result&#125;</span>&quot;</span>);<br>    &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 03 å¾®ä¿¡SDK</title>
    <link href="/2024/07/14/unity-wechat-minigame-3/"/>
    <url>/2024/07/14/unity-wechat-minigame-3/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼•ç³»åˆ—ï¼ˆç¬¬ä¸‰æœŸï¼‰</p><span id="more"></span><h1 id="å¾®ä¿¡SDK"><a href="#å¾®ä¿¡SDK" class="headerlink" title="å¾®ä¿¡SDK"></a>å¾®ä¿¡SDK</h1><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>é¦–å…ˆï¼Œè¿›è¡Œ SDK åˆå§‹åŒ–ï¼Œéœ€è¦å¼•ç”¨å‘½åç©ºé—´ <code>using WeChatWASM</code>ï¼Œè°ƒç”¨ <code>WX.InitSDK</code>ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­è¿›è¡Œæ¸¸æˆä¸»é€»è¾‘çš„åˆå§‹åŒ–ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> WeChatWASM;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WXDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        WX.InitSDK((<span class="hljs-built_in">int</span> code)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡ SDK åˆå§‹åŒ–&quot;</span>);<br>            GameInit();<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameInit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æ¸¸æˆä¸»é€»è¾‘åˆå§‹åŒ–&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œä¹‹åï¼Œä¼šå‘ç°æ§åˆ¶å°æ‰“å°äº†é»„è‰²è­¦å‘Šã€‚</p><p><img src="/../images/unity-wechat-minigame-3/%E5%88%9D%E5%A7%8B%E5%8C%96.png"></p><p>åœ¨ Unity ç¼–è¾‘å™¨ä¸­è°ƒç”¨å¾®ä¿¡ SDK æ¥å£ï¼Œæœ‰ä¸€äº›æ˜¯ä¼šæŠ¥é”™çš„ï¼Œéœ€è¦åŠ ä¸Šå®å®šä¹‰ã€‚</p><p>æµ‹è¯•çš„æ—¶å€™éœ€è¦æ‰“åŒ…å‡ºæ¥ï¼Œåœ¨å¾®ä¿¡å°æ¸¸æˆç¯å¢ƒä¸­è¿è¡Œã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br><span class="hljs-keyword">using</span> WeChatWASM;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WXDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><span class="hljs-comment">// ç¼–è¾‘å™¨ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br>        GameInit();<br><span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><br><br><span class="hljs-comment">// WebGL ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br>        WX.InitSDK((<span class="hljs-built_in">int</span> code)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡ SDK åˆå§‹åŒ–&quot;</span>);<br>            GameInit();<br>        &#125;);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameInit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æ¸¸æˆä¸»é€»è¾‘åˆå§‹åŒ–&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç›‘å¬åˆ‡å‰å°æˆ–åå°äº‹ä»¶"><a href="#ç›‘å¬åˆ‡å‰å°æˆ–åå°äº‹ä»¶" class="headerlink" title="ç›‘å¬åˆ‡å‰å°æˆ–åå°äº‹ä»¶"></a>ç›‘å¬åˆ‡å‰å°æˆ–åå°äº‹ä»¶</h2><p>åˆ‡å‰å°äº‹ä»¶ä½¿ç”¨ <code>OnShow</code> ç›‘å¬ï¼Œåˆ‡åå°äº‹ä»¶ä½¿ç”¨ <code>OnHide</code> ç›‘å¬ï¼Œåªéœ€è¦ç»‘å®šä¸€æ¬¡ç›‘å¬äº‹ä»¶ã€‚</p><p>å…·ä½“è¿”å›çš„å‚æ•° result å¯ä»¥çœ‹æ¥å£çš„æ³¨é‡Šã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// WebGL ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br>        WX.InitSDK((<span class="hljs-built_in">int</span> code)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡ SDK åˆå§‹åŒ–&quot;</span>);<br>            GameInit();<br>        &#125;);<br><br>        WX.OnShow((OnShowListenerResult result)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡åˆ‡å‰å°äº‹ä»¶&quot;</span>);<br>        &#125;);<br><br>        WX.OnHide((GeneralCallbackResult result)=&gt;<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¾®ä¿¡åˆ‡åå°äº‹ä»¶&quot;</span>);<br>        &#125;);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><h2 id="è·å–ç³»ç»Ÿå‚æ•°"><a href="#è·å–ç³»ç»Ÿå‚æ•°" class="headerlink" title="è·å–ç³»ç»Ÿå‚æ•°"></a>è·å–ç³»ç»Ÿå‚æ•°</h2><p>è·å–è¿è¡Œæ—¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œä¾‹å¦‚è·å–ç³»ç»Ÿå¹³å°ï¼ˆandroid æˆ– iosï¼‰ï¼Œæœ‰æˆåŠŸã€å¤±è´¥ã€å®Œæˆä¸‰ä¸ªå›è°ƒã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// WebGL ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br>        <span class="hljs-comment">// ...</span><br>        WX.GetSystemInfo(<span class="hljs-keyword">new</span> GetSystemInfoOption<br>        &#123;<br>            <span class="hljs-comment">// æˆåŠŸå›è°ƒ</span><br>            success = (systemInfo)=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">$&quot;ç³»ç»Ÿå¹³å° <span class="hljs-subst">&#123;systemInfo.platform&#125;</span>&quot;</span>);<br>            &#125;,<br>            <span class="hljs-comment">// å¤±è´¥å›è°ƒ</span><br>            fail = (generalCallbackResult)=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">$&quot;è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>            &#125;,<br>            <span class="hljs-comment">// å®Œæˆå›è°ƒï¼ˆä¸è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰</span><br>            complete = (generalCallbackResult)=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">$&quot;è·å–ç³»ç»Ÿä¿¡æ¯å®Œæˆï¼Œæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>            &#125;<br>        &#125;);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><h2 id="è¯¢é—®ç”¨æˆ·æˆæƒ"><a href="#è¯¢é—®ç”¨æˆ·æˆæƒ" class="headerlink" title="è¯¢é—®ç”¨æˆ·æˆæƒ"></a>è¯¢é—®ç”¨æˆ·æˆæƒ</h2><p>è¯¢é—®ç”¨æˆ·æ˜¯å¦æˆæƒç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆé€šè¿‡ <code>WX.GetSetting</code> è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®ï¼Œåˆ¤æ–­æ˜¯å¦æˆæƒè¿‡ã€‚</p><p>è‹¥æ²¡æœ‰æˆæƒï¼Œå†è°ƒç”¨ <code>WX.Authorize</code> å‘èµ·æˆæƒå¼¹çª—è¯¢é—®ï¼Œå¡«å†™ scope çš„å‚æ•°ï¼ˆå…·ä½“å¡«ä»€ä¹ˆå‚æ•°å¯ä»¥å‚è€ƒ <a href="https://developers.weixin.qq.com/minigame/dev/guide/base-ability/authorize.html#scope-%E5%88%97%E8%A1%A8">scope åˆ—è¡¨</a>ï¼‰ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// WebGL ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br>        <span class="hljs-comment">// ...</span><br>        <span class="hljs-comment">// è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®</span><br>        WX.GetSetting(<span class="hljs-keyword">new</span> GetSettingOption<br>        &#123;<br>            <span class="hljs-comment">// æˆåŠŸå›è°ƒ</span><br>            success = (res)=&gt;<br>            &#123;<br>                <span class="hljs-built_in">bool</span> hasUserInfo = res.authSetting.ContainsKey(<span class="hljs-string">&quot;scope.userInfo&quot;</span>);<br>                <span class="hljs-comment">// æ¥å—è¿‡æˆæƒ</span><br>                <span class="hljs-keyword">if</span> (hasUserInfo)<br>                &#123;<br>                    Debug.Log(<span class="hljs-string">&quot;ç”¨æˆ·å·²ç»æ¥å—è¿‡æˆæƒäº†&quot;</span>);<br>                &#125;<br>                <span class="hljs-comment">// æ²¡æœ‰æ¥å—è¿‡æˆæƒ</span><br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    <span class="hljs-comment">// å‘èµ·æˆæƒè¯¢é—®</span><br>                    WX.Authorize(<span class="hljs-keyword">new</span> AuthorizeOption<br>                    &#123;<br>                        <span class="hljs-comment">// éœ€è¦è·å–çš„æƒé™</span><br>                        scope = <span class="hljs-string">&quot;scope.userInfo&quot;</span>,<br>                        <span class="hljs-comment">// æˆåŠŸå›è°ƒ</span><br>                        success = (generalCallbackResult)=&gt;<br>                        &#123;<br>                            Debug.Log(<span class="hljs-string">$&quot;è·å–æˆæƒæˆåŠŸï¼Œæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>                        &#125;,<br>                        <span class="hljs-comment">// å¤±è´¥å›è°ƒ</span><br>                        fail = (generalCallbackResult)=&gt;<br>                        &#123;<br>                            Debug.Log(<span class="hljs-string">$&quot;è·å–æˆæƒå¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>                        &#125;,<br>                        <span class="hljs-comment">// å®Œæˆå›è°ƒï¼ˆä¸è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰</span><br>                        complete = (generalCallbackResult)=&gt;<br>                        &#123;<br>                            Debug.Log(<span class="hljs-string">$&quot;è·å–æˆæƒå®Œæˆï¼Œæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>                        &#125;<br>                    &#125;);<br>                &#125;<br>            &#125;,<br>            <span class="hljs-comment">// å¤±è´¥å›è°ƒ</span><br>            fail = (generalCallbackResult)=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">$&quot;è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>            &#125;,<br>            <span class="hljs-comment">// å®Œæˆå›è°ƒï¼ˆä¸è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰</span><br>            complete = (generalCallbackResult)=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">$&quot;è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®å®Œæˆï¼Œæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ <span class="hljs-subst">&#123;generalCallbackResult.errMsg&#125;</span>&quot;</span>);<br>            &#125;<br>        &#125;);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœä»£ç é‡Œæœ‰è°ƒç”¨æˆæƒæ¥å£ï¼Œå°±éœ€è¦åˆ°<a href="https://mp.weixin.qq.com/">å°ç¨‹åº</a>å®˜ç½‘ï¼Œæ‰¾åˆ°<kbd>è®¾ç½®</kbd>-&gt;<kbd>åŸºæœ¬è®¾ç½®</kbd>-&gt;<kbd>æœåŠ¡å†…å®¹å£°æ˜</kbd>ï¼Œå¡«å†™<kbd>ç”¨æˆ·éšç§ä¿æŠ¤æŒ‡å¼•</kbd>ã€‚</p><p>å¦‚æœåœ¨æŒ‡å®šæœŸé™å†…æ²¡æœ‰å¡«å†™ï¼Œå°æ¸¸æˆçš„éƒ¨åˆ†åŠŸèƒ½ä¼šè¢«é™åˆ¶ä½¿ç”¨ã€‚</p></blockquote><h2 id="æç¤ºæ¡†"><a href="#æç¤ºæ¡†" class="headerlink" title="æç¤ºæ¡†"></a>æç¤ºæ¡†</h2><p><code>WX.ShowModal</code> å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†ï¼Œé™„å¸¦ä¸€ä¸ªç¡®å®šå’Œä¸€ä¸ªå–æ¶ˆæŒ‰é’®ã€‚</p><p><code>WX.ShowToast</code> å¯ä»¥å¼¹å‡ºä¸€ä¸ªæ¶ˆæ¯æç¤ºæ¡†ï¼Œæ²¡æœ‰æŒ‰é’®ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// WebGL ç¯å¢ƒ</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_WEBGL</span><br>        WX.ShowModal(<span class="hljs-keyword">new</span> ShowModalOption<br>        &#123;<br>            title = <span class="hljs-string">&quot;æ ‡é¢˜&quot;</span>,<br>            content = <span class="hljs-string">&quot;æ¨¡æ€å¯¹è¯æ¡†&quot;</span>,<br>            success = (res)=&gt;<br>            &#123;<br>                <span class="hljs-keyword">if</span> (res.confirm)<br>                &#123;<br>                    Debug.Log(<span class="hljs-string">&quot;ç‚¹å‡»äº†ç¡®å®šæŒ‰é’®&quot;</span>);<br>                    WX.ShowToast(<span class="hljs-keyword">new</span> ShowToastOption<br>                    &#123;<br>                        title = <span class="hljs-string">&quot;æ¶ˆæ¯æç¤ºæ¡†&quot;</span><br>                    &#125;);<br>                &#125;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.cancel)<br>                &#123;<br>                    Debug.Log(<span class="hljs-string">&quot;ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;);<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>æ¨¡æ€å¯¹è¯æ¡†</p><p><img src="/../images/unity-wechat-minigame-3/%E6%A8%A1%E6%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86.png"></p><p>æ¶ˆæ¯æç¤ºæ¡†</p><p><img src="/../images/unity-wechat-minigame-3/%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA%E6%A1%86.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 02 äº‘å¼€å‘</title>
    <link href="/2024/07/07/unity-wechat-minigame-2/"/>
    <url>/2024/07/07/unity-wechat-minigame-2/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼•ç³»åˆ—ï¼ˆç¬¬äºŒæœŸï¼‰</p><span id="more"></span><h1 id="äº‘å¼€å‘"><a href="#äº‘å¼€å‘" class="headerlink" title="äº‘å¼€å‘"></a>äº‘å¼€å‘</h1><p>å½“å°æ¸¸æˆæ‰“åŒ…åçš„é¦–åŒ…å ç”¨å†…å­˜æ¯”è¾ƒå¤§ï¼ˆå¤§çº¦æ˜¯ 14M å·¦å³ï¼‰ï¼Œ<kbd>é¦–åŒ…èµ„æºåŠ è½½æ–¹å¼</kbd>å°±ä¸èƒ½é€‰æ‹©<kbd>å°æ¸¸æˆåŒ…å†…</kbd>äº†ã€‚</p><p>è¿™æ—¶å°±éœ€è¦è´­ä¹°æœåŠ¡å™¨ï¼ŒæŠŠé¦–åŒ…æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œåœ¨å°æ¸¸æˆè½¬æ¢çª—å£å¡«å†™<kbd>æ¸¸æˆèµ„æºCDN</kbd>ã€‚</p><p>å¾®ä¿¡æä¾›äº†é…å¥—çš„äº‘å¼€å‘ï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°è´­ä¹°å’Œä½¿ç”¨ã€‚</p><h2 id="è´­ä¹°äº‘å¼€å‘"><a href="#è´­ä¹°äº‘å¼€å‘" class="headerlink" title="è´­ä¹°äº‘å¼€å‘"></a>è´­ä¹°äº‘å¼€å‘</h2><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å·¦ä¸Šè§’ï¼Œæ‰¾åˆ°<kbd>äº‘å¼€å‘</kbd>æŒ‰é’®ï¼Œç‚¹å‡»æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å°ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BA%91%E5%BC%80%E5%8F%91%E6%8C%89%E9%92%AE.png"></p><p>å¦‚æœæ˜¯åˆæ¬¡å¼€é€šï¼Œå¯ä»¥å…è´¹ä½“éªŒä¸€ä¸ªæœˆã€‚</p><p>å¡«å†™ç¯å¢ƒåç§°ï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼Œç‚¹å‡»<kbd>å…è´¹ä½“éªŒ 1 ä¸ªæœˆ</kbd>å³å¯ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E5%BC%80%E9%80%9A%E4%BA%91%E5%BC%80%E5%8F%91.jpg"></p><p>å¦‚æœæ²¡æœ‰å…è´¹ä½“éªŒï¼Œåˆ™æ˜¯æ¯ä¸ªæœˆ 19.9 å…ƒã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E5%88%9B%E5%BB%BA%E4%BA%91%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.png"></p><p>åˆ›å»ºå¥½äº‘å¼€å‘ç¯å¢ƒåï¼Œå°±å¯ä»¥çœ‹åˆ°äº‘å¼€å‘æ§åˆ¶å°äº†ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BA%91%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6%E5%8F%B0.png"></p><h2 id="æŸ¥çœ‹äº‘å¼€å‘åŸŸå"><a href="#æŸ¥çœ‹äº‘å¼€å‘åŸŸå" class="headerlink" title="æŸ¥çœ‹äº‘å¼€å‘åŸŸå"></a>æŸ¥çœ‹äº‘å¼€å‘åŸŸå</h2><p>å¦‚æœè¦æŸ¥çœ‹äº‘å¼€å‘çš„åŸŸååœ°å€ï¼Œå¯ä»¥å…ˆåœ¨<kbd>å­˜å‚¨</kbd>é¡µé¢ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6.png"></p><p>ä¸Šä¼ åå¦‚æœé¡µé¢æ²¡æœ‰å†…å®¹ï¼Œå¯ä»¥ç‚¹å‡»<kbd>åˆ·æ–°</kbd>æŒ‰é’®ã€‚</p><p>çœ‹åˆ°å·²ç»ä¸Šä¼ çš„æ–‡ä»¶åï¼Œå³é”®ç‚¹å‡»è¿™ä¸ªæ–‡ä»¶ï¼Œé€‰æ‹©<kbd>æŸ¥çœ‹è¯¦æƒ…</kbd>ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E6%9F%A5%E7%9C%8B%E8%AF%A6%E6%83%85.png"></p><p>åœ¨è¿™ä¸ªæ–‡ä»¶çš„è¯¦æƒ…é¡µä¸­ï¼Œå¯ä»¥æ‰¾åˆ°ä¸‹è½½åœ°å€ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80.png"></p><p>å…¶ä¸­ï¼Œä» https å¼€å¤´ï¼Œä¸€ç›´åˆ° .la ç»“å°¾ï¼Œè¿™ä¸ªåœ°å€å°±æ˜¯äº‘å¼€å‘çš„åŸŸååœ°å€äº†ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://<span class="hljs-number">6</span>d<span class="hljs-number">65</span>-meet-stars-<span class="hljs-number">5</span>gylftdf<span class="hljs-number">4</span>ee<span class="hljs-number">9</span>f<span class="hljs-number">5</span>de-<span class="hljs-number">1318778612</span>.tcb.qcloud.la<br></code></pre></td></tr></table></figure><h2 id="è®¾ç½®æœåŠ¡å™¨åŸŸå"><a href="#è®¾ç½®æœåŠ¡å™¨åŸŸå" class="headerlink" title="è®¾ç½®æœåŠ¡å™¨åŸŸå"></a>è®¾ç½®æœåŠ¡å™¨åŸŸå</h2><p>åœ¨<a href="https://mp.weixin.qq.com/">å°ç¨‹åº</a>åå°é¡µé¢ï¼Œæ‰¾åˆ°<kbd>å¼€å‘ç®¡ç†</kbd>-&gt;<kbd>å¼€å‘è®¾ç½®</kbd>-&gt;<kbd>æœåŠ¡å™¨åŸŸå</kbd>ï¼ŒæŠŠäº‘å¼€å‘çš„åŸŸååœ°å€å¡«å†™åˆ°ä»¥ä¸‹å‡ ä¸ªä½ç½®ï¼š</p><ul><li><code>request</code> åˆæ³•åŸŸå</li><li><code>uploadFile</code> åˆæ³•åŸŸå</li><li><code>downloadFile</code> åˆæ³•åŸŸå</li></ul><p><img src="/../images/unity-wechat-minigame-2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%9F%E5%90%8D.png"></p><p>å¦‚æœæ²¡æœ‰å¡«å†™çš„è¯ï¼Œå°æ¸¸æˆå¯èƒ½ä¼šæ— æ³•ä¸‹è½½åˆ°èµ„æºï¼Œä½†æ˜¯æ‰“å¼€è°ƒè¯•æ¨¡å¼åˆå¯ä»¥ä¸‹è½½åˆ°èµ„æºï¼Œ<kbd>è°ƒè¯•æ¨¡å¼</kbd>çš„åŒºåˆ«å°±æ˜¯<kbd>ä¸æ ¡éªŒåŸŸå</kbd>ã€‚</p><blockquote><p>æ³¨æ„ï¼šåç»­å¦‚æœæœ‰åœ¨å®¢æˆ·ç«¯å‘èµ·ä»»ä½•ç½‘ç»œè¯·æ±‚ï¼Œéœ€è¦è®¿é—®å¤–éƒ¨åŸŸåçš„ï¼Œéƒ½éœ€è¦åœ¨è¿™é‡Œæ·»åŠ åˆæ³•åŸŸåçš„ç™½åå•ã€‚</p><p>å¦åˆ™ï¼Œç½‘ç»œè¯·æ±‚æ— æ•ˆã€‚</p></blockquote><h2 id="å¡«å†™æ¸¸æˆèµ„æº-CDN"><a href="#å¡«å†™æ¸¸æˆèµ„æº-CDN" class="headerlink" title="å¡«å†™æ¸¸æˆèµ„æº CDN"></a>å¡«å†™æ¸¸æˆèµ„æº CDN</h2><p>å¯ä»¥åœ¨äº‘å¼€å‘åˆ›å»ºæ–‡ä»¶å¤¹ï¼ŒåŒºåˆ†å°æ¸¸æˆç‰ˆæœ¬ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><p><img src="/../images/unity-wechat-minigame-2/%E6%96%87%E4%BB%B6%E5%A4%B9%E7%89%88%E6%9C%AC.png"></p><p>ç„¶ååœ¨ Unity çš„å°æ¸¸æˆè½¬æ¢çª—å£ï¼Œå¡«å†™æ¸¸æˆèµ„æº CDNï¼ŒæŠŠ<kbd>é¦–åŒ…èµ„æºåŠ è½½æ–¹å¼</kbd>æ”¹æˆ<kbd>CDN</kbd>ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E5%A1%AB%E5%86%99%E6%B8%B8%E6%88%8F%E8%B5%84%E6%BA%90CDN.png"></p><h2 id="ä¸Šä¼ é¦–åŒ…èµ„æº"><a href="#ä¸Šä¼ é¦–åŒ…èµ„æº" class="headerlink" title="ä¸Šä¼ é¦–åŒ…èµ„æº"></a>ä¸Šä¼ é¦–åŒ…èµ„æº</h2><p>æ”¹æˆ CDN ä¹‹åï¼Œæ‰“åŒ…å°æ¸¸æˆï¼Œå°±éœ€è¦åœ¨äº‘å¼€å‘æ§åˆ¶å°ä¸Šä¼ é¦–åŒ…èµ„æºã€‚</p><p>åœ¨ webgl æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°åç¼€åæ˜¯ .bin.txt çš„æ–‡ä»¶ï¼Œä¸Šä¼ åˆ° <code>1.0.0</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%B8%8A%E4%BC%A0%E9%A6%96%E5%8C%85%E8%B5%84%E6%BA%90.png"></p><p>æ¯æ¬¡æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œéƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ <code>1.0.1</code>ï¼ŒæŠŠæ–°ç‰ˆæœ¬çš„é¦–åŒ…èµ„æºä¸Šä¼ åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸­ã€‚</p><h1 id="ä¸Šä¼ é¡¹ç›®"><a href="#ä¸Šä¼ é¡¹ç›®" class="headerlink" title="ä¸Šä¼ é¡¹ç›®"></a>ä¸Šä¼ é¡¹ç›®</h1><h2 id="å¼€å‘ç‰ˆæœ¬"><a href="#å¼€å‘ç‰ˆæœ¬" class="headerlink" title="å¼€å‘ç‰ˆæœ¬"></a>å¼€å‘ç‰ˆæœ¬</h2><p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šæ–¹çš„æŒ‰é’®ä¸­æ‰¾åˆ°ä¸Šä¼ æŒ‰é’®ï¼Œå¡«å†™<kbd>ç‰ˆæœ¬å·</kbd>å’Œ<kbd>é¡¹ç›®å¤‡æ³¨</kbd>ï¼Œå°±å¯ä»¥æŠŠé¡¹ç›®ä¸Šä¼ åˆ°å°æ¸¸æˆè´¦å·ä¸Šäº†ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE.png"></p><p>åœ¨<a href="https://mp.weixin.qq.com/">å°ç¨‹åº</a>åå°é¡µé¢ï¼Œæ‰¾åˆ°<kbd>ç®¡ç†</kbd>-&gt;<kbd>ç‰ˆæœ¬ç®¡ç†</kbd>-&gt;<kbd>å¼€å‘ç‰ˆæœ¬</kbd>å¯ä»¥çœ‹åˆ°å·²ç»ä¸Šä¼ çš„ç‰ˆæœ¬ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC.png"></p><h2 id="ä½“éªŒç‰ˆæœ¬"><a href="#ä½“éªŒç‰ˆæœ¬" class="headerlink" title="ä½“éªŒç‰ˆæœ¬"></a>ä½“éªŒç‰ˆæœ¬</h2><p>ç‚¹å‡»å¼€å‘ç‰ˆæœ¬å³ä¾§çš„ä¸‹æ‹‰æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°<kbd>é€‰ä¸ºä½“éªŒç‰ˆæœ¬</kbd>çš„é€‰é¡¹ã€‚</p><p>å¼€å‘ç‰ˆæœ¬åªæœ‰è‡ªå·±å’Œå¼€å‘æˆå‘˜å¯ä»¥é¢„è§ˆï¼Œè€Œä½“éªŒç‰ˆæœ¬å¯ä»¥ç»™ä½“éªŒæˆå‘˜é¢„è§ˆã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E9%80%89%E4%B8%BA%E4%BD%93%E9%AA%8C%E7%89%88%E6%9C%AC.png"></p><p>ä½“éªŒç‰ˆè®¾ç½®å¯ä»¥æš‚æ—¶å¿½ç•¥ï¼Œç›´æ¥æäº¤ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BD%93%E9%AA%8C%E7%89%88%E8%AE%BE%E7%BD%AE.png"></p><p>æäº¤åï¼Œå¯ä»¥åœ¨ä½“éªŒç‰ˆæŒ‰é’®æŸ¥çœ‹äºŒç»´ç ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BD%93%E9%AA%8C%E7%89%88%E4%BA%8C%E7%BB%B4%E7%A0%81.png"></p><p>æ‰«ç ä¹‹åæ‰“å¼€ä½“éªŒç‰ˆé¡µé¢ï¼Œç‚¹å‡»<kbd>å‰å¾€ä½“éªŒç‰ˆ</kbd>ä¼šæ‰“å¼€å°æ¸¸æˆã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BD%93%E9%AA%8C%E7%89%88%E9%A1%B5%E9%9D%A2.png"></p><h2 id="æ·»åŠ ä½“éªŒæˆå‘˜"><a href="#æ·»åŠ ä½“éªŒæˆå‘˜" class="headerlink" title="æ·»åŠ ä½“éªŒæˆå‘˜"></a>æ·»åŠ ä½“éªŒæˆå‘˜</h2><p>åœ¨<kbd>ç®¡ç†</kbd>-&gt;<kbd>æˆå‘˜ç®¡ç†</kbd>-&gt;<kbd>ä½“éªŒæˆå‘˜</kbd>ï¼Œå¯ä»¥è¾“å…¥å¾®ä¿¡å·ï¼Œæ·»åŠ ä¸€äº›ä½“éªŒæˆå‘˜ï¼Œä¸Šé™ä¸º 15 äººã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E4%BD%93%E9%AA%8C%E6%88%90%E5%91%98.png"></p><p><img src="/../images/unity-wechat-minigame-2/%E6%B7%BB%E5%8A%A0%E4%BD%93%E9%AA%8C%E6%88%90%E5%91%98.png"></p><p>ä½“éªŒæˆå‘˜æ·»åŠ åæ˜¯ä¸ä¼šæœ‰é€šçŸ¥çš„ï¼Œéœ€è¦è‡ªè¡Œé€šçŸ¥ã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E6%88%90%E5%91%98%E7%A1%AE%E8%AE%A4.png"></p><p>æ·»åŠ æˆåŠŸã€‚</p><p><img src="/../images/unity-wechat-minigame-2/%E6%B7%BB%E5%8A%A0%E4%BD%93%E9%AA%8C%E6%88%90%E5%91%98%E6%88%90%E5%8A%9F.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼• 01 ç¯å¢ƒæµç¨‹</title>
    <link href="/2024/06/30/unity-wechat-minigame-1/"/>
    <url>/2024/06/30/unity-wechat-minigame-1/</url>
    
    <content type="html"><![CDATA[<p>Unity3D è½¬æ¢å¾®ä¿¡å°æ¸¸æˆæŒ‡å¼•ç³»åˆ—ï¼ˆç¬¬ä¸€æœŸï¼‰</p><span id="more"></span><h1 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h1><h2 id="å®‰è£…-WebGL-æ¨¡å—"><a href="#å®‰è£…-WebGL-æ¨¡å—" class="headerlink" title="å®‰è£… WebGL æ¨¡å—"></a>å®‰è£… WebGL æ¨¡å—</h2><p>é¦–å…ˆï¼ŒUnity è¦å®‰è£…<kbd>WebGL Build Support</kbd>æ¨¡å—ã€‚</p><p>åœ¨ Hub æ‰¾åˆ°å®‰è£…çš„å¼•æ“ï¼Œç‚¹å‡»è®¾ç½®æŒ‰é’®ï¼Œç‚¹å‡»<kbd>Add modules</kbd>æ·»åŠ æ¨¡å—ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E6%B7%BB%E5%8A%A0%E6%A8%A1%E5%9D%97.png"></p><p>å‹¾é€‰<kbd>WebGL Build Support</kbd>ï¼Œç‚¹å‡»<kbd>Install</kbd>æŒ‰é’®è¿›è¡Œä¸‹è½½å®‰è£…ï¼Œè¿™é‡Œæ˜¾ç¤ºå·²ç»å®‰è£…å¥½äº†ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E5%AE%89%E8%A3%85WebGL%E6%A8%A1%E5%9D%97.png"></p><h2 id="å®‰è£…å¾®ä¿¡å°æ¸¸æˆè½¬æ¢æ’ä»¶"><a href="#å®‰è£…å¾®ä¿¡å°æ¸¸æˆè½¬æ¢æ’ä»¶" class="headerlink" title="å®‰è£…å¾®ä¿¡å°æ¸¸æˆè½¬æ¢æ’ä»¶"></a>å®‰è£…å¾®ä¿¡å°æ¸¸æˆè½¬æ¢æ’ä»¶</h2><p>æ‰“å¼€<a href="https://gitee.com/wechat-minigame/minigame-unity-webgl-transform">å®˜æ–¹æ–‡æ¡£</a>ï¼Œåœ¨<kbd>å®‰è£…ä¸ä½¿ç”¨</kbd>ä¸€æ ï¼Œä¸‹è½½ Unity è½¬æ¢å°æ¸¸æˆæ’ä»¶ï¼Œå¯¼å…¥åˆ°é¡¹ç›®ä¸­ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E4%B8%8B%E8%BD%BD%E6%8F%92%E4%BB%B6.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E5%AF%BC%E5%85%A5%E6%8F%92%E4%BB%B6.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E6%89%93%E5%BC%80%E6%8F%92%E4%BB%B6.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E5%AF%BC%E5%85%A5%E8%B5%84%E6%BA%90.png"></p><p>Unity èœå•æ ä¼šå‡ºç°<kbd>å¾®ä¿¡å°æ¸¸æˆ</kbd>ï¼Œç‚¹å‡»<kbd>è½¬æ¢å°æ¸¸æˆ</kbd>å¯ä»¥æ‰“å¼€è½¬æ¢çª—å£ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8C%89%E9%92%AE.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E8%BD%AC%E6%8D%A2%E7%AA%97%E5%8F%A3.png"></p><h2 id="å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·"><a href="#å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·" class="headerlink" title="å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·"></a>å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·</h2><p>ä¸‹è½½ <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">å¾®ä¿¡å¼€å‘è€…å·¥å…·</a>ï¼Œç¨³å®šç‰ˆ <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html">Stable Build</a> (1.06.2405020) <a href="https://dldir1.qq.com/WechatWebDev/release/be1ec64cf6184b0fa64091919793f068/wechat_devtools_1.06.2405020_win32_x64.exe">Windows 64</a> å³å¯ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E4%B8%8B%E8%BD%BD%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.png"></p><h1 id="æ³¨å†Œå°ç¨‹åº"><a href="#æ³¨å†Œå°ç¨‹åº" class="headerlink" title="æ³¨å†Œå°ç¨‹åº"></a>æ³¨å†Œå°ç¨‹åº</h1><p>åœ¨è½¬æ¢çª—å£å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦å¡«å¾ˆå¤šä¿¡æ¯ã€‚</p><p>å…¶ä¸­<kbd>æ¸¸æˆ AppID</kbd>éœ€è¦åœ¨<a href="https://mp.weixin.qq.com/">å°ç¨‹åº</a>å®˜ç½‘ç”³è¯·æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p><p>æ³¨å†ŒæˆåŠŸåï¼Œåœ¨<kbd>é¦–é¡µ</kbd>-&gt;<kbd>å°ç¨‹åºå‘å¸ƒæµç¨‹</kbd>-&gt;<kbd>å°ç¨‹åºç±»ç›®</kbd>ï¼Œæ·»åŠ <kbd>æœåŠ¡ç±»ç›®</kbd>ï¼Œä¾‹å¦‚ä¼‘é—²æ¸¸æˆã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰å¡«å†™æœåŠ¡ç±»ç›®ï¼Œæ‰“åŒ…å‡ºæ¥çš„é¡¹ç›®å¾ˆå¯èƒ½æ²¡æœ‰å°æ¸¸æˆæ¨¡å¼ï¼Œä¹Ÿå°±æ²¡æœ‰ <code>game.js</code> æ–‡ä»¶ã€‚</p></blockquote><p><img src="/../images/unity-wechat-minigame-1/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%B1%BB%E7%9B%AE.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E5%B0%8F%E6%B8%B8%E6%88%8F%E7%B1%BB%E7%9B%AE.png"></p><p>åœ¨<kbd>å¼€å‘ç®¡ç†</kbd>-&gt;<kbd>å¼€å‘è®¾ç½®</kbd>-&gt;<kbd>å¼€å‘è€… ID</kbd>å¯ä»¥æ‰¾åˆ° <code>AppID</code>ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E5%B0%8F%E7%A8%8B%E5%BA%8FID.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E5%A1%AB%E5%86%99AppID.png"></p><h1 id="è½¬æ¢å°æ¸¸æˆ"><a href="#è½¬æ¢å°æ¸¸æˆ" class="headerlink" title="è½¬æ¢å°æ¸¸æˆ"></a>è½¬æ¢å°æ¸¸æˆ</h1><p>æŠŠæ‰“åŒ…å¹³å°åˆ‡æ¢ä¸º <code>WebGL</code>ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E5%88%87%E6%8D%A2%E6%89%93%E5%8C%85%E5%B9%B3%E5%8F%B0.png"></p><p>æ‰“å¼€è½¬æ¢çª—å£ï¼Œå¡«å†™<kbd>å°æ¸¸æˆé¡¹ç›®å</kbd>ï¼Œ<kbd>å¯¼å‡ºè·¯å¾„</kbd>ï¼Œ<kbd>é¦–åŒ…èµ„æºåŠ è½½æ–¹å¼</kbd>æ”¹ä¸º<kbd>å°æ¸¸æˆåŒ…å†…</kbd>ã€‚</p><p>ç‚¹å‡»<kbd>ç”Ÿæˆå¹¶è½¬æ¢</kbd>ï¼Œæ‰“åŒ…å°æ¸¸æˆã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E8%BD%AC%E6%8D%A2%E5%B0%8F%E6%B8%B8%E6%88%8F.png"></p><p>æ‰“åŒ…å®Œæˆåï¼Œä¼šæœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ <code>minigame</code> æ˜¯éœ€è¦ä½¿ç”¨<kbd>å¾®ä¿¡å¼€å‘è€…å·¥å…·</kbd>æ‰“å¼€çš„å·¥ç¨‹æ–‡ä»¶ï¼Œ<code>webgl</code> æ˜¯ Unity æ‰“åŒ… webgl å¹³å°ç”Ÿæˆçš„æ–‡ä»¶ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><h1 id="å¯¼å…¥é¡¹ç›®"><a href="#å¯¼å…¥é¡¹ç›®" class="headerlink" title="å¯¼å…¥é¡¹ç›®"></a>å¯¼å…¥é¡¹ç›®</h1><p>æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¾®ä¿¡æ‰«ç ç™»å½•ï¼Œé€‰æ‹©<kbd>å°æ¸¸æˆ</kbd>ï¼Œç‚¹å‡»<kbd>å¯¼å…¥</kbd>æŒ‰é’®ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E9%80%89%E6%8B%A9%E6%96%87%E4%BB%B6%E5%A4%B9.png"></p><p>å¯¼å…¥ä¹‹åä¼šè‡ªåŠ¨è¯†åˆ«åœ¨ Unity è½¬æ¢çª—å£ä¸­å¡«å†™çš„ <code>AppID</code>ã€‚</p><p>è¿™é‡Œæš‚æ—¶è¿˜ä¸éœ€è¦è´­ä¹°å¾®ä¿¡äº‘å¼€å‘ï¼Œå¯ä»¥å…ˆå‹¾é€‰<kbd>ä¸ä½¿ç”¨äº‘æœåŠ¡</kbd>ï¼Œç‚¹å‡»<kbd>ç¡®å®š</kbd>æŒ‰é’®å¯¼å…¥é¡¹ç›®ã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E7%A1%AE%E5%AE%9A%E5%AF%BC%E5%85%A5.png"></p><p>æ‰“å¼€é¡¹ç›®ï¼Œç­‰å¾…ç¼–è¯‘ï¼Œå°±å¯ä»¥çœ‹åˆ° Unity çš„åœºæ™¯äº†ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨è½¬æ¢æ’ä»¶ï¼Œè°ƒè¯•å™¨ä¼šæœ‰æŠ¥é”™æç¤º<kbd>æ’ä»¶æœªæˆæƒä½¿ç”¨</kbd>ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªè¶…é“¾æ¥<kbd>æ·»åŠ æ’ä»¶</kbd>ï¼Œç‚¹å‡»è¶…é“¾æ¥å¼€é€š<kbd>Unityé€‚é…æ’ä»¶</kbd>å³å¯ã€‚</p></blockquote><p><img src="/../images/unity-wechat-minigame-1/%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE.png"></p><h1 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h1><p>ç‚¹å‡»ä¸Šæ–¹çš„<kbd>é¢„è§ˆ</kbd>æŒ‰é’®ï¼Œç­‰å¾…ç¼–è¯‘ï¼Œå®Œæˆåä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„äºŒç»´ç ï¼Œå¾®ä¿¡æ‰«ç å³å¯é¢„è§ˆã€‚</p><p><img src="/../images/unity-wechat-minigame-1/%E9%A2%84%E8%A7%88.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E4%BA%8C%E7%BB%B4%E7%A0%81%E9%A2%84%E8%A7%88.png"></p><p><img src="/../images/unity-wechat-minigame-1/%E6%89%8B%E6%9C%BA%E9%A2%84%E8%A7%88.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua ç»•è¿‡å…ƒè¡¨</title>
    <link href="/2024/06/23/lua-rawset-rawget/"/>
    <url>/2024/06/23/lua-rawset-rawget/</url>
    
    <content type="html"><![CDATA[<p>Lua ç»•è¿‡å…ƒè¡¨ï¼Œç›´æ¥è®¿é—® table çš„å­—æ®µã€‚</p><span id="more"></span><h1 id="ç»•è¿‡å…ƒè¡¨"><a href="#ç»•è¿‡å…ƒè¡¨" class="headerlink" title="ç»•è¿‡å…ƒè¡¨"></a>ç»•è¿‡å…ƒè¡¨</h1><p><code>rawset(table, index, value)</code>ï¼Œåœ¨ä¸è§¦å‘å…ƒæ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œè®¾ç½® <code>table[index]</code> çš„å€¼ä¸º valueã€‚</p><p><code>rawget(table, index)</code>ï¼Œåœ¨ä¸è§¦å‘å…ƒæ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œè·å– <code>table[index]</code> çš„å€¼ã€‚</p><p>ç°æœ‰ä¸€ä¸ª hero è¡¨ï¼Œè®¾ç½®äº†å…ƒè¡¨å’Œå…ƒæ–¹æ³•ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> hero = &#123;<br>    level = <span class="hljs-number">1</span>,<br>    <span class="hljs-built_in">exp</span> = <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-keyword">local</span> mt = &#123;<br>    <span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __index&quot;</span>)<br>    <span class="hljs-keyword">end</span>,<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key, value)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __newindex&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(hero, mt)<br></code></pre></td></tr></table></figure><p>å¦‚æœå»è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ keyï¼Œåˆ™ä¼šè¿›å…¥å…ƒè¡¨çš„å…ƒæ–¹æ³•ã€‚</p><p>å› ä¸º <code>__newindex</code> è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œåªæœ‰æ‰“å°ï¼Œæ²¡æœ‰æŠŠå€¼å­˜åˆ° table é‡Œï¼Œæ‰€ä»¥ hero é‡Œè¿˜æ˜¯æ²¡æœ‰ star å­—æ®µã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua">hero.star = <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(hero.star)<br><br><span class="hljs-comment">-- trigger __newindex</span><br><span class="hljs-comment">-- trigger __index</span><br><span class="hljs-comment">-- nil</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ä½¿ç”¨ rawset ä¸º hero æ·»åŠ ä¸€ä¸ªæ–°å­—æ®µ starï¼Œå†ä½¿ç”¨ rawget ä» hero ä¸­è·å– star å­—æ®µã€‚</p><p>å¯ä»¥å‘ç°ï¼Œæ²¡æœ‰è§¦å‘å…ƒæ–¹æ³•çš„æ‰“å°ï¼Œhero è¡¨ä¸­ä¹Ÿæ·»åŠ äº† star å­—æ®µã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">rawset</span>(hero, <span class="hljs-string">&quot;star&quot;</span>, <span class="hljs-number">5</span>)<br><span class="hljs-keyword">local</span> star = <span class="hljs-built_in">rawget</span>(hero, <span class="hljs-string">&quot;star&quot;</span>)<br><span class="hljs-built_in">print</span>(star)<br><br><span class="hljs-comment">-- 5</span><br></code></pre></td></tr></table></figure><h1 id="é˜²æ­¢æ­»å¾ªç¯"><a href="#é˜²æ­¢æ­»å¾ªç¯" class="headerlink" title="é˜²æ­¢æ­»å¾ªç¯"></a>é˜²æ­¢æ­»å¾ªç¯</h1><p>ä¿®æ”¹ä¸€ä¸‹å…ƒæ–¹æ³•ï¼Œåœ¨ <code>__index</code> ä¸­è¿”å› <code>table[key]</code> çš„å€¼ï¼Œåœ¨ <code>__newindex</code> ä¸­è®¾ç½® <code>table[key]</code> ä¸º valueã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> hero = &#123;<br>    level = <span class="hljs-number">1</span>,<br>    <span class="hljs-built_in">exp</span> = <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-keyword">local</span> mt = &#123;<br>    <span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __index&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">table</span>[key]<br>    <span class="hljs-keyword">end</span>,<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key, value)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __newindex&quot;</span>)<br>        <span class="hljs-built_in">table</span>[key] = value<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(hero, mt)<br></code></pre></td></tr></table></figure><p>çœ‹ä¸Šå»ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè§¦å‘äº†è¿™ä¸¤ä¸ªå…ƒæ–¹æ³•ï¼Œå®ƒä»¬å†…éƒ¨çš„é€»è¾‘ï¼ˆä¹Ÿå°±æ˜¯ <code>table[key]</code>ï¼‰åˆä¼šè§¦å‘å…ƒæ–¹æ³•ï¼Œè¿›å…¥æ­»å¾ªç¯ï¼Œæœ€åæ ˆæº¢å‡ºã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs lua">hero.star = <span class="hljs-number">5</span><br><br><span class="hljs-comment">-- trigger __newindex</span><br><span class="hljs-comment">-- trigger __newindex</span><br><span class="hljs-comment">-- trigger __newindex</span><br><span class="hljs-comment">-- ...</span><br><span class="hljs-comment">-- C stack overflow</span><br><br><span class="hljs-built_in">print</span>(hero.star)<br><br><span class="hljs-comment">-- trigger __index</span><br><span class="hljs-comment">-- trigger __index</span><br><span class="hljs-comment">-- trigger __index</span><br><span class="hljs-comment">-- ...</span><br><span class="hljs-comment">-- C stack overflow</span><br></code></pre></td></tr></table></figure><p>è¦é˜²æ­¢è¿™ç§æ­»å¾ªç¯ï¼Œå¯ä»¥åˆ©ç”¨ rawset å’Œ rawgetï¼Œé¿å…å†æ¬¡è§¦å‘å…ƒæ–¹æ³•ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> hero = &#123;<br>    level = <span class="hljs-number">1</span>,<br>    <span class="hljs-built_in">exp</span> = <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-keyword">local</span> mt = &#123;<br>    <span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __index&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">rawget</span>(<span class="hljs-built_in">table</span>, key)<br>    <span class="hljs-keyword">end</span>,<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key, value)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;trigger __newindex&quot;</span>)<br>        <span class="hljs-built_in">rawset</span>(<span class="hljs-built_in">table</span>, key, value)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(hero, mt)<br></code></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—® star å­—æ®µï¼Œå°±ä¸ä¼šæ ˆæº¢å‡ºäº†ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">hero.star = <span class="hljs-number">5</span><br><span class="hljs-comment">-- trigger __newindex</span><br><br><span class="hljs-built_in">print</span>(hero.star)<br><span class="hljs-comment">-- 5</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åªè¯»è¡¨</title>
    <link href="/2024/06/16/lua-table-readonly/"/>
    <url>/2024/06/16/lua-table-readonly/</url>
    
    <content type="html"><![CDATA[<p>Lua çš„ table å»ºç«‹åªè¯»æœºåˆ¶ï¼Œä¿æŠ¤ table ä¸èƒ½è¢«éšæ„ä¿®æ”¹ã€‚</p><span id="more"></span><h1 id="å»ºç«‹åªè¯»æœºåˆ¶"><a href="#å»ºç«‹åªè¯»æœºåˆ¶" class="headerlink" title="å»ºç«‹åªè¯»æœºåˆ¶"></a>å»ºç«‹åªè¯»æœºåˆ¶</h1><p>Lua çš„ table é€šå¸¸æƒ…å†µä¸‹æ˜¯å¯ä»¥éšæ„ä¿®æ”¹å­—æ®µçš„å€¼ï¼Œæˆ–è€…æ–°å¢å­—æ®µã€‚</p><p>å¦‚æœæƒ³è¦å»ºç«‹åªè¯»æœºåˆ¶ï¼Œä¿æŠ¤è¡¨åªèƒ½è¯»å–ï¼Œè€Œä¸èƒ½è¢«éšæ„ä¿®æ”¹ï¼Œå¯ä»¥åˆ©ç”¨å…ƒè¡¨ã€‚</p><h1 id="ç¦æ­¢æ–°å¢å­—æ®µ"><a href="#ç¦æ­¢æ–°å¢å­—æ®µ" class="headerlink" title="ç¦æ­¢æ–°å¢å­—æ®µ"></a>ç¦æ­¢æ–°å¢å­—æ®µ</h1><p>é¦–å…ˆï¼Œåˆ©ç”¨ <code>__newindex</code>ï¼Œå¯ä»¥ç¦æ­¢æ–°å¢å­—æ®µã€‚</p><p>ä¾‹å¦‚ï¼Œç°åœ¨æœ‰ä¸€ä¸ª student è¡¨ï¼ŒåŒ…å« name å’Œ ageã€‚</p><p>å®šä¹‰ä¸€ä¸ª mt è¡¨ï¼Œ<code>__newindex</code> æ‰“å°åªè¯»æç¤ºã€‚</p><p>ç»™ student è¡¨è®¾ç½®å…ƒè¡¨ mtã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> student = &#123;<br>    name = <span class="hljs-string">&quot;Alice&quot;</span>,<br>    age = <span class="hljs-number">18</span><br>&#125;<br><br><span class="hljs-keyword">local</span> mt = &#123;<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can not modify a readonly table&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><br><span class="hljs-built_in">setmetatable</span>(student, mt)<br></code></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥è¯»å–å­—æ®µï¼Œä½†æ˜¯ä¸èƒ½æ–°å¢å­—æ®µäº†ã€‚</p><p>ä¾‹å¦‚ç»™ student å¢åŠ ä¸€ä¸ª score å­—æ®µï¼Œä½†æ˜¯ä¼šæ‰“å°åªè¯»æç¤ºï¼Œæ²¡æœ‰èµ‹å€¼ï¼Œå°è¯•æ‰“å° score å­—æ®µä¼šè¾“å‡º nilã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> name = student.name<br><span class="hljs-built_in">print</span>(name)  <span class="hljs-comment">-- Alice</span><br><br>student.score = <span class="hljs-number">0</span>     <span class="hljs-comment">-- Can not modify a readonly table</span><br><span class="hljs-built_in">print</span>(student.score)  <span class="hljs-comment">-- nil</span><br></code></pre></td></tr></table></figure><h1 id="ç¦æ­¢ä¿®æ”¹å­—æ®µ"><a href="#ç¦æ­¢ä¿®æ”¹å­—æ®µ" class="headerlink" title="ç¦æ­¢ä¿®æ”¹å­—æ®µ"></a>ç¦æ­¢ä¿®æ”¹å­—æ®µ</h1><p>ç»è¿‡ä¸Šè¿°æ­¥éª¤åï¼Œè™½ç„¶ä¸èƒ½æ–°å¢å­—æ®µï¼Œä½†è¿˜æ˜¯å¯ä»¥å¯¹å·²æœ‰çš„å­—æ®µè¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">student.age = <span class="hljs-number">20</span><br><span class="hljs-built_in">print</span>(student.age)  <span class="hljs-comment">-- 20</span><br></code></pre></td></tr></table></figure><p>Lua æ²¡æœ‰æä¾›ä¿®æ”¹å­—æ®µçš„å…ƒæ–¹æ³•ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç©ºè¡¨ï¼ŒæŠŠä¿®æ”¹å­—æ®µçš„è¡Œä¸ºï¼Œè½¬åŒ–æˆæ–°å¢å­—æ®µçš„è¡Œä¸ºã€‚</p><p>å› ä¸ºå¯¹äºç©ºè¡¨æ¥è¯´ï¼Œè®¿é—®ä»»ä½•å­—æ®µéƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œéƒ½ä¼šæ˜¯æ–°å¢å­—æ®µçš„è¡Œä¸ºã€‚</p><p>ä¿®æ”¹ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œå®šä¹‰ä¸€ä¸ª empty è¡¨ï¼Œç»™ empty è®¾ç½®å…ƒè¡¨ mtï¼Œå…ƒè¡¨é‡Œå®šä¹‰ <code>__index</code>ï¼Œèµ‹å€¼ä¸º studentã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> student = &#123;<br>    name = <span class="hljs-string">&quot;Alice&quot;</span>,<br>    age = <span class="hljs-number">18</span><br>&#125;<br><br><span class="hljs-keyword">local</span> empty = &#123;&#125;<br><span class="hljs-keyword">local</span> mt = &#123;<br>    <span class="hljs-built_in">__index</span> = student,<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can not modify a readonly table&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(empty, mt)<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œè®¿é—® empty è¡¨ï¼Œæ˜¯ä¸èƒ½ä¿®æ”¹å­—æ®µå€¼çš„ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">empty.age = <span class="hljs-number">20</span>    <span class="hljs-comment">-- Can not modify a readonly table</span><br><span class="hljs-built_in">print</span>(empty.age)  <span class="hljs-comment">-- 18</span><br></code></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œæ­¤å¤„ä»ç„¶å¯ä»¥ç›´æ¥å»ä¿®æ”¹ student è¡¨ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¿™å¥—æ–¹æ³•åšä¸€ä¸ªå°è£…ã€‚</p><h1 id="å°è£…åªè¯»å‡½æ•°"><a href="#å°è£…åªè¯»å‡½æ•°" class="headerlink" title="å°è£…åªè¯»å‡½æ•°"></a>å°è£…åªè¯»å‡½æ•°</h1><p>å®šä¹‰ä¸€ä¸ªå…¨å±€å‡½æ•° Readonlyï¼ŒæŠŠä¸Šè¿°çš„æ­¥éª¤æ”¾åˆ°å‡½æ•°ä¸­ï¼Œæ¥æ”¶ä¸€ä¸ª tableï¼Œè¿”å›ç»è¿‡å¤„ç†çš„ç©ºè¡¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua">Readonly = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table)</span></span><br>    <span class="hljs-keyword">local</span> empty = &#123;&#125;<br>    <span class="hljs-keyword">local</span> mt = &#123;<br>        <span class="hljs-built_in">__index</span> = <span class="hljs-built_in">table</span>,<br>        <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can not modify a readonly table&quot;</span>)<br>        <span class="hljs-keyword">end</span><br>    &#125;<br>    <span class="hljs-built_in">setmetatable</span>(empty, mt)<br>    <span class="hljs-keyword">return</span> empty<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> student = &#123;<br>    name = <span class="hljs-string">&quot;Alice&quot;</span>,<br>    age = <span class="hljs-number">18</span><br>&#125;<br>student = Readonly(student)<br></code></pre></td></tr></table></figure><p>å†å°è¯•ä¸€ä¸‹ä¿®æ”¹ studentï¼Œå·²ç»ä¸èƒ½ä¿®æ”¹å­—æ®µçš„å€¼äº†ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">student.age = <span class="hljs-number">20</span>    <span class="hljs-comment">-- Can not modify a readonly table</span><br><span class="hljs-built_in">print</span>(student.age)  <span class="hljs-comment">-- 18</span><br></code></pre></td></tr></table></figure><h1 id="åµŒå¥—è¡¨"><a href="#åµŒå¥—è¡¨" class="headerlink" title="åµŒå¥—è¡¨"></a>åµŒå¥—è¡¨</h1><p>ä¸Šé¢çš„åªè¯»å‡½æ•°åªèƒ½å¤„ç†ä¸€å±‚è¡¨ï¼Œå¦‚æœè¡¨é‡Œé¢è¿˜åµŒå¥—äº†è¡¨ï¼Œé‚£ä¹ˆåµŒå¥—çš„è¡¨è¿˜æ˜¯éåªè¯»çš„ã€‚</p><p>æ­¤æ—¶å¯ä»¥é€’å½’æ£€æŸ¥è¡¨é‡Œæ˜¯å¦æœ‰åµŒå¥—è¡¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs lua">Readonly = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table)</span></span><br>    <span class="hljs-comment">-- éå†æ¯ä¸ªå­—æ®µ</span><br>    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>        <span class="hljs-comment">-- æœ‰åµŒå¥—è¡¨</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(value) == <span class="hljs-string">&quot;table&quot;</span> <span class="hljs-keyword">then</span><br>            <span class="hljs-comment">-- é€’å½’è®¾ç½®åªè¯»</span><br>            <span class="hljs-built_in">table</span>[key] = Readonly(value)<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-comment">-- è®¾ç½®åªè¯»çš„æ­¥éª¤</span><br>    <span class="hljs-keyword">local</span> empty = &#123;&#125;<br>    <span class="hljs-keyword">local</span> mt = &#123;<br>        <span class="hljs-built_in">__index</span> = <span class="hljs-built_in">table</span>,<br>        <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span></span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can not modify a readonly table&quot;</span>)<br>        <span class="hljs-keyword">end</span><br>    &#125;<br>    <span class="hljs-built_in">setmetatable</span>(empty, mt)<br>    <span class="hljs-keyword">return</span> empty<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>åœ¨ student è¡¨é‡Œæ–°å¢ä¸€ä¸ª score è¡¨ï¼ŒåŒ…å« math å’Œ english å­—æ®µã€‚</p><p>ç»è¿‡åªè¯»å‡½æ•°é€’å½’å¤„ç†ä¹‹åï¼Œscore è¡¨ä¹Ÿæ˜¯åªè¯»çš„ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> student = &#123;<br>    name = <span class="hljs-string">&quot;Alice&quot;</span>,<br>    age = <span class="hljs-number">18</span>,<br>    score = &#123;<br>        <span class="hljs-built_in">math</span> = <span class="hljs-number">100</span>,<br>        english = <span class="hljs-number">100</span><br>    &#125;<br>&#125;<br>student = Readonly(student)<br><br>student.score.<span class="hljs-built_in">math</span> = <span class="hljs-number">20</span>    <span class="hljs-comment">-- Can not modify a readonly table</span><br><span class="hljs-built_in">print</span>(student.score.<span class="hljs-built_in">math</span>)  <span class="hljs-comment">-- 100</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åŸºç¡€ 05 æ—¶é—´</title>
    <link href="/2024/06/09/lua-basic-5/"/>
    <url>/2024/06/09/lua-basic-5/</url>
    
    <content type="html"><![CDATA[<p>Lua åŸºç¡€ç›¸å…³çŸ¥è¯† ç¬¬äº”æœŸï¼ˆå®Œç»“ï¼‰</p><span id="more"></span><h1 id="æ—¶é—´æˆ³"><a href="#æ—¶é—´æˆ³" class="headerlink" title="æ—¶é—´æˆ³"></a>æ—¶é—´æˆ³</h1><p>é€šè¿‡ <code>os.time</code> å‡½æ•°ï¼Œå¯ä»¥è·å–å½“å‰çš„æ—¶é—´æˆ³ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>)<br><br><span class="hljs-comment">-- 1717895996 -&gt; 2024-06-09 09:19:56</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¦æŒ‡å®šæ—¥æœŸï¼Œè·å–å¯¹åº”çš„æ—¶é—´æˆ³ï¼Œå¯ä»¥å¾€ <code>os.time</code> å‡½æ•°ä¼ å…¥ä¸€ä¸ªè¡¨ï¼Œè®¾å®šæ—¥æœŸã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">date</span> = &#123;<br>    year = <span class="hljs-number">2024</span>,  <span class="hljs-comment">-- å¹´ä»½</span><br>    month = <span class="hljs-number">6</span>,    <span class="hljs-comment">-- æœˆä»½</span><br>    day = <span class="hljs-number">9</span>,      <span class="hljs-comment">-- å¤©æ•°</span><br>    hour = <span class="hljs-number">9</span>,     <span class="hljs-comment">-- å°æ—¶</span><br>    <span class="hljs-built_in">min</span> = <span class="hljs-number">30</span>,     <span class="hljs-comment">-- åˆ†é’Ÿ</span><br>    sec = <span class="hljs-number">30</span>      <span class="hljs-comment">-- ç§’æ•°</span><br>&#125;<br><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>(<span class="hljs-built_in">date</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>)<br><br><span class="hljs-comment">-- 1717896630 -&gt; 2024-06-09 09:30:30</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„åˆ°ï¼Œå¦‚æœåªå†™äº†å¹´ä»½ã€æœˆä»½ã€å¤©æ•°ï¼Œæ²¡æœ‰å°æ—¶ã€åˆ†é’Ÿã€ç§’æ•°ï¼Œé»˜è®¤æ˜¯å½“å¤©ä¸­åˆ 12 ç‚¹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">date</span> = &#123;<br>    year = <span class="hljs-number">2024</span>,  <span class="hljs-comment">-- å¹´ä»½</span><br>    month = <span class="hljs-number">6</span>,    <span class="hljs-comment">-- æœˆä»½</span><br>    day = <span class="hljs-number">9</span>,      <span class="hljs-comment">-- å¤©æ•°</span><br>&#125;<br><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>(<span class="hljs-built_in">date</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>)<br><br><span class="hljs-comment">-- 1717905600 -&gt; 2024-06-09 12:00:00</span><br></code></pre></td></tr></table></figure><h1 id="æ—¥æœŸ"><a href="#æ—¥æœŸ" class="headerlink" title="æ—¥æœŸ"></a>æ—¥æœŸ</h1><p>é€šè¿‡ <code>os.date</code> å‡½æ•°ï¼Œå¯ä»¥æŠŠæ—¶é—´æˆ³è½¬æ¢æˆæœ‰æ ¼å¼çš„æ—¥æœŸã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>)<br><br><span class="hljs-comment">-- 1717896843</span><br><br><br><span class="hljs-keyword">local</span> <span class="hljs-built_in">date</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, <span class="hljs-built_in">time</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">date</span>)<br><br><span class="hljs-comment">-- 2024/06/09 09:34:03</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨ <code>os.date</code>ï¼Œåˆ™è·å–å½“å‰æ—¶é—´æˆ³å¯¹åº”çš„é»˜è®¤æ—¥æœŸæ ¼å¼ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">date</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">date</span>)<br><br><span class="hljs-comment">-- Sun Jun  9 09:35:58 2024</span><br></code></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è·å–æ—¥æœŸå½“ä¸­çš„æŸä¸ªå‚æ•°ï¼Œæ¯”å¦‚å¤©æ•°ï¼Œå¯ä»¥æŠŠ os.date çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¹æˆ <code>&quot;*t&quot;</code>ï¼Œæ­¤æ—¶å®ƒä¼šè¿”å›ä¸€ä¸ªè¡¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">time</span>)<br><br><span class="hljs-comment">-- 1717897482</span><br><br><br><span class="hljs-keyword">local</span> dateTable = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;*t&quot;</span>, <span class="hljs-built_in">time</span>)<br><span class="hljs-built_in">print</span>(dateTable)<br><br><span class="hljs-comment">-- table: 000001736C002770</span><br><br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(dateTable) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(key, value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- year    2024</span><br><span class="hljs-comment">-- wday    1</span><br><span class="hljs-comment">-- day     9</span><br><span class="hljs-comment">-- min     44</span><br><span class="hljs-comment">-- month   6</span><br><span class="hljs-comment">-- sec     42</span><br><span class="hljs-comment">-- isdst   false</span><br><span class="hljs-comment">-- yday    161</span><br><span class="hljs-comment">-- hour    9</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¦è®¡ç®—å¤šå°‘å¤©åçš„æ—¥æœŸï¼Œå¯ä»¥ç»™è¿™ä¸ªæ—¥æœŸè¡¨ä¸­çš„ day å­—æ®µåŠ ä¸Šä¸€å®šçš„å¤©æ•°ï¼Œè½¬æˆæ—¶é—´æˆ³åï¼Œå†æ ¼å¼åŒ–æ—¥æœŸã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- è·å–å½“å‰æ—¶é—´æˆ³</span><br><span class="hljs-keyword">local</span> <span class="hljs-built_in">time</span> = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>()<br><span class="hljs-comment">-- è½¬æ¢æˆæ—¥æœŸæ ¼å¼</span><br><span class="hljs-keyword">local</span> currentDate = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, <span class="hljs-built_in">time</span>)<br><span class="hljs-built_in">print</span>(currentDate)<br><br><span class="hljs-comment">-- 2024/06/09 09:51:20</span><br><br><br><span class="hljs-comment">-- æŠŠå½“å‰æ—¶é—´æˆ³è½¬æˆä¸€ä¸ªè¡¨ï¼Œå¤©æ•°åŠ ä¸Š 100 å¤©</span><br><span class="hljs-keyword">local</span> dateTable = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;*t&quot;</span>, <span class="hljs-built_in">time</span>)<br>dateTable.day = dateTable.day + <span class="hljs-number">100</span><br><br><br><span class="hljs-comment">-- è·å– 100 å¤©åçš„æ—¶é—´æˆ³</span><br><span class="hljs-keyword">local</span> future = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>(dateTable)<br><span class="hljs-comment">-- è½¬æ¢æˆæ—¥æœŸæ ¼å¼</span><br><span class="hljs-keyword">local</span> futureDate = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, future)<br><br><span class="hljs-built_in">print</span>(futureDate)<br><br><span class="hljs-comment">-- 2024/09/17 09:51:20</span><br></code></pre></td></tr></table></figure><h1 id="æ—¶é—´å·®"><a href="#æ—¶é—´å·®" class="headerlink" title="æ—¶é—´å·®"></a>æ—¶é—´å·®</h1><p>é€šè¿‡ <code>os.difftime</code> å‡½æ•°ï¼Œè®¡ç®—ä¸¤ä¸ªæ—¶é—´æˆ³ä¹‹é—´çš„å·®å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œè®¡ç®—ä¸€ä¸‹å½“å‰æ—¶é—´åˆ°æ¬¡æ—¥é›¶ç‚¹çš„ç§’æ•°ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- è·å–å½“å‰æ—¶é—´æˆ³</span><br><span class="hljs-keyword">local</span> now = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, now))<br><br><span class="hljs-comment">-- 2024/06/09 10:12:39</span><br><br><br><span class="hljs-comment">-- æŠŠå½“å‰æ—¶é—´æˆ³è½¬æˆä¸€ä¸ªè¡¨ï¼Œå¤©æ•°åŠ  1ï¼Œå°æ—¶ã€åˆ†é’Ÿã€ç§’æ•°æ¸…é›¶</span><br><span class="hljs-keyword">local</span> nowDate = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;*t&quot;</span>, now)<br>nowDate.day = nowDate.day + <span class="hljs-number">1</span><br>nowDate.hour = <span class="hljs-number">0</span><br>nowDate.<span class="hljs-built_in">min</span> = <span class="hljs-number">0</span><br>nowDate.sec = <span class="hljs-number">0</span><br><br><br><span class="hljs-comment">-- è®¡ç®—æ¬¡æ—¥é›¶ç‚¹æ—¶é—´æˆ³</span><br><span class="hljs-keyword">local</span> future = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">time</span>(nowDate)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>, future))<br><br><span class="hljs-comment">-- 2024/06/10 00:00:00</span><br><br><br><span class="hljs-comment">-- è®¡ç®—ä¸¤ä¸ªæ—¶é—´æˆ³çš„å·®å€¼</span><br><span class="hljs-keyword">local</span> diff = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">difftime</span>(now, future)<br><span class="hljs-built_in">print</span>(diff)<br><br><span class="hljs-comment">-- -49641.0</span><br></code></pre></td></tr></table></figure><h1 id="CPU-æ—¶é—´"><a href="#CPU-æ—¶é—´" class="headerlink" title="CPU æ—¶é—´"></a>CPU æ—¶é—´</h1><p>é€šè¿‡ <code>os.clock</code> å‡½æ•°ï¼Œå¯ä»¥è·å–æ¶ˆè€—çš„ CPU æ—¶é—´ï¼Œå¯ä»¥ç”¨åœ¨æ€§èƒ½æµ‹è¯•ã€‚</p><p>ä¾‹å¦‚ï¼Œè®¡ç®—ä¸€ä¸‹ for å¾ªç¯ç´¯åŠ  1 äº¿æ¬¡æ¶ˆè€—çš„æ—¶é—´ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- å¼€å§‹å‰</span><br><span class="hljs-keyword">local</span> before = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">clock</span>()<br><span class="hljs-built_in">print</span>(before)  <span class="hljs-comment">-- 0.081</span><br><br><span class="hljs-comment">-- ç´¯åŠ  1 äº¿æ¬¡</span><br><span class="hljs-keyword">local</span> sum = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">100000000</span> <span class="hljs-keyword">do</span><br>    sum = sum + i<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- ç»“æŸå</span><br><span class="hljs-keyword">local</span> after = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">clock</span>()<br><span class="hljs-built_in">print</span>(after)   <span class="hljs-comment">-- 0.445</span><br><br><span class="hljs-comment">-- ç»è¿‡çš„æ—¶é—´</span><br><span class="hljs-keyword">local</span> diff = after - before<br><span class="hljs-built_in">print</span>(diff)    <span class="hljs-comment">-- 0.364</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åŸºç¡€ 04 æ¨¡å—</title>
    <link href="/2024/06/02/lua-basic-4/"/>
    <url>/2024/06/02/lua-basic-4/</url>
    
    <content type="html"><![CDATA[<p>Lua åŸºç¡€ç›¸å…³çŸ¥è¯† ç¬¬å››æœŸ</p><span id="more"></span><h1 id="require"><a href="#require" class="headerlink" title="require"></a>require</h1><p>æ¨¡å—ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè¡¨ï¼Œè¡¨é‡Œå­˜å‚¨äº†ä¸€äº›å­—æ®µå’Œå‡½æ•°ï¼Œå•ç‹¬å†™åœ¨ä¸€ä¸ª lua æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ª <code>tools.lua</code> æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨ tools è¡¨ï¼ŒåŒ…å«ä¸€ä¸ª log å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥æ ‡é¢˜å’Œä¿¡æ¯ï¼Œå‡½æ•°å†…éƒ¨æ ¼å¼åŒ–å­—ç¬¦ä¸²è¾“å‡ºã€‚</p><p>æœ€åè¦ <code>return tools</code>ï¼Œåœ¨ require åŠ è½½è¿™ä¸ªæ¨¡å—æ—¶æ‰èƒ½æ‹¿åˆ°è¿”å›çš„ tools è¡¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = &#123;&#125;<br><br>tools.<span class="hljs-built_in">log</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(title, message)</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;[%s] %s&quot;</span>, title, message))<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">return</span> tools<br></code></pre></td></tr></table></figure><p>åœ¨å…¶ä»– lua æ–‡ä»¶ä¸­åŠ è½½è¿™ä¸ª tools æ¨¡å—ï¼Œè¿›è¡Œä½¿ç”¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = <span class="hljs-built_in">require</span> <span class="hljs-string">&quot;tools&quot;</span><br>tools.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;console&quot;</span>, <span class="hljs-string">&quot;hello lua&quot;</span>)<br><br><span class="hljs-comment">-- [console] hello lua</span><br></code></pre></td></tr></table></figure><p>æ ‡å‡†åº“ä¹Ÿå¯ä»¥é€šè¿‡ require åŠ è½½ï¼Œæ¢ä¸ªåç§°ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> m = <span class="hljs-built_in">require</span> <span class="hljs-string">&quot;math&quot;</span><br><span class="hljs-keyword">local</span> n = m.<span class="hljs-built_in">abs</span>(<span class="hljs-number">-1</span>)<br><span class="hljs-built_in">print</span>(n)<br><br><span class="hljs-comment">-- 1</span><br></code></pre></td></tr></table></figure><p>require ä¼šåšå·²åŠ è½½çš„æ£€æŸ¥ï¼Œå¦‚æœå·²ç»åŠ è½½è¿‡ä¸€ä¸ªæ¨¡å—äº†ï¼Œå°±ä¸ä¼šå†é‡å¤åŠ è½½äº†ã€‚</p><p>å¦‚æœè¦ç§»é™¤åŸæ¥åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æŠŠæ¨¡å—ä» <code>package.loaded</code> ä¸­åˆ é™¤ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">package</span>.<span class="hljs-built_in">loaded</span>.tools = <span class="hljs-literal">nil</span><br></code></pre></td></tr></table></figure><h1 id="loadfile-dofile-require"><a href="#loadfile-dofile-require" class="headerlink" title="loadfile dofile require"></a>loadfile dofile require</h1><p>è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯ç”¨æ¥åŠ è½½å’Œæ‰§è¡Œå¤–éƒ¨ lua è„šæœ¬çš„ï¼Œä¸è¿‡æœ‰ä¸€äº›åŒºåˆ«ï¼š</p><ul><li>loadfile åŠ è½½ç¼–è¯‘æŒ‡å®šçš„ lua æ–‡ä»¶ï¼Œä½†ä¸æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>ï¼ˆè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰</code></li><li>dofile åŠ è½½ç¼–è¯‘å¹¶æ‰§è¡ŒæŒ‡å®šçš„ lua æ–‡ä»¶<code>ï¼ˆè¿”å›å€¼æ˜¯æ–‡ä»¶ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼‰</code></li><li>require å…ˆæ£€æŸ¥ <code>package.loaded</code> æ˜¯å¦å·²åŠ è½½æ¨¡å—ï¼Œè‹¥å·²åŠ è½½ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç¼–è¯‘æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶è®°å½•åˆ° <code>package.loadedï¼ˆè¿”å›å€¼é€šå¸¸æ˜¯ä¸€ä¸ªè¡¨ï¼‰</code></li></ul><p>è¿™é‡Œæ‰€è¯´çš„æ‰§è¡Œï¼Œæ˜¯æŒ‡è¢«åŠ è½½çš„ lua æ–‡ä»¶ä¸­ï¼Œå†™åœ¨è¡¨å¤–é¢å¯ä»¥è¢«æ‰§è¡Œçš„è¯­å¥ï¼Œä¾‹å¦‚åœ¨ tools ä¸­æ·»åŠ ä¸€è¡Œæ‰“å°ï¼Œè¡¨ç¤ºæ¬¢è¿ä½¿ç”¨è¿™ä¸ªæ¨¡å—ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = &#123;&#125;<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Welcome to use this tools module!&quot;</span>)<br><br>tools.<span class="hljs-built_in">log</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(title, message)</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;[%s] %s&quot;</span>, title, message))<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">return</span> tools<br></code></pre></td></tr></table></figure><p>å…ˆå°è¯•ä½¿ç”¨ loadfileï¼Œæ³¨æ„ï¼Œç¬¬ä¸€è¡Œä»£ç åŠ è½½çš„æ˜¯ <code>tools.lua</code>ï¼Œéœ€è¦å¢åŠ  <code>.lua</code> åç¼€åï¼Œç¬¬ä¸€è¡Œå¹¶æ²¡æœ‰è¾“å‡ºã€‚</p><p>ç¬¬äºŒè¡Œä»£ç æ‰“å°äº† loadfile çš„è¿”å›å€¼ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ª functionã€‚</p><p>ç¬¬ä¸‰è¡Œä»£ç æ‰‹åŠ¨è°ƒç”¨äº†è¿”å›çš„å‡½æ•°ï¼Œæ‰æ‰§è¡Œäº† <code>tools.lua</code> é‡Œé¢çš„ä¸€è¡Œæ‰“å°ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = <span class="hljs-built_in">loadfile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)<br><span class="hljs-built_in">print</span>(tools)  <span class="hljs-comment">-- function: 0000025E2F7791D0</span><br>tools()       <span class="hljs-comment">-- Welcome to use this tools module!</span><br></code></pre></td></tr></table></figure><p>å†å°è¯•ä¸€ä¸‹ dofileï¼ŒåŒæ ·çš„ï¼Œç¬¬ä¸€è¡Œä»£ç åŠ è½½çš„æ˜¯ <code>tools.lua</code>ï¼Œç¬¬ä¸€è¡Œå°±è¾“å‡ºäº†ã€‚</p><p>ç¬¬äºŒè¡Œä»£ç æ‰“å°çš„è¿”å›å€¼æ˜¯ tableï¼Œä¹Ÿå°±æ˜¯ <code>tools.lua</code> æœ€åä¸€è¡Œçš„ <code>return tools</code>ã€‚</p><p>ç¬¬ä¸‰è¡Œä»£ç åˆ™ä¸æ˜¯ç›´æ¥è°ƒç”¨ tools äº†ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚åº”è¯¥è°ƒç”¨ <code>tools.log</code>ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = <span class="hljs-built_in">dofile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)  <span class="hljs-comment">-- Welcome to use this tools module!</span><br><span class="hljs-built_in">print</span>(tools)                       <span class="hljs-comment">-- table: 00000150C5D61D30</span><br>tools.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;console&quot;</span>, <span class="hljs-string">&quot;hello lua&quot;</span>)  <span class="hljs-comment">-- [console] hello lua</span><br></code></pre></td></tr></table></figure><p>æœ€åå›åˆ° requireï¼Œæ³¨æ„ï¼Œç¬¬ä¸€è¡Œä»£ç æ²¡æœ‰ <code>.lua</code> åç¼€åï¼Œç¬¬ä¸€è¡Œå°±è¾“å‡ºäº†ã€‚</p><p>åé¢ä¸¤è¡Œä»£ç å’Œ dofile æ˜¯ä¸€è‡´çš„ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;tools&quot;</span>)     <span class="hljs-comment">-- Welcome to use this tools module!</span><br><span class="hljs-built_in">print</span>(tools)                       <span class="hljs-comment">-- table: 0000025D08BF13D0</span><br>tools.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;console&quot;</span>, <span class="hljs-string">&quot;hello lua&quot;</span>)  <span class="hljs-comment">-- [console] hello lua</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå†æ¬¡åŠ è½½ lua æ–‡ä»¶ï¼Œloadfile ä¾ç„¶æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼Œdofile ä¼šå†æ¬¡è¾“å‡ºï¼Œrequire åˆ™åªè¾“å‡ºä¸€æ¬¡ï¼Œé™¤éç§»é™¤å·²åŠ è½½çš„æ¨¡å—ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> tools_loadfile = <span class="hljs-built_in">loadfile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)<br><span class="hljs-keyword">local</span> tools_loadfile = <span class="hljs-built_in">loadfile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)<br><br><span class="hljs-keyword">local</span> tools_dofile = <span class="hljs-built_in">dofile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)  <span class="hljs-comment">-- Welcome to use this tools module!</span><br><span class="hljs-keyword">local</span> tools_dofile = <span class="hljs-built_in">dofile</span>(<span class="hljs-string">&quot;tools.lua&quot;</span>)  <span class="hljs-comment">-- Welcome to use this tools module!</span><br><br><span class="hljs-keyword">local</span> tools_require = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;tools&quot;</span>)    <span class="hljs-comment">-- Welcome to use this tools module!</span><br><span class="hljs-keyword">local</span> tools_require = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;tools&quot;</span>)<br><br><span class="hljs-built_in">package</span>.<span class="hljs-built_in">loaded</span>.tools = <span class="hljs-literal">nil</span><br><span class="hljs-keyword">local</span> tools_require = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;tools&quot;</span>)    <span class="hljs-comment">-- Welcome to use this tools module!</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åŸºç¡€ 03 å¸¸ç”¨å‡½æ•°</title>
    <link href="/2024/05/26/lua-basic-3/"/>
    <url>/2024/05/26/lua-basic-3/</url>
    
    <content type="html"><![CDATA[<p>Lua åŸºç¡€ç›¸å…³çŸ¥è¯† ç¬¬ä¸‰æœŸ</p><span id="more"></span><h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="æ ¼å¼åŒ–å­—ç¬¦ä¸²-string-format"><a href="#æ ¼å¼åŒ–å­—ç¬¦ä¸²-string-format" class="headerlink" title="æ ¼å¼åŒ–å­—ç¬¦ä¸² string.format"></a>æ ¼å¼åŒ–å­—ç¬¦ä¸² <code>string.format</code></h2><p>é€šå¸¸å­—ç¬¦ä¸²çš„è¿æ¥å¯ä»¥ä½¿ç”¨ .. ç¬¦å·ï¼Œä¸è¿‡å½“å­—ç¬¦ä¸²æ¯”è¾ƒé•¿ï¼Œè¿™æ ·çš„è¿æ¥æ–¹å¼å°±å¾ˆç¹çï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>string.format</code> è¿›è¡Œæ ¼å¼åŒ–ã€‚</p><p>å¸¸ç”¨çš„æ ¼å¼æ§åˆ¶ç¬¦ï¼š</p><ul><li>%s æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²</li><li>%d æ¥æ”¶ä¸€ä¸ªæ•°å­—å¹¶è½¬åŒ–ä¸ºæœ‰ç¬¦å·æ•´æ•°ï¼Œ%02d å¯ä»¥æ˜¾ç¤ºä¸¤ä½æ•°ï¼Œä¸ªä½æ•°æ—¶å‰é¢è¡¥ 0ï¼Œé€šå¸¸ç”¨äºå€’è®¡æ—¶æ ¼å¼</li><li>%f æ¥æ”¶ä¸€ä¸ªæ•°å­—å¹¶è½¬åŒ–ä¸ºæµ®ç‚¹æ•°ï¼Œé»˜è®¤ä¿ç•™ 6 ä½å°æ•°ï¼Œåé¢è¡¥ 0ï¼Œ%.2f å¯ä»¥ä¿ç•™ä¸¤ä½å°æ•°</li></ul><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello&quot;</span><br><span class="hljs-keyword">local</span> result = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;str = %s&quot;</span>, str)<br><span class="hljs-built_in">print</span>(result)<br><br><span class="hljs-comment">-- str = hello</span><br><br><span class="hljs-keyword">local</span> minute = <span class="hljs-number">2</span><br><span class="hljs-keyword">local</span> second = <span class="hljs-number">30</span><br><span class="hljs-keyword">local</span> result = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%02d:%02d&quot;</span>, minute, second)<br><span class="hljs-built_in">print</span>(result)<br><br><span class="hljs-comment">-- 02:30</span><br><br><span class="hljs-keyword">local</span> multi = <span class="hljs-number">0.214</span><br><span class="hljs-keyword">local</span> result = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%.2f&quot;</span>, multi)<br><span class="hljs-built_in">print</span>(result)<br><br><span class="hljs-comment">-- 0.21</span><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²é•¿åº¦-string-len"><a href="#å­—ç¬¦ä¸²é•¿åº¦-string-len" class="headerlink" title="å­—ç¬¦ä¸²é•¿åº¦ string.len"></a>å­—ç¬¦ä¸²é•¿åº¦ <code>string.len</code></h2><p>é€šå¸¸åªåŒ…å«è‹±æ–‡çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ <code>string.len</code> è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello&quot;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">len</span>(str))  <span class="hljs-comment">-- 5</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå­—ç¬¦ä¸²åŒ…å«ä¸­æ–‡ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ <code>utf8.len</code> è®¡ç®— ASCII å­—ç¬¦ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>string.len</code> æŠŠå°æ˜çš„é•¿åº¦è®¡ç®—ä¸º 6ï¼Œ<code>utf8.len</code> åˆ™æ˜¯ 2ã€‚ç©ºæ ¼çš„é•¿åº¦ä¸º 1ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello å°æ˜&quot;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">len</span>(str))  <span class="hljs-comment">-- 12</span><br><span class="hljs-built_in">print</span>(utf8.<span class="hljs-built_in">len</span>(str))    <span class="hljs-comment">-- 8</span><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æŸ¥æ‰¾-string-find"><a href="#å­—ç¬¦ä¸²æŸ¥æ‰¾-string-find" class="headerlink" title="å­—ç¬¦ä¸²æŸ¥æ‰¾ string.find"></a>å­—ç¬¦ä¸²æŸ¥æ‰¾ <code>string.find</code></h2><p>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æŒ‡å®šçš„å­ä¸²å†…å®¹ï¼Œå¦‚æœæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­ä¸²ï¼ˆåç»­çš„ä¸æŸ¥æ‰¾ï¼‰ï¼Œåˆ™è¿”å›è¿™ä¸ªå­ä¸²çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå¦åˆ™è¿”å› nilã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> startPos, endPos = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span>(str, <span class="hljs-string">&quot;lua&quot;</span>)<br><span class="hljs-built_in">print</span>(startPos, endPos)<br><br><span class="hljs-comment">-- 7       9</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¦å€’ç€æŸ¥æ‰¾ï¼Œå¯ä»¥åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä½ç½®æŒ‡å®šå€’æ•°å¤šå°‘ä¸ªå­—ç¬¦ã€‚</p><p>ä¾‹å¦‚ï¼Œå€’æ•°ä¸€ä¸ªå­—ç¬¦ï¼Œå› ä¸ºè¦æŸ¥æ‰¾çš„ lua æ˜¯ä¸‰ä¸ªå­—ç¬¦ï¼ŒåªæŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦è‚¯å®šæ˜¯ä¸åŒ¹é…çš„ã€‚å¦‚æœå€’æ•°ä¸‰ä¸ªå­—ç¬¦ï¼Œå°±æ­£å¥½èƒ½åŒ¹é…ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> startPos, endPos = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span>(str, <span class="hljs-string">&quot;lua&quot;</span>, <span class="hljs-number">-1</span>)<br><span class="hljs-built_in">print</span>(startPos, endPos)<br><br><span class="hljs-comment">-- nil     nil</span><br><br><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> startPos, endPos = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">find</span>(str, <span class="hljs-string">&quot;lua&quot;</span>, <span class="hljs-number">-3</span>)<br><span class="hljs-built_in">print</span>(startPos, endPos)<br><br><span class="hljs-comment">-- 7       9</span><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æˆªå–-string-sub"><a href="#å­—ç¬¦ä¸²æˆªå–-string-sub" class="headerlink" title="å­—ç¬¦ä¸²æˆªå– string.sub"></a>å­—ç¬¦ä¸²æˆªå– <code>string.sub</code></h2><p>æŒ‡å®šæˆªå–çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™ä»å€’æ•°ä½ç½®å¼€å§‹æˆªå–ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> strSub = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(str, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(strSub)<br><br><span class="hljs-comment">-- hel</span><br><br><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> strSub = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(str, <span class="hljs-number">-3</span>)<br><span class="hljs-built_in">print</span>(strSub)<br><br><span class="hljs-comment">-- lua</span><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æ›¿æ¢-string-gsub"><a href="#å­—ç¬¦ä¸²æ›¿æ¢-string-gsub" class="headerlink" title="å­—ç¬¦ä¸²æ›¿æ¢ string.gsub"></a>å­—ç¬¦ä¸²æ›¿æ¢ <code>string.gsub</code></h2><p>æŒ‡å®šè¢«æ›¿æ¢å’Œè¦æ›¿æ¢çš„å­—ç¬¦ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ›¿æ¢æ¬¡æ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ›¿æ¢æ¬¡æ•°ï¼Œé»˜è®¤å…¨éƒ¨æ›¿æ¢ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> str = <span class="hljs-string">&quot;hello lua&quot;</span><br><span class="hljs-keyword">local</span> strSub = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">gsub</span>(str, <span class="hljs-string">&quot;l&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(strSub)<br><br><span class="hljs-comment">-- heaao lua</span><br></code></pre></td></tr></table></figure><h1 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h1><h2 id="æ’å…¥-table-insert"><a href="#æ’å…¥-table-insert" class="headerlink" title="æ’å…¥ table.insert"></a>æ’å…¥ <code>table.insert</code></h2><p>åœ¨è¡¨çš„æœ«å°¾æ’å…¥æ–°çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ’å…¥çš„ä½ç½®ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span> &#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(names, <span class="hljs-string">&quot;Jack&quot;</span>)  <span class="hljs-comment">-- åœ¨æœ«å°¾æ’å…¥</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(names) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(key, value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- 1       Alice</span><br><span class="hljs-comment">-- 2       Bob</span><br><span class="hljs-comment">-- 3       Jack</span><br><br><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span> &#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(names, <span class="hljs-number">1</span>, <span class="hljs-string">&quot;Jack&quot;</span>)  <span class="hljs-comment">-- åœ¨ç´¢å¼•ä¸º 1 çš„ä½ç½®æ’å…¥ï¼ˆä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯åœ¨å¼€å¤´æ’å…¥ï¼‰</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(names) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(key, value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- 1       Jack</span><br><span class="hljs-comment">-- 2       Alice</span><br><span class="hljs-comment">-- 3       Bob</span><br></code></pre></td></tr></table></figure><h2 id="ç§»é™¤-table-remove"><a href="#ç§»é™¤-table-remove" class="headerlink" title="ç§»é™¤ table.remove"></a>ç§»é™¤ <code>table.remove</code></h2><p>ä»è¡¨çš„æœ«å°¾ç§»é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç§»é™¤çš„ä½ç½®ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span> &#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">remove</span>(names)  <span class="hljs-comment">-- ç§»é™¤æœ«å°¾</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(names) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(key, value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- 1       Alice</span><br><span class="hljs-comment">-- 2       Bob</span><br><br><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span> &#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">remove</span>(names, <span class="hljs-number">1</span>)  <span class="hljs-comment">-- ç§»é™¤ç´¢å¼•ä¸º 1 çš„å…ƒç´ ï¼ˆä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ç§»é™¤å¼€å¤´ï¼‰</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(names) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(key, value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- 1       Bob</span><br><span class="hljs-comment">-- 2       Jack</span><br></code></pre></td></tr></table></figure><h2 id="æ’åº-table-sort"><a href="#æ’åº-table-sort" class="headerlink" title="æ’åº table.sort"></a>æ’åº <code>table.sort</code></h2><p>ç®€å•æ’åºã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> nums = &#123; <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span> &#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">sort</span>(nums)<br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(nums) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- 1 2 3 4 5</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¡¨ä¸­åµŒå¥—äº†è¡¨ï¼Œè¿˜å¯ä»¥æ ¹æ®è¡¨çš„å­—æ®µè¿›è¡Œæ’åºï¼Œéœ€è¦ç»™ <code>table.sort</code> ä¼ å…¥ä¸€ä¸ª function ä½œä¸ºå‚æ•°ï¼Œåœ¨å‡½æ•°å†…åˆ¤æ–­å­—æ®µå¤§å°ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> children =<br>&#123;<br>    &#123;<br>        name = <span class="hljs-string">&quot;Alice&quot;</span>,<br>        age = <span class="hljs-number">5</span><br>    &#125;,<br>    &#123;<br>        name = <span class="hljs-string">&quot;Bob&quot;</span>,<br>        age = <span class="hljs-number">2</span><br>    &#125;,<br>    &#123;<br>        name = <span class="hljs-string">&quot;Jack&quot;</span>,<br>        age = <span class="hljs-number">0</span><br>    &#125;<br>&#125;<br><span class="hljs-built_in">table</span>.<span class="hljs-built_in">sort</span>(children, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-comment">-- age ä»å°åˆ°å¤§æ’åº</span><br>    <span class="hljs-keyword">if</span> a.age &lt; b.age <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br><span class="hljs-keyword">end</span>)<br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(children) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(value.name, value.age)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- Jack    0</span><br><span class="hljs-comment">-- Bob     2</span><br><span class="hljs-comment">-- Alice   5</span><br></code></pre></td></tr></table></figure><h2 id="æ‹¼æ¥-table-concat"><a href="#æ‹¼æ¥-table-concat" class="headerlink" title="æ‹¼æ¥ table.concat"></a>æ‹¼æ¥ <code>table.concat</code></h2><p>å¯ä»¥æŠŠè¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦ï¼Œæ‹¼æ¥çš„å…ƒç´ èŒƒå›´ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span> &#125;<br><span class="hljs-keyword">local</span> str = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>(names)  <span class="hljs-comment">-- ç›´æ¥æ‹¼æ¥</span><br><span class="hljs-built_in">print</span>(str)<br><br><span class="hljs-comment">-- AliceBobJack</span><br><br><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span> &#125;<br><span class="hljs-keyword">local</span> str = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>(names, <span class="hljs-string">&quot;,&quot;</span>)  <span class="hljs-comment">-- ç”¨é€—å·éš”å¼€</span><br><span class="hljs-built_in">print</span>(str)<br><br><span class="hljs-comment">-- Alice,Bob,Jack</span><br><br><span class="hljs-keyword">local</span> names = &#123; <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span> &#125;<br><span class="hljs-keyword">local</span> str = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>(names, <span class="hljs-string">&quot;,&quot;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment">-- åªæ‹¼æ¥ç´¢å¼•ä¸º 2 å’Œ 3 çš„å…ƒç´ </span><br><span class="hljs-built_in">print</span>(str)<br><br><span class="hljs-comment">-- Bob,Jack</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åŸºç¡€ 02 å…ƒè¡¨</title>
    <link href="/2024/05/19/lua-basic-2/"/>
    <url>/2024/05/19/lua-basic-2/</url>
    
    <content type="html"><![CDATA[<p>Lua åŸºç¡€ç›¸å…³çŸ¥è¯† ç¬¬äºŒæœŸ</p><span id="more"></span><h1 id="å…ƒè¡¨"><a href="#å…ƒè¡¨" class="headerlink" title="å…ƒè¡¨"></a>å…ƒè¡¨</h1><p>å…ƒè¡¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå¯ä»¥é™„åŠ åˆ°å¦ä¸€ä¸ªè¡¨ä¸Šï¼Œæ§åˆ¶è¯¥è¡¨çš„æ“ä½œè¡Œä¸ºã€‚</p><p>å…ƒè¡¨é€šå¸¸ä¼šç»“åˆå…ƒæ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼Œæœ€å¸¸ç”¨çš„å…ƒæ–¹æ³•æ˜¯ <code>__index</code> å’Œ <code>__newindex</code>ï¼Œå®ƒä»¬çš„ä½œç”¨å°±ç›¸å½“äºå…¶ä»–è¯­è¨€ä¸­çš„ get å’Œ setã€‚</p><ul><li><code>__index</code>ï¼šå½“è®¿é—®è¡¨ä¸­ä¸å­˜åœ¨çš„ key æ—¶ï¼Œä¼šè¿›ä¸€æ­¥æŸ¥æ‰¾å…ƒè¡¨ä¸­çš„ <code>__index</code> å…ƒæ–¹æ³•ï¼Œå°†è¡¨å’Œ key ä¼ é€’è¿›å»ï¼Œå†æ¬¡å°è¯•è®¿é—®è¯¥ keyã€‚</li><li><code>__newindex</code>ï¼šå½“å¯¹è¡¨è¿›è¡Œèµ‹å€¼æ—¶ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥ keyï¼Œä¹Ÿå°±æ˜¯æ–°å¢ keyï¼Œä¼šè°ƒç”¨å…ƒè¡¨ä¸­çš„ <code>__newindex</code> å…ƒæ–¹æ³•ï¼Œå°†è¡¨ã€key å’Œ value ä¼ é€’è¿›å»ï¼Œå¯å®šä¹‰ä¸€äº›é¢å¤–é€»è¾‘ã€‚</li></ul><p>å…¶ä»–çš„å…ƒæ–¹æ³•è¿˜æœ‰ï¼š</p><p><code>__add</code>ã€<code>__sub</code>ã€<code>__mul</code>ã€<code>__div</code>ï¼Œé‡è½½è¡¨çš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œå¯¹è¡¨è¿›è¡Œç®—æœ¯è¿ç®—æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ç®—æœ¯é€»è¾‘ã€‚</p><p><code>__eq</code>ã€<code>__lt</code>ã€<code>__le</code>ï¼Œé‡è½½è¡¨çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¯¹è¡¨è¿›è¡Œé€»è¾‘è¿ç®—æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ã€‚</p><p>è¦æŠŠå…ƒè¡¨é™„åŠ åˆ°å¦ä¸€ä¸ªè¡¨ä¸Šï¼Œéœ€è¦ä½¿ç”¨ <code>setmetatable</code> å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å…ƒè¡¨ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> obj = &#123;&#125;   <span class="hljs-comment">-- è¡¨</span><br><span class="hljs-keyword">local</span> meta = &#123;&#125;  <span class="hljs-comment">-- å…ƒè¡¨</span><br><span class="hljs-built_in">setmetatable</span>(obj, meta)  <span class="hljs-comment">-- é™„åŠ å…ƒè¡¨</span><br></code></pre></td></tr></table></figure><p>æ¥ç€ï¼Œå¯ä»¥åœ¨å…ƒè¡¨ä¸­å®šä¹‰ <code>__index</code> å’Œ <code>__newindex</code> å…ƒæ–¹æ³•ã€‚</p><p>é¦–å…ˆå°è¯• <code>__index</code>ï¼Œä¸ºå®ƒèµ‹å€¼ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°è¯•è®¿é—® obj è¡¨ä¸­ä¸å­˜åœ¨çš„ keyï¼Œä¼šè°ƒç”¨ <code>__index</code>ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> obj = &#123;&#125;<br><span class="hljs-keyword">local</span> meta = &#123;<br>    <span class="hljs-built_in">__index</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;call __index&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>)<br>        <span class="hljs-built_in">print</span>(key)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(obj, meta)<br><br><span class="hljs-built_in">print</span>(obj.name)  <span class="hljs-comment">-- è®¿é—® obj è¡¨ä¸­ä¸å­˜åœ¨çš„ name å­—æ®µ</span><br><br><span class="hljs-comment">-- call __index</span><br><span class="hljs-comment">-- table: 00000273AA151980</span><br><span class="hljs-comment">-- name</span><br><span class="hljs-comment">-- nil</span><br></code></pre></td></tr></table></figure><p>æ¥ç€å°è¯• <code>__newindex</code>ï¼Œä¸ºå®ƒèµ‹å€¼ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°è¯•ä¸º obj è¡¨èµ‹å€¼ä¸€ä¸ªä¸å­˜åœ¨çš„ keyï¼Œä¼šè°ƒç”¨ <code>__newindex</code>ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> obj = &#123;&#125;<br><span class="hljs-keyword">local</span> meta = &#123;<br>    <span class="hljs-built_in">__newindex</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(table, key, value)</span></span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;call __newindex&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>)<br>        <span class="hljs-built_in">print</span>(key)<br>        <span class="hljs-built_in">print</span>(value)<br>    <span class="hljs-keyword">end</span><br>&#125;<br><span class="hljs-built_in">setmetatable</span>(obj, meta)<br><br>obj.name = <span class="hljs-string">&quot;myObj&quot;</span>  <span class="hljs-comment">-- èµ‹å€¼ obj è¡¨ä¸­ä¸å­˜åœ¨çš„ name å­—æ®µ</span><br><br><span class="hljs-comment">-- call __newindex</span><br><span class="hljs-comment">-- table: 0000017CCA2B0320</span><br><span class="hljs-comment">-- name</span><br><span class="hljs-comment">-- myObj</span><br></code></pre></td></tr></table></figure><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><p>åˆ©ç”¨å…ƒè¡¨çš„ <code>__index</code> å…ƒæ–¹æ³•ï¼Œä¸ºè¡¨ A é™„åŠ ä¸€ä¸ªå…ƒè¡¨ Bï¼Œè¡¨ A å°±ä¼šåœ¨å…ƒè¡¨ B ä¸­æŸ¥æ‰¾å®ƒæ‰€æ²¡æœ‰çš„æ“ä½œã€‚</p><p>æ­¤æ—¶å¯ä»¥æŠŠè¡¨ A çœ‹ä½œå¯¹è±¡ï¼Œè¡¨ B çœ‹ä½œç±»ã€‚å› ä¸ºæ‰€è°“çš„ç±»ï¼Œå°±æ˜¯å·²ç»ä¸ºå¯¹è±¡å®šä¹‰å¥½ä¸€ç³»åˆ—çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯¹è±¡æ˜¯ä»¥ç±»ä¸ºæ¨¡æ¿è¿›è¡Œå®ä¾‹åŒ–ã€‚</p><p>ä¸‹é¢å®šä¹‰ä¸€ä¸ª Person è¡¨ï¼Œå®ƒæ‹¥æœ‰ä¸¤ä¸ªå‡½æ•° New å’Œ Sayï¼Œå…¶ä¸­ New å‡½æ•°æ˜¯ç”¨æ¥å®ä¾‹åŒ–å¯¹è±¡çš„ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå·²æœ‰çš„è¡¨ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œé»˜è®¤ä¸ºç©ºè¡¨ã€‚</p><p>å¯¹äº <code>self.__index = self</code> è¿™è¡Œä»£ç å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæ­¤æ—¶ self æŒ‡çš„æ˜¯ Personï¼Œä¸ºä»€ä¹ˆè¦æŠŠ Person çš„ <code>__index</code> æŒ‡å‘è‡ªå·±å‘¢ï¼Ÿå› ä¸ºå…ƒè¡¨æ˜¯éœ€è¦ç»“åˆå…ƒæ–¹æ³•ä¸€èµ·ä½¿ç”¨çš„ï¼Œåªè®¾ç½®äº†å…ƒè¡¨æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼Œæˆ‘ä»¬éœ€è¦ä»å…ƒè¡¨ Person ä¸­è·å– Person å·²ç»å®šä¹‰å¥½çš„å‡½æ•°ï¼Œå°±éœ€è¦ä¸º <code>__index</code> èµ‹å€¼ï¼Œç›´æ¥èµ‹å€¼ä¸º Person å³å¯ã€‚</p><p>æœ€åå°±æ˜¯è°ƒç”¨ <code>setmetatable</code> é™„åŠ å…ƒè¡¨ï¼ŒæŠŠå¯¹è±¡ o è¿”å›ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua">Person = &#123;&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person:New</span><span class="hljs-params">(o)</span></span><br>    o = o <span class="hljs-keyword">or</span> &#123;&#125;             <span class="hljs-comment">-- ä¸€ä¸ªå¯¹è±¡</span><br>    <span class="hljs-built_in">self</span>.<span class="hljs-built_in">__index</span> = <span class="hljs-built_in">self</span>     <span class="hljs-comment">-- Person.__index = Person</span><br>    <span class="hljs-built_in">setmetatable</span>(o, <span class="hljs-built_in">self</span>)   <span class="hljs-comment">-- å¯¹è±¡ o é™„åŠ å…ƒè¡¨ Person</span><br>    <span class="hljs-keyword">return</span> o                <span class="hljs-comment">-- è¿”å›å¯¹è±¡ o</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person:Say</span><span class="hljs-params">(content)</span></span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Person Say : &quot;</span> .. content)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> obj = Person:New()    <span class="hljs-comment">-- å®ä¾‹åŒ–å¯¹è±¡</span><br>obj:Say(<span class="hljs-string">&quot;obj&quot;</span>)              <span class="hljs-comment">-- è°ƒç”¨ Say å‡½æ•°</span><br><br><span class="hljs-comment">-- Person Say : obj</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨ <code>Person:New</code> å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè®©å¯¹è±¡è°ƒç”¨ Say å‡½æ•°ï¼Œä¼ å…¥å‚æ•°ï¼Œæ‰“å°ç»“æœã€‚</p><p>æ³¨æ„åˆ°ï¼Œè¿™é‡Œçš„å‡½æ•°å®šä¹‰å’Œè°ƒç”¨éƒ½æ˜¯ä½¿ç”¨ : å†’å·ï¼Œå…¶å®æ˜¯ Lua çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œéšå¼ä¼ å…¥ self å‚æ•°ï¼Œæ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person:Say</span><span class="hljs-params">(content)</span></span><br><br><span class="hljs-keyword">end</span><br><span class="hljs-comment">-- ç­‰ä»·äº</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person.Say</span><span class="hljs-params">(self, content)</span></span><br><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lua åŸºç¡€ 01 å…¥é—¨</title>
    <link href="/2024/05/12/lua-basic-1/"/>
    <url>/2024/05/12/lua-basic-1/</url>
    
    <content type="html"><![CDATA[<p>Lua åŸºç¡€ç›¸å…³çŸ¥è¯† ç¬¬ä¸€æœŸ</p><span id="more"></span><h1 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">--  å•è¡Œæ³¨é‡Š</span><br><br><span class="hljs-comment">--[[</span><br><span class="hljs-comment">    å¤šè¡Œæ³¨é‡Š</span><br><span class="hljs-comment">--]]</span><br><br><span class="hljs-comment">-- å¤šåŠ ä¸€ä¸ªæ¨ªæ ç¬¦å·å°±èƒ½é‡æ–°å¯ç”¨æ³¨é‡Šå†…çš„ä»£ç </span><br><span class="hljs-comment">---[[</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Lua&quot;</span>)<br><span class="hljs-comment">--]]</span><br></code></pre></td></tr></table></figure><h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><p>Lua æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå˜é‡ä¸éœ€è¦ç±»å‹å®šä¹‰ï¼Œåªéœ€è¦ä¸ºå˜é‡èµ‹å€¼ã€‚</p><p>Lua æœ‰ 8 ç§åŸºæœ¬ç±»å‹ï¼š</p><ol><li>nilï¼ˆè¡¨ç¤ºä¸€ä¸ªæ— æ•ˆå€¼ï¼Œæ¡ä»¶è¡¨è¾¾å¼ä¸­è¡¨ç¤º falseï¼‰</li><li>booleanï¼ˆfalse æˆ– trueï¼Œ0 ä¹Ÿæ˜¯ trueï¼‰</li><li>numberï¼ˆè¡¨ç¤ºåŒç²¾åº¦ç±»å‹çš„å®æµ®ç‚¹æ•°ï¼‰</li><li>stringï¼ˆå­—ç¬¦ä¸²ï¼Œç”±ä¸€å¯¹å•å¼•å·æˆ–åŒå¼•å·åŒ…æ‹¬ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸¤ä¸ªæ–¹æ‹¬å·ï¼‰</li><li>tableï¼ˆè¡¨ï¼Œæ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼Œæ•°ç»„çš„ç´¢å¼•å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è¡¨ç±»å‹ï¼‰</li><li>functionï¼ˆå‡½æ•°ï¼‰</li><li>userdataï¼ˆè¡¨ç¤ºä»»æ„å­˜å‚¨åœ¨å˜é‡ä¸­çš„ C è¯­è¨€æ•°æ®ç»“æ„ï¼‰</li><li>threadï¼ˆè¡¨ç¤ºæ‰§è¡Œçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œç”¨äºæ‰§è¡ŒååŒç¨‹åºï¼‰</li></ol><p>å¯ä»¥ä½¿ç”¨ type() å‡½æ•°æŸ¥çœ‹æ•°æ®ç±»å‹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-literal">nil</span>))     <span class="hljs-comment">-- nil</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-literal">true</span>))    <span class="hljs-comment">-- boolean</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-number">1</span>))       <span class="hljs-comment">-- number</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-string">&quot;Lua&quot;</span>))   <span class="hljs-comment">-- string</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(&#123;&#125;))      <span class="hljs-comment">-- table</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">print</span>))   <span class="hljs-comment">-- function</span><br></code></pre></td></tr></table></figure><h2 id="å¸ƒå°”"><a href="#å¸ƒå°”" class="headerlink" title="å¸ƒå°”"></a>å¸ƒå°”</h2><p>false æˆ– trueï¼Œä½†éœ€è¦æ³¨æ„ï¼ŒLua æŠŠé™¤äº† false å’Œ nil ä»¥å¤–çš„å€¼éƒ½è§†ä¸º trueï¼Œä¾‹å¦‚ 0 å’Œ <code>&quot;&quot;</code> éƒ½æ˜¯ trueã€‚</p><p>é€»è¾‘è¿ç®—ç¬¦ andï¼Œorï¼Œnot çš„ä½¿ç”¨ï¼š</p><ol><li>andï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸º falseï¼Œå°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</li><li>orï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸º trueï¼Œå°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</li><li>notï¼Œå–åã€‚</li></ol><p>and å’Œ or éƒ½æ˜¯çŸ­è·¯æ±‚å€¼ï¼Œåªæœ‰åœ¨å¿…è¦æ—¶æ‰ä¼šè®¡ç®—ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</p><p>å¸¸è§çš„å†™æ³•ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = a <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>  <span class="hljs-comment">-- å¦‚æœ a ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ 0</span><br><br>a = x &lt; y <span class="hljs-keyword">and</span> x <span class="hljs-keyword">or</span> y  <span class="hljs-comment">-- ç±»ä¼¼ä¸‰ç›®è¿ç®—ç¬¦ï¼Œä½†ä¸å®Œå…¨æ˜¯</span><br><span class="hljs-comment">-- æ“ä½œè¿‡ç¨‹ --</span><br><br><span class="hljs-comment">-- è‹¥ x &lt; y ä¸º trueï¼Œåˆ™ ( x &lt; y and x ) è¿”å› x</span><br><span class="hljs-comment">-- æ¥ç€ x or yï¼Œè‹¥ x å­˜åœ¨åˆ™ä¸º trueï¼Œè¿”å› x ( å¦‚æœæ­¤æ—¶ x ä¸å­˜åœ¨æˆ– falseï¼Œåˆ™è¿”å› yï¼Œè¿™é‡Œæ˜¯è·Ÿä¸‰ç›®è¿ç®—ç¬¦çš„åŒºåˆ«)</span><br><br><span class="hljs-comment">-- è‹¥ x &lt; y ä¸º falseï¼Œåˆ™ ( x &lt; y and x ) è¿”å› x &lt; y çš„ç»“æœ false</span><br><span class="hljs-comment">-- æ¥ç€ false or yï¼Œè¿”å› y</span><br><br><span class="hljs-keyword">not</span> <span class="hljs-literal">nil</span>    <span class="hljs-comment">-- true</span><br><span class="hljs-keyword">not</span> <span class="hljs-literal">false</span>  <span class="hljs-comment">-- true</span><br><span class="hljs-keyword">not</span> <span class="hljs-literal">true</span>   <span class="hljs-comment">-- false</span><br><span class="hljs-keyword">not</span> <span class="hljs-number">0</span>      <span class="hljs-comment">-- false</span><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>åœ¨å¯¹ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²è¿›è¡Œç®—æœ¯è¿ç®—æ—¶ï¼ŒLua ä¼šå°è¯•å°†å­—ç¬¦ä¸²è½¬æˆæ•°å­—ã€‚</p><p>å…¶ä»–è¯­è¨€ï¼Œä¾‹å¦‚ C#ï¼Œæ˜¯æŠŠæ•°å­—è½¬æˆå­—ç¬¦ä¸²è¿›è¡Œè¿æ¥ï¼Œè¿™é‡Œè¦æ³¨æ„ Lua çš„å¤„ç†æ–¹å¼ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;1&quot;</span> + <span class="hljs-number">2</span>)  <span class="hljs-comment">-- 3</span><br></code></pre></td></tr></table></figure><p>è€Œè¿æ¥å­—ç¬¦ä¸²åˆ™ä½¿ç”¨ .. ç¬¦å·ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;How &quot;</span> .. <span class="hljs-string">&quot;are &quot;</span> .. <span class="hljs-string">&quot;you&quot;</span>)  <span class="hljs-comment">-- How are you</span><br></code></pre></td></tr></table></figure><p>è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ç”¨ # ç¬¦å·ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">print</span>(#<span class="hljs-string">&quot;hello&quot;</span>)  <span class="hljs-comment">-- 5</span><br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ–¹æ‹¬å·è¡¨ç¤ºã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs lua">html = <span class="hljs-string">[[</span><br><span class="hljs-string">&lt;html&gt;</span><br><span class="hljs-string">&lt;head&gt;&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">    &lt;p&gt;Lua&lt;/p&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">]]</span><br><br><span class="hljs-built_in">print</span>(html)<br><br><span class="hljs-comment">--[[ æ‰“å°ç»“æœä¹Ÿæœ‰æ¢è¡Œ</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">&lt;html&gt;</span><br><span class="hljs-comment">&lt;head&gt;&lt;/head&gt;</span><br><span class="hljs-comment">&lt;body&gt;</span><br><span class="hljs-comment">    &lt;p&gt;Lua&lt;/p&gt;</span><br><span class="hljs-comment">&lt;/body&gt;</span><br><span class="hljs-comment">&lt;/html&gt;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">--]]</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå­—ç¬¦ä¸²çš„å†…å®¹ä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ‹¬å·ï¼Œå°±ä¼šæœ‰è¯­æ³•é”™è¯¯ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æœ€å¤–å›´çš„ä¸¤å¯¹æ–¹æ‹¬å·ä¸­é—´æ·»åŠ  &#x3D; å·ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lua">html = <span class="hljs-string">[=[</span><br><span class="hljs-string">&lt;html&gt;</span><br><span class="hljs-string">&lt;head&gt;&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">    &lt;p&gt;Lua è¿™é‡Œå¤šå‡ºçš„ ]]</span> ä¼šå’Œ <span class="hljs-string">[[ åŒ¹é…ï¼Œåé¢çš„å†…å®¹å°±ä¸è¢«åŒ…æ‹¬åœ¨å­—ç¬¦ä¸²å†…äº†&lt;/p&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">]=]</span><br></code></pre></td></tr></table></figure><h2 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h2><p>è¡¨å¯ä»¥çœ‹æˆæ˜¯æ•°ç»„æˆ–å“ˆå¸Œè¡¨ï¼Œå–å†³äº key å€¼æ˜¯ä» 1 å¼€å§‹çš„è¿ç»­æ­£æ•´æ•°è¿˜æ˜¯å…¶ä»–ç±»å‹ã€‚</p><p>å¦‚æœæ²¡æœ‰æŒ‡å®š key å€¼ï¼Œé»˜è®¤å°±æ˜¯æ•°ç»„ã€‚</p><p>ä¸åŒäºå…¶ä»–è¯­è¨€ï¼ŒLua çš„æ•°ç»„ç´¢å¼•æ˜¯ä» 1 å¼€å§‹çš„ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> &#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">1</span>])  <span class="hljs-comment">-- a</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">2</span>])  <span class="hljs-comment">-- b</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">3</span>])  <span class="hljs-comment">-- c</span><br></code></pre></td></tr></table></figure><p>æŒ‡å®š key å€¼ï¼Œå°±å˜æˆäº†å“ˆå¸Œè¡¨ã€‚å¯ä»¥ä½¿ç”¨ [] æˆ– . çš„æ–¹å¼è·å– value å€¼ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-string">&quot;name&quot;</span>] = <span class="hljs-string">&quot;Alice&quot;</span>,<br>    [<span class="hljs-string">&quot;age&quot;</span>] = <span class="hljs-number">18</span>,<br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-string">&quot;name&quot;</span>])  <span class="hljs-comment">-- Alice</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>.age)      <span class="hljs-comment">-- 18</span><br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç›´æ¥ç»™è¡¨èµ‹å€¼ç¬¬ä¸‰ä¸ªä½ç½®çš„å€¼ï¼Œé‚£ä¹ˆå‰ä¸¤ä¸ªä½ç½®çš„å€¼ä¼šè‡ªåŠ¨å¡«å……ä¸º nilã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;Alice&quot;</span>,<br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">1</span>])  <span class="hljs-comment">-- nil</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">2</span>])  <span class="hljs-comment">-- nil</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-number">3</span>])  <span class="hljs-comment">-- Alice</span><br></code></pre></td></tr></table></figure><p>è®¡ç®—è¡¨çš„é•¿åº¦ä¹Ÿæ˜¯ç”¨ # ç¬¦å·ï¼Œå‰ææ˜¯æ•°ç»„çš„å½¢å¼ï¼Œå“ˆå¸Œè¡¨ä¸é€‚ç”¨ï¼ˆåªèƒ½è®¡ç®— key å€¼ä¸ºè¿ç»­æ­£æ•´æ•°çš„éƒ¨åˆ†ï¼‰ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> &#125;<br><span class="hljs-built_in">print</span>(#<span class="hljs-built_in">table</span>)  <span class="hljs-comment">-- 3</span><br><br><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;a&quot;</span>,<br>    [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;c&quot;</span><br>&#125;<br><span class="hljs-built_in">print</span>(#<span class="hljs-built_in">table</span>)  <span class="hljs-comment">-- 1</span><br><br><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;a&quot;</span>,<br>    [<span class="hljs-string">&quot;2&quot;</span>] = <span class="hljs-string">&quot;b&quot;</span>,  <span class="hljs-comment">-- key å€¼ä¸ºå­—ç¬¦ä¸²</span><br>    [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;c&quot;</span><br>&#125;<br><br><span class="hljs-built_in">print</span>(#<span class="hljs-built_in">table</span>)  <span class="hljs-comment">-- 1</span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¦åˆ¤æ–­è¡¨æ˜¯å¦ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨ next() å‡½æ•°ï¼Œè·å–ä¸‹ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123;&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(<span class="hljs-built_in">table</span>) == <span class="hljs-literal">nil</span>)  <span class="hljs-comment">-- true</span><br><br><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span> &#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(<span class="hljs-built_in">table</span>) == <span class="hljs-literal">nil</span>)  <span class="hljs-comment">-- false</span><br></code></pre></td></tr></table></figure><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°ä½¿ç”¨ function å®šä¹‰ï¼ŒæŒ‡å®šå‡½æ•°åå’Œå‚æ•°ï¼Œend ç»“å°¾ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Add</span><span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-keyword">return</span> a + b<br><span class="hljs-keyword">end</span><br><br><span class="hljs-built_in">print</span>(Add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment">-- 3</span><br></code></pre></td></tr></table></figure><p>å‡½æ•°å¯ä»¥ä¿å­˜åˆ°å˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åˆ°è¡¨ä¸­ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs lua">add = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span></span><br>    <span class="hljs-keyword">return</span> a + b<br><span class="hljs-keyword">end</span><br><span class="hljs-built_in">print</span>(add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment">-- 3</span><br><br><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-string">&quot;add&quot;</span>] = add<br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[<span class="hljs-string">&quot;add&quot;</span>](<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))   <span class="hljs-comment">-- 3</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))      <span class="hljs-comment">-- 3</span><br></code></pre></td></tr></table></figure><h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><p>Lua ä¸­å£°æ˜å˜é‡é»˜è®¤æ˜¯å…¨å±€å˜é‡ï¼Œåªæœ‰åœ¨å˜é‡å‰æ·»åŠ  local å…³é”®å­—æ‰æ˜¯å±€éƒ¨å˜é‡ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">a = <span class="hljs-number">1</span>         <span class="hljs-comment">-- å…¨å±€å˜é‡</span><br><span class="hljs-keyword">local</span> b = <span class="hljs-number">2</span>   <span class="hljs-comment">-- å±€éƒ¨å˜é‡</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åŒæ—¶å¯¹å¤šä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">a, b = <span class="hljs-number">5</span>, <span class="hljs-number">6</span><br><span class="hljs-built_in">print</span>(a, b)  <span class="hljs-comment">-- 5 6</span><br></code></pre></td></tr></table></figure><p>èµ‹å€¼å‰ï¼ŒLua ä¼šå…ˆè®¡ç®—å³è¾¹çš„å€¼å†èµ‹å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç®€ä¾¿åœ°è¿›è¡Œå˜é‡çš„äº¤æ¢ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">a, b = <span class="hljs-number">5</span>, <span class="hljs-number">6</span><br>a, b = b, a<br><span class="hljs-built_in">print</span>(a, b)  <span class="hljs-comment">-- 6 5</span><br></code></pre></td></tr></table></figure><p>å½“å˜é‡çš„ä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°ä¸åŒæ—¶ï¼ŒLua ä¼šé‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼š</p><ul><li>å˜é‡çš„ä¸ªæ•° &gt; å€¼çš„ä¸ªæ•°ï¼šè¡¥è¶³ nil</li><li>å˜é‡çš„ä¸ªæ•° &lt; å€¼çš„ä¸ªæ•°ï¼šå¤šä½™çš„å€¼è¢«å¿½ç•¥</li></ul><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">a, b, c = <span class="hljs-number">0</span><br><span class="hljs-built_in">print</span>(a, b, c)  <span class="hljs-comment">-- 0 nil nil</span><br><br>a = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(a)  <span class="hljs-comment">-- 0</span><br></code></pre></td></tr></table></figure><h1 id="åˆ†æ”¯å¾ªç¯"><a href="#åˆ†æ”¯å¾ªç¯" class="headerlink" title="åˆ†æ”¯å¾ªç¯"></a>åˆ†æ”¯å¾ªç¯</h1><h2 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h2><p>åˆ†æ”¯ç»“æ„å¦‚ä¸‹ï¼Œæ¯ä¸ª if åé¢è¦æ¥ thenï¼Œæœ€åä»¥ end ç»“å°¾ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> score = <span class="hljs-number">60</span><br><span class="hljs-keyword">if</span> score &lt; <span class="hljs-number">60</span> <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸åŠæ ¼&quot;</span>)<br><span class="hljs-keyword">elseif</span> score &lt; <span class="hljs-number">80</span> <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;åŠæ ¼&quot;</span>)<br><span class="hljs-keyword">elseif</span> score &lt; <span class="hljs-number">100</span> <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¼˜ç§€&quot;</span>)<br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¶…æ ‡&quot;</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- åŠæ ¼</span><br></code></pre></td></tr></table></figure><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><p>å¾ªç¯ç»“æ„å¦‚ä¸‹ï¼ŒæŒ‡å®š i çš„åˆå§‹å€¼ã€ç»ˆæ­¢å€¼ã€æ­¥é•¿ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span> <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;i = &quot;</span> .. i)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- i = 1</span><br><span class="hljs-comment">-- i = 2</span><br><span class="hljs-comment">-- i = 3</span><br><span class="hljs-comment">-- i = 4</span><br><span class="hljs-comment">-- i = 5</span><br></code></pre></td></tr></table></figure><h2 id="éå†è¡¨"><a href="#éå†è¡¨" class="headerlink" title="éå†è¡¨"></a>éå†è¡¨</h2><p>æœ‰ä¸‰ç§æ–¹æ³•éå†è¡¨ï¼Œå¸¸è§„çš„ç¬¬ä¸€ç§å¦‚ä¸‹ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> &#125;<br><br><span class="hljs-comment">-- #table è·å– table çš„é•¿åº¦</span><br><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, #<span class="hljs-built_in">table</span>, <span class="hljs-number">1</span> <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">table</span>[i])<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- a</span><br><span class="hljs-comment">-- b</span><br><span class="hljs-comment">-- c</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ pairs æ–¹æ³•ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> &#125;<br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 1 value = a</span><br><span class="hljs-comment">-- key = 2 value = b</span><br><span class="hljs-comment">-- key = 3 value = c</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰ç§æ˜¯ä½¿ç”¨ ipairs æ–¹æ³•ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123; <span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> &#125;<br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 1 value = a</span><br><span class="hljs-comment">-- key = 2 value = b</span><br><span class="hljs-comment">-- key = 3 value = c</span><br></code></pre></td></tr></table></figure><h2 id="pairs-å’Œ-ipairs-çš„åŒºåˆ«"><a href="#pairs-å’Œ-ipairs-çš„åŒºåˆ«" class="headerlink" title="pairs å’Œ ipairs çš„åŒºåˆ«"></a>pairs å’Œ ipairs çš„åŒºåˆ«</h2><p>pairsï¼Œéå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œé¡ºåºéšæœºï¼Œå¯ä»¥è¿”å› nilã€‚</p><p>ipairsï¼Œä» key å€¼ä¸º 1 å¼€å§‹é¡ºåºéå†ï¼Œkey å€¼ä¸è¿ç»­åˆ™ä¼šåœæ­¢ï¼Œä¸èƒ½è¿”å› nilã€‚</p><p>ä¾‹ 1ï¼Œè¡¨ä¸­æœ‰ä¸¤ä¸ªé”®å€¼å¯¹ï¼Œç¼ºå¤±äº† key ä¸º 2 çš„å€¼ã€‚</p><p>pairs ä¼šéå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œipairs åªä¼šéå†ç¬¬ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå› ä¸ºæ‰¾ä¸åˆ° key ä¸º 2 çš„å€¼ï¼Œå°±åœæ­¢äº†ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;a&quot;</span>,<br>    [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;c&quot;</span><br>&#125;<br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 1 value = a</span><br><span class="hljs-comment">-- key = 3 value = c</span><br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 1 value = a</span><br></code></pre></td></tr></table></figure><p>ä¾‹ 2ï¼Œè¡¥ä¸Šäº†ä¸€ä¸ªé”®å€¼å¯¹ï¼Œä½†æ˜¯ key å€¼æ˜¯å­—ç¬¦ä¸² â€œ2â€ã€‚</p><p>pairs ä¾ç„¶ä¼šéå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œä½†æ˜¯é¡ºåºä¹±äº†ã€‚ipairs ä¾ç„¶åªèƒ½éå†ç¬¬ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">table</span> = &#123;<br>    [<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;a&quot;</span>,<br>    [<span class="hljs-string">&quot;2&quot;</span>] = <span class="hljs-string">&quot;b&quot;</span>,  <span class="hljs-comment">-- key å€¼ä¸ºå­—ç¬¦ä¸²</span><br>    [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;c&quot;</span><br>&#125;<br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 3 value = c</span><br><span class="hljs-comment">-- key = 1 value = a</span><br><span class="hljs-comment">-- key = 2 value = b</span><br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(<span class="hljs-built_in">table</span>) <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key = &quot;</span> .. key .. <span class="hljs-string">&quot; value = &quot;</span> .. value)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- key = 1 value = a</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D DOTween</title>
    <link href="/2024/05/05/unity-dotween/"/>
    <url>/2024/05/05/unity-dotween/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•ä»‹ç»ä¸€ä¸‹ DOTween æ’ä»¶çš„ä½¿ç”¨ã€‚</p><span id="more"></span><h1 id="å¯¼å…¥æ’ä»¶"><a href="#å¯¼å…¥æ’ä»¶" class="headerlink" title="å¯¼å…¥æ’ä»¶"></a>å¯¼å…¥æ’ä»¶</h1><p>å…ˆåˆ° Asset Store è·å– DOTween æ’ä»¶ï¼Œç„¶ååœ¨ Package Manager çš„ My Assets ä¸­æœç´¢ï¼Œä¸‹è½½å¹¶å¯¼å…¥æ’ä»¶ã€‚</p><p><img src="/../images/unity-dotween/%E5%AF%BC%E5%85%A5%E6%8F%92%E4%BB%B6.png"></p><p>å¯¼å…¥åï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæç¤ºéœ€è¦å…ˆå¯¹æ’ä»¶è¿›è¡Œé…ç½®ã€‚</p><p><img src="/../images/unity-dotween/%E6%89%93%E5%BC%80%E6%8F%92%E4%BB%B6%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2.png"></p><p>ç‚¹å‡»ä¸Šå›¾ä¸­çš„æŒ‰é’®ï¼Œæ‰“å¼€ä¸‹å›¾çš„çª—å£ï¼ŒæŒ‰é¡ºåºç‚¹å‡» Setup DOTween å’Œ Create ASMDEF æŒ‰é’®ã€‚</p><p><img src="/../images/unity-dotween/%E8%BF%9B%E8%A1%8C%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE.png"></p><p>é…ç½®å®Œæˆåå°±å¯ä»¥å¼€å§‹ä½¿ç”¨ DOTween æ’ä»¶äº†ã€‚</p><h1 id="ç®€å•åŠ¨ç”»"><a href="#ç®€å•åŠ¨ç”»" class="headerlink" title="ç®€å•åŠ¨ç”»"></a>ç®€å•åŠ¨ç”»</h1><p>åˆ›å»ºä¸€ä¸ªè„šæœ¬ DOTweenDemo.csï¼Œåœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªç©ºç‰©ä½“å¹¶æŒ‚è½½è„šæœ¬ã€‚</p><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ª Cubeï¼Œæ‹–æ‹½å¼•ç”¨ã€‚</p><p>è¦ä½¿ç”¨ DOTweenï¼Œéœ€è¦å¼•å…¥å‘½åç©ºé—´ <code>DG.Tweening</code>ï¼Œç„¶åé€šè¿‡ç»„ä»¶æ‰©å±•çš„ä»¥ DO å¼€å¤´çš„å‡½æ•°æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>transform.DOMoveX</code> æ˜¯è®©ç‰©ä½“åœ¨ X è½´æ–¹å‘ä¸Šè¿›è¡Œç§»åŠ¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒç»­æ—¶é—´ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cube;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posX = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> duration = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            cube.transform.DOMoveX(-posX, duration);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))<br>        &#123;<br>            cube.transform.DOMoveX(posX, duration);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼ŒæŒ‰ä¸‹é”®ç›˜ 1 é”®æ—¶ Cube å‘å·¦ç§»åŠ¨ï¼ŒæŒ‰ä¸‹é”®ç›˜ 2 é”®æ—¶ Cube å‘å³ç§»åŠ¨ã€‚</p><p><img src="/../images/unity-dotween/%E7%AE%80%E5%8D%95%E5%8A%A8%E7%94%BB.gif"></p><h1 id="åŠ¨ç”»åºåˆ—"><a href="#åŠ¨ç”»åºåˆ—" class="headerlink" title="åŠ¨ç”»åºåˆ—"></a>åŠ¨ç”»åºåˆ—</h1><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒåŠ¨ç”»ä¼šæ›´åŠ å¤æ‚ä¸€äº›ï¼Œå¯èƒ½ä¼šæœ‰å¤šæ®µä½ç§»ï¼Œæˆ–è€…ä½ç§»åç¼©å°çš„éœ€æ±‚ã€‚</p><p>é€šå¸¸ä¼šä½¿ç”¨åŠ¨ç”»åºåˆ—æ¥å®ç°å¤æ‚åŠ¨ç”»ã€‚</p><p>ä½¿ç”¨ <code>DOTween.Sequence</code> åˆ›å»ºä¸€ä¸ªåŠ¨ç”»åºåˆ—å¯¹è±¡ï¼Œé€šè¿‡ <code>sequence.Insert</code> åœ¨æŒ‡å®šæ—¶åˆ»æ’å…¥ä¸€ä¸ªç®€å•åŠ¨ç”»ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨æœ€å¼€å§‹ 0 ç§’çš„ä½ç½®ï¼Œè®© Cube ç§»åŠ¨åˆ°å³è¾¹ã€‚</p><p>å› ä¸ºæŒç»­æ—¶é—´æ˜¯ 1 ç§’ï¼Œæ‰€ä»¥åœ¨ 1 ç§’çš„ä½ç½®ï¼Œä¸Šä¸€ä¸ªåŠ¨ç”»ç»“æŸäº†ï¼Œç»§ç»­æ’å…¥ç¬¬äºŒä¸ªåŠ¨ç”»ï¼Œè®© Cube å‘ä¸Šç§»åŠ¨ã€‚</p><p>åç»­çš„åŠ¨ç”»ä»¥æ­¤ç±»æ¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cube;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posX = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posY = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> duration = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            Sequence sequence = DOTween.Sequence();<br>            sequence.Insert(<span class="hljs-number">0f</span>, cube.transform.DOMoveX(posX, duration));<br>            sequence.Insert(<span class="hljs-number">1f</span>, cube.transform.DOMoveY(posY, duration));<br>            sequence.Insert(<span class="hljs-number">2f</span>, cube.transform.DOMoveX(-posX, duration));<br>            sequence.Insert(<span class="hljs-number">3f</span>, cube.transform.DOMoveY(<span class="hljs-number">0f</span>, duration));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆï¼ŒæŒ‰ä¸‹é”®ç›˜ 1 é”®æ—¶ Cube è¿›è¡Œäº†å››æ®µä½ç§»ã€‚</p><p><img src="/../images/unity-dotween/%E5%8A%A8%E7%94%BB%E5%BA%8F%E5%88%97.gif"></p><h1 id="åŠ¨ç”»å›è°ƒ"><a href="#åŠ¨ç”»å›è°ƒ" class="headerlink" title="åŠ¨ç”»å›è°ƒ"></a>åŠ¨ç”»å›è°ƒ</h1><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨åŠ¨ç”»æ’­æ”¾å®Œæˆä¹‹åæ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œå°±å¯ä»¥ä½¿ç”¨åŠ¨ç”»çš„å›è°ƒæ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œè®© Cube å‘å‰ç§»åŠ¨ï¼Œåˆ°è¾¾æŒ‡å®šä½ç½®ä¹‹åï¼Œå†ç¼©å°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cube;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posX = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posY = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> duration = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            cube.transform.DOMoveZ(<span class="hljs-number">5f</span>, duration).OnComplete(()=&gt;<br>            &#123;<br>                cube.transform.DOScale(<span class="hljs-number">0f</span>, duration);<br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-dotween/%E5%8A%A8%E7%94%BB%E5%9B%9E%E8%B0%83.gif"></p><h1 id="ç»“æŸåŠ¨ç”»"><a href="#ç»“æŸåŠ¨ç”»" class="headerlink" title="ç»“æŸåŠ¨ç”»"></a>ç»“æŸåŠ¨ç”»</h1><p>æœ‰æ—¶å€™ï¼Œç©å®¶è¿›è¡Œäº†æŸäº›æ“ä½œï¼Œéœ€è¦æå‰è®©åŠ¨ç”»ç»“æŸï¼Œæœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><p>ä¸€ç§æ˜¯ç›´æ¥ Kill æ‰åŠ¨ç”»ï¼Œå³ä¸­æ–­åŠ¨ç”»ã€‚</p><p>ä¸€ç§æ˜¯æå‰å®ŒæˆåŠ¨ç”»ã€‚</p><p>åœ¨ Kill æ‰åŠ¨ç”»çš„æ—¶å€™ï¼Œéœ€è¦å…ˆä¸ºåŠ¨ç”»è®¾ç½® idï¼Œç„¶åä½¿ç”¨ <code>DOTween.Kill</code> ä¸­æ–­æŒ‡å®š id çš„åŠ¨ç”»ã€‚</p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œåªä¸º DOMoveZ è®¾ç½®äº† idï¼Œå½“å®ƒç»“æŸæ—¶æ’­æ”¾çš„å¦ä¸€ä¸ªç¼©æ”¾åŠ¨ç”»æ˜¯ä¸ä¼šè¢« Kill æ‰çš„ã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cube;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posX = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posY = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> duration = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            cube.transform.DOMoveZ(<span class="hljs-number">5f</span>, duration).OnComplete(()=&gt;<br>            &#123;<br>                cube.transform.DOScale(<span class="hljs-number">0f</span>, duration);<br>            &#125;).SetId(<span class="hljs-string">&quot;cube&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))<br>        &#123;<br>            DOTween.Kill(<span class="hljs-string">&quot;cube&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼Œå…ˆæŒ‰é”®ç›˜ 1 é”®æ‰§è¡ŒåŠ¨ç”»ï¼Œå†ç«‹åˆ»æŒ‰é”®ç›˜ 2 é”®ä¸­æ–­åŠ¨ç”»ã€‚</p><p><img src="/../images/unity-dotween/%E6%9D%80%E6%8E%89%E5%8A%A8%E7%94%BB.gif"></p><p>æå‰å®ŒæˆåŠ¨ç”»ï¼Œåªéœ€è¦è°ƒç”¨ DOComplete å‡½æ•°å³å¯ã€‚</p><p>è¿™é‡Œå› ä¸ºæ˜¯ transform è°ƒç”¨çš„ï¼Œå¯¹äºä¸¤æ®µåŠ¨ç”»æ¥è¯´ï¼Œéƒ½æ˜¯å¯ä»¥æå‰å®Œæˆçš„ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cube;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posX = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> posY = <span class="hljs-number">5f</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> duration = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            cube.transform.DOMoveZ(<span class="hljs-number">5f</span>, duration).OnComplete(()=&gt;<br>            &#123;<br>                cube.transform.DOScale(<span class="hljs-number">0f</span>, duration);<br>            &#125;);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))<br>        &#123;<br>            cube.transform.DOComplete();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼Œå…ˆæŒ‰é”®ç›˜ 1 é”®æ‰§è¡ŒåŠ¨ç”»ï¼Œå†ç«‹åˆ»æŒ‰é”®ç›˜ 2 é”®æå‰å®ŒæˆåŠ¨ç”»ï¼Œä¼šæœ‰ä¸€ä¸ªåŠ¨ç”»è·³è·ƒçš„è§†è§‰æ•ˆæœã€‚</p><p><img src="/../images/unity-dotween/%E6%8F%90%E5%89%8D%E5%AE%8C%E6%88%90%E5%8A%A8%E7%94%BB.gif"></p><h1 id="å»¶è¿Ÿè°ƒç”¨"><a href="#å»¶è¿Ÿè°ƒç”¨" class="headerlink" title="å»¶è¿Ÿè°ƒç”¨"></a>å»¶è¿Ÿè°ƒç”¨</h1><p>DOTween é™¤äº†åšä¸€äº›åŠ¨ç”»æ•ˆæœå¤–ï¼Œè¿˜å¯ä»¥å½“åšå®šæ—¶å™¨ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè°ƒç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> DG.Tweening;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DOTweenDemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;å¼€å§‹å®šæ—¶&quot;</span>);<br>            DOVirtual.DelayedCall(<span class="hljs-number">1f</span>, ()=&gt;<br>            &#123;<br>                Debug.Log(<span class="hljs-string">&quot;1 ç§’åè°ƒç”¨&quot;</span>);<br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-dotween/%E5%BB%B6%E8%BF%9F%E8%B0%83%E7%94%A8.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D èœå•æ å¿«é€Ÿåˆ‡æ¢åœºæ™¯</title>
    <link href="/2024/04/27/unity-editor-switch-scene/"/>
    <url>/2024/04/27/unity-editor-switch-scene/</url>
    
    <content type="html"><![CDATA[<p>æ‰©å±•ç¼–è¾‘å™¨èœå•æ ï¼Œå¿«é€Ÿåˆ‡æ¢å¸¸ç”¨åœºæ™¯ã€‚</p><span id="more"></span><h1 id="èœå•æ å¿«é€Ÿåˆ‡æ¢åœºæ™¯"><a href="#èœå•æ å¿«é€Ÿåˆ‡æ¢åœºæ™¯" class="headerlink" title="èœå•æ å¿«é€Ÿåˆ‡æ¢åœºæ™¯"></a>èœå•æ å¿«é€Ÿåˆ‡æ¢åœºæ™¯</h1><p>ä¸€èˆ¬è¦æ‰“å¼€ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦åœ¨ Assets æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°åœºæ™¯æ–‡ä»¶ï¼ŒåŒå‡»æ‰“å¼€ã€‚</p><p>ä½†æ˜¯å½“èµ„æºæ–‡ä»¶å¤¹å¤ªå¤šï¼Œæœç´¢èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p><p>æ­¤æ—¶å¯ä»¥åœ¨é¡¶éƒ¨èœå•æ ä¸Šæ˜¾ç¤ºå‡ ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åˆ‡æ¢åˆ°å¸¸ç”¨çš„åœºæ™¯ã€‚</p><p>è¿™ç±»æ‰©å±•äº†ç¼–è¾‘å™¨æŒ‰é’®çš„ä»£ç ï¼Œéœ€è¦åœ¨ Assets ä¸‹åˆ›å»ºä¸€ä¸ª Editor æ–‡ä»¶å¤¹ï¼ŒæŠŠè„šæœ¬æ”¾åˆ° Editor æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ Editor æ–‡ä»¶å¤¹ä¸­åˆ›å»º EditorSwitchScene.csï¼Œå¼•ç”¨ <code>UnityEditor</code> å‘½åç©ºé—´ï¼Œåœ¨é™æ€ç±»ä¸­å†™é™æ€æ–¹æ³•ã€‚</p><p>ä½¿ç”¨ <code>MenuItem</code> è¿™ä¸ªæ ‡ç­¾ç»™ç¼–è¾‘å™¨æ·»åŠ æ–°çš„èœå•æŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®åˆ™ä¼šè°ƒç”¨å¯¹åº”çš„é™æ€æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEditor;<br><span class="hljs-keyword">using</span> UnityEditor.SceneManagement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EditorSwitchScene</span><br>&#123;<br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ‰“å¼€åœºæ™¯</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;filename&quot;&gt;</span>åœºæ™¯è·¯å¾„<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OpenScene</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filename</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// è¯¢é—®æ˜¯å¦ä¿å­˜å¯¹å½“å‰åœºæ™¯çš„ä¿®æ”¹</span><br>        <span class="hljs-keyword">if</span> (EditorSceneManager.SaveCurrentModifiedScenesIfUserWantsTo())<br>        &#123;<br>            EditorSceneManager.OpenScene(filename);<br>        &#125;<br>    &#125;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;åˆ‡æ¢åœºæ™¯/Start&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SwitchStart</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        OpenScene(<span class="hljs-string">&quot;Assets/Scenes/Start.unity&quot;</span>);<br>    &#125;<br><br>    [<span class="hljs-meta">MenuItem(<span class="hljs-meta-string">&quot;åˆ‡æ¢åœºæ™¯/Game&quot;</span>)</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SwitchGame</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        OpenScene(<span class="hljs-string">&quot;Assets/Scenes/Game.unity&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°èœå•æ å¤šå‡ºçš„æŒ‰é’®ï¼š</p><p><img src="/../images/unity-editor-switch-scene/%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8C%89%E9%92%AE.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å­˜æ¡£è¯»æ¡£</title>
    <link href="/2024/04/21/unity-save-data/"/>
    <url>/2024/04/21/unity-save-data/</url>
    
    <content type="html"><![CDATA[<p>Unity3D json å­˜æ¡£è¯»æ¡£åŠŸèƒ½ã€‚</p><span id="more"></span><h1 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h1><p>æ¸¸æˆå­˜æ¡£é€šå¸¸æ˜¯æŠŠå­˜åœ¨äºå†…å­˜ä¸­çš„å¯¹è±¡ï¼Œé€šè¿‡åºåˆ—åŒ–ï¼ŒæŠŠå¯¹è±¡ä¸­çš„æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–ã€‚</p><p>æ¸¸æˆè¯»æ¡£åˆ™æ˜¯æŠŠæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œé€šè¿‡ååºåˆ—åŒ–ï¼Œé‡æ–°ç”Ÿæˆå†…å­˜ä¸­çš„å¯¹è±¡ã€‚</p><p>å­˜æ¡£çš„æ ¼å¼ï¼Œä¸€èˆ¬ä½¿ç”¨ json å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶ã€XMLç­‰ã€‚</p><h1 id="å­˜æ¡£"><a href="#å­˜æ¡£" class="headerlink" title="å­˜æ¡£"></a>å­˜æ¡£</h1><p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…ä¸€ä¸ª json åº“ï¼Œåœ¨ Package Manager çª—å£ä¸­ï¼Œæœç´¢ Newtonsoft Json è¿›è¡Œå®‰è£…ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»– json åº“ï¼ŒNewtonsoft Json çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å¾ˆå¥½åœ°åºåˆ—åŒ–å­—å…¸ã€‚</p><p>æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ª GameData ç±»ï¼Œæ ‡è®°ä¸ºå¯åºåˆ—åŒ–ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><br>[<span class="hljs-meta">Serializable</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameData</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> playerID;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">GameData</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        playerID = <span class="hljs-number">100001</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºä¸€ä¸ª DataManager ç±»ï¼Œç”¨æ¥ç®¡ç†å­˜æ¡£ã€‚</p><p>è¿™é‡Œçš„ SavePath æ·»åŠ äº†å¹³å°å®å®šä¹‰ï¼Œå¦‚æœæ˜¯åœ¨ unity editor ä¸­è¿è¡Œï¼Œå°±ç›´æ¥å­˜å‚¨åˆ° Assets æ–‡ä»¶å¤¹ä¸­ï¼Œå…¶ä»–å¹³å°åˆ™æ˜¯å­˜å‚¨åˆ°å¯è¯»å†™çš„æ•°æ®ç›®å½•ä¸­ã€‚</p><p>é€šè¿‡è°ƒç”¨ <code>JsonConvert.SerializeObject</code> æ–¹æ³•ï¼ŒæŠŠ gameData åºåˆ—åŒ–æˆ json å­—ç¬¦ä¸²ï¼Œå†ä½¿ç”¨ <code>StreamWriter</code> å†™å…¥æœ¬åœ°æ–‡ä»¶ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.IO;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> Newtonsoft.Json;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameData gameData;<br><br>    <span class="hljs-built_in">string</span> SavePath<br>    &#123;<br>        <span class="hljs-keyword">get</span><br>        &#123;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span><br>            <span class="hljs-keyword">return</span> Application.dataPath + <span class="hljs-string">&quot;/SaveData.json&quot;</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><br>            <span class="hljs-keyword">return</span> Application.persistentDataPath + <span class="hljs-string">&quot;/SaveData.json&quot;</span>;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span>            </span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Save();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Save</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">string</span> json = JsonConvert.SerializeObject(gameData);<br>        StreamWriter sw = <span class="hljs-keyword">new</span> StreamWriter(SavePath);<br>        sw.Write(json);<br>        sw.Close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ¸¸æˆä¹‹åï¼Œåœæ­¢è¿è¡Œï¼Œåˆ·æ–°å·¥ç¨‹èµ„æºç›®å½•ï¼Œå¯ä»¥çœ‹åˆ° Assets æ–‡ä»¶å¤¹ä¸‹å¤šå‡ºäº†ä¸€ä¸ª SaveData.json æ–‡ä»¶ã€‚</p><p>json çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<span class="hljs-attr">&quot;playerID&quot;</span>:<span class="hljs-number">100001</span>&#125;<br></code></pre></td></tr></table></figure><h1 id="è¯»æ¡£"><a href="#è¯»æ¡£" class="headerlink" title="è¯»æ¡£"></a>è¯»æ¡£</h1><p>è¯»æ¡£çš„æ—¶å€™ï¼Œè¦å…ˆåˆ¤æ–­æœ¬åœ°æ˜¯å¦æœ‰å­˜æ¡£æ–‡ä»¶ï¼Œå†è¿›è¡Œæ–‡ä»¶çš„è¯»å–å’Œååºåˆ—åŒ–ï¼Œè¿˜åŸ gameData æ•°æ®å¯¹è±¡ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Load</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (File.Exists(SavePath))<br>        &#123;<br>            StreamReader sr = <span class="hljs-keyword">new</span> StreamReader(SavePath);<br>            <span class="hljs-built_in">string</span> json = sr.ReadToEnd();<br>            sr.Close();<br>            gameData = JsonConvert.DeserializeObject&lt;GameData&gt;(json);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æ¸¸æˆå¼€å§‹æ—¶ï¼Œå…ˆè¯»æ¡£ï¼Œå†ä¿®æ”¹æ•°æ®å¯¹è±¡ï¼Œå†æ¬¡å­˜æ¡£ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Load();<br>        gameData.playerID = <span class="hljs-number">100002</span>;<br>        Save();<br>    &#125;<br>    <br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œjson çš„å†…å®¹æ”¹å˜äº†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<span class="hljs-attr">&quot;playerID&quot;</span>:<span class="hljs-number">100002</span>&#125;<br></code></pre></td></tr></table></figure><h1 id="æ•°æ®å¯¹è±¡æ‰©å±•"><a href="#æ•°æ®å¯¹è±¡æ‰©å±•" class="headerlink" title="æ•°æ®å¯¹è±¡æ‰©å±•"></a>æ•°æ®å¯¹è±¡æ‰©å±•</h1><p>ç›®å‰ GameData ä¸­åªæœ‰ä¸€ä¸ª playerIDï¼Œå®é™…ä¸Šå¯ä»¥å†å®šä¹‰æ›´å¤šçš„æ•°æ®ç±»ï¼Œç»Ÿä¸€æ”¾åˆ° GameData ä¸­ä½œä¸ºæˆå‘˜å­—æ®µã€‚</p><p>ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ª DataPlayer ç±»ï¼Œä¿å­˜ç©å®¶çš„æ•°æ®ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataPlayer</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> playerID;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> playerName;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> health;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DataPlayer</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        playerID = <span class="hljs-number">100001</span>;<br>        playerName = <span class="hljs-string">&quot;Player&quot;</span>;<br>        health = <span class="hljs-number">100</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæŠŠ DataPlayer æ”¾åˆ° GameData ä¸­ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­è¦è®°å¾—å®ä¾‹åŒ–å¯¹è±¡ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><br>[<span class="hljs-meta">Serializable</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GameData</span><br>&#123;<br>    <span class="hljs-keyword">public</span> DataPlayer dataPlayer;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">GameData</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        dataPlayer = <span class="hljs-keyword">new</span> DataPlayer();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¸¸æˆå¼€å§‹æ—¶ï¼Œä¿®æ”¹ä¸€ä¸‹ç©å®¶åå­—ï¼Œå†å­˜æ¡£ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataManager</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Load();<br>        gameData.dataPlayer.playerName = <span class="hljs-string">&quot;èµ·ä¸ªåå­—å¾ˆéš¾&quot;</span>;<br>        Save();<br>    &#125;<br>    <br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œjson çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;dataPlayer&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;playerID&quot;</span>: <span class="hljs-number">100001</span>,<br>        <span class="hljs-attr">&quot;playerName&quot;</span>: <span class="hljs-string">&quot;èµ·ä¸ªåå­—å¾ˆéš¾&quot;</span>,<br>        <span class="hljs-attr">&quot;health&quot;</span>: <span class="hljs-number">100</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D ScriptableObject</title>
    <link href="/2024/04/14/unity-scriptable-object/"/>
    <url>/2024/04/14/unity-scriptable-object/</url>
    
    <content type="html"><![CDATA[<p>Unity3D ScriptableObject çš„ä½¿ç”¨ã€‚</p><span id="more"></span><h1 id="åˆ›å»º-SO"><a href="#åˆ›å»º-SO" class="headerlink" title="åˆ›å»º SO"></a>åˆ›å»º SO</h1><p>ScriptableObject æ˜¯ unity æä¾›çš„ä¸€ä¸ªæ•°æ®å­˜å‚¨ç±»ã€‚</p><p>ä½¿ç”¨æ—¶ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿ ScriptableObjectï¼ŒåŠ ä¸Šåˆ›å»ºèœå•ä»£ç ï¼Œå°±å¯ä»¥åœ¨èµ„æºæ–‡ä»¶å¤¹åˆ›å»º SO è„šæœ¬å¯¹åº”çš„æ•°æ®æ–‡ä»¶ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><br>[<span class="hljs-meta">CreateAssetMenu(fileName = <span class="hljs-meta-string">&quot;SOConfig&quot;</span>, menuName = <span class="hljs-meta-string">&quot;SOConfig&quot;</span>, order = 0)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SOConfig</span> : <span class="hljs-title">ScriptableObject</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> version;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ•°æ®æ–‡ä»¶ï¼š</p><p><img src="/../images/unity-scriptable-object/%E5%88%9B%E5%BB%BASO%E6%96%87%E4%BB%B6.png"></p><p>å¡«å†™æ•°æ®ï¼š</p><p><img src="/../images/unity-scriptable-object/%E9%85%8D%E7%BD%AESO%E6%95%B0%E6%8D%AE.png"></p><h1 id="è·å–-SO-æ•°æ®"><a href="#è·å–-SO-æ•°æ®" class="headerlink" title="è·å– SO æ•°æ®"></a>è·å– SO æ•°æ®</h1><p>å¯ä»¥ç›´æ¥å¼•ç”¨æ•°æ®æ–‡ä»¶ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SODemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> SOConfig config;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;version = <span class="hljs-subst">&#123;config.version&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-scriptable-object/%E8%8E%B7%E5%8F%96SO%E6%95%B0%E6%8D%AE.png"></p><h1 id="åºåˆ—åŒ–ç±»"><a href="#åºåˆ—åŒ–ç±»" class="headerlink" title="åºåˆ—åŒ–ç±»"></a>åºåˆ—åŒ–ç±»</h1><p>é™¤äº†åœ¨ SO è„šæœ¬ä¸­å®šä¹‰å•ä¸€çš„å­—æ®µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»æ¥ç»„ç»‡æ•°æ®ç»“æ„ã€‚è¿™ä¸ªç±»æ˜¯éœ€è¦æ‰“ä¸Š Serializable çš„æ ‡ç­¾ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br>[<span class="hljs-meta">CreateAssetMenu(fileName = <span class="hljs-meta-string">&quot;SOConfig&quot;</span>, menuName = <span class="hljs-meta-string">&quot;SOConfig&quot;</span>, order = 0)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SOConfig</span> : <span class="hljs-title">ScriptableObject</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> version;<br>    <span class="hljs-keyword">public</span> ConfigData configData;<br>&#125;<br><br>[<span class="hljs-meta">Serializable</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ConfigData</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> description;<br>&#125;<br></code></pre></td></tr></table></figure><p>SO æ•°æ®æ–‡ä»¶çš„å˜åŒ–ï¼š</p><p><img src="/../images/unity-scriptable-object/SO%E5%BA%8F%E5%88%97%E5%8C%96%E7%B1%BB.png"></p><h1 id="ç®€å•çš„æ¸¸æˆé…ç½®"><a href="#ç®€å•çš„æ¸¸æˆé…ç½®" class="headerlink" title="ç®€å•çš„æ¸¸æˆé…ç½®"></a>ç®€å•çš„æ¸¸æˆé…ç½®</h1><p>å¯¹äºä¸€äº›ç®€å•çš„å°æ¸¸æˆæ¥è¯´ï¼Œä½¿ç”¨ SO åšé…ç½®è¡¨ï¼Œä¼šæ¯”è¾ƒç®€å•å¿«æ·ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå•†åº—çš„å•†å“åˆ—è¡¨ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br>[<span class="hljs-meta">CreateAssetMenu(fileName = <span class="hljs-meta-string">&quot;SOShop&quot;</span>, menuName = <span class="hljs-meta-string">&quot;SOShop&quot;</span>, order = 1)</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SOShop</span> : <span class="hljs-title">ScriptableObject</span><br>&#123;<br>    <span class="hljs-keyword">public</span> List&lt;SOShopItem&gt; shopItems;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> SOShopItem <span class="hljs-title">GetItem</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">return</span> shopItems.Find(x =&gt; x.id == id);<br>    &#125;<br>&#125;<br><br>[<span class="hljs-meta">Serializable</span>]<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SOShopItem</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> id;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> description;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> price;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®æ•°æ®ï¼š</p><p><img src="/../images/unity-scriptable-object/%E7%AE%80%E5%8D%95%E6%B8%B8%E6%88%8F%E9%85%8D%E7%BD%AE.png"></p><p>ä½¿ç”¨é…ç½®ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SODemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> SOConfig config;<br>    <span class="hljs-keyword">public</span> SOShop shop;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; shop.shopItems.Count; i++)<br>        &#123;<br>            SOShopItem item = shop.shopItems[i];<br>            Debug.Log(<span class="hljs-string">$&quot;name = <span class="hljs-subst">&#123;item.name&#125;</span> price = <span class="hljs-subst">&#123;item.price&#125;</span>&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-scriptable-object/%E9%81%8D%E5%8E%86%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8.png"></p><h1 id="åŠ¨æ€ä¿®æ”¹é…ç½®"><a href="#åŠ¨æ€ä¿®æ”¹é…ç½®" class="headerlink" title="åŠ¨æ€ä¿®æ”¹é…ç½®"></a>åŠ¨æ€ä¿®æ”¹é…ç½®</h1><p>SO æ–‡ä»¶ä¸­å¡«å†™çš„æ•°æ®æ˜¯å¯ä»¥åœ¨ä»£ç ä¸­èµ‹å€¼çš„ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SODemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> SOConfig config;<br>    <span class="hljs-keyword">public</span> SOShop shop;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        config.version = <span class="hljs-string">&quot;1.0.1&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œä¹‹å version å°±å˜æˆäº† 1.0.1ï¼Œå¹¶ä¸”è¿™ä¸ªä¿®æ”¹æ˜¯æŒä¹…åŒ–çš„ï¼Œæ–°å€¼è¦†ç›–äº†æ—§å€¼ã€‚</p><p>å¦‚æœåªæƒ³åœ¨è¿è¡Œæ—¶ä¿®æ”¹ï¼Œä¸æƒ³è¦†ç›–æ—§å€¼ï¼Œå¯ä»¥è®© SO åˆ›å»ºå®ä¾‹ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SODemo</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> SOConfig config;<br>    <span class="hljs-keyword">public</span> SOShop shop;<br><br>    <span class="hljs-keyword">public</span> SOConfig configInstance;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        configInstance = ScriptableObject.CreateInstance&lt;SOConfig&gt;();<br>        configInstance.version = <span class="hljs-string">&quot;1.0.2&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª SO å®ä¾‹ã€‚</p><p><img src="/../images/unity-scriptable-object/SO%E5%AE%9E%E4%BE%8B.png"></p><p>åŒå‡»æŸ¥çœ‹å®ä¾‹æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ° SO å®ä¾‹çš„ version æ˜¯ 1.0.2ï¼Œæœ¬åœ°æ–‡ä»¶çš„ version è¿˜æ˜¯ 1.0.1ã€‚</p><p><img src="/../images/unity-scriptable-object/SO%E5%AE%9E%E4%BE%8B%E6%95%B0%E6%8D%AE.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D å¯¹è±¡æ± </title>
    <link href="/2024/04/07/unity-objectpool/"/>
    <url>/2024/04/07/unity-objectpool/</url>
    
    <content type="html"><![CDATA[<p>Unity3D å®˜æ–¹å¯¹è±¡æ± çš„ä½¿ç”¨ã€‚</p><span id="more"></span><h1 id="å¯¹è±¡æ± "><a href="#å¯¹è±¡æ± " class="headerlink" title="å¯¹è±¡æ± "></a>å¯¹è±¡æ± </h1><p>å¯¹è±¡æ± æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨å¯¹è±¡çš„å®¹å™¨ã€‚</p><p>å½“éœ€è¦åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè°ƒç”¨å¯¹è±¡æ± çš„æ¥å£è·å¾—å¯¹è±¡ã€‚</p><p>å½“éœ€è¦é”€æ¯å¯¹è±¡æ—¶ï¼Œè°ƒç”¨å¯¹è±¡æ± çš„æ¥å£å½’è¿˜å¯¹è±¡ã€‚</p><p>è€Œå¯¹è±¡æ± ä¼šåˆ¤æ–­æ± å­é‡Œæ˜¯å¦æœ‰å¯ç”¨çš„å¯¹è±¡ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥å–å‡ºä¸€ä¸ªå¯¹è±¡è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><p>ä»å¯¹è±¡æ± é‡Œå–å‡ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åè¦æ”¾å›å¯¹è±¡æ± ã€‚</p><p>é€šè¿‡å¤ç”¨å¯¹è±¡ï¼Œå‡å°‘äº†åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°ï¼Œé¿å…å› é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><h1 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h1><p>ä¸‹é¢æ¥çœ‹çœ‹ Unity3D å®˜æ–¹æä¾›çš„å¯¹è±¡æ± ç±»ã€‚</p><p>é¦–å…ˆéœ€è¦å¼•ç”¨ <code>UnityEngine.Pool</code> è¿™ä¸ªå‘½åç©ºé—´ï¼Œç„¶åä½¿ç”¨ ObjectPool è¿™ä¸ªç±»å‹å®šä¹‰ä¸€ä¸ªæˆå‘˜å­—æ®µï¼Œåœ¨ Start ä¸­å®ä¾‹åŒ–ï¼Œå¹¶æä¾›ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„ OnCreate å‡½æ•°ï¼Œéœ€è¦å¸¦æœ‰è¿”å›å€¼ï¼Œå³åˆ›å»ºå¥½çš„æ–°å¯¹è±¡ã€‚</p><p>è¿™é‡Œå°±ç®€å•åœ°ä½¿ç”¨ <code>GameObject.CreatePrimitive</code> åˆ›å»ºä¸€ä¸ª Cubeã€‚</p><p>åœ¨ Update ä¸­ï¼Œé€šè¿‡ <code>cubePool.Get()</code> å‡½æ•°è·å¾—å¯¹è±¡ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-comment">// å¯¹è±¡æ± å‘½åç©ºé—´</span><br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectPoolSample</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ä¸€ä¸ªå¯¹è±¡æ± </span><br>    <span class="hljs-keyword">public</span> ObjectPool&lt;GameObject&gt; cubePool;<br><br>    Vector3 pos;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–å¯¹è±¡æ± ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„å›è°ƒå‡½æ•°ï¼ˆå¸¦è¿”å›å€¼ï¼‰</span><br>        cubePool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(OnCreate);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜ 1 é”®</span><br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            <span class="hljs-comment">// ä»å¯¹è±¡æ± ä¸­è·å¾—å¯¹è±¡</span><br>            GameObject obj = cubePool.Get();<br>            obj.transform.position = pos;<br>            pos += Vector3.right;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºå¯¹è±¡</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>æ–°çš„å¯¹è±¡<span class="hljs-doctag">&lt;/returns&gt;</span></span><br>    <span class="hljs-function">GameObject <span class="hljs-title">OnCreate</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Cube</span><br>        GameObject obj = GameObject.CreatePrimitive(PrimitiveType.Cube);<br>        <span class="hljs-keyword">return</span> obj;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å½’è¿˜å¯¹è±¡"><a href="#å½’è¿˜å¯¹è±¡" class="headerlink" title="å½’è¿˜å¯¹è±¡"></a>å½’è¿˜å¯¹è±¡</h1><p>ç›®å‰åªæä¾›äº†åˆ›å»ºå¯¹è±¡çš„å‡½æ•°ï¼Œè¿˜éœ€è¦æä¾›å½’è¿˜å¯¹è±¡çš„å‡½æ•°ã€‚</p><p>æ·»åŠ ä¸€ä¸ª Listï¼Œç”¨äºç»´æŠ¤å·²åˆ›å»ºçš„å¯¹è±¡ã€‚</p><p>åœ¨å®ä¾‹åŒ–å¯¹è±¡æ± æ—¶ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å½’è¿˜å¯¹è±¡æ—¶çš„å›è°ƒå‡½æ•° OnReleaseï¼Œå¸¦æœ‰ä¸€ä¸ªå‚æ•° GameObject objï¼Œå¯ä»¥è·å–åˆ°è¢«å½’è¿˜çš„å¯¹è±¡ï¼Œé€šè¿‡ <code>SetActive(false)</code> æŠŠå®ƒéšè—ã€‚ç¬¬äºŒä¸ªå‚æ•°æš‚æ—¶å¡« nullã€‚</p><p>ç„¶ååœ¨ Update ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é”® 2 çš„é€»è¾‘ï¼Œéå† cubeListï¼ŒæŠŠæ‰€æœ‰çš„å¯¹è±¡éƒ½é€šè¿‡ <code>cubePool.Release</code> å½’è¿˜ï¼Œå½’è¿˜ä¹‹å‰ä¼šè°ƒç”¨ OnRelease å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectPoolSample</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">public</span> List&lt;GameObject&gt; cubeList;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–å¯¹è±¡æ± æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å›è°ƒå‡½æ•° OnRelease</span><br>        cubePool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(OnCreate, <span class="hljs-literal">null</span>, OnRelease);<br>        cubeList = <span class="hljs-keyword">new</span> List&lt;GameObject&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            GameObject obj = cubePool.Get();<br>            <span class="hljs-comment">// ...</span><br>            cubeList.Add(obj);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; cubeList.Count; i++)<br>            &#123;<br>                cubePool.Release(cubeList[i]);<br>            &#125;<br>            cubeList.Clear();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnRelease</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        obj.SetActive(<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å†æ¬¡è·å¾—å¯¹è±¡"><a href="#å†æ¬¡è·å¾—å¯¹è±¡" class="headerlink" title="å†æ¬¡è·å¾—å¯¹è±¡"></a>å†æ¬¡è·å¾—å¯¹è±¡</h1><p>å› ä¸ºåœ¨ OnRelease å‡½æ•°ä¸­ï¼Œéšè—äº†å¯¹è±¡ï¼Œæ­¤æ—¶å¯¹è±¡æ± ä¸­å­˜æœ‰çš„å¯¹è±¡éƒ½æ˜¯éšè—çš„ï¼Œæ‰€ä»¥å–å‡ºçš„å¯¹è±¡éƒ½æ˜¯éšè—çš„ã€‚</p><p>åˆšå¼€å§‹å› ä¸ºå¯¹è±¡æ± å†…æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨ <code>cubePool.Get()</code> æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ OnCreate å‡½æ•°ã€‚</p><p>ä½†æ˜¯å½“å¯¹è±¡æ± ä¸ä¸ºç©ºæ—¶ï¼Œå°±ä¸ä¼šå†å»è°ƒç”¨ OnCreate å‡½æ•°ï¼Œè€Œæ˜¯è°ƒç”¨å¦ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹åŒ–å¯¹è±¡æ± æ—¶ï¼Œæš‚æ—¶å¡« null çš„é‚£ä¸ªå‚æ•°ï¼‰ã€‚</p><p>æ‰€ä»¥è¿˜éœ€è¦æä¾›ä¸€ä¸ªè·å¾—å¯¹è±¡æ—¶çš„å›è°ƒå‡½æ•° OnGetï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­é€šè¿‡ <code>SetActive(true)</code> æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectPoolSample</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–å¯¹è±¡æ± æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å›è°ƒå‡½æ•° OnGet</span><br>        cubePool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(OnCreate, OnGet, OnRelease);<br>        <span class="hljs-comment">// ...</span><br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGet</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        obj.SetActive(<span class="hljs-literal">true</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p>å¯ä»¥çœ‹åˆ°ï¼Œç©ºæ± æ—¶ï¼Œåˆ›å»ºäº†ä¸‰ä¸ª Cubeï¼Œå½’è¿˜ç»™å¯¹è±¡æ± ä¹‹åï¼Œå†æ¬¡è·å¾—ä¸‰ä¸ª Cubeï¼Œéƒ½æ˜¯å¤ç”¨ä¹‹å‰åˆ›å»ºå¥½çš„ã€‚</p><p><img src="/../images/unity-objectpool/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E8%8E%B7%E5%BE%97%E4%B8%8E%E5%BD%92%E8%BF%98.gif"></p><h1 id="é”€æ¯å¯¹è±¡"><a href="#é”€æ¯å¯¹è±¡" class="headerlink" title="é”€æ¯å¯¹è±¡"></a>é”€æ¯å¯¹è±¡</h1><p>å½“å¯¹è±¡æ± æœ€å¤§å®¹é‡å·²æ»¡ï¼Œå½’è¿˜çš„å¯¹è±¡æ˜¯ä¸ä¼šè¢«å­˜å…¥å¯¹è±¡æ± çš„ï¼Œè€Œæ˜¯è°ƒç”¨ä¸€ä¸ªè¢«é”€æ¯çš„å›è°ƒå‡½æ•°ã€‚</p><p>ä¸»åŠ¨è°ƒç”¨ Clear å‡½æ•°ï¼Œä¹Ÿä¼šä¸ºæ± å†…çš„æ‰€æœ‰å¯¹è±¡éƒ½è°ƒç”¨ä¸€æ¬¡è¢«é”€æ¯çš„å›è°ƒå‡½æ•°ã€‚</p><p>æ­¤æ—¶å¯ä»¥æä¾›ä¸€ä¸ª OnObjectDestroy å‡½æ•°ä½œä¸ºå¯¹è±¡é”€æ¯æ—¶çš„å›è°ƒå‡½æ•°ï¼ˆOnDestroy æ˜¯è„šæœ¬çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œéœ€è¦æ¢ä¸ªåå­—é¿å…å†²çªï¼‰ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectPoolSample</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–å¯¹è±¡æ± æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å›è°ƒå‡½æ•° OnObjectDestroy</span><br>        cubePool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(OnCreate, OnGet, OnRelease, OnObjectDestroy);<br>        <span class="hljs-comment">// ...</span><br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha3))<br>        &#123;<br>            cubePool.Clear();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnObjectDestroy</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;é”€æ¯å¯¹è±¡ <span class="hljs-subst">&#123;obj.name&#125;</span> pos = <span class="hljs-subst">&#123;obj.transform.position&#125;</span>&quot;</span>);<br>        Destroy(obj);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p>æŒ‰é”® 1 åˆ›å»ºä¸‰ä¸ª Cubeï¼ŒæŒ‰é”® 2 å½’è¿˜æ‰€æœ‰ Cubeï¼ŒæŒ‰é”® 3 é”€æ¯æ± å†…æ‰€æœ‰å¯¹è±¡ã€‚</p><p><img src="/../images/unity-objectpool/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.gif"></p><h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-comment">// å¯¹è±¡æ± å‘½åç©ºé—´</span><br><span class="hljs-keyword">using</span> UnityEngine.Pool;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectPoolSample</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ä¸€ä¸ªå¯¹è±¡æ± </span><br>    <span class="hljs-keyword">public</span> ObjectPool&lt;GameObject&gt; cubePool;<br><br>    <span class="hljs-comment">// ç»´æŠ¤å¯¹è±¡çš„åˆ—è¡¨</span><br>    <span class="hljs-keyword">public</span> List&lt;GameObject&gt; cubeList;<br>    Vector3 pos;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–å¯¹è±¡æ± ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä»–å›è°ƒå‡½æ•°éƒ½æ˜¯å¯ç©ºçš„</span><br>        cubePool = <span class="hljs-keyword">new</span> ObjectPool&lt;GameObject&gt;(OnCreate, OnGet, OnRelease, OnObjectDestroy);<br>        cubeList = <span class="hljs-keyword">new</span> List&lt;GameObject&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰é”® 1 è·å¾—å¯¹è±¡</span><br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))<br>        &#123;<br>            GameObject obj = cubePool.Get();<br>            obj.transform.position = pos;<br>            pos += Vector3.right;<br>            <span class="hljs-comment">// æ·»åŠ åˆ°åˆ—è¡¨</span><br>            cubeList.Add(obj);<br>        &#125;<br>        <span class="hljs-comment">// æŒ‰é”® 2 å½’è¿˜æ‰€æœ‰å¯¹è±¡</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; cubeList.Count; i++)<br>            &#123;<br>                cubePool.Release(cubeList[i]);<br>            &#125;<br>            cubeList.Clear();<br>        &#125;<br>        <span class="hljs-comment">// æŒ‰é”® 3 é”€æ¯æ± å†…çš„æ‰€æœ‰å¯¹è±¡</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha3))<br>        &#123;<br>            cubePool.Clear();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> åˆ›å»ºå¯¹è±¡</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>æ–°çš„å¯¹è±¡<span class="hljs-doctag">&lt;/returns&gt;</span></span><br>    <span class="hljs-function">GameObject <span class="hljs-title">OnCreate</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = GameObject.CreatePrimitive(PrimitiveType.Cube);<br>        <span class="hljs-keyword">return</span> obj;<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> è·å¾—å¯¹è±¡</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;obj&quot;&gt;</span>è·å¾—çš„å¯¹è±¡<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGet</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        obj.SetActive(<span class="hljs-literal">true</span>);<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> å½’è¿˜å¯¹è±¡</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;obj&quot;&gt;</span>å½’è¿˜çš„å¯¹è±¡<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnRelease</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        obj.SetActive(<span class="hljs-literal">false</span>);<br>    &#125;<br><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> é”€æ¯å¯¹è±¡</span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br>    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name=&quot;obj&quot;&gt;</span>é”€æ¯çš„å¯¹è±¡<span class="hljs-doctag">&lt;/param&gt;</span></span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnObjectDestroy</span>(<span class="hljs-params">GameObject obj</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">$&quot;é”€æ¯å¯¹è±¡ <span class="hljs-subst">&#123;obj.name&#125;</span> pos = <span class="hljs-subst">&#123;obj.transform.position&#125;</span>&quot;</span>);<br>        Destroy(obj);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 07 åŠ¨ç”»</title>
    <link href="/2024/03/31/unity-basic-7/"/>
    <url>/2024/03/31/unity-basic-7/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬ä¸ƒæœŸ å®Œç»“ï¼‰</p><span id="more"></span><h1 id="åŠ¨ç”»æ§åˆ¶å™¨"><a href="#åŠ¨ç”»æ§åˆ¶å™¨" class="headerlink" title="åŠ¨ç”»æ§åˆ¶å™¨"></a>åŠ¨ç”»æ§åˆ¶å™¨</h1><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª Animator Controller å’Œä¸€ä¸ª Animation èµ„æºæ–‡ä»¶ã€‚</p><p><img src="/../images/unity-basic-7/%E5%88%9B%E5%BB%BA%E5%8A%A8%E7%94%BB.png"></p><p>åŒå‡» Animator Controller æ–‡ä»¶ï¼Œå¯ä»¥æ‰“å¼€ Animator çª—å£ã€‚</p><p>ç„¶åæŠŠ Animation æ–‡ä»¶æ‹–æ‹½åˆ° Animator çª—å£ï¼Œç”Ÿæˆä¸€ä¸ªåŠ¨ç”»ç‰‡æ®µã€‚</p><p><img src="/../images/unity-basic-7/%E5%88%9B%E5%BB%BA%E5%8A%A8%E7%94%BB%E7%89%87%E6%AE%B5.png"></p><p>ç»™åœºæ™¯ä¸­çš„ Cube æ·»åŠ ä¸€ä¸ª Animator ç»„ä»¶ï¼Œå¹¶æŠŠèµ„æºæ–‡ä»¶æ‹–æ‹½èµ‹å€¼ã€‚</p><p><img src="/../images/unity-basic-7/%E6%B7%BB%E5%8A%A0%E5%8A%A8%E7%94%BB%E6%8E%A7%E5%88%B6%E5%99%A8%E7%BB%84%E4%BB%B6.png"></p><p>é€šè¿‡é¡¶éƒ¨èœå•æ æ‰“å¼€ Animation ç¼–è¾‘çª—å£ã€‚</p><p><img src="/../images/unity-basic-7/%E5%8A%A8%E7%94%BB%E6%97%B6%E9%97%B4%E8%BD%B4%E7%AA%97%E5%8F%A3.png"></p><p>ç»™ Cube æ·»åŠ ä¸€ä¸ªåŠ¨ç”»å±æ€§ã€‚</p><p><img src="/../images/unity-basic-7/%E6%B7%BB%E5%8A%A0%E5%8A%A8%E7%94%BB%E5%B1%9E%E6%80%A7.png"></p><p>ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¼€å§‹å½•åˆ¶åŠ¨ç”»ã€‚</p><p><img src="/../images/unity-basic-7/%E5%BD%95%E5%88%B6%E5%8A%A8%E7%94%BB.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 06 UGUI</title>
    <link href="/2024/03/24/unity-basic-6/"/>
    <url>/2024/03/24/unity-basic-6/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬å…­æœŸï¼‰</p><span id="more"></span><h1 id="åˆ›å»ºç”»å¸ƒ"><a href="#åˆ›å»ºç”»å¸ƒ" class="headerlink" title="åˆ›å»ºç”»å¸ƒ"></a>åˆ›å»ºç”»å¸ƒ</h1><p>åœ¨ Hierarchy é¢æ¿å³é”®ï¼Œé€‰æ‹© UI -&gt; Canvasï¼Œåˆ›å»ºä¸€ä¸ªç”»å¸ƒã€‚</p><p><img src="/../images/unity-basic-6/%E5%88%9B%E5%BB%BA%E7%94%BB%E5%B8%83.png"></p><p>å¯ä»¥çœ‹åˆ°ç”»å¸ƒé»˜è®¤å¸¦æœ‰ä¸€äº›ç»„ä»¶ï¼š</p><ul><li>Canvas</li><li>Canvas Scaler</li><li>Graphic Raycaster</li></ul><p><img src="/../images/unity-basic-6/%E7%94%BB%E5%B8%83%E7%BB%84%E4%BB%B6.png"></p><p>Canvas ç»„ä»¶å¯ä»¥é€‰æ‹© Render Modeï¼Œæœ‰ä¸‰ç§æ¸²æŸ“æ¨¡å¼ã€‚</p><ol><li>Overlay æ¨¡å¼ä¼šæŠŠç”»å¸ƒæ¸²æŸ“åˆ°æœ€é¡¶å±‚ï¼Œä¸ä¼šè¢«å…¶ä»–å…ƒç´ é®æŒ¡ã€‚</li><li>Camera æ¨¡å¼éœ€è¦æŒ‡å®šä¸€ä¸ªç›¸æœºï¼Œç”»å¸ƒä¼šè¢«ç¼©å°åˆ°ç›¸æœºçš„å°ºå¯¸èŒƒå›´å†…ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® Plane Distanceã€Sorting Layerã€Order in Layer æ¥æ§åˆ¶ç”»å¸ƒçš„æ¸²æŸ“å±‚çº§ã€‚é€šå¸¸æ˜¯æ¨èä½¿ç”¨ Camera æ¨¡å¼ã€‚</li><li>World Space æ¨¡å¼æ˜¯æŠŠç”»å¸ƒå½“åš 3D ä¸–ç•Œç‰©ä½“æ¥ä½¿ç”¨ï¼Œå¯ä»¥è‡ªè¡Œè°ƒæ•´ç”»å¸ƒçš„ä½ç½®ã€æ—‹è½¬å’Œç¼©æ”¾ã€‚</li></ol><p>Canvas Scaler ç»„ä»¶å¯ä»¥è®¾ç½®ç”»å¸ƒçš„åˆ†è¾¨ç‡ã€‚é€šå¸¸ä¼šè®¾ç½®æˆ Scale With Screen Sizeï¼ŒæŒ‡å®šä¸€ä¸ªåˆé€‚çš„åˆ†è¾¨ç‡ï¼Œå½“å±å¹•å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ ¹æ®å®½åº¦è¿˜æ˜¯é«˜åº¦è¿›è¡Œé€‚é…ã€‚</p><p>Graphic Raycaster ç»„ä»¶æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„ç»„ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Œç”»å¸ƒæ˜¯ä¸ä¼šå“åº”ç‚¹å‡»äº‹ä»¶çš„ã€‚</p><h1 id="å›¾ç‰‡å’Œæ–‡æœ¬"><a href="#å›¾ç‰‡å’Œæ–‡æœ¬" class="headerlink" title="å›¾ç‰‡å’Œæ–‡æœ¬"></a>å›¾ç‰‡å’Œæ–‡æœ¬</h1><p>åœ¨ Hierarchy é¢æ¿å³é”®ï¼Œé€‰æ‹© UI -&gt; Imageï¼Œåˆ›å»ºä¸€ä¸ªå›¾ç‰‡ã€‚</p><p>æ—§ç‰ˆæ–‡æœ¬æ˜¯åœ¨ Legacy èœå•ä¸­ï¼Œé€‰æ‹© Textã€‚</p><p>æ–°ç‰ˆæ–‡æœ¬åˆ™æ˜¯ Text-TextMeshProã€‚</p><p><img src="/../images/unity-basic-6/%E5%9B%BE%E7%89%87%E5%92%8C%E6%96%87%E6%9C%AC.png"></p><p>Image ç»„ä»¶å¯ä»¥åœ¨ Source Image å±æ€§é€‰æ‹©æƒ³è¦æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œ</p><p>Color è°ƒæ•´é¢œè‰²å’Œä¸é€æ˜åº¦ï¼Œ</p><p>Raycast Target æ§åˆ¶æ˜¯å¦è¦æ¥æ”¶ç‚¹å‡»äº‹ä»¶ï¼Œ</p><p>Maskable æ§åˆ¶æ˜¯å¦è¢«é®ç½©è£å‰ªã€‚</p><p><img src="/../images/unity-basic-6/%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6.png"></p><p>Text ç»„ä»¶ä¸»è¦å¡«å†™ Text å±æ€§çš„å†…å®¹ï¼Œ</p><p>ä¿®æ”¹ Font å­—ä½“ï¼ŒFont Size å­—ä½“å¤§å°ï¼ŒAlignment å¯¹é½æ–¹å¼ã€‚</p><p>åŒæ ·ä¹Ÿæœ‰ Raycast Target å’Œ Maskable å±æ€§ã€‚</p><p><img src="/../images/unity-basic-6/%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6.png"></p><p>æ•ˆæœå›¾ï¼š</p><p><img src="/../images/unity-basic-6/%E5%9B%BE%E7%89%87%E6%96%87%E6%9C%AC%E6%95%88%E6%9E%9C.png"></p><h1 id="æŒ‰é’®"><a href="#æŒ‰é’®" class="headerlink" title="æŒ‰é’®"></a>æŒ‰é’®</h1><p>åœ¨ Hierarchy é¢æ¿å³é”®ï¼Œé€‰æ‹© UI -&gt; Legacy -&gt; Buttonï¼Œåˆ›å»ºä¸€ä¸ªæŒ‰é’®ã€‚</p><p><img src="/../images/unity-basic-6/%E6%8C%89%E9%92%AE.png"></p><p>Button ç»„ä»¶ä¸»è¦æ·»åŠ  OnClick ç‚¹å‡»äº‹ä»¶ã€‚</p><p>å¯ä»¥ç®€å•çš„ï¼Œç‚¹å‡» OnClick åˆ—è¡¨å³ä¸‹è§’çš„ + å·ï¼Œæ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼ŒæŠŠæ ‡é¢˜æ–‡æœ¬æ‹–æ‹½åˆ° Runtime Only ä¸‹é¢çš„é€‰æ¡†ä¸­ã€‚</p><p>ç‚¹å‡» Runtime Only å³ä¾§çš„æ–¹æ³•åˆ—è¡¨ï¼Œä¾‹å¦‚é€‰æ‹© GameObject -&gt; SetActiveï¼Œæ–¹æ³•ä¸‹é¢å°±ä¼šå‡ºç°ä¸€ä¸ªæ–¹æ¡†ï¼Œå‹¾é€‰åˆ™ä»£è¡¨ trueï¼Œä¸å‹¾é€‰åˆ™ä»£è¡¨ falseã€‚</p><p><img src="/../images/unity-basic-6/%E6%8C%89%E9%92%AE%E7%BB%84%E4%BB%B6.png"></p><p>é™¤äº†ç›´æ¥åœ¨é¢æ¿ä¸Šæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»£ç æ·»åŠ ã€‚</p><p>ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªè„šæœ¬ ButtonClick.csï¼ŒæŒ‚åˆ°æŒ‰é’®ä¸Šï¼Œå¹¶æ‹–æ‹½ä¸€ä¸ªæ–‡æœ¬ç»™ text å­—æ®µã€‚</p><p>åœ¨ Start æ–¹æ³•ä¸­ï¼Œå…ˆè·å–æŒ‰é’®è‡ªèº«çš„ Button ç»„ä»¶ï¼Œå†é€šè¿‡ onClick.AddListener æ–¹æ³•æ·»åŠ å¦ä¸€ä¸ªæ–¹æ³• HideText ä½œä¸ºç‚¹å‡»äº‹ä»¶ï¼Œè¿™ä¸ªæ–¹æ³•é‡ŒæŠŠ text å­—æ®µå¼•ç”¨çš„æ–‡æœ¬éšè—ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.UI;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ButtonClick</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> Text text;<br>    Button button;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        button = GetComponent&lt;Button&gt;();<br>        button.onClick.AddListener(HideText);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">HideText</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        text.gameObject.SetActive(<span class="hljs-literal">false</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p><img src="/../images/unity-basic-6/%E9%9A%90%E8%97%8F%E6%96%87%E6%9C%AC.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 05 åœºæ™¯åŠ è½½</title>
    <link href="/2024/03/17/unity-basic-5/"/>
    <url>/2024/03/17/unity-basic-5/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬äº”æœŸï¼‰</p><span id="more"></span><h1 id="åœºæ™¯é…ç½®"><a href="#åœºæ™¯é…ç½®" class="headerlink" title="åœºæ™¯é…ç½®"></a>åœºæ™¯é…ç½®</h1><p>é¦–å…ˆï¼Œåœ¨èµ„æºæ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ª LoadScene åœºæ™¯ï¼Œæ‘†æ”¾ä¸€äº›ç‰©ä½“ï¼Œç”¨æ¥åšåˆå§‹åœºæ™¯ã€‚</p><p>ç„¶ååˆ›å»ºä¸€ä¸ª Stage æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸¤ä¸ªåœºæ™¯ Stage1ã€Stage2ã€‚</p><p>ä¸¤ä¸ª Stage åœºæ™¯ä¹Ÿå¯ä»¥ç®€å•å¸ƒç½®ä¸€ä¸‹ï¼Œæ–¹ä¾¿åŒºåˆ†ã€‚</p><p><img src="/../images/unity-basic-5/%E5%B8%83%E7%BD%AE%E5%9C%BA%E6%99%AF.png"></p><p>æ¥ç€ï¼Œæ‰“å¼€ Build Settingsï¼ŒæŠŠéœ€è¦åŠ è½½çš„åœºæ™¯æ·»åŠ åˆ°é…ç½®ä¸­ã€‚</p><p><img src="/../images/unity-basic-5/%E5%9C%BA%E6%99%AF%E6%89%93%E5%8C%85%E8%AE%BE%E7%BD%AE.png"></p><h1 id="åˆ‡æ¢åœºæ™¯"><a href="#åˆ‡æ¢åœºæ™¯" class="headerlink" title="åˆ‡æ¢åœºæ™¯"></a>åˆ‡æ¢åœºæ™¯</h1><p>åˆ›å»ºä¸€ä¸ª SceneLoader è„šæœ¬ï¼Œå¹¶åœ¨ LoadScene åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªç©ºç‰©ä½“ï¼ŒæŒ‚è½½è¿™ä¸ªè„šæœ¬ã€‚</p><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿è°ƒç”¨åŠ è½½åœºæ™¯çš„æ–¹æ³•ï¼Œç®€å•ä½¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œåœ¨ Awake åˆå§‹åŒ–æ—¶ï¼ŒæŠŠå½“å‰è„šæœ¬å®ä¾‹ä¿å­˜åˆ° instance å˜é‡é‡Œï¼Œå¹¶ä¸”è®¾ç½®ä¸º DontDestroyOnLoadï¼Œä¿è¯è¿™ä¸ªå¯¹è±¡ä¸ä¼šå› ä¸ºåœºæ™¯åˆ‡æ¢è€Œè¢«é”€æ¯ï¼Œå…¶ä»–å¯¹è±¡é€šè¿‡ Instance å±æ€§è·å–åˆ°å•ä¾‹ã€‚</p><p>å½“å‰è„šæœ¬æä¾›ä¸€ä¸ª LoadScene æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªåœºæ™¯åç§°å°±å¯ä»¥ç›´æ¥åˆ‡æ¢åœºæ™¯ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.SceneManagement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SceneLoader</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// å•ä¾‹æ¨¡å¼</span><br>    <span class="hljs-keyword">static</span> SceneLoader instance;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SceneLoader Instance<br>    &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> instance; &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (instance != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Destroy(gameObject);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            instance = <span class="hljs-keyword">this</span>;<br>            DontDestroyOnLoad(gameObject);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LoadScene</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> sceneName</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        SceneManager.LoadScene(sceneName);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ç€å†åˆ›å»ºä¸€ä¸ªè„šæœ¬ ChangeSceneï¼ŒæŒ‚è½½åˆ°åœºæ™¯ä¸­çš„ 3D ç‰©ä½“ä¸Šï¼Œå¹¶å¡«å†™ç›®æ ‡åœºæ™¯çš„åç§°ã€‚</p><p>OnMouseDown æ–¹æ³•ä¼šåœ¨ç‰©ä½“è¢«é¼ æ ‡ç‚¹å‡»æ—¶è°ƒç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ChangeScene</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> sceneName;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseDown</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        SceneLoader.Instance.LoadScene(sceneName);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/../images/unity-basic-5/%E7%9B%AE%E6%A0%87%E5%9C%BA%E6%99%AF.png"></p><p><img src="/../images/unity-basic-5/%E5%9B%9E%E5%88%B0%E4%B8%BB%E5%9C%BA%E6%99%AF.png"></p><p>åœºæ™¯åˆ‡æ¢æ•ˆæœï¼š</p><p><img src="/../images/unity-basic-5/%E5%9C%BA%E6%99%AF%E5%88%87%E6%8D%A2%E6%95%88%E6%9E%9C.gif"></p><h1 id="åœºæ™¯å åŠ "><a href="#åœºæ™¯å åŠ " class="headerlink" title="åœºæ™¯å åŠ "></a>åœºæ™¯å åŠ </h1><p>ç›®å‰åœºæ™¯åŠ è½½æ˜¯å¸è½½æ‰åŸæ¥çš„åœºæ™¯ï¼ŒåŠ è½½æ–°çš„åœºæ™¯ï¼ŒDontDestroyOnLoad åœºæ™¯ä¸€ç›´å­˜åœ¨ã€‚</p><p>å¹¶ä¸”åœºæ™¯åŠ è½½æ˜¯åŒæ­¥çš„ï¼Œå¦‚æœæ–°çš„åœºæ™¯åŒ…å«çš„ç‰©ä½“èµ„æºå¤ªå¤šï¼ŒåŠ è½½æ—¶é—´ç¨æ…¢çš„è¯ï¼Œå°±ä¼šæ„Ÿè§‰åˆ°å¡é¡¿ã€‚</p><p>åœºæ™¯æ˜¯å¯ä»¥å åŠ çš„ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åŠ è½½äº†å¤šä¸ªåœºæ™¯ï¼Œä¹Ÿæœ‰å¼‚æ­¥åŠ è½½çš„æ–¹å¼ã€‚</p><p>ä¸‹é¢æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨æ¥åŠ è½½æˆ–å¸è½½åœºæ™¯ã€‚å› ä¸ºæ˜¯å¼‚æ­¥åŠ è½½ï¼Œéœ€è¦ä½¿ç”¨åç¨‹ï¼Œåœºæ™¯åŠ è½½å®Œæˆåå¯ä»¥æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SceneLoader</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-comment">// å½“å‰åŠ è½½çš„åœºæ™¯</span><br>    Scene currentScene;<br>    <br>    <span class="hljs-comment">// åŠ è½½åœºæ™¯ï¼ˆå¼‚æ­¥åŠ è½½ï¼Œå åŠ æ¨¡å¼ï¼‰</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LoadSceneAdditive</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> sceneName</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        StartCoroutine(LoadSceneAsync(sceneName));<br>    &#125;<br><br>    <span class="hljs-function">IEnumerator <span class="hljs-title">LoadSceneAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> sceneName</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        AsyncOperation operation = SceneManager.LoadSceneAsync(sceneName, LoadSceneMode.Additive);<br>        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> operation;<br>        <span class="hljs-comment">// åŠ è½½å®Œæˆåï¼Œä¿å­˜å½“å‰åŠ è½½çš„åœºæ™¯</span><br>        currentScene = SceneManager.GetSceneByName(sceneName);<br>    &#125;<br><br>    <span class="hljs-comment">// å¸è½½å½“å‰å·²åŠ è½½çš„åœºæ™¯</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UnloadCurrentScene</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦åŠ è½½è¿‡å½“å‰åœºæ™¯</span><br>        <span class="hljs-keyword">if</span> (!currentScene.IsValid()) <span class="hljs-keyword">return</span>;<br>        StartCoroutine(UnloadCurrentSceneAsync());<br>    &#125;<br><br>    <span class="hljs-function">IEnumerator <span class="hljs-title">UnloadCurrentSceneAsync</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        AsyncOperation operation = SceneManager.UnloadSceneAsync(currentScene);<br>        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> operation;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ä¸€ä¸‹ ChangeScene è„šæœ¬è°ƒç”¨çš„æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ChangeScene</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> sceneName;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnMouseDown</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// å…ˆå¸è½½å½“å‰åŠ è½½çš„åœºæ™¯</span><br>        SceneLoader.Instance.UnloadCurrentScene();<br>        <br>        <span class="hljs-comment">// åŠ è½½æ–°çš„åœºæ™¯ï¼ˆå åŠ æ¨¡å¼ï¼‰</span><br>        SceneLoader.Instance.LoadSceneAdditive(sceneName);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Stage åœºæ™¯ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œéšè—æ‰ç›¸æœºå’Œç¯å…‰ï¼Œå› ä¸ºä¸»åœºæ™¯å·²ç»æœ‰äº†ï¼Œå¤šä¸ªç›¸æœºå’Œç¯å…‰ä¼šå½±å“è§†è§‰æ•ˆæœã€‚</p><p><img src="/../images/unity-basic-5/%E4%BF%AE%E6%94%B9%E5%9C%BA%E6%99%AF.png"></p><p>åœºæ™¯å åŠ æ•ˆæœï¼š</p><p><img src="/../images/unity-basic-5/%E5%9C%BA%E6%99%AF%E5%8F%A0%E5%8A%A0.gif"></p><p><img src="/../images/unity-basic-5/%E5%9C%BA%E6%99%AF%E5%8F%A0%E5%8A%A02.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 04 ç‰©ç†æ•ˆæœ</title>
    <link href="/2024/03/10/unity-basic-4/"/>
    <url>/2024/03/10/unity-basic-4/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬å››æœŸï¼‰</p><span id="more"></span><h1 id="åˆšä½“"><a href="#åˆšä½“" class="headerlink" title="åˆšä½“"></a>åˆšä½“</h1><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ª Cubeï¼Œç„¶åä¸ºå®ƒæ·»åŠ ä¸€ä¸ª Rigidbody ç»„ä»¶ã€‚</p><p>æ­¤æ—¶ï¼ŒCube å°±æœ‰äº†é‡åŠ›ï¼Œå¦‚æœè¿è¡Œæ¸¸æˆï¼ŒCube ä¼šæ¨¡æ‹Ÿè‡ªç”±è½ä½“ï¼Œå¾€ä¸‹æ‰è½ã€‚</p><p><img src="/../images/unity-basic-4/%E6%B7%BB%E5%8A%A0%E5%88%9A%E4%BD%93.png"></p><p>å¯ä»¥ç®€å•å¸ƒç½®ä¸€ä¸‹åœºæ™¯ï¼Œåœ¨ Cube ä¸‹é¢æ”¾ç½®ä¸€ä¸ª Planeï¼Œè¿™æ · Cube å°±ä¼šç«™ç«‹åœ¨å¹³é¢ä¸Šã€‚</p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ Rigidbody ç»„ä»¶çš„å‚æ•°ï¼Œå–æ¶ˆå‹¾é€‰ Use Gravity æˆ–è€…å‹¾é€‰ Is Kinematicï¼Œä¹Ÿä¼šå–æ¶ˆé‡åŠ›æ•ˆæœã€‚</p><p><img src="/../images/unity-basic-4/%E5%B8%83%E7%BD%AE%E5%9C%BA%E6%99%AF.png"></p><p>åˆšä½“ç»„ä»¶ä¹Ÿå¯ä»¥è®©ç‰©ä½“ç§»åŠ¨ï¼Œåªéœ€è¦ä¿®æ”¹åˆšä½“çš„ velocity å±æ€§ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RigidbodyMove</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;   <span class="hljs-comment">// ç§»åŠ¨é€Ÿåº¦</span><br>    <span class="hljs-keyword">public</span> Vector3 direction;  <span class="hljs-comment">// ç§»åŠ¨æ–¹å‘</span><br>    <span class="hljs-keyword">public</span> Rigidbody rb;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        rb = GetComponent&lt;Rigidbody&gt;();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ°´å¹³åç§»é‡</span><br>        <span class="hljs-built_in">float</span> h = Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-comment">// å‚ç›´åç§»é‡</span><br>        <span class="hljs-built_in">float</span> v = Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>);<br>        <span class="hljs-comment">// ä¿®æ”¹æ–¹å‘å‘é‡</span><br>        direction.x = h;<br>        direction.z = v;<br>        <span class="hljs-comment">// è®¾ç½®åˆšä½“é€Ÿåº¦</span><br>        rb.velocity = speed * direction;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="/../images/unity-basic-4/%E5%88%9A%E4%BD%93%E7%A7%BB%E5%8A%A8.gif"></p><h1 id="ç¢°æ’ä½“"><a href="#ç¢°æ’ä½“" class="headerlink" title="ç¢°æ’ä½“"></a>ç¢°æ’ä½“</h1><p>åœ¨åˆ›å»º Cube æ—¶ï¼Œé»˜è®¤ä¼šæŒ‚è½½ä¸€ä¸ªç¢°æ’ä½“ç»„ä»¶ã€‚</p><p>å‹¾é€‰ Is Trigger ä¼šå–æ¶ˆç¢°æ’æ•ˆæœï¼Œåªåšè§¦å‘å™¨ã€‚</p><p>Center å’Œ Size ç”¨æ¥æ§åˆ¶ç¢°æ’ä½“çš„ä¸­å¿ƒä½ç½®å’Œå¤§å°ã€‚</p><p><img src="/../images/unity-basic-4/%E7%A2%B0%E6%92%9E%E4%BD%93%E5%B1%9E%E6%80%A7.png"></p><p>å¦‚æœè¦è®©ä¸¤ä¸ªç‰©ä½“ç¢°æ’ï¼Œç›‘å¬å‘ç”Ÿç¢°æ’çš„æ—¶åˆ»ï¼Œéœ€è¦å…¶ä¸­ä¸€ä¸ªç‰©ä½“å¸¦æœ‰åˆšä½“ç»„ä»¶ï¼Œå¦ä¸€ä¸ªç‰©ä½“å¯ä»¥æ²¡æœ‰åˆšä½“ã€‚</p><p>å½“ç„¶ï¼Œä¸¤ä¸ªç‰©ä½“éƒ½è¦æœ‰ç¢°æ’ä½“ã€‚</p><p>å¦‚æœæ²¡æœ‰åˆšä½“çš„ç¢°æ’ä½“ï¼Œå‹¾é€‰äº† Is Triggerï¼Œé‚£ä¹ˆå¸¦æœ‰åˆšä½“çš„ç‰©ä½“ç›‘å¬çš„ç¢°æ’å›è°ƒå‡½æ•°æ˜¯ OnTrigger ç³»åˆ—çš„å‡½æ•°ã€‚</p><p>å¦‚æœæ²¡æœ‰åˆšä½“çš„ç¢°æ’ä½“ï¼Œæ²¡æœ‰å‹¾é€‰ Is Triggerï¼Œé‚£ä¹ˆå¸¦æœ‰åˆšä½“çš„ç‰©ä½“ç›‘å¬çš„ç¢°æ’å›è°ƒå‡½æ•°æ˜¯ OnCollision ç³»åˆ—çš„å‡½æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RigidbodyMove</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-comment">// è¿›å…¥è§¦å‘</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter</span>(<span class="hljs-params">Collider other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;è§¦å‘ &quot;</span> + other.name);<br>    &#125;<br><br>    <span class="hljs-comment">// è¿›å…¥ç¢°æ’</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionEnter</span>(<span class="hljs-params">Collision other</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;ç¢°æ’ &quot;</span> + other.collider.name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åœºæ™¯ä¸­æ·»åŠ ä¸€ä¸ªçƒä½“ï¼Œå¹¶ä¸”æŠŠçƒçš„ç¢°æ’ä½“è®¾ç½®ä¸º Triggerã€‚</p><p>å¯ä»¥çœ‹åˆ° Console çª—å£æ‰“å°çš„ä¿¡æ¯ã€‚</p><p>å› ä¸º Plane ä¹Ÿå¸¦æœ‰ç¢°æ’ä½“ï¼Œå¹¶ä¸”ä¸æ˜¯ Triggerï¼Œæ‰€ä»¥ä¼šæ‰“å° ç¢°æ’ Planeã€‚</p><p>è€Œçƒä½“æ˜¯ Triggerï¼Œæ‰€ä»¥ä¼šæ‰“å° è§¦å‘ Sphereã€‚</p><p><img src="/../images/unity-basic-4/%E8%A7%A6%E5%8F%91.png"></p><p>ç±»ä¼¼çš„ç¢°æ’å›è°ƒå‡½æ•°</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// è¿›å…¥è§¦å‘å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter</span>(<span class="hljs-params">Collider other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br><br><span class="hljs-comment">// åœç•™è§¦å‘å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerStay</span>(<span class="hljs-params">Collider other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br><br><span class="hljs-comment">// é€€å‡ºè§¦å‘å™¨</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerExit</span>(<span class="hljs-params">Collider other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br><br><span class="hljs-comment">// è¿›å…¥ç¢°æ’ä½“</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionEnter</span>(<span class="hljs-params">Collision other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br><br><span class="hljs-comment">// åœç•™ç¢°æ’ä½“</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionStay</span>(<span class="hljs-params">Collision other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br><br><span class="hljs-comment">// é€€å‡ºç¢°æ’ä½“</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionExit</span>(<span class="hljs-params">Collision other</span>)</span><br><span class="hljs-function"></span>&#123;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 03 é¢„åˆ¶ä½“</title>
    <link href="/2024/03/03/unity-basic-3/"/>
    <url>/2024/03/03/unity-basic-3/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬ä¸‰æœŸï¼‰</p><span id="more"></span><h1 id="åˆ›å»ºé¢„åˆ¶ä½“"><a href="#åˆ›å»ºé¢„åˆ¶ä½“" class="headerlink" title="åˆ›å»ºé¢„åˆ¶ä½“"></a>åˆ›å»ºé¢„åˆ¶ä½“</h1><p>åˆ›å»ºé¢„åˆ¶ä½“çš„æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥æŠŠåœºæ™¯ä¸­çš„æ¸¸æˆç‰©ä½“ï¼Œæ‹–æ‹½åˆ° Assets æ–‡ä»¶å¤¹é‡Œï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªé¢„åˆ¶ä½“èµ„æºäº†ã€‚</p><p><img src="/../images/unity-basic-3/%E5%88%9B%E5%BB%BA%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>é™¤äº†æ‹–æ‹½çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥åœ¨ Create èœå•ä¸­æ‰¾åˆ°åˆ›å»ºé¢„åˆ¶ä½“çš„æŒ‰é’®ï¼Œæ­¤æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„é¢„åˆ¶ä½“ã€‚</p><p><img src="/../images/unity-basic-3/%E5%88%9B%E5%BB%BA%E9%A2%84%E5%88%B6%E4%BD%932.png"></p><h1 id="ä¿®æ”¹é¢„åˆ¶ä½“"><a href="#ä¿®æ”¹é¢„åˆ¶ä½“" class="headerlink" title="ä¿®æ”¹é¢„åˆ¶ä½“"></a>ä¿®æ”¹é¢„åˆ¶ä½“</h1><p>åŒå‡» Assets æ–‡ä»¶å¤¹é‡Œçš„é¢„åˆ¶ä½“èµ„æºï¼Œå¯ä»¥è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚</p><p>åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œç»™é¢„åˆ¶ä½“å¢åŠ ä¸€ä¸ªçƒæ¨¡å‹ï¼Œç‚¹å‡» Save æŒ‰é’®ä¿å­˜ã€‚</p><p>ä¿å­˜ä¹‹åï¼Œç‚¹å‡» Save æŒ‰é’®æ—è¾¹çš„ &lt; æŒ‰é’®ï¼Œé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå›åˆ°åœºæ™¯ã€‚</p><p><img src="/../images/unity-basic-3/%E4%BF%AE%E6%94%B9%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>å›åˆ°åœºæ™¯ä¹‹åï¼Œå‘ç°åœºæ™¯ä¸­çš„æ¸¸æˆç‰©ä½“éƒ½ä¼šéšä¹‹ä¿®æ”¹ã€‚</p><p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æŠŠé¢„åˆ¶ä½“ä» Assets æ–‡ä»¶å¤¹é‡Œå†æ¬¡æ‹–æ‹½åˆ°åœºæ™¯ä¸­ï¼Œä¼šç”Ÿæˆæ–°çš„ä¸€æ¨¡ä¸€æ ·çš„æ¸¸æˆç‰©ä½“ã€‚</p><p>åç»­å¯¹é¢„åˆ¶ä½“çš„ä¿®æ”¹ï¼Œéƒ½ä¼šåŒæ—¶æ”¹å˜åœºæ™¯ä¸­å¼•ç”¨åŒä¸€ä¸ªé¢„åˆ¶ä½“èµ„æºçš„æ‰€æœ‰æ¸¸æˆç‰©ä½“ã€‚</p><p><img src="/../images/unity-basic-3/%E6%8B%96%E6%8B%BD%E6%96%B0%E7%9A%84%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>é™¤äº†åœ¨ Assets æ–‡ä»¶å¤¹ä¸­åŒå‡»é¢„åˆ¶ä½“è¿›è¡Œç¼–è¾‘çš„æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨åœºæ™¯ä¸­ï¼Œå¯¹æ¸¸æˆç‰©ä½“è¿›è¡Œä¿®æ”¹ï¼Œç„¶ååº”ç”¨åˆ°é¢„åˆ¶ä½“ä¸Šã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªæ¸¸æˆç‰©ä½“ä¸­ï¼Œå†æ¬¡æ·»åŠ ä¸€ä¸ªå°çƒï¼Œç‚¹å‡» Overrides æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å“ªäº›ä¿®æ”¹ã€‚</p><p>å¦‚æœç›´æ¥ç‚¹å‡» Apply Allï¼Œå°±ä¼šæŠŠæ‰€æœ‰ä¿®æ”¹éƒ½è¦†ç›–åˆ°é¢„åˆ¶ä½“ã€‚</p><p>ä¹Ÿå¯ä»¥å•ç‹¬ç‚¹å‡»å…¶ä¸­æŸä¸ªä¿®æ”¹ï¼Œç‚¹å‡» Apply æŒ‰é’®ï¼Œå†æ¬¡ç‚¹å‡» Apply to Prefab â€˜Cubeâ€™ æŒ‰é’®ï¼Œå°±å¯ä»¥æŠŠå•æ¡ä¿®æ”¹è¦†ç›–åˆ°é¢„åˆ¶ä½“ã€‚</p><p><img src="/../images/unity-basic-3/%E5%9C%BA%E6%99%AF%E4%B8%AD%E4%BF%AE%E6%94%B9%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><p>åº”ç”¨è¦†ç›–ä¹‹åï¼Œåœºæ™¯ä¸­çš„æ¸¸æˆç‰©ä½“å’Œèµ„æºé‡Œçš„é¢„åˆ¶ä½“éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><p><img src="/../images/unity-basic-3/%E8%A6%86%E7%9B%96%E9%A2%84%E5%88%B6%E4%BD%93.png"></p><h1 id="å®ä¾‹åŒ–é¢„åˆ¶ä½“"><a href="#å®ä¾‹åŒ–é¢„åˆ¶ä½“" class="headerlink" title="å®ä¾‹åŒ–é¢„åˆ¶ä½“"></a>å®ä¾‹åŒ–é¢„åˆ¶ä½“</h1><p>é™¤äº†ç›´æ¥ä» Assets æ–‡ä»¶å¤¹é‡Œæ‹–æ‹½é¢„åˆ¶ä½“åˆ°åœºæ™¯ä¸­ï¼Œè¿›è¡Œæ¸¸æˆç‰©ä½“çš„ç”Ÿæˆå¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»£ç çš„æ–¹å¼å®ä¾‹åŒ–é¢„åˆ¶ä½“ã€‚</p><p>åˆ›å»ºä¸€ä¸ªè„šæœ¬ CreateGameObjectByPrefab.csï¼Œä»£ç å¦‚ä¸‹ã€‚</p><p>å…¶ä¸­ cubePrefab æ˜¯è¦å®ä¾‹åŒ–çš„é¢„åˆ¶ä½“èµ„æºï¼Œ</p><p>pos æ˜¯ç”Ÿæˆçš„ä½ç½®ï¼Œ</p><p>step æ˜¯æ¯æ¬¡ä¿®æ”¹ç”Ÿæˆä½ç½®çš„æ­¥é•¿ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CreateGameObjectByPrefab</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> GameObject cubePrefab;<br>    <span class="hljs-keyword">public</span> Vector3 pos;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> step = <span class="hljs-number">1f</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜ G é”®</span><br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.G))<br>        &#123;<br>            Generate();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Generate</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        GameObject obj = Instantiate(cubePrefab);<br>        obj.transform.position = pos;<br>        pos.x += step;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åœºæ™¯ä¸­åˆ›å»ºä¸€ä¸ªç©ºç‰©ä½“ï¼Œå¹¶æŠŠè„šæœ¬æ‹–æ‹½åˆ°ç©ºç‰©ä½“ä¸Šï¼Œå†æŠŠ Cube é¢„åˆ¶ä½“æ‹–æ‹½åˆ° Cube Prefab å±æ€§ä¸Šï¼Œè®¾ç½®å¥½ pos å’Œ step çš„å‚æ•°ã€‚</p><p><img src="/../images/unity-basic-3/%E6%8B%96%E6%8B%BD%E9%A2%84%E5%88%B6%E4%BD%93%E5%BC%95%E7%94%A8.png"></p><p>è¿è¡Œæ¸¸æˆï¼ŒæŒ‰ä¸‹é”®ç›˜ G é”®ï¼Œå¯ä»¥çœ‹åˆ°åœºæ™¯ä¸­ä¸æ–­åœ°ç”Ÿæˆæ–°çš„æ¸¸æˆç‰©ä½“ã€‚</p><p><img src="/../images/unity-basic-3/%E5%8A%A8%E6%80%81%E7%94%9F%E6%88%90%E6%B8%B8%E6%88%8F%E7%89%A9%E4%BD%93.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 02 æ§åˆ¶ç§»åŠ¨</title>
    <link href="/2024/02/25/unity-basic-2/"/>
    <url>/2024/02/25/unity-basic-2/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬äºŒæœŸï¼‰</p><span id="more"></span><h1 id="åˆ›å»ºè„šæœ¬"><a href="#åˆ›å»ºè„šæœ¬" class="headerlink" title="åˆ›å»ºè„šæœ¬"></a>åˆ›å»ºè„šæœ¬</h1><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªåœºæ™¯ï¼Œåˆ›å»ºä¸€ä¸ª Cubeã€‚</p><p>åœ¨ Assets æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª Scripts æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ä»£ç æ–‡ä»¶ã€‚</p><p>ç„¶ååˆ›å»ºä¸€ä¸ª PlayerController.cs ä»£ç æ–‡ä»¶ï¼Œæ‹–æ‹½æŒ‚è½½åˆ° Cube èº«ä¸Šã€‚</p><p><img src="/../images/unity-basic-2/%E5%88%9B%E5%BB%BA%E8%84%9A%E6%9C%AC.png"></p><h1 id="ç‰©ä½“ç§»åŠ¨"><a href="#ç‰©ä½“ç§»åŠ¨" class="headerlink" title="ç‰©ä½“ç§»åŠ¨"></a>ç‰©ä½“ç§»åŠ¨</h1><p>æ‰“å¼€ PlayerController.cs ç¼–è¾‘ä»£ç ã€‚</p><p>æ·»åŠ  speed å’Œ direction ä¸¤ä¸ªå˜é‡ï¼Œåœ¨ Update æ–¹æ³•ä¸­ï¼Œé€šè¿‡ Input.GetAxis è·å–é”®ç›˜ WSAD æˆ– æ–¹å‘é”® çš„è¾“å…¥ï¼Œä¿®æ”¹ç§»åŠ¨æ–¹å‘ï¼Œå¹¶è®¡ç®—æ”¹å˜ transform.position çš„æ•°å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerController</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;   <span class="hljs-comment">// ç§»åŠ¨é€Ÿåº¦</span><br>    <span class="hljs-keyword">public</span> Vector3 direction;  <span class="hljs-comment">// ç§»åŠ¨æ–¹å‘</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ°´å¹³åç§»é‡</span><br>        <span class="hljs-built_in">float</span> h = Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>        <span class="hljs-comment">// å‚ç›´åç§»é‡</span><br>        <span class="hljs-built_in">float</span> v = Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>);<br>        <span class="hljs-comment">// ä¿®æ”¹æ–¹å‘å‘é‡</span><br>        direction.x = h;<br>        direction.y = v;<br>        <span class="hljs-comment">// è®¡ç®—ç§»åŠ¨è·ç¦»å¹¶ä¿®æ”¹ç‰©ä½“ä½ç½®</span><br>        transform.position += speed * Time.deltaTime * direction;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç§»åŠ¨æ•ˆæœï¼š</p><p><img src="/../images/unity-basic-2/%E7%A7%BB%E5%8A%A8%E6%95%88%E6%9E%9C.gif"></p><blockquote><p>æ³¨æ„åˆ°ï¼Œè¿™é‡Œè®¡ç®—ç§»åŠ¨è·ç¦»æ—¶ï¼Œä¹˜äº†ä¸€ä¸ª Time.deltaTime å˜é‡ï¼Œå¯ä»¥å°è¯•å»æ‰è¿™ä¸ªå˜é‡ï¼Œçœ‹çœ‹æ•ˆæœã€‚</p></blockquote><p>Time.deltaTime è¡¨ç¤ºä¸€å¸§çš„é—´éš”æ—¶é—´ï¼Œæ ¹æ®è®¾å¤‡é…ç½®å’Œè¿è¡ŒçŠ¶å†µï¼Œè¿™ä¸ªå˜é‡çš„æ•°å€¼ä¼šä¸æ–­å˜åŒ–ã€‚</p><p>å‡è®¾è¿è¡Œå¸§ç‡æ˜¯ 30 FPSï¼ŒTime.deltaTime çš„æ•°å€¼æ˜¯ 1&#x2F;30ã€‚</p><p>å‡è®¾è¿è¡Œå¸§ç‡æ˜¯ 60 FPSï¼ŒTime.deltaTime çš„æ•°å€¼æ˜¯ 1&#x2F;60ã€‚</p><p>Update æ–¹æ³•æ˜¯æ¯å¸§è°ƒç”¨ä¸€æ¬¡ï¼Œå‡è®¾ Cube æ¯å¸§ç§»åŠ¨çš„è·ç¦»ä¸º 5ï¼Œåœ¨æ¯ç§’ 30 å¸§çš„æƒ…å†µä¸‹ï¼Œæ¯ç§’ç§»åŠ¨çš„è·ç¦»æ˜¯ 150ã€‚</p><p>è€Œåœ¨æ¯ç§’ 60 å¸§çš„æƒ…å†µä¸‹ï¼Œæ¯ç§’ç§»åŠ¨çš„è·ç¦»æ˜¯ 300ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒå¸§ç‡çš„æ•ˆæœè¡¨ç°æ˜¯ä¸åŒçš„ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹˜ä¸Šä¸€ä¸ª Time.deltaTimeï¼Œä½¿å¾—æ¯ç§’ç§»åŠ¨çš„è·ç¦»éƒ½å˜ä¸ºå¸¸é‡ 5ï¼Œå¾—åˆ°ç›¸åŒçš„è¡¨ç°æ•ˆæœã€‚</p><h1 id="ç‰©ä½“æ—‹è½¬"><a href="#ç‰©ä½“æ—‹è½¬" class="headerlink" title="ç‰©ä½“æ—‹è½¬"></a>ç‰©ä½“æ—‹è½¬</h1><p>é™¤äº†é€šè¿‡ Input.GetAxis è·å–æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šçš„åç§»é‡ï¼Œè¿˜å¯ä»¥é€šè¿‡ Input.GetKey è·å–é”®ç›˜çš„å…¶ä»–æŒ‰é”®ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨æšä¸¾ KeyCode.Q è·å–é”®ç›˜ Q é”®ï¼Œå½“ Q é”®è¢«æŒç»­æŒ‰ä¸‹æ—¶ï¼ŒæŒç»­ä¿®æ”¹ Y è½´ æ—‹è½¬è§’åº¦ï¼Œå¹¶ä½¿ç”¨ Quaternion.Euler æ–¹æ³•è¿›è¡Œè½¬æ¢ï¼Œä½¿ç‰©ä½“çš„æ—‹è½¬å±æ€§ä¿æŒåœ¨ä¸€ä¸ªæ­£å¸¸çš„èŒƒå›´å†…ï¼Œç„¶åèµ‹å€¼ç»™ transform.rotationã€‚</p><p>åå‘åŒç†ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerController</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> rotateSpeed = <span class="hljs-number">100f</span>;   <span class="hljs-comment">// æ—‹è½¬é€Ÿåº¦</span><br>    <span class="hljs-keyword">public</span> Vector3 rotation;           <span class="hljs-comment">// æ—‹è½¬è§’åº¦</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-comment">// æŒ‰ä½ Q é”®</span><br>        <span class="hljs-keyword">if</span> (Input.GetKey(KeyCode.Q))<br>        &#123;<br>            <span class="hljs-comment">// æŒç»­ä¿®æ”¹ Y è½´ æ—‹è½¬è§’åº¦ï¼ˆé¡ºæ—¶é’ˆï¼‰</span><br>            rotation.y += rotateSpeed * Time.deltaTime;<br>            transform.rotation = Quaternion.Euler(rotation);<br>        &#125;<br>        <span class="hljs-comment">// æŒ‰ä½ E é”®</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKey(KeyCode.E))<br>        &#123;<br>            <span class="hljs-comment">// æŒç»­ä¿®æ”¹ Y è½´ æ—‹è½¬è§’åº¦ï¼ˆé€†æ—¶é’ˆï¼‰</span><br>            rotation.y -= rotateSpeed * Time.deltaTime;<br>            transform.rotation = Quaternion.Euler(rotation);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—‹è½¬æ•ˆæœï¼š</p><p><img src="/../images/unity-basic-2/%E6%97%8B%E8%BD%AC%E6%95%88%E6%9E%9C.gif"></p><h1 id="ç‰©ä½“ç¼©æ”¾"><a href="#ç‰©ä½“ç¼©æ”¾" class="headerlink" title="ç‰©ä½“ç¼©æ”¾"></a>ç‰©ä½“ç¼©æ”¾</h1><p>äº†è§£äº†é”®ç›˜æŒ‰é”®ï¼Œå¯ä»¥å†çœ‹çœ‹é¼ æ ‡æŒ‰é”®ã€‚</p><p>å¯ä»¥é€šè¿‡ Input.GetMouseButtonDown æ–¹æ³•è·å–é¼ æ ‡æŒ‰é”®æŒ‰ä¸‹çš„çŠ¶æ€ï¼Œä¼ å…¥ 0 åˆ™æ˜¯é¼ æ ‡å·¦é”®ï¼Œä¼ å…¥ 1 åˆ™æ˜¯é¼ æ ‡å³é”®ã€‚</p><p>è¿™é‡Œä¿®æ”¹äº† transform.localScaleï¼Œè®© Cube æ”¾å¤§æˆ–å˜å›åŸæ ·ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerController</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> bigger = <span class="hljs-number">2f</span>;    <span class="hljs-comment">// ç¼©æ”¾ç³»æ•°ï¼ˆæ”¾å¤§ï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> normal = <span class="hljs-number">1f</span>;    <span class="hljs-comment">// ç¼©æ”¾ç³»æ•°ï¼ˆæ­£å¸¸ï¼‰</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        <span class="hljs-comment">// æŒ‰ä¸‹é¼ æ ‡å·¦é”®</span><br>        <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">0</span>))<br>        &#123;<br>            transform.localScale = Vector3.one * bigger;<br>        &#125;<br>        <span class="hljs-comment">// æŒ‰ä¸‹é¼ æ ‡å³é”®</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">1</span>))<br>        &#123;<br>            transform.localScale = Vector3.one * normal;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼©æ”¾æ•ˆæœï¼š</p><p><img src="/../images/unity-basic-2/%E7%BC%A9%E6%94%BE%E6%95%88%E6%9E%9C.gif"></p><h1 id="æŒ‰é”®æ€»ç»“"><a href="#æŒ‰é”®æ€»ç»“" class="headerlink" title="æŒ‰é”®æ€»ç»“"></a>æŒ‰é”®æ€»ç»“</h1><p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€ç³»åˆ—æŒ‰é”®è¾“å…¥ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// é”®ç›˜</span><br>Input.GetKey(KeyCode.W)           <span class="hljs-comment">// æŒ‰ä½ W é”®æŒç»­è¿”å› true, æ¾å¼€åè¿”å› false</span><br>Input.GetKeyDown(KeyCode.W)       <span class="hljs-comment">// æŒ‰ä¸‹ W é”®è¿”å› trueï¼ŒæŒ‰ä½ä¹Ÿåªä¼šè¿”å› false</span><br>Input.GetKeyUp(KeyCode.W)         <span class="hljs-comment">// æŠ¬èµ· W é”®è¿”å› true</span><br><br><span class="hljs-comment">// æ³¨ï¼šè¿™é‡Œçš„ Jump åœ¨ Input Manager é‡Œé»˜è®¤æ˜¯ç©ºæ ¼é”®</span><br>Input.GetButton(<span class="hljs-string">&quot;Jump&quot;</span>)           <span class="hljs-comment">// æŒ‰ä½è‡ªå®šä¹‰çš„é”®æŒç»­è¿”å› true, æ¾å¼€åè¿”å› false</span><br>Input.GetButtonDown(<span class="hljs-string">&quot;Jump&quot;</span>)       <span class="hljs-comment">// æŒ‰ä¸‹è‡ªå®šä¹‰çš„é”®è¿”å› trueï¼ŒæŒ‰ä½ä¹Ÿåªä¼šè¿”å› false</span><br>Input.GetButtonUp(<span class="hljs-string">&quot;Jump&quot;</span>)         <span class="hljs-comment">// æŠ¬èµ·è‡ªå®šä¹‰çš„é”®è¿”å› true</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>)       <span class="hljs-comment">// AD æˆ–å·¦å³æ–¹å‘é”®çš„åç§»é‡ (ä» 0 åˆ° 1 å˜åŒ–ï¼Œæˆ–ä» 0 åˆ° -1 å˜åŒ–)</span><br>Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>)         <span class="hljs-comment">// WS æˆ–ä¸Šä¸‹æ–¹å‘é”®çš„åç§»é‡ (ä» 0 åˆ° 1 å˜åŒ–ï¼Œæˆ–ä» 0 åˆ° -1 å˜åŒ–)</span><br>    <br>Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>)    <span class="hljs-comment">// AD æˆ–å·¦å³æ–¹å‘é”®çš„åç§»é‡ (-1 0 1)</span><br>Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>)      <span class="hljs-comment">// WS æˆ–ä¸Šä¸‹æ–¹å‘é”®çš„åç§»é‡ (-1 0 1)</span><br><br><br><span class="hljs-comment">// é¼ æ ‡ 0: å·¦é”®  1: å³é”®  2: ä¸­é”®</span><br>Input.GetMouseButton(<span class="hljs-number">0</span>)       <span class="hljs-comment">// æŒ‰ä½é¼ æ ‡å·¦é”®</span><br>Input.GetMouseButtonDown(<span class="hljs-number">1</span>)   <span class="hljs-comment">// æŒ‰ä¸‹é¼ æ ‡å³é”®</span><br>Input.GetMouseButtonUp(<span class="hljs-number">2</span>)     <span class="hljs-comment">// æŠ¬èµ·é¼ æ ‡ä¸­é”®</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse X&quot;</span>)      <span class="hljs-comment">// é¼ æ ‡æ°´å¹³æ–¹å‘ç§»åŠ¨çš„åç§»é‡</span><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse Y&quot;</span>)      <span class="hljs-comment">// é¼ æ ‡å‚ç›´æ–¹å‘ç§»åŠ¨çš„åç§»é‡</span><br></code></pre></td></tr></table></figure><p>Input Manager å¯ä»¥è‡ªå®šä¹‰æŒ‰é”®åç§°å’Œå¯¹åº”çš„é”®ç›˜æŒ‰é”®ã€‚</p><p><img src="/../images/unity-basic-2/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%89%E9%94%AE.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D åŸºç¡€ 01 å®‰è£…å…¥é—¨</title>
    <link href="/2024/02/18/unity-basic-1/"/>
    <url>/2024/02/18/unity-basic-1/</url>
    
    <content type="html"><![CDATA[<p>Unity3D åŸºç¡€ç³»åˆ—ï¼ˆç¬¬ä¸€æœŸï¼‰</p><span id="more"></span><h1 id="å®‰è£…ç¼–è¾‘å™¨"><a href="#å®‰è£…ç¼–è¾‘å™¨" class="headerlink" title="å®‰è£…ç¼–è¾‘å™¨"></a>å®‰è£…ç¼–è¾‘å™¨</h1><p>Unity ä¸­æ–‡å®˜ç½‘ï¼š<a href="https://unity.cn/releases">https://unity.cn/releases</a></p><p>åœ¨å®˜ç½‘æ‰¾åˆ°æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬ï¼Œç‚¹å‡»<kbd>ä»Unity Hubä¸‹è½½</kbd></p><p><img src="/../images/unity-basic-1/%E5%AE%89%E8%A3%85hub.png"></p><p>å¦‚æœç”µè„‘ä¸Šæ²¡æœ‰å®‰è£… hubï¼Œå°±éœ€è¦å…ˆå®‰è£…å¥½ hubï¼Œå†ç‚¹å‡»ä¸Šå›¾çš„æŒ‰é’®ï¼Œhub ä¼šå¼¹çª—å®‰è£…å¯¹åº”çš„ç¼–è¾‘å™¨ç‰ˆæœ¬ã€‚</p><p>å¦‚æœéœ€è¦æ‰“åŒ…åˆ°å®‰å“æ‰‹æœºï¼Œåˆ™éœ€è¦å®‰è£… Android Build Support æ¨¡å—ã€‚éœ€è¦å…¶ä»–å¹³å°å°±å‹¾é€‰å¯¹åº”çš„æ¨¡å—ã€‚</p><p>å¦‚æœåªéœ€è¦æ‰“åŒ…åˆ° Windows å¹³å°ï¼Œå¯ä»¥ä¸ç”¨å‹¾é€‰æ¨¡å—ï¼Œé»˜è®¤æ˜¯å¯ä»¥æ‰“åŒ… Windows ç¨‹åºçš„ã€‚</p><p><img src="/../images/unity-basic-1/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97.png"></p><h1 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h1><p>å®‰è£…å®Œæˆä¹‹åï¼Œåœ¨ hub ç•Œé¢ç‚¹å‡»å³ä¸Šè§’çš„<kbd>New project</kbd>åˆ›å»ºé¡¹ç›®ã€‚</p><p><img src="/../images/unity-basic-1/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png"></p><p>é»˜è®¤æ˜¯ 3D é¡¹ç›®æ¨¡æ¿ï¼Œä¿®æ”¹ä¸€ä¸‹ Project nameï¼ˆé¡¹ç›®åç§°ï¼‰å’Œ Locationï¼ˆæœ¬åœ°æ–‡ä»¶å¤¹å­˜æ”¾ä½ç½®ï¼‰ï¼Œç‚¹å‡»å³ä¸‹è§’çš„<kbd>Create project</kbd>æŒ‰é’®å¼€å§‹åˆ›å»ºæ–°é¡¹ç›®ã€‚</p><p><img src="/../images/unity-basic-1/%E6%96%B0%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF.png"></p><p>é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥åœ¨å³ä¸Šè§’çš„ä¸‹æ‹‰åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„çª—å£å¸ƒå±€ã€‚</p><p><img src="/../images/unity-basic-1/%E4%BF%AE%E6%94%B9%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80.png"></p><p>å³é”®ç‚¹å‡»çª—å£çš„æ ‡ç­¾æ ï¼Œè¿˜å¯ä»¥é€‰æ‹©å•åˆ—æˆ–åŒåˆ—çš„å¸ƒå±€ã€‚</p><p><img src="/../images/unity-basic-1/%E4%BF%AE%E6%94%B9%E5%B0%8F%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80.png"></p><h1 id="è®¤è¯†çª—å£"><a href="#è®¤è¯†çª—å£" class="headerlink" title="è®¤è¯†çª—å£"></a>è®¤è¯†çª—å£</h1><p>ä¸»è¦çš„çª—å£æœ‰</p><ul><li>Sceneï¼ˆç¼–è¾‘åœºæ™¯ï¼‰</li><li>Gameï¼ˆè¿è¡Œæ¸¸æˆï¼‰</li><li>Inspectorï¼ˆç»„ä»¶å±æ€§ï¼‰</li><li>Hierarchyï¼ˆç‰©ä½“å±‚çº§ï¼‰</li><li>Projectï¼ˆé¡¹ç›®èµ„æºï¼‰</li><li>Consoleï¼ˆè°ƒè¯•è¾“å‡ºï¼‰</li></ul><p>è¿™å…­ä¸ªåŸºæœ¬çš„çª—å£å¯ä»¥åœ¨ Window èœå•é‡Œé¢æ‰¾åˆ°å¹¶æ‰“å¼€ã€‚</p><p><img src="/../images/unity-basic-1/%E6%89%93%E5%BC%80%E8%B0%83%E8%AF%95%E7%AA%97%E5%8F%A3.png"></p><p>é€šå¸¸ä¼šåœ¨ Hierarchy çª—å£ç©ºç™½å¤„ï¼Œå³é”®å•å‡»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª Cube ç«‹æ–¹ä½“æˆ–è€…å…¶ä»–ç‰©ä½“ã€‚</p><p><img src="/../images/unity-basic-1/%E5%88%9B%E5%BB%BA%E7%AB%8B%E6%96%B9%E4%BD%93.png"></p><p>Project çª—å£ï¼Œåˆ™æ˜¯å³é”®å•å‡» Assets æ–‡ä»¶å¤¹ï¼Œå±•å¼€ Create èœå•ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šé€‰é¡¹ï¼Œç”¨äºåˆ›å»º unity å†…ç½®èµ„æºã€‚</p><ul><li>Folderï¼ˆåˆ›å»ºæ–‡ä»¶å¤¹ï¼‰</li><li>C# Scriptï¼ˆåˆ›å»º C# è„šæœ¬ï¼‰</li><li>Sceneï¼ˆåˆ›å»ºåœºæ™¯ï¼‰</li><li>Materialï¼ˆåˆ›å»ºæè´¨ï¼‰</li><li>Animator Controllerï¼ˆåˆ›å»ºåŠ¨ç”»æ§åˆ¶å™¨ï¼‰</li><li>Animationï¼ˆåˆ›å»ºåŠ¨ç”»ç‰‡æ®µï¼‰</li></ul><p><img src="/../images/unity-basic-1/%E5%88%9B%E5%BB%BA%E8%B5%84%E6%BA%90.png"></p><p>éœ€è¦å¯¼å…¥å¤–éƒ¨èµ„æºæ—¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°†èµ„æºæ‹–åˆ° Assets æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p><img src="/../images/unity-basic-1/%E5%AF%BC%E5%85%A5%E5%9B%BE%E7%89%87.png"></p><p>ç„¶åé€‰ä¸­å¯¼å…¥åçš„å›¾ç‰‡ï¼Œå¯ä»¥åœ¨ Inspector çª—å£çœ‹åˆ°å›¾ç‰‡èµ„æºçš„ä¸€äº›å±æ€§è®¾ç½®ï¼Œé€šå¸¸ä¼šæŠŠå›¾ç‰‡çš„ Texture Type æ”¹æˆ Sprite ç±»å‹ï¼Œç”¨äº 2D Sprite å’Œ UI å›¾ç‰‡ï¼Œæœ€åç‚¹å‡»ä¸‹æ–¹çš„ Apply æŒ‰é’®ç¡®è®¤ä¿®æ”¹ã€‚</p><p><img src="/../images/unity-basic-1/%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E7%B1%BB%E5%9E%8B.png"></p><p>åœ¨ Hierarchy çª—å£ç©ºç™½å¤„ï¼Œå³é”®å•å‡»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª Image å›¾ç‰‡ï¼Œä¿®æ”¹å®ƒçš„ Source Image å±æ€§ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„å°åœ†åœˆæŒ‰é’®ï¼Œé€‰æ‹©åˆšåˆšå¯¼å…¥çš„å›¾ç‰‡ï¼Œæˆ–è€…ç›´æ¥æŠŠå›¾ç‰‡æ‹–æ‹½åˆ° Source Image å¤„ã€‚</p><p>ç‚¹å‡» Set Native Size æŒ‰é’®ï¼Œå¯ä»¥è®©å›¾ç‰‡è‡ªåŠ¨è®¾ç½®æˆå›¾ç‰‡æºæœ¬èº«çš„å®½åº¦å’Œé«˜åº¦ï¼Œå…·ä½“æ•°å€¼ä¹Ÿå¯ä»¥åœ¨å³ä¸Šè§’çš„ Rect Transform ç»„ä»¶å±æ€§é‡Œè°ƒæ•´ã€‚</p><p>æ­¤æ—¶å°±å¯ä»¥åœ¨ Scene çª—å£çœ‹åˆ°å¯¼å…¥çš„å›¾ç‰‡äº†ã€‚</p><p>Scene çª—å£æœ‰ä¸ª 2D æŒ‰é’®ï¼Œå¯ä»¥åˆ‡æ¢æˆ 2D å¹³é¢è§†è§’ã€‚</p><p><img src="/../images/unity-basic-1/UI%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87.png"></p><p>ç‚¹å‡»é¡¶éƒ¨çš„æ’­æ”¾æŒ‰é’®ï¼Œå¯ä»¥è¿è¡Œæ¸¸æˆï¼ŒæŸ¥çœ‹æ¸¸æˆè¿è¡Œæ•ˆæœã€‚æ­¤æ—¶ä¼šè‡ªåŠ¨è·³è½¬åˆ° Game çª—å£ã€‚</p><p>Game çª—å£å¯ä»¥è®¾ç½®æ¸¸æˆè¿è¡Œçš„å±å¹•åˆ†è¾¨ç‡å°ºå¯¸ï¼Œç‚¹å‡»ä¸‹æ‹‰èœå•æœ€ä¸‹æ–¹çš„ + å·ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„åˆ†è¾¨ç‡å°ºå¯¸ã€‚</p><p><img src="/../images/unity-basic-1/%E8%BF%90%E8%A1%8C%E6%B8%B8%E6%88%8F.png"></p><p>æ¯ä¸ªçª—å£çš„ä½ç½®ä¹Ÿæ˜¯å¯ä»¥è‡ªè¡Œè°ƒæ•´çš„ï¼Œä¾‹å¦‚ï¼Œç‚¹å‡» Console çª—å£çš„æ ‡ç­¾ï¼ŒæŒ‰ä½é¼ æ ‡å·¦é”®ï¼Œæ‹–åŠ¨åˆ° Project æ ‡ç­¾æ—è¾¹ï¼Œå°±å¯ä»¥è®©è¿™ä¸¤ä¸ªçª—å£å…±ç”¨ä¸€ä¸ªåŒºåŸŸï¼Œç‚¹å‡»çª—å£æ ‡ç­¾çš„æ—¶å€™ä¼šåˆ‡æ¢çª—å£æ˜¾ç¤ºã€‚</p><p>Console çª—å£æ˜¯è¿è¡Œæ¸¸æˆæ—¶ï¼Œæ˜¾ç¤ºä»£ç è„šæœ¬è¾“å‡ºçš„ä¸€äº›è°ƒè¯•ä¿¡æ¯ï¼Œç›®å‰è¿˜æ²¡æœ‰å†™ä»£ç è¾“å‡ºä¿¡æ¯ï¼Œæ‰€ä»¥è¿™ä¸ªçª—å£å°±æ˜¯ç©ºç™½çš„ã€‚</p><p><img src="/../images/unity-basic-1/%E7%A7%BB%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%A0%87%E7%AD%BE.png"></p><h1 id="æ’ä»¶ç®¡ç†"><a href="#æ’ä»¶ç®¡ç†" class="headerlink" title="æ’ä»¶ç®¡ç†"></a>æ’ä»¶ç®¡ç†</h1><p>åœ¨ Window èœå•ï¼Œæ‰¾åˆ° Package Managerï¼Œæ‰“å¼€æ’ä»¶åŒ…ç®¡ç†çª—å£ã€‚</p><p>Packages: Unity Registry è¡¨ç¤ºæœ‰ç»è¿‡ unity æ³¨å†Œè®¤è¯è¿‡çš„æ’ä»¶ï¼Œæ­¤å¤„å¯ä»¥é€‰æ‹©å…¶ä»–ç±»å‹çš„ç­›é€‰æ¡ä»¶ã€‚</p><p>å³ä¸Šè§’çš„æœç´¢æ¡†å¯ä»¥å¿«é€Ÿæœç´¢åˆ°éœ€è¦çš„æ’ä»¶ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ Install æŒ‰é’®å®‰è£…æ’ä»¶ã€‚</p><p><img src="/../images/unity-basic-1/%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86.png"></p><p>Packages: In Project å¯ä»¥æŸ¥çœ‹å½“å‰é¡¹ç›®é‡Œå·²å®‰è£…çš„æ‰€æœ‰æ’ä»¶ï¼Œå¯ä»¥å¯¹é€‰ä¸­çš„æ’ä»¶è¿›è¡Œå‡çº§æˆ–è€…ç§»é™¤ã€‚</p><p><img src="/../images/unity-basic-1/%E5%8D%87%E7%BA%A7%E6%88%96%E5%88%A0%E9%99%A4%E6%8F%92%E4%BB%B6.png"></p><h1 id="æ‰“åŒ…é¡¹ç›®"><a href="#æ‰“åŒ…é¡¹ç›®" class="headerlink" title="æ‰“åŒ…é¡¹ç›®"></a>æ‰“åŒ…é¡¹ç›®</h1><p>ç‚¹å‡»èœå•æ çš„ File -&gt; Build Settingsï¼Œç‚¹å‡» Add Open Scenes æŠŠå½“å‰æ‰“å¼€çš„åœºæ™¯æ·»åŠ åˆ°æ‰“åŒ…åˆ—è¡¨ä¸­ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œä» Assets æ–‡ä»¶å¤¹ä¸­æ‹–æ‹½éœ€è¦æ‰“åŒ…çš„åœºæ™¯ï¼Œæœ‰å‹¾é€‰çš„åœºæ™¯ä¼šè¢«æ‰“åŒ…ï¼Œå»æ‰å‹¾é€‰å°±ä¸ä¼šè¢«æ‰“åŒ…ã€‚</p><p>Platform å¯ä»¥é€‰æ‹©è¦æ‰“åŒ…çš„ç›®æ ‡å¹³å°ï¼Œé»˜è®¤æ˜¯ Windowsï¼Œå¦‚æœéœ€è¦æ‰“åŒ…åˆ°å…¶ä»–å¹³å°ï¼Œå°±éœ€è¦å®‰è£…å¯¹åº”çš„æ¨¡å—ã€‚</p><p>æœ€åç‚¹å‡» Build æŒ‰é’®ï¼Œé€‰æ‹©ä¸€ä¸ªå­˜æ”¾çš„ä½ç½®ï¼Œè¿›è¡Œæ‰“åŒ…ã€‚</p><p><img src="/../images/unity-basic-1/%E6%89%93%E5%8C%85%E8%AE%BE%E7%BD%AE.png"></p><p>Player Settings å¯ä»¥ä¿®æ”¹ä¸€äº›æ‰“åŒ…å‚æ•°ï¼Œä¾‹å¦‚å…¬å¸åç§°ã€é¡¹ç›®åç§°ã€ç‰ˆæœ¬å·ã€å›¾æ ‡ç­‰ç­‰ã€‚</p><p><img src="/../images/unity-basic-1/%E6%89%93%E5%8C%85%E5%8F%82%E6%95%B0.png"></p><p>æ‰“åŒ…å®Œæˆåï¼Œå¦‚æœæ˜¯ Windows å¹³å°ï¼Œå¯ä»¥åŒå‡» .exe æ–‡ä»¶è¿è¡Œæ¸¸æˆã€‚</p><p>æ‰“å¼€æ¸¸æˆåï¼Œé»˜è®¤æ˜¯å…¨å±çš„ï¼Œæ²¡æœ‰é€€å‡ºæ¸¸æˆæŒ‰é’®ï¼Œå¯ä»¥ç›´æ¥æŒ‰ Alt + F4 å¿«æ·é”®å…³é—­æ¸¸æˆã€‚</p><p><img src="/../images/unity-basic-1/%E8%BF%90%E8%A1%8C%E6%89%93%E5%8C%85%E5%90%8E%E7%9A%84%E6%B8%B8%E6%88%8F.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 07 æŠ½è±¡æ¥å£</title>
    <link href="/2024/02/12/csharp-basic-7/"/>
    <url>/2024/02/12/csharp-basic-7/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬ä¸ƒæœŸ å®Œç»“ï¼‰ã€‚</p><span id="more"></span><h1 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h1><p>æŠ½è±¡ç±»æ˜¯æœªå®Œå…¨å®ç°é€»è¾‘çš„ç±»ï¼Œä¸“é—¨ä½œä¸ºåŸºç±»æ¥ä½¿ç”¨ï¼Œå°†å…·ä½“é€»è¾‘æ¨è¿Ÿåˆ°åˆé€‚çš„æ´¾ç”Ÿç±»å»å®ç°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“ç±» FlyObjectï¼ŒåŒ…å«ä¸€ä¸ªè™šæ–¹æ³• Flyï¼Œå®ƒå¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œæ­¤æ—¶æ–¹æ³•ä½“å†…æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰éœ€è¦å®ç°çš„é€»è¾‘ã€‚</p><p>ç”±å®ƒè¡ç”Ÿå‡ºä¸¤ä¸ªå…·ä½“ç±»ï¼ŒBird å’Œ Planeï¼Œå®ƒä»¬éƒ½é‡å†™äº† Fly æ–¹æ³•ï¼Œå¹¶ä¸”åŠ ä¸Šäº†å…·ä½“é€»è¾‘ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bird</span> : <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;å°é¸Ÿåœ¨é£è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Plane</span> : <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;é£æœºåœ¨é£è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        FlyObject bird = <span class="hljs-keyword">new</span> Bird();<br>        bird.Fly();<br>        <span class="hljs-comment">// å°é¸Ÿåœ¨é£è¡Œ</span><br><br>        FlyObject plane = <span class="hljs-keyword">new</span> Plane();<br>        plane.Fly();<br>        <span class="hljs-comment">// é£æœºåœ¨é£è¡Œ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºåŸºç±» FlyObject çš„ Fly æ–¹æ³•å¹¶æ²¡æœ‰å…·ä½“å®ç°é€»è¾‘ï¼Œåªæ˜¯ä¸€ä¸ªç©ºçš„æ–¹æ³•ï¼Œæ­¤æ—¶å¯ä»¥å°†åŸºç±»çš„ Fly æ–¹æ³•æ”¹æˆä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¹¶å»æ‰æ–¹æ³•ä½“ã€‚</p><p>å› ä¸ºåŒ…å«äº†æŠ½è±¡æ–¹æ³•ï¼ŒFlyObject ä¹Ÿéœ€è¦åŠ ä¸Š abstract å˜æˆä¸€ä¸ªæŠ½è±¡ç±»ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œéœ€è¦æœ‰æ´¾ç”Ÿç±»ç»§æ‰¿å®ƒï¼Œé€šè¿‡æ´¾ç”Ÿç±»å®ä¾‹åŒ–ã€‚</p><p>ç»§æ‰¿äº†æŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»ï¼Œå¿…é¡»é€šè¿‡é‡å†™ï¼Œå®ç°æŠ½è±¡æ–¹æ³•ã€‚</p><h1 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h1><p>æ¥å£æ˜¯å®Œå…¨æœªå®ç°é€»è¾‘çš„â€œç±»â€ï¼Œåªæœ‰æ–¹æ³•æˆå‘˜ã€‚</p><p>å’ŒæŠ½è±¡ç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œéœ€è¦æœ‰å…¶ä»–ç±»å»å®ç°æ¥å£ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Bird</span> : <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;å°é¸Ÿåœ¨é£è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Plane</span> : <span class="hljs-title">IFlyObject</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Fly</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;é£æœºåœ¨é£è¡Œ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥å£çº¦å®šä»¥ I ä¸ºå¼€å¤´è¿›è¡Œå‘½åï¼Œæ¥å£å†…å®šä¹‰çš„æ–¹æ³•æˆå‘˜å¿…é¡»æ˜¯ public çš„ï¼Œå¯ä»¥çœç•¥ä¸å†™ã€‚</p><p>å®ç°æ¥å£çš„ç±»ï¼Œå¿…é¡»åŒ…å«æ¥å£å†…å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•æˆå‘˜ï¼Œå¹¶ä¸”ä¸éœ€è¦å†™ overrideã€‚</p><p>ä½¿ç”¨æ—¶</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        IFlyObject bird = <span class="hljs-keyword">new</span> Bird();<br>        bird.Fly();<br><br>        IFlyObject plane = <span class="hljs-keyword">new</span> Plane();<br>        plane.Fly();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å’ŒæŠ½è±¡ç±»ä¸åŒçš„æ˜¯ï¼ŒæŠ½è±¡ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªï¼Œæ¥å£å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 06 å§”æ‰˜äº‹ä»¶</title>
    <link href="/2024/02/04/csharp-basic-6/"/>
    <url>/2024/02/04/csharp-basic-6/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬å…­æœŸï¼‰ã€‚</p><span id="more"></span><h1 id="å§”æ‰˜"><a href="#å§”æ‰˜" class="headerlink" title="å§”æ‰˜"></a>å§”æ‰˜</h1><p>å§”æ‰˜æ˜¯ä¸€ä¸ªç±»ï¼Œå¯ä»¥è¢«å®ä¾‹åŒ–ï¼ŒåŒ…è£…ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œç›¸å½“äºä¸€ä¸ªæ–¹æ³•çš„å®¹å™¨ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å…¶ä»–æ–¹æ³•ã€‚</p><h3 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h3><p>æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å†…ï¼Œæœ‰ä¸€ä¸ªå§”æ‰˜å‚æ•°ï¼Œæ–¹æ³•ä½“ä¼šè°ƒç”¨è¿™ä¸ªå§”æ‰˜å‚æ•°ã€‚</p><p>è€Œå§”æ‰˜å‚æ•°åŒ…è£…çš„æ˜¯ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Œåˆ™ç”±å¤–éƒ¨ä¼ å…¥çš„æ–¹æ³•å†³å®šã€‚</p><p>ç›¸å½“äºä¸€ä¸ªå¡«ç©ºé¢˜ï¼Œå€ŸåŠ©å¤–éƒ¨çš„æ–¹æ³•äº§ç”Ÿç»“æœã€‚</p><p>æ¨¡æ¿å§”æ‰˜æ–¹æ³•é€šå¸¸åœ¨ä»£ç çš„ä¸­é—´éƒ¨åˆ†ï¼Œæœ‰è¿”å›å€¼ã€‚</p><p>å®šä¹‰ä¸€ä¸ª Person ç±»ï¼ŒåŒ…å«äººç‰©çš„åå­—å’Œæ­£åœ¨æ€è€ƒçš„å†…å®¹ã€‚</p><p>åŒæ—¶ï¼Œå®šä¹‰ä¸€ä¸ª Answer ç±»ï¼Œç”¨æ¥åŒ…è£…äººç‰©ç­”é¢˜çš„å†…å®¹ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> person;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> result;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">string</span> thinking</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        person = name;<br>        result = thinking;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Answer <span class="hljs-title">Think</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = <span class="hljs-keyword">new</span> Answer();<br>        answer.person = person;<br>        answer.result = result;<br>        <span class="hljs-keyword">return</span> answer;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Answer</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> person;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><p>å†å®šä¹‰ä¸€ä¸ª Exam ç±»ï¼Œè¾“å‡ºç­”é¢˜äººå’Œç­”æ¡ˆã€‚</p><p>å…¶ä¸­ï¼Œæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå§”æ‰˜ï¼ŒFunc ç±»æ˜¯ C# å†…éƒ¨å®šä¹‰å¥½çš„ä¸€ä¸ªå§”æ‰˜ç±»ï¼Œå®ƒå¯ä»¥æœ‰è¿”å›å€¼ï¼Œå°–æ‹¬å· &lt; &gt; å†…å¡«å…¥è¿”å›å€¼çš„ç±»å‹ã€‚</p><p>åœ¨æ–¹æ³•å†…éƒ¨è°ƒç”¨å§”æ‰˜ï¼Œå¾—åˆ° Answer ç±»å‹çš„è¿”å›å€¼ï¼ŒæŠŠå†…å®¹æ‰“å°è¾“å‡ºã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Exam</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AnswerQuestion</span>(<span class="hljs-params">Func&lt;Answer&gt; solution</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = solution.Invoke();<br>        Console.WriteLine(<span class="hljs-string">$&quot;ç­”é¢˜äººï¼š<span class="hljs-subst">&#123;answer.person&#125;</span> ç­”æ¡ˆï¼š<span class="hljs-subst">&#123;answer.result&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å®šä¹‰ Func å˜é‡ï¼Œnew ä¸€ä¸ªå§”æ‰˜å®ä¾‹ï¼Œå°†ä¸€ä¸ªå®ä¾‹çš„æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p><p>ç„¶åæŠŠå§”æ‰˜å˜é‡ä¼ ç»™ AnswerQuestion æ–¹æ³•ï¼ŒåŒä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ¥æ”¶ä¸åŒçš„å§”æ‰˜å˜é‡ï¼Œå®ç°åŠŸèƒ½çš„å¤ç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Exam exam = <span class="hljs-keyword">new</span> Exam();<br>        Person person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-string">&quot;é¸¡æ’&quot;</span>);<br>        Person person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;å°çº¢&quot;</span>, <span class="hljs-string">&quot;å¥¶èŒ¶&quot;</span>);<br><br>        Func&lt;Answer&gt; func1 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person1.Think);<br>        Func&lt;Answer&gt; func2 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person2.Think);<br><br>        exam.AnswerQuestion(func1);<br>        exam.AnswerQuestion(func2);<br>        <br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°æ˜ ç­”æ¡ˆï¼šé¸¡æ’</span><br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°çº¢ ç­”æ¡ˆï¼šå¥¶èŒ¶</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å›è°ƒ"><a href="#å›è°ƒ" class="headerlink" title="å›è°ƒ"></a>å›è°ƒ</h3><p>åŒæ ·ï¼Œæ–¹æ³•çš„å‚æ•°åˆ—è¡¨å†…ï¼Œæœ‰ä¸€ä¸ªå§”æ‰˜å‚æ•°ã€‚</p><p>åœ¨æ‰§è¡Œå®Œä¸€ç³»åˆ—ä»£ç ä¹‹åï¼Œè°ƒç”¨å¤–éƒ¨æ–¹æ³•è¿›è¡Œå›è°ƒã€‚</p><p>å›è°ƒå§”æ‰˜æ–¹æ³•é€šå¸¸åœ¨ä»£ç çš„æœ«å°¾éƒ¨åˆ†ï¼Œæ— è¿”å›å€¼ã€‚</p><p>ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œæ·»åŠ ä¸€ä¸ª Logger ç±»ï¼Œç”¨äºç­”é¢˜åçš„ä¿¡æ¯æç¤ºã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Logger</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> message;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Logger</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">this</span>.message = message;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Log</span>(<span class="hljs-params"></span>) </span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰©å±• AnswerQuestion çš„å‚æ•°åˆ—è¡¨ï¼Œå¹¶åœ¨æ‰“å°ç­”é¢˜ç»“æœä¹‹åè¿›è¡Œå›è°ƒã€‚</p><p>Action ç±»ä¹Ÿæ˜¯ C# å†…éƒ¨å®šä¹‰å¥½çš„ä¸€ä¸ªå§”æ‰˜ç±»ï¼Œæ— è¿”å›å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Exam</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AnswerQuestion</span>(<span class="hljs-params">Func&lt;Answer&gt; solution, Action callback</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Answer answer = solution.Invoke();<br>        Console.WriteLine(<span class="hljs-string">$&quot;ç­”é¢˜äººï¼š<span class="hljs-subst">&#123;answer.person&#125;</span> ç­”æ¡ˆï¼š<span class="hljs-subst">&#123;answer.result&#125;</span>&quot;</span>);<br>        callback.Invoke();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ä¾‹åŒ– Logger ç±»ï¼Œå¡«å…¥ä¿¡æ¯æç¤ºã€‚</p><p>å¯ä»¥å®šä¹‰ Action å˜é‡å¹¶å®ä¾‹åŒ–ï¼Œä¼ å…¥ Logger ç±»çš„ Log æ–¹æ³•ã€‚</p><p>ç„¶åæŠŠ action å˜é‡ä½œä¸ºå‚æ•°ï¼Œä½œä¸ºå›è°ƒæ–¹æ³•ä¼ å…¥ AnswerQuestion æ–¹æ³•ä¸­ã€‚</p><p>ç°åœ¨æ¯æ¬¡æ‰“å°ç­”é¢˜ç»“æœä¹‹åï¼Œéƒ½ä¼šæœ‰ç­”é¢˜æˆåŠŸçš„ä¿¡æ¯æç¤ºã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Exam exam = <span class="hljs-keyword">new</span> Exam();<br>        Person person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-string">&quot;é¸¡æ’&quot;</span>);<br>        Person person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;å°çº¢&quot;</span>, <span class="hljs-string">&quot;å¥¶èŒ¶&quot;</span>);<br><br>        Func&lt;Answer&gt; func1 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person1.Think);<br>        Func&lt;Answer&gt; func2 = <span class="hljs-keyword">new</span> Func&lt;Answer&gt;(person2.Think);<br><br>        Logger logger = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;ç­”é¢˜æˆåŠŸ&quot;</span>);<br>        Action action = <span class="hljs-keyword">new</span> Action(logger.Log);<br><br>        exam.AnswerQuestion(func1, action);<br>        exam.AnswerQuestion(func2, action);<br>        <br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°æ˜ ç­”æ¡ˆï¼šé¸¡æ’</span><br>        <span class="hljs-comment">// ç­”é¢˜æˆåŠŸ</span><br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°çº¢ ç­”æ¡ˆï¼šå¥¶èŒ¶</span><br>        <span class="hljs-comment">// ç­”é¢˜æˆåŠŸ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¤šæ’­"><a href="#å¤šæ’­" class="headerlink" title="å¤šæ’­"></a>å¤šæ’­</h3><p>å§”æ‰˜æ˜¯ä¸€å¯¹å¤šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åŒ…è£…å¤šä¸ªæ–¹æ³•ï¼Œå½“å§”æ‰˜è¢«è°ƒç”¨æ—¶ï¼Œä¼šæœ‰å¤šä¸ªæ–¹æ³•è¢«åŒæ—¶è°ƒç”¨ï¼Œè°ƒç”¨çš„é¡ºåºåˆ™æ˜¯æ–¹æ³•è¢«å¡«å…¥å§”æ‰˜å˜é‡æ—¶çš„é¡ºåºã€‚</p><p>åœ¨ä¸Šè¿°çš„ä¾‹å­è¿›è¡Œæ‰©å±•ï¼Œå†å®ä¾‹åŒ–ä¸€ä¸ª Loggerï¼Œä¼šæç¤ºã€è¯·ç»§ç»­ç­”é¢˜ã€‘ï¼Œå¹¶ä¸”ä½¿ç”¨ +&#x3D; ç¬¦å·ç»™ action å˜é‡å†æ·»åŠ ä¸€ä¸ªæ–¹æ³•å¼•ç”¨ã€‚</p><p>æ­¤æ—¶å›è°ƒæ–¹æ³•ä¼šè¾“å‡ºä¸¤è¡Œã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br><br>        Logger logger1 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;ç­”é¢˜æˆåŠŸ&quot;</span>);<br>        Logger logger2 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;è¯·ç»§ç»­ç­”é¢˜&quot;</span>);<br>        Action action = <span class="hljs-keyword">new</span> Action(logger1.Log);<br>        action += logger2.Log;<br><br>        exam.AnswerQuestion(func1, action);<br>        exam.AnswerQuestion(func2, action);<br>        <br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°æ˜ ç­”æ¡ˆï¼šé¸¡æ’</span><br>        <span class="hljs-comment">// ç­”é¢˜æˆåŠŸ</span><br>        <span class="hljs-comment">// è¯·ç»§ç»­ç­”é¢˜</span><br>        <span class="hljs-comment">// ç­”é¢˜äººï¼šå°çº¢ ç­”æ¡ˆï¼šå¥¶èŒ¶</span><br>        <span class="hljs-comment">// ç­”é¢˜æˆåŠŸ</span><br>        <span class="hljs-comment">// è¯·ç»§ç»­ç­”é¢˜</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h1><p>äº‹ä»¶æ˜¯åœ¨å§”æ‰˜çš„åŸºç¡€ä¸Šï¼Œå¯¹å§”æ‰˜çš„è®¿é—®è¿›è¡Œé™åˆ¶ï¼Œäº‹ä»¶çš„å³ä¾§åªèƒ½æ˜¯ +&#x3D; æˆ– -&#x3D; ç¬¦å·ï¼Œä¸èƒ½è¢« &#x3D; ç¬¦å·ç›´æ¥è¦†ç›–ï¼Œä¹Ÿä¸èƒ½è¢« .Invoke è°ƒç”¨ã€‚</p><p>æ¥ç€ä¸Šè¿°çš„ä¾‹å­ï¼Œè‡ªå®šä¹‰ä¸€ä¸ª SubmitEventHandler å§”æ‰˜ï¼Œå’Œä¸€ä¸ª SubmitSystem ç±»ã€‚</p><p>SubmitSystem ç±»åŒ…å«ä¸€ä¸ªå§”æ‰˜å­—æ®µï¼Œå’Œä¸€ä¸ªäº‹ä»¶ã€‚</p><p>äº‹ä»¶å¿…é¡»åŒæ—¶åŒ…å« add å’Œ removeï¼Œå¯¹å§”æ‰˜å­—æ®µè¿›è¡Œæ·»åŠ æ–¹æ³•å’Œç§»é™¤æ–¹æ³•ã€‚</p><p>åŒæ—¶ï¼Œå› ä¸ºå§”æ‰˜å­—æ®µæ˜¯ç§æœ‰çš„ï¼Œå¤–éƒ¨æ— æ³•è°ƒç”¨ï¼Œäº‹ä»¶ä¹Ÿä¸èƒ½è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æä¾›ä¸€ä¸ªæ–¹æ³• TriggerSubmit å¯¹å§”æ‰˜å­—æ®µè¿›è¡Œè°ƒç”¨ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœ submitEventHandler æ²¡æœ‰åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œåˆ™ä¼šæ˜¯ nullï¼Œéœ€è¦è¿›è¡Œåˆ¤ç©ºã€‚</p></blockquote><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SubmitEventHandler</span>(<span class="hljs-params"></span>)</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SubmitSystem</span><br>&#123;<br>    <span class="hljs-keyword">private</span> SubmitEventHandler submitEventHandler;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> SubmitEventHandler OnSubmit<br>    &#123;<br>        <span class="hljs-keyword">add</span><br>        &#123;<br>            submitEventHandler += <span class="hljs-keyword">value</span>;<br>        &#125;<br>        <span class="hljs-keyword">remove</span><br>        &#123;<br>            submitEventHandler -= <span class="hljs-keyword">value</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TriggerSubmit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (submitEventHandler != <span class="hljs-literal">null</span>)<br>        &#123;<br>            submitEventHandler.Invoke();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œç»§ç»­æ·»åŠ ä¸»ç¨‹åºçš„é€»è¾‘ã€‚</p><p>å®ä¾‹åŒ– submitSystem å˜é‡ï¼Œç»™å®ƒçš„äº‹ä»¶æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶é€šè¿‡ TriggerSubmit è°ƒç”¨è¢«äº‹ä»¶ä¿æŠ¤èµ·æ¥çš„ç§æœ‰å§”æ‰˜ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// ...</span><br>        <br>        Logger logger3 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;å°æ˜æäº¤äº†è¯•å·&quot;</span>);<br>        Logger logger4 = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">&quot;å°çº¢æäº¤äº†è¯•å·&quot;</span>);<br>        <br>        SubmitSystem submitSystem = <span class="hljs-keyword">new</span> SubmitSystem();<br>        submitSystem.OnSubmit += logger3.Log;<br>        submitSystem.OnSubmit += logger4.Log;<br>        <br>        submitSystem.TriggerSubmit();<br>        <br>        <span class="hljs-comment">// ...</span><br>        <span class="hljs-comment">// å°æ˜æäº¤äº†è¯•å·</span><br>        <span class="hljs-comment">// å°çº¢æäº¤äº†è¯•å·</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°äº‹ä»¶çš„å®šä¹‰æ˜¯ä¸€ä¸ªå®Œæ•´å®šä¹‰ï¼Œå®é™…ä¸Šå¯ä»¥ç®€åŒ–ã€‚</p><p>å¯ä»¥ç›´æ¥å®šä¹‰äº‹ä»¶ï¼Œæ— éœ€å®šä¹‰ç§æœ‰å§”æ‰˜å­—æ®µï¼Œä¹Ÿæ— éœ€ä¸ºäº‹ä»¶æ·»åŠ  add å’Œ remove è®¿é—®å™¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SubmitEventHandler</span>(<span class="hljs-params"></span>)</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SubmitSystem</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> SubmitEventHandler OnSubmit;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TriggerSubmit</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (OnSubmit != <span class="hljs-literal">null</span>)<br>        &#123;<br>            OnSubmit.Invoke();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œäº‹ä»¶çš„å³ä¾§ä¼¼ä¹å¯ä»¥è¢« .Invoke è°ƒç”¨ï¼Œè¿˜å¯ä»¥åˆ¤ç©ºã€‚</p><p>å®é™…ä¸Šï¼Œå› ä¸º C# ä¼šåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆç§æœ‰å§”æ‰˜å­—æ®µï¼Œä½†æ˜¯ç¼–å†™ä»£ç æ—¶å¹¶æ²¡æœ‰ç§æœ‰å§”æ‰˜å­—æ®µï¼Œæ‰€ä»¥ä¸å¾—ä¸ä½¿ç”¨äº‹ä»¶æ¥è§¦å‘è°ƒç”¨ï¼Œä¸è¿‡å¤–éƒ¨å¯¹äº‹ä»¶çš„è®¿é—®ä¾ç„¶åªèƒ½æ˜¯ +&#x3D; å’Œ -&#x3D; ç¬¦å·ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 05 æ³›å‹é›†åˆ</title>
    <link href="/2024/01/28/csharp-basic-5/"/>
    <url>/2024/01/28/csharp-basic-5/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬äº”æœŸï¼‰ã€‚</p><span id="more"></span><h1 id="æ³›å‹é›†åˆ"><a href="#æ³›å‹é›†åˆ" class="headerlink" title="æ³›å‹é›†åˆ"></a>æ³›å‹é›†åˆ</h1><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p>æ³›å‹æ˜¯ä¸€ä¸ªç±»å‹å ä½ç¬¦ï¼Œåœ¨å®šä¹‰æ³›å‹ç±»çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä½¿ç”¨ä¸€ä¸ªå­—æ¯ T å ä½ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå…·ä½“çš„ç±»å‹æ›¿ä»£ Tã€‚</p><p>ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªæ³›å‹ç±»ï¼Œåé¢çš„å°–æ‹¬å· &lt; &gt; å…ˆå¡« Tï¼Œå¹¶ä¸”ä½¿ç”¨ T å£°æ˜ä¸€ä¸ªå˜é‡ myTypeï¼Œåœ¨æ„é€ å‡½æ•°ç»™ myType èµ‹å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyGeneric</span>&lt;<span class="hljs-title">T</span>&gt;<br>&#123;<br>    <span class="hljs-keyword">public</span> T myType;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyGeneric</span>(<span class="hljs-params">T type</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        myType = type;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶ï¼Œéœ€è¦å¡«å…¥å…·ä½“çš„ç±»å‹æ›¿ä»£ Tã€‚</p><p>é€šè¿‡ myType å­—æ®µçš„ GetType æ–¹æ³•ï¼ŒæŸ¥çœ‹å®ƒçš„æ•°æ®ç±»å‹ã€‚</p><p>å¡«å…¥ int çš„æ³›å‹å®ä¾‹ï¼Œå®ƒçš„ myType å­—æ®µçš„ç±»å‹æ˜¯ System.Int32ã€‚</p><p>å¡«å…¥ string çš„æ³›å‹å®ä¾‹ï¼Œå®ƒçš„ myType å­—æ®µçš„ç±»å‹æ˜¯ System.Stringã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        MyGeneric&lt;<span class="hljs-built_in">int</span>&gt; myGenericInt = <span class="hljs-keyword">new</span> MyGeneric&lt;<span class="hljs-built_in">int</span>&gt;(<span class="hljs-number">1</span>);<br>        Console.WriteLine(myGenericInt.myType.GetType());<br>        <span class="hljs-comment">// System.Int32</span><br><br>        MyGeneric&lt;<span class="hljs-built_in">string</span>&gt; myGenericString = <span class="hljs-keyword">new</span> MyGeneric&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br>        Console.WriteLine(myGenericString.myType.GetType());<br>        <span class="hljs-comment">// System.String</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæ³›å‹ç±»å°±å¯ä»¥é€šè¿‡å¡«å…¥ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œæå‡ä»£ç çš„å¤ç”¨æ€§ï¼Œæ— éœ€å°†ç±»å‹å†™æ­»ã€‚</p><h2 id="åˆ—è¡¨ï¼ˆListï¼‰"><a href="#åˆ—è¡¨ï¼ˆListï¼‰" class="headerlink" title="åˆ—è¡¨ï¼ˆListï¼‰"></a>åˆ—è¡¨ï¼ˆListï¼‰</h2><p>åˆ—è¡¨æ˜¯æ•°ç»„çš„æ‰©å±•ï¼Œå†…éƒ¨å®ç°æ˜¯ä»¥æ•°ç»„ä¸ºåŸºç¡€çš„ã€‚</p><p>åˆ—è¡¨çš„ä½¿ç”¨æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><ol><li>æ·»åŠ å…ƒç´ ï¼ˆAddï¼‰</li><li>è®¿é—®å…ƒç´ ï¼ˆ[]ï¼‰</li><li>åˆ é™¤å…ƒç´ ï¼ˆRemoveï¼‰</li><li>æ¸…ç©ºåˆ—è¡¨ï¼ˆClearï¼‰</li></ol><p>ä½¿ç”¨ List å£°æ˜ä¸€ä¸ªåˆ—è¡¨ï¼Œå°–æ‹¬å· &lt; &gt; å†…å¡«å…¥æ•°æ®ç±»å‹ã€‚</p><p>ä½¿ç”¨ Add æ·»åŠ ä¸‰ä¸ªå…ƒç´ ï¼Œå¹¶ç”¨ for å¾ªç¯è®¿é—®æ¯ä¸ªå…ƒç´ ï¼Œæ‰“å°è¾“å‡ºã€‚å…¶ä¸­ï¼ŒCount å¯ä»¥è·å–åˆ—è¡¨çš„é•¿åº¦ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.Count; i++)<br>        &#123;<br>            Console.WriteLine(nums[i]);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 1</span><br>        <span class="hljs-comment">// 2</span><br>        <span class="hljs-comment">// 3</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Remove åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œåç»­çš„å…ƒç´ éƒ½ä¼šå¾€å‰ç§»åŠ¨ï¼Œåˆ—è¡¨é•¿åº¦å‡å°‘ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        nums.Remove(<span class="hljs-number">2</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.Count; i++)<br>        &#123;<br>            Console.WriteLine(nums[i]);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 1</span><br>        <span class="hljs-comment">// 3</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Clear æ¸…ç©ºåˆ—è¡¨ã€‚</p><p>æ‰“å°åˆ—è¡¨çš„é•¿åº¦ï¼Œè¾“å‡º 0ï¼Œè¡¨ç¤ºåˆ—è¡¨ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ äº†ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        List&lt;<span class="hljs-built_in">int</span>&gt; nums = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br>        nums.Add(<span class="hljs-number">1</span>);<br>        nums.Add(<span class="hljs-number">2</span>);<br>        nums.Add(<span class="hljs-number">3</span>);<br>        Console.WriteLine(nums.Count);<br>        <span class="hljs-comment">// 3</span><br>        <br>        nums.Clear();<br>        Console.WriteLine(nums.Count);<br>        <span class="hljs-comment">// 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­—å…¸ï¼ˆDictionaryï¼‰"><a href="#å­—å…¸ï¼ˆDictionaryï¼‰" class="headerlink" title="å­—å…¸ï¼ˆDictionaryï¼‰"></a>å­—å…¸ï¼ˆDictionaryï¼‰</h2><p>å­—å…¸å­˜å‚¨ä¸€ç³»åˆ—é”®å€¼å¯¹ï¼Œé€šè¿‡ key å€¼ï¼Œå¯ä»¥å¿«é€Ÿè·å–åˆ°å¯¹åº”çš„ value å€¼ã€‚</p><p>å’Œåˆ—è¡¨ç±»ä¼¼ï¼Œå­—å…¸çš„ä½¿ç”¨æ–¹æ³•ä¸»è¦æœ‰ï¼š</p><ol><li>æ·»åŠ å…ƒç´ ï¼ˆAddï¼‰</li><li>è®¿é—®å…ƒç´ ï¼ˆ[]ï¼‰</li><li>åˆ é™¤å…ƒç´ ï¼ˆRemoveï¼‰</li><li>åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ª key å€¼ï¼ˆContainsKeyï¼‰</li><li>æ¸…ç©ºåˆ—è¡¨ï¼ˆClearï¼‰</li></ol><p>ä½¿ç”¨ Dictionary å£°æ˜ä¸€ä¸ªå­—å…¸ï¼Œå°–æ‹¬å· &lt; &gt; å†…å¡«å…¥ä¸¤ä¸ªæ•°æ®ç±»å‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ keyï¼Œç¬¬äºŒä¸ªæ˜¯ valueã€‚</p><p>ä½¿ç”¨ Add æ·»åŠ ä¸‰ä¸ªå…ƒç´ ï¼Œè®°å½•æ¯ä¸ªå­¦ç”Ÿçš„åˆ†æ•°ã€‚</p><p>é€šè¿‡ [] è®¿é—®å­—å…¸å…ƒç´ ï¼Œå¡«å…¥ key å€¼è·å– value å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°çº¢&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°å¤&quot;</span>, <span class="hljs-number">100</span>);<br><br>        Console.WriteLine(<span class="hljs-string">&quot;å°æ˜çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°æ˜&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;å°çº¢çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°çº¢&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;å°å¤çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°å¤&quot;</span>]);<br>        <br>        <span class="hljs-comment">// å°æ˜çš„åˆ†æ•°ï¼š60</span><br>        <span class="hljs-comment">// å°çº¢çš„åˆ†æ•°ï¼š80</span><br>        <span class="hljs-comment">// å°å¤çš„åˆ†æ•°ï¼š100</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Remove åˆ é™¤æŸä¸ª key å¯¹åº”çš„å…ƒç´ ä¹‹åï¼Œå†æ¬¡ä½¿ç”¨æ­¤ key å€¼å»è®¿é—®å­—å…¸ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p><p>æ‰€ä»¥é€šå¸¸è¦åˆ¤æ–­å­—å…¸æ˜¯å¦åŒ…å«æŸä¸ª key å€¼ï¼Œæ‰èƒ½å»è®¿é—®ã€‚</p><p>ä¾‹å¦‚ï¼Œä» scores å­—å…¸ä¸­åˆ é™¤å°çº¢çš„æ•°æ®ï¼Œå¦‚æœç›´æ¥è®¿é—® scores[â€œå°çº¢â€] ä¼šæŠ¥é”™ï¼Œéœ€è¦ä½¿ç”¨ ContainsKey åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦åŒ…å«å°çº¢çš„æ•°æ®ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°çº¢&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°å¤&quot;</span>, <span class="hljs-number">100</span>);<br><br>        Console.WriteLine(<span class="hljs-string">&quot;å°æ˜çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°æ˜&quot;</span>]);<br>        Console.WriteLine(<span class="hljs-string">&quot;å°å¤çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°å¤&quot;</span>]);<br><br>        scores.Remove(<span class="hljs-string">&quot;å°çº¢&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (scores.ContainsKey(<span class="hljs-string">&quot;å°çº¢&quot;</span>))<br>        &#123;<br>            Console.WriteLine(<span class="hljs-string">&quot;å°çº¢çš„åˆ†æ•°ï¼š&quot;</span> + scores[<span class="hljs-string">&quot;å°çº¢&quot;</span>]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Clear æ¸…ç©ºå­—å…¸ã€‚</p><p>å­—å…¸åŒæ ·æœ‰ Count å±æ€§ï¼Œè·å–å­—å…¸çš„é”®å€¼å¯¹çš„ä¸ªæ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; scores = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();<br>        scores.Add(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-number">60</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°çº¢&quot;</span>, <span class="hljs-number">80</span>);<br>        scores.Add(<span class="hljs-string">&quot;å°å¤&quot;</span>, <span class="hljs-number">100</span>);<br>        Console.WriteLine(scores.Count);<br>        <span class="hljs-comment">// 3</span><br>        <br>        scores.Clear();<br>        Console.WriteLine(scores.Count);<br>        <span class="hljs-comment">// 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 04 å€¼å’Œå¼•ç”¨</title>
    <link href="/2024/01/21/csharp-basic-4/"/>
    <url>/2024/01/21/csharp-basic-4/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬å››æœŸï¼‰ã€‚</p><span id="more"></span><h1 id="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹"><a href="#å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹" class="headerlink" title="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹"></a>å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹</h1><p>å€¼ç±»å‹ï¼Œç›´æ¥å­˜å‚¨æ•°æ®ã€‚</p><p>å¼•ç”¨ç±»å‹ï¼Œå­˜å‚¨å†…å­˜åœ°å€ï¼Œé€šè¿‡åœ°å€æ‰¾åˆ°æ•°æ®ã€‚</p><p>å€¼ç±»å‹ï¼šintï¼Œfloatï¼Œdoubleï¼Œboolï¼Œchar ç­‰ç­‰ã€‚</p><p>å¼•ç”¨ç±»å‹ï¼šstringï¼Œclass ç­‰ç­‰ã€‚</p><p>å€¼ç±»å‹èµ‹å€¼æ—¶ï¼Œä¼šåˆ›å»ºå€¼çš„å‰¯æœ¬ã€‚</p><p>ä¿®æ”¹å€¼ç±»å‹å˜é‡ï¼Œä¸ä¼šå½±å“å…¶ä»–å€¼ç±»å‹å˜é‡ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> x = <span class="hljs-number">1</span>;<br>        <span class="hljs-built_in">int</span> y = x;<br>        x = <span class="hljs-number">0</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;x = &quot;</span> + x);<br>        Console.WriteLine(<span class="hljs-string">&quot;y = &quot;</span> + y);<br>        <br>        <span class="hljs-comment">// x = 0</span><br>        <span class="hljs-comment">// y = 1</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¼•ç”¨ç±»å‹ï¼Œä¸¤ä¸ªå˜é‡å¼•ç”¨çš„å¯¹è±¡ç›¸åŒæ—¶ï¼Œå¯¹å…¶ä¸­ä¸€ä¸ªå˜é‡å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œå¦ä¸€ä¸ªå˜é‡å¼•ç”¨çš„å¯¹è±¡ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>å› ä¸ºè¿™ä¸¤ä¸ªå˜é‡åªæ˜¯å­˜å‚¨äº†ä¸€ä¸ªåœ°å€ï¼ŒæŒ‡å‘åŒä¸€å—æ•°æ®åŒºåŸŸã€‚</p><p>å°±å¥½æ¯”ï¼Œä¸¤ä¸ªäººä½¿ç”¨åŒä¸€ä¸ªé“¶è¡Œè´¦æˆ·ï¼Œä¸€ä¸ªäººå–èµ°äº†å…¨éƒ¨çš„é’±ï¼Œå¦ä¸€ä¸ªäººå°±æ²¡é’±äº†ã€‚</p><p>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªè´¦æˆ·ç±»ï¼ŒåŒ…å«ä½™é¢å­—æ®µï¼Œå­˜é’±ã€å–é’±ã€æŸ¥è¯¢ä½™é¢çš„æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Account</span><br>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">float</span> money;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Save</span>(<span class="hljs-params"><span class="hljs-built_in">float</span> money</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (money &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">this</span>.money += money;<br>            Console.WriteLine(<span class="hljs-string">&quot;å­˜å…¥ &quot;</span> + money);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span>(<span class="hljs-params"><span class="hljs-built_in">float</span> money</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">if</span> (money &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.money &gt;= money)<br>            &#123;<br>                <span class="hljs-keyword">this</span>.money -= money;<br>                Console.WriteLine(<span class="hljs-string">&quot;å–å‡º &quot;</span> + money);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                Console.WriteLine(<span class="hljs-string">&quot;ä½™é¢ä¸è¶³&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Query</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;ä½™é¢ &quot;</span> + money);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨åˆ›å»ºä¸€ä¸ªè´¦æˆ·å¯¹è±¡ï¼Œèµ‹å€¼ç»™ myAccountï¼Œæ¥ç€å†èµ‹å€¼ç»™ herAccountï¼Œä¸¤ä¸ª Account å˜é‡å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><p>åœ¨æˆ‘çš„è´¦æˆ·å­˜å…¥ 10 å…ƒï¼Œä»å¥¹çš„è´¦æˆ·å–å‡º 10 å…ƒï¼Œæˆ‘çš„è´¦æˆ·ä½™é¢ 0 å…ƒã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Account myAccount = <span class="hljs-keyword">new</span> Account();    <span class="hljs-comment">// æˆ‘çš„è´¦æˆ·</span><br>        Account herAccount = myAccount;       <span class="hljs-comment">// å¥¹çš„è´¦æˆ·</span><br><br>        myAccount.Save(<span class="hljs-number">10f</span>);    <span class="hljs-comment">// æˆ‘çš„è´¦æˆ·å­˜å…¥ 10 å…ƒ</span><br>        herAccount.Draw(<span class="hljs-number">10f</span>);   <span class="hljs-comment">// å¥¹çš„è´¦æˆ·å–å‡º 10 å…ƒ</span><br>        myAccount.Query();      <span class="hljs-comment">// æˆ‘çš„è´¦æˆ·ä½™é¢  0 å…ƒ</span><br>        <br>        <span class="hljs-comment">// å­˜å…¥ 10</span><br>        <span class="hljs-comment">// å–å‡º 10</span><br>        <span class="hljs-comment">// ä½™é¢ 0</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="è£…ç®±å’Œæ‹†ç®±"><a href="#è£…ç®±å’Œæ‹†ç®±" class="headerlink" title="è£…ç®±å’Œæ‹†ç®±"></a>è£…ç®±å’Œæ‹†ç®±</h1><p>è£…ç®±ï¼ŒæŠŠå€¼ç±»å‹è½¬æ¢æˆå¼•ç”¨ç±»å‹ã€‚</p><p>æ‹†ç®±ï¼ŒæŠŠå¼•ç”¨ç±»å‹è½¬æ¢æˆå€¼ç±»å‹ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>;<br>        <br>        <span class="hljs-built_in">object</span> obj = i;     <span class="hljs-comment">// è£…ç®±</span><br>        <br>        <span class="hljs-built_in">int</span> j = (<span class="hljs-built_in">int</span>)obj;   <span class="hljs-comment">// æ‹†ç®±</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ä¸ºäº†é€šç”¨ï¼Œä¼šæŠŠæ–¹æ³•çš„å‚æ•°ç±»å‹å®šä¹‰ä¸º objectï¼Œå½“ä¼ å…¥ä¸€ä¸ªå€¼ç±»å‹å‚æ•°æ—¶ï¼Œå°±ä¼šéœ€è¦è£…ç®±ã€‚</p><p>ç”±äºè£…ç®±ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œå¯¹è¿è¡Œæ•ˆç‡æœ‰ä¸€å®šå½±å“ï¼Œä¸€èˆ¬æ˜¯å°½é‡é¿å…è£…ç®±å’Œæ‹†ç®±çš„ã€‚</p><p>è£…ç®±å’Œæ‹†ç®±æ—¶ï¼Œå¯¹ä¸¤ä¸ªå˜é‡çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œæ˜¯äº’ä¸å½±å“çš„ã€‚</p><h1 id="ref-å’Œ-out"><a href="#ref-å’Œ-out" class="headerlink" title="ref å’Œ out"></a>ref å’Œ out</h1><p>é€šå¸¸ï¼Œå½“æ–¹æ³•çš„å‚æ•°æ˜¯å€¼ç±»å‹æ—¶ï¼Œå¤–éƒ¨ä¼ å…¥çš„å˜é‡å’Œæ–¹æ³•ä½“å†…çš„å‚æ•°å˜é‡ï¼Œæ˜¯åˆ†åˆ«ç‹¬ç«‹çš„ï¼Œå¯¹æ–¹æ³•ä½“å†…çš„å‚æ•°å˜é‡ä¿®æ”¹æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å˜é‡ã€‚</p><p>è¿™æ˜¯å› ä¸ºæ–¹æ³•å†…çš„å½¢å‚ï¼Œåªæ˜¯å¤–éƒ¨ä¼ å…¥çš„å®å‚çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>        Add(i);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        <br>        <span class="hljs-comment">// i = 0</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦å®ç°å½“ i ä¼ å…¥ Add æ–¹æ³•å†…ï¼Œæ‰§è¡Œä¹‹å i çš„æ•°å€¼å¢åŠ ï¼Œåˆ™éœ€è¦ä½¿ç”¨ ref å…³é”®å­—ã€‚</p><p>æ–¹æ³•çš„å‚æ•°ç±»å‹å‰é¢è¦åŠ ä¸ª refï¼Œè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å‰é¢ä¹Ÿè¦åŠ ä¸ª refã€‚</p><p>æ­¤æ—¶ï¼Œi å˜æˆäº†æŒ‰å¼•ç”¨ä¼ å‚ï¼Œåœ¨æ–¹æ³•å†…å¯¹ i è¿›è¡Œä¿®æ”¹ï¼ŒåŒæ—¶ä¹Ÿä¼šå½±å“åˆ°å¤–éƒ¨çš„ iã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br>        Add(<span class="hljs-keyword">ref</span> i);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        <br>        <span class="hljs-comment">// i = 1</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">int</span> i</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤–éƒ¨çš„ i éœ€è¦èµ‹åˆå§‹å€¼ï¼Œå¦‚æœæ²¡æœ‰èµ‹å€¼ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p><p>ref çš„ç‰¹ç‚¹æ˜¯æœ‰è¿›æœ‰å‡ºï¼Œéœ€è¦å…ˆèµ‹å€¼ï¼Œå†ä¼ å…¥ï¼Œæœ‰è¾“å‡ºã€‚</p><p>out ä¹Ÿæ˜¯æŒ‰å¼•ç”¨ä¼ å‚ï¼Œä¸è¿‡ out åªæ˜¯ç”¨æ¥è¾“å‡ºå¤šä¸ªå‚æ•°ã€‚</p><p>out çš„ç‰¹ç‚¹æ˜¯åªå‡ºä¸è¿›ï¼Œä¸éœ€è¦å…ˆèµ‹å€¼ï¼Œæ–¹æ³•ä¼šæŠŠå†…éƒ¨çš„æ•°å€¼è¾“å‡ºåˆ°å¤–éƒ¨çš„å˜é‡ï¼Œå³ä½¿èµ‹åˆå§‹å€¼ï¼Œä¹Ÿä¼šè¢«è¾“å‡ºçš„æ•°å€¼è¦†ç›–ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-built_in">int</span> i;<br>        <span class="hljs-built_in">int</span> j = <span class="hljs-number">3</span>;<br>        Add(<span class="hljs-keyword">out</span> i, <span class="hljs-keyword">out</span> j);<br>        Console.WriteLine(<span class="hljs-string">&quot;i = &quot;</span> + i);<br>        Console.WriteLine(<span class="hljs-string">&quot;j = &quot;</span> + j);<br>        <br>        <span class="hljs-comment">// i = 1</span><br>        <span class="hljs-comment">// j = 2</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> i, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> j</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        i = <span class="hljs-number">1</span>;<br>        j = <span class="hljs-number">2</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 03 é¢å‘å¯¹è±¡</title>
    <link href="/2024/01/14/csharp-basic-3/"/>
    <url>/2024/01/14/csharp-basic-3/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬ä¸‰æœŸï¼‰ã€‚</p><span id="more"></span><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>éšè—å¯¹è±¡çš„ä¿¡æ¯ï¼Œç•™å‡ºè®¿é—®çš„æ¥å£ï¼Œä¿æŠ¤å­—æ®µä¸è¢«éšæ„ä¿®æ”¹ã€‚</p><p>C# çš„å±æ€§å°±æ˜¯ç”¨æ¥å®ç°å°è£…çš„ã€‚</p><p>ä¾‹å¦‚ï¼ŒHero ç±»æœ‰ä¸€ä¸ªåªè¯»çš„ç­‰çº§å±æ€§ï¼Œåªèƒ½è·å–åˆ°è‹±é›„ç­‰çº§ï¼Œè€Œä¸èƒ½ç›´æ¥å¯¹ç­‰çº§è¿›è¡Œä¿®æ”¹ã€‚</p><p>å¦‚æœè¦å¯¹è‹±é›„ç­‰çº§è¿›è¡Œä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡ç»™ç»éªŒå±æ€§èµ‹å€¼ï¼Œåœ¨ç±»çš„å†…éƒ¨è¿›è¡Œç»éªŒå’Œç­‰çº§çš„è½¬æ¢ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-comment">// è‹±é›„ç­‰çº§ åªè¯»</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> level;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Level<br>    &#123;<br>        <span class="hljs-keyword">get</span> &#123; <span class="hljs-keyword">return</span> level; &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ç»éªŒç­‰çº§è½¬æ¢</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> factor = <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Experience<br>    &#123;<br>        <span class="hljs-keyword">get</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> level * factor;<br>        &#125;<br>        <span class="hljs-keyword">set</span><br>        &#123;<br>            level = Math.Abs(<span class="hljs-keyword">value</span> / factor);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºè‹±é›„å¯¹è±¡ï¼Œç»™ä»–å¢åŠ ç»éªŒå€¼ï¼ŒæŸ¥çœ‹ä»–çš„ç­‰çº§ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        hero.Experience = <span class="hljs-number">10000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;è‹±é›„ç­‰çº§ï¼š&quot;</span> + hero.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;è‹±é›„ç»éªŒï¼š&quot;</span> + hero.Experience);<br>        <br>        <span class="hljs-comment">// è‹±é›„ç­‰çº§ï¼š10</span><br>        <span class="hljs-comment">// è‹±é›„ç»éªŒï¼š10000</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼Œå®ƒå°±æ‹¥æœ‰äº†å¦ä¸€ä¸ªç±»çš„æ‰€æœ‰å­—æ®µã€å±æ€§å’Œæ–¹æ³•ã€‚</p><p>ç»§æ‰¿çš„ç±»å«å­ç±»ï¼ˆæˆ–æ´¾ç”Ÿç±»ï¼‰ï¼Œè¢«ç»§æ‰¿çš„ç±»å«çˆ¶ç±»ï¼ˆæˆ–åŸºç±»ï¼‰ã€‚</p><p>ç»§æ‰¿å¯ä»¥å‡å°‘ä»£ç é‡å¤ï¼Œæå‡ä»£ç çš„å¤ç”¨æ€§ã€‚</p><p>ç°åœ¨å‡ºç°äº†ä¸¤ä½è‹±é›„ï¼Œä»–ä»¬éƒ½ç»§æ‰¿äº† Hero ç±»ï¼Œå¹¶ä¸”ç±»çš„å†…éƒ¨æ²¡æœ‰å®šä¹‰ä»»ä½•æˆå‘˜å­—æ®µã€å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> å‰‘åœ£</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Blademaster</span> : <span class="hljs-title">Hero</span><br>&#123;<br><br>&#125;<br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> å¤§é­”æ³•å¸ˆ</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Archmage</span> : <span class="hljs-title">Hero</span><br>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ†åˆ«åˆ›å»ºå‰‘åœ£å’Œå¤§é­”æ³•å¸ˆå¯¹è±¡ï¼Œç»™ä»–ä»¬å¢åŠ ä¸åŒçš„ç»éªŒå€¼ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„ç­‰çº§ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Blademaster blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        blademaster.Experience = <span class="hljs-number">10000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;å‰‘åœ£ç­‰çº§ï¼š&quot;</span> + blademaster.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;å‰‘åœ£ç»éªŒï¼š&quot;</span> + blademaster.Experience);<br><br>        Archmage archmage = <span class="hljs-keyword">new</span> Archmage();<br>        archmage.Experience = <span class="hljs-number">20000</span>;<br>        Console.WriteLine(<span class="hljs-string">&quot;å¤§é­”æ³•å¸ˆç­‰çº§ï¼š&quot;</span> + archmage.Level);<br>        Console.WriteLine(<span class="hljs-string">&quot;å¤§é­”æ³•å¸ˆç»éªŒï¼š&quot;</span> + archmage.Experience);<br>        <br>        <span class="hljs-comment">// å‰‘åœ£ç­‰çº§ï¼š10</span><br>        <span class="hljs-comment">// å‰‘åœ£ç»éªŒï¼š10000</span><br>        <span class="hljs-comment">// å¤§é­”æ³•å¸ˆç­‰çº§ï¼š20</span><br>        <span class="hljs-comment">// å¤§é­”æ³•å¸ˆç»éªŒï¼š20000</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><p>å¤šæ€æ˜¯åœ¨ç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½¿ç”¨çˆ¶ç±»çš„ç±»å‹å£°æ˜å˜é‡ï¼Œå¼•ç”¨å­ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œä»è€Œäº§ç”Ÿç±»å‹ä»£å·®ï¼Œè°ƒç”¨åŒæ ·çš„æ–¹æ³•ï¼Œå´äº§ç”Ÿä¸ä¸€æ ·çš„è¡Œä¸ºã€‚</p><p>ç°åœ¨ç»™è‹±é›„å¢åŠ ä¸€ä¸ªæ”»å‡»çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ä½¿ç”¨ virtual ä¿®é¥°ç¬¦ï¼Œæ˜¯ä¸€ä¸ªè™šæ–¹æ³•ï¼Œè¡¨ç¤ºå¯ä»¥è¢«é‡å†™ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> è‹±é›„</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;è‹±é›„æ”»å‡»&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®©å‰‘åœ£å’Œå¤§é­”æ³•å¸ˆé‡å†™çˆ¶ç±»çš„æ”»å‡»æ–¹æ³•ï¼Œé‡å†™æ–¹æ³•éœ€è¦ä½¿ç”¨ override ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> å‰‘åœ£</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Blademaster</span> : <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;è‡´å‘½ä¸€å‡»&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> å¤§é­”æ³•å¸ˆ</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Archmage</span> : <span class="hljs-title">Hero</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;æš´é£é›ª&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå£°æ˜ Hero ç±»å‹çš„å˜é‡ï¼Œå¼•ç”¨ä¸åŒç±»å‹çš„å®ä¾‹å¯¹è±¡ï¼Œè°ƒç”¨ Attackã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-comment">// æ™®é€šè‹±é›„</span><br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        hero.Attack();<br><br>        <span class="hljs-comment">// å‰‘åœ£</span><br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        blademaster.Attack();<br><br>        <span class="hljs-comment">// å¤§é­”æ³•å¸ˆ</span><br>        Hero archmage = <span class="hljs-keyword">new</span> Archmage();<br>        archmage.Attack();<br>        <br>        <span class="hljs-comment">// è‹±é›„æ”»å‡»</span><br>        <span class="hljs-comment">// è‡´å‘½ä¸€å‡»</span><br>        <span class="hljs-comment">// æš´é£é›ª</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¹‹æ‰€ä»¥å¯ä»¥ä½¿ç”¨ Hero å˜é‡å¼•ç”¨ Blademaster å’Œ Archmage å¯¹è±¡ï¼Œæ˜¯å› ä¸ºä»–ä»¬ç»§æ‰¿äº† Hero ç±»ã€‚</p><p>å¯ä»¥è¯´å‰‘åœ£æ˜¯ä¸€ä¸ªè‹±é›„ï¼Œä½†åè¿‡æ¥ä¸è¡Œï¼Œè‹±é›„ä¸ä¸€å®šæ˜¯å‰‘åœ£ã€‚</p><blockquote><p>å¦‚æœåè¿‡æ¥å†™ï¼ŒBlademaster blademaster &#x3D; new Hero(); åˆ™ä¼šæŠ¥é”™ï¼šæ— æ³•å°†ç±»å‹ Hero éšå¼è½¬æ¢ä¸º Blademasterã€‚</p><p>å¦‚æœè¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè¿è¡Œèµ·æ¥ä¹Ÿä¼šæŠ¥é”™ï¼Œæ— æ³•å°† Hero å¼ºåˆ¶è½¬æ¢ä¸º Blademasterï¼šUnhandled exception. System.InvalidCastException: Unable to cast object of type â€˜Heroâ€™ to type â€˜Blademasterâ€™.</p></blockquote><p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„ç»Ÿä¸€ç®¡ç†ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero archmage = <span class="hljs-keyword">new</span> Archmage();<br><br>        Hero[] heros = &#123; hero, blademaster, archmage &#125;;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; heros.Length; i++)<br>        &#123;<br>            heros[i].Attack();<br>        &#125;<br>        <br>        <span class="hljs-comment">// è‹±é›„æ”»å‡»</span><br>        <span class="hljs-comment">// è‡´å‘½ä¸€å‡»</span><br>        <span class="hljs-comment">// æš´é£é›ª</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šæ€é‡å†™æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åœ¨ç»§æ‰¿é“¾ä¸Šè°ƒç”¨è¯¥æ–¹æ³•çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p><p>ç°åœ¨æ–°å¢ä¸€ä¸ªç‹‚æš´å‰‘åœ£ï¼Œç»§æ‰¿äº†å‰‘åœ£ï¼Œä¹Ÿé‡å†™äº† Attack æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> ç‹‚æš´å‰‘åœ£</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BerserkBlademaster</span> : <span class="hljs-title">Blademaster</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;å‰‘åˆƒé£æš´&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è·Ÿå¾€å¸¸ä¸€æ ·å£°æ˜ Hero ç±»å‹å˜é‡ï¼Œå¼•ç”¨å­ç±»å®ä¾‹ï¼Œè°ƒç”¨æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero berserkBlademaster = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        <br>        hero.Attack();<br>        blademaster.Attack();<br>        berserkBlademaster.Attack();<br>        <br>        <span class="hljs-comment">// è‹±é›„æ”»å‡»</span><br>        <span class="hljs-comment">// è‡´å‘½ä¸€å‡»</span><br>        <span class="hljs-comment">// å‰‘åˆƒé£æš´</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœç‹‚æš´å‰‘åœ£æ²¡æœ‰é‡å†™ Attack æ–¹æ³•ï¼Œè€Œæ˜¯å£°æ˜äº†ä¸€ä¸ªç›¸åŒåå­—çš„æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> ç‹‚æš´å‰‘åœ£</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BerserkBlademaster</span> : <span class="hljs-title">Blademaster</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attack</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;å‰‘åˆƒé£æš´&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆç‹‚æš´å‰‘åœ£å¯¹è±¡è¢« Hero ç±»å‹å˜é‡å¼•ç”¨æ—¶ï¼Œè°ƒç”¨ Attack æ–¹æ³•ï¼Œæ­¤æ—¶è¯¥æ–¹æ³•è¢«é‡å†™åçš„æœ€æ–°ç‰ˆæœ¬æ˜¯å‰‘åœ£çš„ Attack æ–¹æ³•ï¼Œä¸ä¼šè¾“å‡ºå‰‘åˆƒé£æš´ï¼Œè€Œæ˜¯è‡´å‘½ä¸€å‡»ã€‚</p><p>é™¤éç”¨ç‹‚æš´å‰‘åœ£æœ¬æ¥çš„ç±»å‹ï¼Œæ‰ä¼šè¾“å‡ºå‰‘åˆƒé£æš´ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Hero hero = <span class="hljs-keyword">new</span> Hero();<br>        Hero blademaster = <span class="hljs-keyword">new</span> Blademaster();<br>        Hero berserkBlademaster = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        <br>        hero.Attack();<br>        blademaster.Attack();<br>        berserkBlademaster.Attack();<br>        <br>        <span class="hljs-comment">// è‹±é›„æ”»å‡»</span><br>        <span class="hljs-comment">// è‡´å‘½ä¸€å‡»</span><br>        <span class="hljs-comment">// è‡´å‘½ä¸€å‡»</span><br>        <br>        BerserkBlademaster berserkBlademaster2 = <span class="hljs-keyword">new</span> BerserkBlademaster();<br>        berserkBlademaster2.Attack();<br>        <br>        <span class="hljs-comment">// å‰‘åˆƒé£æš´</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 02 å±æ€§æ–¹æ³•</title>
    <link href="/2024/01/07/csharp-basic-2/"/>
    <url>/2024/01/07/csharp-basic-2/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬äºŒæœŸï¼‰ã€‚</p><span id="more"></span><h1 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h1><p>ç±»åŒ…å«å­—æ®µã€å±æ€§å’Œæ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚</p><p>å¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</p><h2 id="å­—æ®µå’Œå±æ€§"><a href="#å­—æ®µå’Œå±æ€§" class="headerlink" title="å­—æ®µå’Œå±æ€§"></a>å­—æ®µå’Œå±æ€§</h2><p>å­—æ®µå’Œå±æ€§å®šä¹‰äº†å¯¹è±¡çš„ç‰¹å¾ã€‚</p><p>å£°æ˜ä¸€ä¸ªå­¦ç”Ÿç±»ï¼ŒåŒ…å«è‹¥å¹²ä¸ªå­—æ®µå’Œå±æ€§ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> Gender<br>&#123;<br>    Boy,<br>    Girl<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// å­—æ®µ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> name;    <span class="hljs-comment">// å§“åï¼ˆå…¬å¼€ï¼‰</span><br>    <span class="hljs-keyword">public</span> Gender gender;  <span class="hljs-comment">// æ€§åˆ«ï¼ˆå…¬å¼€ï¼‰</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> age;       <span class="hljs-comment">// å¹´é¾„ï¼ˆç§æœ‰ï¼‰</span><br><br>    <span class="hljs-comment">// å±æ€§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Age<br>    &#123;<br>        <span class="hljs-keyword">get</span> <span class="hljs-comment">// å¯ä»¥è·å–å¹´é¾„å­—æ®µ</span><br>        &#123;<br>            <span class="hljs-keyword">return</span> age;<br>        &#125;<br>        <span class="hljs-keyword">set</span> <span class="hljs-comment">// è®¾ç½®å¹´é¾„å­—æ®µæ—¶ï¼Œå¯ä»¥æ·»åŠ é€»è¾‘åˆ¤æ–­ï¼Œä¾‹å¦‚é™åˆ¶åœ¨ (0, 100) ä¹‹é—´</span><br>        &#123;<br>            <span class="hljs-comment">// value æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå¯¹å±æ€§è¿›è¡Œèµ‹å€¼æ—¶ï¼Œvalue æ˜¯ç­‰å·å³è¾¹çš„å€¼</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">value</span> &lt; <span class="hljs-number">100</span>)<br>            &#123;<br>                age = <span class="hljs-keyword">value</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ä¾‹åŒ–ä¸€ä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œå¯¹å­—æ®µå’Œå±æ€§è¿›è¡Œèµ‹å€¼ï¼Œå¹¶æ‰“å°ç»“æœã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        student.name = <span class="hljs-string">&quot;å°æ˜&quot;</span>;<br>        student.gender = Gender.Boy;<br>        student.Age = <span class="hljs-number">200</span>;<br>        <br>        Console.WriteLine(student.name);    <span class="hljs-comment">// å°æ˜</span><br>        Console.WriteLine(student.gender);  <span class="hljs-comment">// Boy</span><br>        Console.WriteLine(student.Age);     <span class="hljs-comment">// 0ï¼ˆå¯¹ Age å±æ€§èµ‹å€¼æ—¶ï¼Œæ•°å€¼ä¸åœ¨è§„å®šèŒƒå›´å†…ï¼Œage å­—æ®µé»˜è®¤å€¼ä¸º 0ï¼‰</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>æ–¹æ³•å®šä¹‰äº†å¯¹è±¡çš„è¡Œä¸ºï¼Œå¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—çš„é€»è¾‘ã€‚</p><h3 id="æ— å‚æ–¹æ³•"><a href="#æ— å‚æ–¹æ³•" class="headerlink" title="æ— å‚æ–¹æ³•"></a>æ— å‚æ–¹æ³•</h3><p>æ²¡æœ‰å‚æ•°çš„æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œå£°æ˜ä¸€ä¸ª Say æ–¹æ³•ï¼Œæ‰“å°ä¸‰ä¸ªå¥å­ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Say</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;ä½ å¥½ï¼Œæˆ‘å« &quot;</span> + name);<br>        Console.WriteLine(<span class="hljs-string">&quot;æˆ‘æ˜¯ä¸€ä¸ª &quot;</span> + gender);<br>        Console.WriteLine(<span class="hljs-string">&quot;æˆ‘ä»Šå¹´åˆšæ»¡ &quot;</span> + age + <span class="hljs-string">&quot; å²~~~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        student.name = <span class="hljs-string">&quot;å–µå–µçƒ&quot;</span>;<br>        student.gender = Gender.Girl;<br>        student.Age = <span class="hljs-number">18</span>;<br>        <br>        student.Say();<br>        <br>        <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘å« å–µå–µçƒ</span><br>        <span class="hljs-comment">// æˆ‘æ˜¯ä¸€ä¸ª Girl</span><br>        <span class="hljs-comment">// æˆ‘ä»Šå¹´åˆšæ»¡ 18 å²~~~</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æœ‰å‚æ–¹æ³•"><a href="#æœ‰å‚æ–¹æ³•" class="headerlink" title="æœ‰å‚æ–¹æ³•"></a>æœ‰å‚æ–¹æ³•</h3><p>æœ‰å‚æ•°çš„æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œå£°æ˜ä¸€ä¸ª Repeat æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ª string ç±»å‹çš„å‚æ•°ï¼Œæ–¹æ³•ä½“å†…ä¼šå¤è¯»ä¼ å…¥çš„å†…å®¹ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Repeat</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> content</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;æˆ‘å†è¯´ä¸€é &quot;</span> + content);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br><br>        student.Repeat(<span class="hljs-string">&quot;æˆ‘ä»Šå¹´åˆšæ»¡ 18 å²~~~&quot;</span>);<br>        <br>        <span class="hljs-comment">// æˆ‘å†è¯´ä¸€é æˆ‘ä»Šå¹´åˆšæ»¡ 18 å²~~~</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>æ„é€ æ–¹æ³•çš„åç§°å’Œç±»åç›¸åŒã€‚</p><p>å½“ç±»é‡Œé¢æ²¡æœ‰å†™ä»»ä½•æ„é€ æ–¹æ³•æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// æ— å‚æ„é€ æ–¹æ³•ï¼Œä¸å†™ä¹Ÿè¡Œ</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦åœ¨å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œæœ‰ä¸€äº›æ‰§è¡Œé€»è¾‘ï¼Œå°±å¯ä»¥æ˜¾å¼å†™å‡ºæ„é€ æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>Console.WriteLine(<span class="hljs-string">&quot;ä¸€ä¸ªå¯¹è±¡è¢«å®ä¾‹åŒ–äº†&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student();<br>        <br>        <span class="hljs-comment">// ä¸€ä¸ªå¯¹è±¡è¢«å®ä¾‹åŒ–äº†</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæœ‰å‚æ„é€ æ–¹æ³•ã€‚</p><p>å½“å‚æ•°åå’Œå­—æ®µåç›¸åŒæ—¶ï¼Œä¸ºäº†åŒºåˆ†æ˜¯å‚æ•°èµ‹å€¼ç»™å­—æ®µï¼Œå°±éœ€è¦åœ¨ä½¿ç”¨å­—æ®µæ—¶ï¼ŒåŠ ä¸Š thisã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, Gender gender, <span class="hljs-built_in">int</span> age</span>)</span><br><span class="hljs-function"></span>    &#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.gender = gender;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œç§æœ‰å­—æ®µ age å¯ä»¥è¢«ç›´æ¥èµ‹å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;å°æ˜&quot;</span>, Gender.Boy, <span class="hljs-number">10</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ææ„æ–¹æ³•"><a href="#ææ„æ–¹æ³•" class="headerlink" title="ææ„æ–¹æ³•"></a>ææ„æ–¹æ³•</h3><p>å½“å¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ææ„æ–¹æ³•ã€‚</p><p>ææ„æ–¹æ³•ä¹Ÿè·Ÿç±»åç›¸åŒï¼Œå‰é¢è¦åŠ ä¸ª ~ ç¬¦å·ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    ~Student()<br>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;æˆ‘è¢«å›æ”¶äº†å‘œå‘œå‘œ~~~&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ Program ç±»å£°æ˜ä¸€ä¸ªé™æ€æ–¹æ³• CreateStudentï¼Œæ–¹æ³•ä½“å†…å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œå½“æ–¹æ³•è°ƒç”¨ç»“æŸåï¼Œå¯¹è±¡å°±æ²¡æœ‰å¼•ç”¨äº†ã€‚</p><p>æ­¤æ—¶å¯ä»¥è°ƒç”¨ GC.Collect æ–¹æ³•ä¸»åŠ¨å›æ”¶ä¸€æ¬¡åƒåœ¾ï¼Œstudent å¯¹è±¡å°±ä¼šè°ƒç”¨ææ„æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        CreateStudent();<br>        GC.Collect();<br>        <br>        <span class="hljs-comment">// æˆ‘è¢«å›æ”¶äº†å‘œå‘œå‘œ~~~</span><br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CreateStudent</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student student = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;å°æ˜&quot;</span>, Gender.Boy, <span class="hljs-number">10</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h3><p>ä¸ç”¨å®ä¾‹åŒ–å¯¹è±¡å°±èƒ½è°ƒç”¨çš„æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸Šè¿°çš„ CreateStudent æ–¹æ³•ï¼Œå‰é¢æœ‰ä¸ªä¿®é¥°ç¬¦ staticï¼Œè¡¨ç¤ºé™æ€çš„ï¼Œä¸éœ€è¦ new ä¸€ä¸ª Program å¯¹è±¡ï¼Œå°±èƒ½å¤Ÿç›´æ¥è°ƒç”¨ã€‚</p><p>Student ç±»ä¹Ÿå¯ä»¥å£°æ˜ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Introduce</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Console.WriteLine(<span class="hljs-string">&quot;æˆ‘æ˜¯ä¸€ä¸ªå­¦ç”Ÿ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ— éœ€å®ä¾‹åŒ–å¯¹è±¡ï¼Œç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>    &#123;<br>        Student.Introduce();<br>        <br>        <span class="hljs-comment">// æˆ‘æ˜¯ä¸€ä¸ªå­¦ç”Ÿ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C# åŸºç¡€è¯­æ³• 01 å…¥é—¨æ¦‚å¿µ</title>
    <link href="/2024/01/03/csharp-basic-1/"/>
    <url>/2024/01/03/csharp-basic-1/</url>
    
    <content type="html"><![CDATA[<p>ç®€å•å¤ä¹ ä¸€ä¸‹ C# åŸºç¡€è¯­æ³•ï¼ˆç¬¬ä¸€æœŸï¼‰ã€‚</p><span id="more"></span><h1 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h1><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// å•è¡Œæ³¨é‡Š</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * å¤šè¡Œæ³¨é‡Š</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> æ–‡æ¡£æ³¨é‡Šï¼Œä¼šæ˜¾ç¤ºåœ¨ä»£ç æç¤ºæ¡†é‡Œ</span><br><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="è¾“å…¥è¾“å‡º"><a href="#è¾“å…¥è¾“å‡º" class="headerlink" title="è¾“å…¥è¾“å‡º"></a>è¾“å…¥è¾“å‡º</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// æ‰“å°è¾“å‡º</span><br>Console.Write(<span class="hljs-string">&quot;è¾“å‡º&quot;</span>);<br>Console.WriteLine(<span class="hljs-string">&quot;è¾“å‡ºå¹¶æ¢è¡Œ&quot;</span>);<br><br><span class="hljs-comment">// è¯»å–è¾“å…¥</span><br>Console.ReadLine();<br></code></pre></td></tr></table></figure><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><p>åœ¨ C# ä¸­è¢«è§„å®šäº†ç”¨é€”çš„å•è¯ï¼Œå£°æ˜å˜é‡æ—¶ï¼Œå˜é‡åä¸å¯ä¸å…³é”®å­—å†²çªã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">namespace</span> <span class="hljs-comment">// å‘½åç©ºé—´</span><br><span class="hljs-title">using</span>     <span class="hljs-comment">// å¼•å…¥å‘½åç©ºé—´</span><br><span class="hljs-title">class</span>     <span class="hljs-comment">// å£°æ˜ç±»</span><br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">char</span> gender = <span class="hljs-string">&#x27;ç”·&#x27;</span>;      <span class="hljs-comment">// å­—ç¬¦å‹</span><br><span class="hljs-built_in">string</span> name = <span class="hljs-string">&quot;æŸ¯å—&quot;</span>;    <span class="hljs-comment">// å­—ç¬¦ä¸²å‹</span><br><span class="hljs-built_in">int</span> age = <span class="hljs-number">3</span>;            <span class="hljs-comment">// æ•´å‹</span><br><span class="hljs-built_in">float</span> money = <span class="hljs-number">0.1f</span>;     <span class="hljs-comment">// å•ç²¾åº¦æµ®ç‚¹å‹</span><br><span class="hljs-built_in">double</span> salary = <span class="hljs-number">0.1</span>;    <span class="hljs-comment">// åŒç²¾åº¦æµ®ç‚¹å‹</span><br><span class="hljs-built_in">bool</span> hasMoney = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¸ƒå°”å‹</span><br></code></pre></td></tr></table></figure><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><p>å£°æ˜å¹¶èµ‹å€¼ï¼Œä¸å¯ä¿®æ”¹ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> PI = <span class="hljs-number">3.14</span>;<br></code></pre></td></tr></table></figure><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>å£°æ˜æ—¶å¯ä»¥èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰èµ‹å€¼åˆ™ä¼šæœ‰ç›¸åº”ç±»å‹çš„é»˜è®¤å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">double</span> money = <span class="hljs-number">0.1</span>;   <span class="hljs-comment">// åˆå§‹èµ‹å€¼</span><br><span class="hljs-built_in">int</span> num;              <span class="hljs-comment">// é»˜è®¤å€¼ 0</span><br></code></pre></td></tr></table></figure><h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><p>ä½ç²¾åº¦ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢æˆé«˜ç²¾åº¦ç±»å‹</p><p>é«˜ç²¾åº¦ç±»å‹éœ€è¦å¼ºåˆ¶è½¬æ¢æˆä½ç²¾åº¦ç±»å‹ï¼Œå¹¶ä¸”ä¼šä¸¢å¤±éƒ¨åˆ†ç²¾åº¦ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">double</span> i = <span class="hljs-number">2</span>;     <span class="hljs-comment">// è‡ªåŠ¨è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰ï¼Œint è½¬ double</span><br><span class="hljs-built_in">int</span> j = (<span class="hljs-built_in">int</span>)<span class="hljs-number">3.1</span>; <span class="hljs-comment">// å¼ºåˆ¶è½¬æ¢ï¼ˆæ˜¾å¼è½¬æ¢ï¼‰ï¼Œdouble è½¬ intï¼Œ3.1 è¢«è½¬æ¢æˆ 3 å†èµ‹å€¼ç»™ jï¼Œä¸¢å¤±éƒ¨åˆ†ç²¾åº¦ï¼ˆå°æ•°ç‚¹åçš„æ•°å­—ï¼‰</span><br></code></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>æšä¸¾å€¼æ˜¯ä» 0 é€’å¢çš„æ•´æ•°ã€‚</p><p>ä½¿ç”¨æšä¸¾å¯ä»¥é™åˆ¶å˜é‡åªèƒ½ä»æœ‰é™çš„é€‰é¡¹ä¸­å–å€¼ï¼Œé¿å…éšæ„å–å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// å£°æ˜æ—¶</span><br><span class="hljs-built_in">enum</span> Gender <span class="hljs-comment">// æ€§åˆ«åªèƒ½æ˜¯ç”·ã€å¥³</span><br>&#123;<br>    Boy,<br>    Girl<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨æ—¶</span><br>Gender.Boy<br>Gender.Girl<br></code></pre></td></tr></table></figure><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="ä¸€ç»´æ•°ç»„"><a href="#ä¸€ç»´æ•°ç»„" class="headerlink" title="ä¸€ç»´æ•°ç»„"></a>ä¸€ç»´æ•°ç»„</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">string</span>[] students = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">// æ•°ç»„é•¿åº¦ä¸º 3</span><br><br><span class="hljs-comment">// ä¸‰ä¸ªç­‰æ•ˆè¯­å¥</span><br><span class="hljs-built_in">string</span>[] students1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;;  <span class="hljs-comment">// ç›´æ¥èµ‹å€¼</span><br><span class="hljs-built_in">string</span>[] students2 = &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;;               <span class="hljs-comment">// ç›´æ¥èµ‹å€¼</span><br><span class="hljs-built_in">string</span>[] students3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">3</span>] &#123; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span> &#125;; <span class="hljs-comment">// æ•°ç»„é•¿åº¦ä¸º 3ï¼Œå¹¶èµ‹å€¼</span><br><br>Console.WriteLine(students1[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// è¾“å‡º A</span><br></code></pre></td></tr></table></figure><h3 id="äºŒç»´æ•°ç»„"><a href="#äºŒç»´æ•°ç»„" class="headerlink" title="äºŒç»´æ•°ç»„"></a>äºŒç»´æ•°ç»„</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span>[,] scores = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">3</span>, <span class="hljs-number">2</span>] &#123; &#123; <span class="hljs-number">11</span>, <span class="hljs-number">23</span> &#125;, &#123; <span class="hljs-number">25</span>, <span class="hljs-number">44</span> &#125;, &#123; <span class="hljs-number">76</span>, <span class="hljs-number">13</span> &#125; &#125;;  <span class="hljs-comment">// 3 è¡Œ 2 åˆ—</span><br><span class="hljs-comment">// 11 23</span><br><span class="hljs-comment">// 25 44</span><br><span class="hljs-comment">// 76 13</span><br>Console.WriteLine(scores[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>]); <span class="hljs-comment">// å–ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼Œç»“æœ 11</span><br>Console.WriteLine(scores[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]); <span class="hljs-comment">// å–ç¬¬äºŒè¡Œç¬¬äºŒåˆ—ï¼Œç»“æœ 44</span><br></code></pre></td></tr></table></figure><h2 id="æ¡ä»¶åˆ†æ”¯"><a href="#æ¡ä»¶åˆ†æ”¯" class="headerlink" title="æ¡ä»¶åˆ†æ”¯"></a>æ¡ä»¶åˆ†æ”¯</h2><h3 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">bool</span> hasMoney = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">bool</span> hasEnergy = <span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">if</span> (hasMoney)<br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;ä¹°ä¹°ä¹°&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (hasEnergy)<br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;å†²å†²å†²&quot;</span>);<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>    Console.WriteLine(<span class="hljs-string">&quot;å‘å‘†&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// å‘å‘†</span><br></code></pre></td></tr></table></figure><h3 id="switch-è¯­å¥"><a href="#switch-è¯­å¥" class="headerlink" title="switch è¯­å¥"></a>switch è¯­å¥</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">string</span> name = <span class="hljs-string">&quot;å°æ¨±&quot;</span>;<br><br><span class="hljs-keyword">switch</span> (name)<br>&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;å°æ¨±&quot;</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;é­”æ³•æ–&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;çŸ¥ä¸–&quot;</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;æ‘„åƒæœº&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-literal">default</span>:<br>        Console.WriteLine(<span class="hljs-string">&quot;æœªçŸ¥&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// é­”æ³•æ–</span><br></code></pre></td></tr></table></figure><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><h3 id="for-å¾ªç¯"><a href="#for-å¾ªç¯" class="headerlink" title="for å¾ªç¯"></a>for å¾ªç¯</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>&#123;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">3</span>)<br>    &#123;<br>        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡å½“æ¬¡å¾ªç¯</span><br>    &#125;<br>    <span class="hljs-comment">// æ‰“å° i</span><br>    Console.WriteLine(i);<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// 0</span><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">// 2</span><br><span class="hljs-comment">// 4</span><br></code></pre></td></tr></table></figure><h3 id="foreach-å¾ªç¯"><a href="#foreach-å¾ªç¯" class="headerlink" title="foreach å¾ªç¯"></a>foreach å¾ªç¯</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span>[] num = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><br><span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">int</span> x <span class="hljs-keyword">in</span> num)<br>&#123;<br>    <span class="hljs-comment">// æ‰“å° x</span><br>    Console.WriteLine(x);<br>    <span class="hljs-keyword">break</span>; <span class="hljs-comment">// è·³å‡ºå¾ªç¯</span><br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure><h3 id="while-å¾ªç¯"><a href="#while-å¾ªç¯" class="headerlink" title="while å¾ªç¯"></a>while å¾ªç¯</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">3</span>)<br>&#123;<br>    <span class="hljs-comment">// æ‰“å° i</span><br>    Console.WriteLine(i);<br>    i++;<br>&#125;<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// 0</span><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">// 2</span><br></code></pre></td></tr></table></figure><h3 id="do-while-å¾ªç¯"><a href="#do-while-å¾ªç¯" class="headerlink" title="do while å¾ªç¯"></a>do while å¾ªç¯</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-keyword">do</span><br>&#123;<br>    <span class="hljs-comment">// æ‰“å° i</span><br>    Console.WriteLine(i);<br>    i++;<br>&#125; <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">0</span>);<br><br><span class="hljs-comment">// è¾“å‡º</span><br><span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D è¾“å…¥ç³»ç»Ÿ</title>
    <link href="/2023/10/05/unity-input-system/"/>
    <url>/2023/10/05/unity-input-system/</url>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ç ”ç©¶ä¸€ä¸‹é€šè¿‡é”®ç›˜å’Œé¼ æ ‡å¯¹æ¸¸æˆç‰©ä½“è¿›è¡Œç§»åŠ¨æˆ–æ˜¯å…¶ä»–æ“ä½œã€‚</p><p>å…ˆæ¥çœ‹çœ‹ç®€å•çš„æŒ‰é”®è¾“å…¥ã€‚</p><span id="more"></span><h2 id="ä¸€ã€é”®ç›˜æŒ‰é”®"><a href="#ä¸€ã€é”®ç›˜æŒ‰é”®" class="headerlink" title="ä¸€ã€é”®ç›˜æŒ‰é”®"></a>ä¸€ã€é”®ç›˜æŒ‰é”®</h2><p>åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼ŒæŒ‚è½½åˆ°ä¸€ä¸ª Cube ä¸Šï¼Œåœ¨ Update å‡½æ•°ç›‘å¬é”®ç›˜æŒ‰é”®ã€‚</p><p>ä½¿ç”¨çš„æ¥å£å°±æ˜¯ Input.GetKeyDownï¼Œè¿™ä¸ªæ¥å£åªä¼šåœ¨æŒ‰ä¸‹æŒ‰é”®çš„æ—¶å€™ï¼Œè¿”å›ä¸€æ¬¡ trueã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé•¿æŒ‰é”®ç›˜æŒ‰é”®æ—¶ï¼Œåç»­åªä¼šè¿”å› falseã€‚</p><p>å¦‚æœæƒ³è¦æŒ‰ä½é”®ç›˜çš„æŒ‰é”®ï¼ŒæŒç»­ä¸æ–­åœ°è¿”å› trueï¼Œå°±å¯ä»¥ä½¿ç”¨ Input.GetKey æ¥å£ã€‚</p><p>ï¼ˆæ³¨ï¼šInput.GetKey åœ¨æŒ‰ä¸‹çš„ç¬é—´ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¥½å‡ æ¬¡ï¼Œå› ä¸º Update æ˜¯æ¯å¸§æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯å¸§ 0.016 ç§’å·¦å³ï¼‰</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜çš„ W é”®ï¼Œå‘ä¸Šç§»åŠ¨ä¸€ä¸ªå•ä½</span><br>    <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.W))<br>    &#123;<br>        transform.position += Vector3.up;<br>    &#125;<br>    <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜çš„ S é”®ï¼Œå‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•ä½</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.S))<br>    &#123;<br>        transform.position += Vector3.down;<br>    &#125;<br>    <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜çš„ A é”®ï¼Œå‘å·¦ç§»åŠ¨ä¸€ä¸ªå•ä½</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.A))<br>    &#123;<br>        transform.position += Vector3.left;<br>    &#125;<br>    <span class="hljs-comment">// æŒ‰ä¸‹é”®ç›˜çš„ D é”®ï¼Œå‘å³ç§»åŠ¨ä¸€ä¸ªå•ä½</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.D))<br>    &#123;<br>        transform.position += Vector3.right;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œåœ¨ç§»åŠ¨æ¸¸æˆç‰©ä½“æ—¶ï¼Œä¸ä¼šé€ä¸ªæŒ‰é”®å»ç›‘å¬ï¼Œè€Œæ˜¯ä½¿ç”¨ Input.GetAxis å»ç›‘å¬æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šçš„åç§»é‡ã€‚</p><p>è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªé€Ÿåº¦å’Œä¸€ä¸ªæ–¹å‘å‘é‡ï¼Œé€šè¿‡è·å–æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„åç§»é‡ï¼Œä¿®æ”¹æ–¹å‘å‘é‡ï¼Œè®¡ç®—å‡ºæ¯å¸§çš„ç§»åŠ¨è·ç¦»ï¼Œä¿®æ”¹ç‰©ä½“ä½ç½®ï¼Œè¾¾åˆ°é€šè¿‡é”®ç›˜æ–¹å‘é”®ç§»åŠ¨æ¸¸æˆç‰©ä½“çš„ç›®çš„ã€‚</p><p>ä¸Šé¢é€šè¿‡ç›‘å¬æ¯ä¸ªé”®ç›˜æŒ‰é”®çš„ä¾‹å­ï¼Œåªå¯¹ WSAD æœ‰æ•ˆã€‚è€Œä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå¯¹ WSAD å’Œ æ–¹å‘é”® éƒ½æœ‰æ•ˆã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><span class="hljs-keyword">public</span> Vector3 direction;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// æ°´å¹³åç§»é‡</span><br>    <span class="hljs-built_in">float</span> h = Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>    <span class="hljs-comment">// å‚ç›´åç§»é‡</span><br>    <span class="hljs-built_in">float</span> v = Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>);<br>    <span class="hljs-comment">// ä¿®æ”¹æ–¹å‘å‘é‡</span><br>    direction.x = h;<br>    direction.y = v;<br>    <span class="hljs-comment">// è®¡ç®—ç§»åŠ¨è·ç¦»å¹¶ä¿®æ”¹ç‰©ä½“ä½ç½®</span><br>    transform.position += speed * Time.deltaTime * direction;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæ˜¯ Horizontal å’Œ Vertical å‘¢ï¼Ÿæœ‰æ²¡æœ‰å…¶ä»–çš„å‚æ•°å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚</p><p>æ‰“å¼€ Edit -&gt; Project Settings -&gt; Input Managerï¼Œå¯ä»¥çœ‹åˆ° Horizontal å’Œ Vertical ä¸¤ä¸ªå…ƒç´ ï¼Œé‡Œé¢éƒ½åŒ…å«äº†ä¸€ç³»åˆ—çš„å‚æ•°è®¾ç½®ã€‚</p><p>å¯ä»¥æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ä¸€äº›å…ƒç´ ï¼Œå¡«å¥½ Nameï¼ˆæŒ‰é”®åï¼‰ã€Positive Buttonï¼ˆæ­£å‘ï¼‰ã€Negative Buttonï¼ˆåå‘ï¼‰å°±å¯ä»¥é€šè¿‡ Input.GetAxis è·å–æŒ‰é”®è¾“å…¥å•¦ã€‚</p><p><img src="/../images/unity-input-system/Snipaste_2023-10-05_13-53-12.png"></p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ Input.GetAxisRawï¼Œå®ƒå’Œ Input.GetAxis çš„åŒºåˆ«æ˜¯ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ -1 0 1 ä¸‰ä¸ªæ•´æ•°ï¼Œè€Œ Input.GetAxis ä¼šé€æ¸ä» 0 åˆ° 1 æˆ– -1 è¿›è¡Œå˜åŒ–ï¼Œæœ‰ä¸€ä¸ªç¼“æ…¢å¢é€Ÿçš„è¿‡ç¨‹ã€‚</p><p>é™¤äº† Input.GetKeyDownï¼Œè¿˜æœ‰ Input.GetButtonDownï¼Œå®ƒä»¬éƒ½å¯ä»¥è·å– Input Manager è®¾ç½®çš„è½´é”®ï¼Œè€Œ GetKeyDown å¯ä»¥é¢å¤–é€šè¿‡ KeyCode æšä¸¾å˜é‡è·å–æŒ‰é”®ï¼ŒGetButtonDown åˆ™åªèƒ½è·å–è½´é”®ï¼ˆGetAxis åŒç†ï¼‰ã€‚</p><h2 id="äºŒã€é¼ æ ‡æŒ‰é”®"><a href="#äºŒã€é¼ æ ‡æŒ‰é”®" class="headerlink" title="äºŒã€é¼ æ ‡æŒ‰é”®"></a>äºŒã€é¼ æ ‡æŒ‰é”®</h2><p>é¼ æ ‡çš„ä¸‰ä¸ªæŒ‰é”®ä¹Ÿéƒ½æ˜¯é€šè¿‡ Input ç±»çš„æ¥å£æ¥ç›‘å¬ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">0</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æŒ‰ä¸‹é¼ æ ‡å·¦é”®&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">1</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æŒ‰ä¸‹é¼ æ ‡å³é”®&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetMouseButtonDown(<span class="hljs-number">2</span>))<br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;æŒ‰ä¸‹é¼ æ ‡ä¸­é”®&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¼ æ ‡åœ¨å±å¹•ä¸Šç§»åŠ¨æ—¶ï¼Œä¹ŸåŒæ ·å¯ä»¥è·å–åˆ°ç§»åŠ¨çš„åæ ‡åç§»é‡ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">float</span> x = Input.GetAxis(<span class="hljs-string">&quot;Mouse X&quot;</span>);<br>    <span class="hljs-built_in">float</span> y = Input.GetAxis(<span class="hljs-string">&quot;Mouse Y&quot;</span>);<br>    Debug.Log(<span class="hljs-string">$&quot;mouse x = <span class="hljs-subst">&#123;x&#125;</span> y = <span class="hljs-subst">&#123;y&#125;</span>&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›å¸¸ç”¨çš„æŒ‰é”®æ¥å£ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-comment">// é”®ç›˜</span><br>Input.GetKey(KeyCode.W)           <span class="hljs-comment">// æŒ‰ä½ W é”®æŒç»­è¿”å› true, æ¾å¼€åè¿”å› false</span><br>Input.GetKeyDown(KeyCode.W)       <span class="hljs-comment">// æŒ‰ä¸‹ W é”®è¿”å› trueï¼ŒæŒ‰ä½ä¹Ÿåªä¼šè¿”å› false</span><br>Input.GetKeyUp(KeyCode.W)         <span class="hljs-comment">// æŠ¬èµ· W é”®è¿”å› true</span><br><br><span class="hljs-comment">// æ³¨ï¼šè¿™é‡Œçš„ Jump éœ€è¦åœ¨ Input Manager é‡Œè®¾ç½®ä¸€ä¸ªåç§°ä¸º Jump çš„è½´é”®</span><br>Input.GetButton(<span class="hljs-string">&quot;Jump&quot;</span>)           <span class="hljs-comment">// æŒ‰ä½è‡ªå®šä¹‰çš„é”®æŒç»­è¿”å› true, æ¾å¼€åè¿”å› false</span><br>Input.GetButtonDown(<span class="hljs-string">&quot;Jump&quot;</span>)       <span class="hljs-comment">// æŒ‰ä¸‹è‡ªå®šä¹‰çš„é”®è¿”å› trueï¼ŒæŒ‰ä½ä¹Ÿåªä¼šè¿”å› false</span><br>Input.GetButtonUp(<span class="hljs-string">&quot;Jump&quot;</span>)         <span class="hljs-comment">// æŠ¬èµ·è‡ªå®šä¹‰çš„é”®è¿”å› true</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Horizontal&quot;</span>)       <span class="hljs-comment">// AD æˆ–å·¦å³æ–¹å‘é”®çš„åç§»é‡ (ä» 0 åˆ° 1 å˜åŒ–ï¼Œæˆ–ä» 0 åˆ° -1 å˜åŒ–)</span><br>Input.GetAxis(<span class="hljs-string">&quot;Vertical&quot;</span>)         <span class="hljs-comment">// WS æˆ–ä¸Šä¸‹æ–¹å‘é”®çš„åç§»é‡ (ä» 0 åˆ° 1 å˜åŒ–ï¼Œæˆ–ä» 0 åˆ° -1 å˜åŒ–)</span><br>    <br>Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>)    <span class="hljs-comment">// AD æˆ–å·¦å³æ–¹å‘é”®çš„åç§»é‡ (-1 0 1)</span><br>Input.GetAxisRaw(<span class="hljs-string">&quot;Vertical&quot;</span>)      <span class="hljs-comment">// WS æˆ–ä¸Šä¸‹æ–¹å‘é”®çš„åç§»é‡ (-1 0 1)</span><br><br><br><span class="hljs-comment">// é¼ æ ‡ 0: å·¦é”®  1: å³é”®  2: ä¸­é”®</span><br>Input.GetMouseButton(<span class="hljs-number">0</span>)       <span class="hljs-comment">// æŒ‰ä½é¼ æ ‡å·¦é”®</span><br>Input.GetMouseButtonDown(<span class="hljs-number">1</span>)   <span class="hljs-comment">// æŒ‰ä¸‹é¼ æ ‡å³é”®</span><br>Input.GetMouseButtonUp(<span class="hljs-number">2</span>)     <span class="hljs-comment">// æŠ¬èµ·é¼ æ ‡ä¸­é”®</span><br><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse X&quot;</span>)      <span class="hljs-comment">// é¼ æ ‡æ°´å¹³æ–¹å‘ç§»åŠ¨çš„åç§»é‡</span><br>Input.GetAxis(<span class="hljs-string">&quot;Mouse Y&quot;</span>)      <span class="hljs-comment">// é¼ æ ‡å‚ç›´æ–¹å‘ç§»åŠ¨çš„åç§»é‡</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Unity3D ç§»åŠ¨æ¸¸æˆç‰©ä½“</title>
    <link href="/2023/09/12/unity-move-gameobject/"/>
    <url>/2023/09/12/unity-move-gameobject/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ unity ä¸­ï¼Œä¸€ä¸ªå¾ˆåŸºç¡€çš„éœ€æ±‚æ˜¯ç§»åŠ¨æ¸¸æˆç‰©ä½“ã€‚</p><p>ç§»åŠ¨ç‰©ä½“çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ Transform ç»„ä»¶çš„ Position å±æ€§è¿›è¡Œä¿®æ”¹ã€‚</p><span id="more"></span><h2 id="ä¸€ã€ç›´æ¥ä¿®æ”¹-position"><a href="#ä¸€ã€ç›´æ¥ä¿®æ”¹-position" class="headerlink" title="ä¸€ã€ç›´æ¥ä¿®æ”¹ position"></a>ä¸€ã€ç›´æ¥ä¿®æ”¹ position</h2><p>ä¿®æ”¹è‡ªèº«çš„ä½ç½®ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c#">transform.position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p>å½“å‰ç‰©ä½“å°±ä¼šå‡ºç°åœ¨æŒ‡å®šçš„åæ ‡ä½ç½®ã€‚</p><p>ä¿®æ”¹å¼•ç”¨ç‰©ä½“çš„ä½ç½®ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> Transform other;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    other.position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äºŒã€Translate"><a href="#äºŒã€Translate" class="headerlink" title="äºŒã€Translate"></a>äºŒã€Translate</h2><p>unity æä¾›äº† transform.Translate() å‡½æ•°ï¼Œç”¨äºç§»åŠ¨æ¸¸æˆç‰©ä½“ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ˜¯è®©å½“å‰ç‰©ä½“æ²¿ç€ X è½´æ­£æ–¹å‘æŒç»­ç§»åŠ¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    transform.Translate(Vector3.right * speed * Time.deltaTime, Space.World);<br>&#125;<br></code></pre></td></tr></table></figure><p>Translate å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯ç§»åŠ¨çš„æ–¹å‘å’Œè·ç¦»ï¼Œä½¿ç”¨ä¸€ä¸ªå‘é‡ä½œä¸ºè¾“å…¥ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº†ç‰©ä½“çš„å³æ–¹å‘ï¼ˆVector3.rightï¼‰ï¼Œå®šä¹‰äº†ä¸€ä¸ªé€Ÿåº¦ï¼ˆspeedï¼‰ï¼Œä¹˜ä¸Šå¢é‡æ—¶é—´ä¿®æ­£ï¼ˆTime.deltaTimeï¼‰ï¼Œä½œä¸ºæœ€ç»ˆçš„ç§»åŠ¨å‘é‡ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ä¹˜ä¸Š Time.deltaTime å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸º Update å‡½æ•°æ¯ç§’çš„æ‰§è¡Œæ¬¡æ•°æ˜¯æ ¹æ®è®¾å¤‡çš„æ€§èƒ½æ¥å†³å®šçš„ã€‚å¦‚æœå½“å‰å¸§ç‡æ˜¯ 60ï¼Œé‚£ä¹ˆ Update å‡½æ•°æ¯ç§’æ‰§è¡Œ 60 æ¬¡ï¼›å¦‚æœå¸§ç‡æ˜¯ 30ï¼Œåˆ™æ‰§è¡Œ 30 æ¬¡ã€‚é‚£ä¹ˆï¼Œç‰©ä½“çš„ç§»åŠ¨é€Ÿåº¦å°±ä¸ç¨³å®šäº†ã€‚</p><p>ä¸ºäº†ä¿æŒç‰©ä½“åœ¨ä¸åŒå¸§ç‡ä¸‹ï¼Œéƒ½æ˜¯åŒæ ·çš„ç§»åŠ¨é€Ÿåº¦ï¼ŒTime.deltaTime ä½œä¸ºä¸€ä¸ªå˜é‡ï¼Œå°±å‘æŒ¥ä½œç”¨äº†ã€‚</p><ul><li>åœ¨ 60 å¸§çš„æƒ…å†µä¸‹ï¼ŒTime.deltaTime çš„å€¼ä¸º 1&#x2F;60ï¼ŒUpdate æ‰§è¡Œäº† 60 æ¬¡ï¼Œæœ€ç»ˆ 1 ç§’ç§»åŠ¨äº† Vector3.right * speed çš„è·ç¦»ã€‚</li><li>åœ¨ 30 å¸§çš„æƒ…å†µä¸‹ï¼ŒTime.deltaTime çš„å€¼ä¸º 1&#x2F;30ï¼ŒUpdate æ‰§è¡Œäº† 30 æ¬¡ï¼Œæœ€ç»ˆ 1 ç§’ç§»åŠ¨äº† Vector3.right * speed çš„è·ç¦»ã€‚</li></ul><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯åæ ‡ç³»ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ç‰©ä½“è‡ªèº«çš„å±€éƒ¨åæ ‡ç³»ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨ä¸–ç•Œåæ ‡ç³»ï¼ˆSpace.Worldï¼‰ã€‚</p><h2 id="ä¸‰ã€åˆšä½“"><a href="#ä¸‰ã€åˆšä½“" class="headerlink" title="ä¸‰ã€åˆšä½“"></a>ä¸‰ã€åˆšä½“</h2><p>ç»™ç‰©ä½“æŒ‚ä¸Šåˆšä½“ç»„ä»¶ï¼ˆRigidbodyï¼‰ï¼Œä¿®æ”¹ velocity å±æ€§ï¼Œè®©ç‰©ä½“åœ¨æŒ‡å®šçš„æ–¹å‘äº§ç”Ÿç§»åŠ¨é€Ÿåº¦ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> speed = <span class="hljs-number">5f</span>;<br><span class="hljs-keyword">public</span> Rigidbody rigidbody;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    rigidbody.velocity = Vector3.right * speed;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆšä½“çš„é€Ÿåº¦åªéœ€è¦è®¾ç½®ä¸€æ¬¡ï¼Œå°±ä¼šæŒç»­ä¸æ–­åœ°ç§»åŠ¨ã€‚</p><p>ï¼ˆæ³¨ï¼šåˆšä½“é»˜è®¤æ˜¯å—åˆ°é‡åŠ›å½±å“ï¼Œä¼šå¾€ä¸‹æ‰è½ã€‚å¦‚æœæƒ³è¦è®©ç‰©ä½“ä¸å—é‡åŠ›å½±å“ï¼Œå¯ä»¥å–æ¶ˆå‹¾é€‰åˆšä½“ç»„ä»¶ä¸Šçš„ Use Gravity é€‰é¡¹ã€‚ï¼‰</p><p>å½“ç„¶ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªé€Ÿåº¦éœ€è¦ä¸æ–­åœ°è¿›è¡Œè°ƒæ•´ï¼Œä¸ä¼šåªåœ¨ Start è®¾ç½®ä¸€æ¬¡ã€‚</p><p>å¯¹äºç‰©ç†ç»„ä»¶æ¥è¯´ï¼Œé€šå¸¸ä¼šä½¿ç”¨ FixedUpdate å»æ§åˆ¶ç‰©ç†é€»è¾‘ï¼Œå¯¹äºä¸€äº›æŒ‰é”®è¾“å…¥ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Update æ§åˆ¶ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// æ–¹å‘é”®å·¦å³çš„è¾“å…¥ï¼Œå–å€¼ä¸º -1, 0, 1</span><br>    <span class="hljs-built_in">float</span> horizontal = Input.GetAxisRaw(<span class="hljs-string">&quot;Horizontal&quot;</span>);<br>    rigidbody.velocity = Vector3.right * horizontal * speed;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç°åœ¨ç‰©ä½“å°±å¯ä»¥é€šè¿‡æ–¹å‘é”®è¿›è¡Œå·¦å³ç§»åŠ¨äº†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Unity3D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›é¡¾åšå®¢</title>
    <link href="/2023/09/10/review-blog/"/>
    <url>/2023/09/10/review-blog/</url>
    
    <content type="html"><![CDATA[<p>å·²ç»æœ‰å¥½ä¹…å¥½ä¹…æ²¡æœ‰æ›´æ–°åšå®¢äº†ã€‚</p><p>æˆ‘åˆå›æ¥çœ‹çœ‹å®ƒäº†ã€‚</p><span id="more"></span><p>æœ€è¿‘ç»å¸¸çœ‹åˆ«äººçš„åšå®¢ï¼Œçœ‹åˆ°å¥½å¤šçŸ¥è¯†å’Œæœ‰æ„æ€çš„æƒ³æ³•ï¼Œç„¶åå°±ä¼šè”æƒ³åˆ°è‡ªå·±ä»¥å‰å»ºç«‹çš„åšå®¢ï¼Œæ„Ÿæ…¨è¿™ä¸¤å¹´é—´éƒ½æ²¡æœ‰å†å†™ä¸Šä¸€ç¯‡åšå®¢ã€‚</p><p>å…¶å®å¹³å¸¸éƒ½æœ‰åœ¨å°ç±³ç¬”è®°ä¸Šå†™ä¸€äº›å·¥ä½œæ—¥å¿—ã€å‘¨å¿—ï¼Œè¿˜æœ‰å¶å°”çš„ä¸€äº›æƒ…ç»ªæ„Ÿæ‚Ÿã€‚</p><p>å¯èƒ½æ˜¯å› ä¸ºæ‰‹æœºä¸Šéšæ—¶å¯ä»¥å†™ï¼Œéšæ—¶å¯ä»¥æŸ¥çœ‹ï¼Œå°±æ¸æ¸åœ°é—å¿˜äº†ç½‘é¡µçš„åšå®¢å§ã€‚</p><p>è€Œä¸”æˆ‘çš„ä¸»ç«™æ˜¯ç”¨ Notion æ­å»ºçš„ä¸ªäººç©ºé—´ï¼Œåšå®¢å¯¹æˆ‘æ¥è¯´ï¼Œä¼¼ä¹ç¡®å®æ²¡æœ‰å¤ªå¤§çš„ä½œç”¨ã€‚</p><hr><p>å›æƒ³å½“åˆï¼Œåˆšæ¥è§¦çš„ç¼–ç¨‹è¯­è¨€æ˜¯å‰ç«¯ä¸‰ä»¶å¥—ï¼ˆHTMLã€CSSã€JavaScriptï¼‰ï¼ŒèŒä¸šæ–¹å‘ä¹Ÿæ˜¯æƒ³ç€å¾€ Web å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆçš„è·¯å¾„èµ°ï¼Œåªæ˜¯ç”±äºè‡ªå·±çš„è¿·èŒ«å’Œæ‡’æƒ°ï¼Œä¹Ÿæœ‰å…´è¶£ä½è¿·çš„åŸå› ï¼Œå¯¼è‡´è¿™æ¡è·¯å¹¶æ²¡æœ‰èµ°å¤ªè¿œã€‚</p><p>åæ¥å› ä¸ºå‚åŠ æ¯”èµ›ï¼Œé€‰æ‹©äº†åšæ¸¸æˆï¼Œå°±ä¸€è·¯èµ°å‘äº† Unity3D å®¢æˆ·ç«¯å¼€å‘å·¥ç¨‹å¸ˆã€‚</p><p>é‚£æ—¶å€™è¿˜æ˜¯å¾ˆçº ç»“ï¼Œæ˜¯è¦åšå‰ç«¯è¿˜æ˜¯æ¸¸æˆã€‚ä¸è¿‡ï¼Œå¬ä»äº†å¸ˆå…„çš„å»ºè®®ï¼Œå°è¯•å»åšä¸€ä¸ª Web é¡¹ç›®ï¼Œæœ€åŸºæœ¬çš„ï¼Œå°±æ˜¯æ­å»ºä¸€ä¸ªåšå®¢ã€‚å…¶å®ä¹Ÿç®—ä¸ä¸Šåšé¡¹ç›®å§ï¼Œæ¯•ç«Ÿç”¨äº†åšå®¢æ¡†æ¶ï¼Œçœ‹äº›å…¥é—¨æ•™ç¨‹å°±æ­èµ·æ¥äº†ï¼Œç„¶åå°±æ˜¯å†™æ–‡ç« ã€‚å¸ˆå…„ä¹Ÿå»ºè®®æˆ‘å»å†™ä¸€ä¸ª todolist åº”ç”¨ï¼Œä¸è¿‡é‚£æ—¶å€™æ¯”èµ›å¾ˆå¿™ï¼Œåæ¥ä¹Ÿæ²¡å†™äº†ã€‚</p><p>æœ€å¼€å§‹æˆ‘å†™çš„åšå®¢ï¼Œæ˜¯å…¨è‹±æ–‡çš„ã€‚å› ä¸ºæˆ‘æƒ³èµ·æ¥ï¼Œä»¥å‰å¸ˆå…„ç»™æˆ‘çœ‹è¿‡ä»–çš„åšå®¢ï¼Œä¹Ÿæ˜¯å…¨è‹±æ–‡çš„ã€‚æˆ‘è§‰å¾—è¿™æ ·çš„å†™ä½œæ–¹å¼å¯ä»¥ä¸€è¾¹ç§¯ç´¯åšå®¢ä¸€è¾¹ç†Ÿç»ƒä½¿ç”¨è‹±è¯­ï¼Œæ‰€ä»¥å°±ç¡¬ç€å¤´çš®è¦æ±‚è‡ªå·±è¿™æ ·å†™äº†ã€‚å½“ç„¶ï¼Œå°±åšæŒäº†ä¸¤ç¯‡ã€‚</p><p>åé¢æ”¾å¼ƒäº†å‰ç«¯ï¼Œä¹Ÿå°±é—å¿˜äº†åšå®¢ã€‚</p><hr><p>ç¬¬äºŒæ¬¡å›æ¥çœ‹åšå®¢ï¼Œæ˜¯ 2021 å¹´åˆçš„æ—¶å€™äº†ã€‚</p><p>é‚£æ—¶å€™è¾èŒè€ƒç ”å¤±è´¥ï¼Œä¸€åˆ‡ç™¾åºŸå¾…å…´ï¼Œæ€»è§‰å¾—åº”è¯¥åšç‚¹ä»€ä¹ˆï¼Œå¹¶ä¸”éœ€è¦è®°å½•ä¸€ä¸‹è‡ªå·±çš„æˆé•¿ï¼Œè®©è‡ªå·±æœ‰ä¸€ä¸ªå…¨æ–°çš„å¼€å§‹ï¼Œæ‰€ä»¥å°±æƒ³èµ·äº†åšå®¢ã€‚</p><p>é‚£æ—¶å€™ç¡®å®å¾ˆå…´å¥‹åœ°åœ¨å†™ï¼Œè¿˜åšäº†å‡ ä¸ªç®€å•çš„å°æ¸¸æˆï¼Œæ‰“åŒ…æˆ WebGLï¼Œæ£é¼“äº†å¾ˆå¤šå¤©ï¼Œç»ˆäºå¯ä»¥åœ¨åšå®¢ä¸Šé¢„è§ˆäº†ã€‚</p><p>ç„¶åå¹´åˆæ‰¾å·¥ä½œï¼Œä¸Šç­ä¹‹åï¼Œå°±æ²¡æ—¶é—´æ²¡ç²¾åŠ›æ¥å†™äº†ã€‚</p><hr><p>æ—¶é—´ä¸€æ™ƒï¼Œ2023 å¹´äº†ã€‚</p><p>è¿™ä¸¤å¹´é—´ä¹Ÿå¹¶ä¸æ˜¯ä¸€ç›´æœ‰åœ¨å·¥ä½œï¼Œä¹Ÿæ¢è¿‡å‡ å®¶å…¬å¸ï¼Œä¼‘æ¯è¿‡å‡ æ®µæ—¶é—´ã€‚</p><p>ç°åœ¨ï¼Œåœ¨æ–°å…¬å¸åšäº†å¿«ä¸ƒä¸ªæœˆäº†ï¼ŒçŠ¶æ€ä¸æ˜¯å¾ˆå¥½ã€‚è¯´ä¸å‡ºæ¥ä»€ä¹ˆåŸå› ï¼Œå°±æ˜¯å¯¹å·¥ä½œå†…å®¹å’Œæ—¥å¸¸å¯¹æ¥æ„Ÿåˆ°å¾ˆæ— è¶£ã€‚</p><p>æœ‰è‡ªå·±çš„åŸå› ï¼Œä¹Ÿæœ‰å…¶ä»–äººçš„åŸå› ã€‚</p><p>æ€»ä¹‹ï¼Œæˆ‘éœ€è¦æ‰¾ç‚¹äº‹æƒ…æ¥ç¼“è§£ä¸€ä¸‹è‡ªå·±çš„æ— è¶£ã€‚</p><hr><p>ä»Šå¤©æ˜¯ 9 æœˆ 10 å·ï¼Œå‘¨æ—¥ã€‚</p><p>æˆ‘å‚è€ƒäº†å‡ ä¸ªå¤§ä½¬çš„åšå®¢ï¼Œå¾ˆå–œæ¬¢ä¸€ä¸ªç”¨ Jekyll ç”Ÿæˆï¼ŒChirpy ä¸»é¢˜çš„åšå®¢é¡µé¢ã€‚</p><p>ç„¶åæˆ‘æ£é¼“äº†ä¸€å¤© Rubyï¼Œå®‰è£… gemã€bundlerã€jekyllï¼Œå‹‰å¼ºçœ‹åˆ°äº†åŒæ ·æ•ˆæœçš„é¡µé¢ï¼Œä½†æ˜¯å·²ç»è¢« bundle åœ¨å‘½ä»¤è¡Œçª—å£åŠå¤©éƒ½ä¸å“åº”ç»™æ°”æ™•äº†ã€‚</p><p>é­”æ³•ä¸Šç½‘ã€æ¢é•œåƒæºï¼Œéƒ½å¾ˆéš¾åˆ¶æœè¿™ä¸ª bundleï¼Œç„¶åæƒ³æƒ³ï¼Œè¿˜æ˜¯ hexo ç®€å•å¥½ç”¨ã€‚</p><p>å§‘ä¸”ç”¨ hexo å†™ä¸€ç¯‡ç®€çŸ­çš„åšå®¢ï¼Œæ¥å»¶ç»­è¿™ä¸ªå°å°äº†ä¸¤å¹´çš„å°ç©ºé—´å§ã€‚</p><hr><p>ä»Šå¤©ä¹Ÿç»™è‡ªå·±åšçš„ hexo ä¸»é¢˜ç¾åŒ–äº†ä¸€ä¸‹ï¼Œåšæˆäº†å·¦è¾¹å›ºå®šï¼Œå³è¾¹æ»šåŠ¨çš„ç»“æ„ã€‚åˆ é™¤äº†å¾ˆå¤šæ²¡æœ‰ç”¨çš„å…ƒç´ ï¼ŒåŠ›æ±‚ç®€æ´ã€‚ä¸è¿‡æ€»æ„Ÿè§‰æœ‰ç‚¹ç©ºï¼Œåç»­æƒ³åˆ°ä»€ä¹ˆå¥½ç©çš„ç‚¹å­ï¼Œå†æƒ³åŠæ³•åŠ è¿›æ¥å§ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>éšè®°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tetris</title>
    <link href="/2021/04/20/Tetris/"/>
    <url>/2021/04/20/Tetris/</url>
    
    <content type="html"><![CDATA[<p>ä¿„ç½—æ–¯æ–¹å—é¡¹ç›®æ¼”ç¤ºã€‚</p><p><a href="../../../../WebGL/Tetris/index.html">Tetris</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TheRestOfThePlanet</title>
    <link href="/2021/04/08/TheRestOfThePlanet/"/>
    <url>/2021/04/08/TheRestOfThePlanet/</url>
    
    <content type="html"><![CDATA[<p>æ˜Ÿçƒä½™ç”Ÿé¡¹ç›®æ¼”ç¤ºã€‚</p><p><a href="../../../../WebGL/TheRestOfThePlanet/index.html">TheRestOfThePlanet</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ZerosSmartGrowth</title>
    <link href="/2021/02/17/ZerosSmartGrowth/"/>
    <url>/2021/02/17/ZerosSmartGrowth/</url>
    
    <content type="html"><![CDATA[<p>Zero çš„æ™ºèƒ½æˆé•¿é¡¹ç›®æ¼”ç¤ºã€‚</p><p><a href="../../../../WebGL/ZerosSmartGrowth/index.html">ZerosSmartGrowth</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PickGifts</title>
    <link href="/2021/02/03/PickGifts/"/>
    <url>/2021/02/03/PickGifts/</url>
    
    <content type="html"><![CDATA[<p>æŒ‘é€‰ç¤¼ç‰©é¡¹ç›®æ¼”ç¤ºã€‚</p><p><a href="../../../../WebGL/PickGifts/index.html">PickGifts</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GreedySnake</title>
    <link href="/2021/01/27/GreedySnake/"/>
    <url>/2021/01/27/GreedySnake/</url>
    
    <content type="html"><![CDATA[<p>è´ªåƒè›‡é¡¹ç›®æ¼”ç¤ºã€‚</p><p><a href="../../../../WebGL/GreedySnake/index.html">GreedySnake</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>WebGL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Link</title>
    <link href="/2021/01/27/Hexo-Link/"/>
    <url>/2021/01/27/Hexo-Link/</url>
    
    <content type="html"><![CDATA[<p>åœ¨æ–‡ç« ä¸­å¼•å…¥è¶…é“¾æ¥ï¼Œç›´æ¥åœ¨ Typora ä¸­å†™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[GreedySnake](..<span class="hljs-regexp">/WebGL/</span>GreedySnake/index.html)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ–‡ä»¶å¤¹å±‚çº§æ˜¯ï¼Œ_posts å’Œ WebGL éƒ½æ”¾åœ¨ source é‡Œã€‚</p><p>å’Œæ’å…¥å›¾ç‰‡ä¸€æ ·ï¼Œé¦–é¡µæ˜¾ç¤ºäº†é“¾æ¥ï¼Œå¹¶ä¸”å¯ä»¥æ­£å¸¸æ‰“å¼€ï¼Œè€Œæ–‡ç« é¡µé¢å´ä¸èƒ½æ­£å¸¸æ‰“å¼€ï¼Œæ‰¾ä¸åˆ°é¡µé¢ã€‚</p><p>åŒæ ·æ˜¯è·¯å¾„çš„é—®é¢˜ã€‚</p><span id="more"></span><p>åœ¨ Hexo-Image è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† hexo-renderer-marked è¿™ä¸ªæ’ä»¶ä¿®æ”¹ç½‘ç«™å‘å¸ƒåçš„å›¾ç‰‡çš„è·¯å¾„ã€‚</p><p>ä¸è¿‡ï¼Œè¶…é“¾æ¥è¿™ä¸€å—ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ’ä»¶å»ä¿®æ­£ã€‚</p><p>æ‰€ä»¥è¿™é‡Œå°±å…ˆç”¨ä¸€ä¸ªåœŸæ–¹æ³•ï¼Œè‡ªå·±åœ¨è·¯å¾„å‰åŠ ä¸Šå¾ˆå¤šä¸ª ..&#x2F; ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[GreedySnake](..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>WebGL<span class="hljs-regexp">/GreedySnake/i</span>ndex.html)<br></code></pre></td></tr></table></figure><p>åŠ å¤šå°‘ä¸ªï¼Œè¦çœ‹æ–‡ä»¶å¤¹çš„å±‚çº§ï¼Œæ ¹æ®å®é™…æƒ…å†µå»é€‰æ‹©ã€‚è¿™é‡Œæˆ‘åŠ ä¸Šäº†ä¸‰ä¸ª ..&#x2F; ï¼Œå› ä¸ºæˆ‘çš„æ–‡ç« é¡µé¢çš„ä¸Šçº§ç›®å½•ï¼Œæœ‰å¹´æœˆæ—¥ä¸‰ä¸ªå±‚çº§ã€‚</p><p>è¿™æ ·ï¼Œæ–‡ç« é¡µé¢çš„è¶…é“¾æ¥è·¯å¾„å°±ä¼šå›åˆ°æ ¹ç›®å½•ä¸‹å»æ‰¾ WebGL è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œä¸»é¡µåŒæ ·æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æ‰¾ï¼Œå› ä¸ºæ ¹ç›®å½•å·²ç»æ²¡æœ‰ä¸Šçº§ç›®å½•äº†ï¼Œæ‰€ä»¥åŠ å¤šå°‘ä¸ª ..&#x2F; ä¹Ÿæ²¡å…³ç³»ï¼ˆå¥½åƒæœ‰ç‚¹çŸ›ç›¾äº†ï¼‰ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯æœ€å¥½çš„ï¼Œä»¥åä¼°è®¡ä¼šæ‰¾åˆ°æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå§ã€‚</p><p>å¦å¤–ï¼Œè¶…é“¾æ¥çš„è·¯å¾„é‡Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œè¶…é“¾æ¥ä¼šå˜æˆ p æ ‡ç­¾ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ index.html åœ¨å‘å¸ƒæ—¶ä¼šè¢«æ¸²æŸ“ï¼Œå¯¼è‡´é¡µé¢å‡ºç°æŸäº›é—®é¢˜ã€‚æ¯”å¦‚ï¼Œæˆ‘æ‰“å¼€çš„é“¾æ¥æ˜¯ Unity WebGL çš„é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢ä¼šç›´æ¥åœ¨æˆ‘çš„ç½‘ç«™èƒŒæ™¯ä¸Šæ˜¾ç¤ºï¼Œè€Œä¸æ˜¯æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ã€‚</p><p><img src="/../images/HexoLink/page_overlap.png" alt="é¡µé¢é‡å "></p><p>æ‰€ä»¥è¿˜éœ€è¦å»åˆ° config.yml æ–‡ä»¶é‡Œï¼Œæ‰¾åˆ° skip_renderï¼Œè®©ä¸€äº›é¡µé¢è·³è¿‡æ¸²æŸ“ã€‚</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haml">skip_render:<br>  -<span class="ruby"> <span class="hljs-string">&#x27;README.md&#x27;</span></span><br><span class="ruby">  - <span class="hljs-string">&#x27;WebGL/GreedySnake/*.html&#x27;</span></span><br></code></pre></td></tr></table></figure><p>å‚æ•°å‰åŠ çš„è¿å­—ç¬¦ - æ˜¯ yml çš„æ•°ç»„å†™æ³•ã€‚è¿™é‡Œæˆ‘æ·»åŠ äº† GreedySnake ä¸‹çš„æ‰€æœ‰ html æ–‡ä»¶ã€‚</p><p>æ¸…ç†ä¸€ä¸‹æ•°æ®åº“ï¼Œæ¸…ç†ä¹‹å‰ï¼Œå¦‚æœ public æ–‡ä»¶å¤¹ä¸‹çš„æœ‰éœ€è¦ä¿å­˜çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ README.mdï¼Œéœ€è¦å…ˆå¤‡ä»½ä¸€ä¸‹ï¼Œå› ä¸ºæ¸…ç†çš„å‘½ä»¤ä¹Ÿä¼šæŠŠ public æ–‡ä»¶å¤¹ç»™åˆ é™¤ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo clean<br></code></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œä¼šå‘ç°ï¼ŒWebGL é¡µé¢å·²ç»åœ¨æ–°é¡µé¢æ‰“å¼€äº†ã€‚</p><p><img src="/../images/HexoLink/new_page.png" alt="æ‰“å¼€æ–°é¡µé¢"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Image</title>
    <link href="/2021/01/27/Hexo-Image/"/>
    <url>/2021/01/27/Hexo-Image/</url>
    
    <content type="html"><![CDATA[<p>åœ¨å†™æ–‡ç« çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶éœ€è¦æ’å…¥å›¾ç‰‡ã€‚</p><p>å¦‚æœç›´æ¥åœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨å›¾ç‰‡ï¼Œå½“ç½‘ç«™å‘å¸ƒæ—¶ï¼Œé¦–é¡µæ˜¾ç¤ºäº†å›¾ç‰‡ï¼Œæ–‡ç« é¡µé¢å´ä¸ä¼šæ˜¾ç¤ºå›¾ç‰‡ã€‚</p><p>ç»è¿‡ä¸€ç•ªæ¢ç´¢å’Œå°è¯•ï¼Œæˆ‘ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•æ’å…¥å›¾ç‰‡ã€‚</p><span id="more"></span><p>é¦–å…ˆï¼Œåœ¨ source æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª images æ–‡ä»¶å¤¹ã€‚</p><p>ä¸ºäº†ä¾¿äºåˆ†ç±»ï¼Œåœ¨ images æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿˜æœ‰ä¸€ä¸ª Hexo æ–‡ä»¶å¤¹ï¼Œè¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡æ˜¯ Hexo.md è¿™ç¯‡æ–‡ç« ä½¿ç”¨çš„ã€‚</p><p><img src="/../images/HexoImage/imagesHexo.png" alt="Hexoæ–‡ç« é‡Œçš„å›¾ç‰‡"></p><p>æ¥ç€ï¼Œåœ¨ Typora ç¼–è¾‘å™¨ä¸­æ’å…¥å›¾ç‰‡ï¼Œä¾‹å¦‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![åˆ›å»ºä»“åº“](..<span class="hljs-regexp">/images/</span>Hexo/repository.png)<br></code></pre></td></tr></table></figure><p>åœ¨è¾“å…¥å›¾ç‰‡è·¯å¾„æ—¶ï¼Œè¦ä½¿ç”¨ &#x2F; è€Œä¸æ˜¯ \ï¼Œè™½ç„¶ä¸¤ç§å†™æ³•åœ¨ Typora ç¼–è¾‘å™¨ä¸­éƒ½å¯ä»¥æ˜¾ç¤ºå›¾ç‰‡ï¼Œä½†æ˜¯åœ¨ Hexo å‘å¸ƒæ—¶å´ä¼šå¯¼è‡´è·¯å¾„å‡ºç°é—®é¢˜ã€‚</p><p>å¦å¤–ï¼Œå›¾ç‰‡å’Œæ–‡ä»¶å¤¹çš„åç§°ä¹Ÿä¸èƒ½å¸¦æœ‰è¿å­—ç¬¦ - ï¼Œå› ä¸ºè¿™ä¸ªç¬¦å·åŒæ ·ä¼šè®©å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥ã€‚</p><p>ç„¶åï¼Œå®‰è£…ä¸€ä¸ªæ’ä»¶ã€‚è¿™ä¸ªæ’ä»¶ä¹Ÿæ˜¯ä¸ºäº†è®©æ–‡ç« è¢«æ¸²æŸ“åçš„å›¾ç‰‡è·¯å¾„å˜å¾—æ­£å¸¸ã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-renderer-marked <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>åœ¨ config.yml é‡Œé…ç½®ä¸€ä¸‹ï¼Œæ‰¾åˆ° Writing è¿™ä¸ªæ ‡é¢˜ä¸‹ï¼Œæ–°å¢å­—æ®µ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">marked:</span><br>  <span class="hljs-attr">prependRoot:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>è¿˜è¦æ£€æŸ¥ä¸€ä¸‹ URL è¿™ä¸ªæ ‡é¢˜ä¸‹ï¼Œroot å­—æ®µæ˜¯å¦æ˜¯ä¸€ä¸ªæ–œæ </p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">root:</span> /<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª prependRoot å­—æ®µçš„ä½œç”¨æ˜¯ï¼Œåœ¨å›¾ç‰‡çš„è·¯å¾„å‰ï¼ŒåŠ ä¸Š root è®¾ç½®çš„è·¯å¾„ã€‚</p><p>åœ¨è¿™é‡Œï¼Œå› ä¸ºæˆ‘è®¾ç½®çš„å›¾ç‰‡è·¯å¾„æ˜¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![åˆ›å»ºä»“åº“](..<span class="hljs-regexp">/images/</span>Hexo/repository.png)<br></code></pre></td></tr></table></figure><p>æŒ‰ç…§ä¸Šè¿°çš„é…ç½®ï¼Œç”Ÿæˆçš„é¡µé¢çš„å›¾ç‰‡è·¯å¾„å°±ä¼šå˜æˆ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">![åˆ›å»ºä»“åº“](<span class="hljs-regexp">/../im</span>ages<span class="hljs-regexp">/Hexo/</span>repository.png)<br></code></pre></td></tr></table></figure><p>åŸæœ¬å‘å¸ƒåï¼Œæ–‡ç« é¡µé¢çš„å›¾ç‰‡è·¯å¾„åº”è¯¥æ˜¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">4000</span><span class="hljs-regexp">/2021/</span><span class="hljs-number">01</span><span class="hljs-regexp">/26/im</span>ages<span class="hljs-regexp">/Hexo/</span>repository.png<br></code></pre></td></tr></table></figure><p>å°±æ˜¯è·¯å¾„çš„é—®é¢˜å¯¼è‡´æ–‡ç« é¡µé¢çš„å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œè€Œé…ç½®åçš„è·¯å¾„åˆ™æ˜¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">4000</span><span class="hljs-regexp">/images/</span>Hexo/repository.png<br></code></pre></td></tr></table></figure><p>è·¯å¾„æ­£ç¡®ï¼Œå›¾ç‰‡ä¹Ÿå°±æ­£å¸¸åœ°æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p><p>ä¸è¿‡æ­¤å¤„æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯æŒ‰ç…§ä¸Šè¿°æµç¨‹é…ç½®åï¼Œæ–‡ç« çš„å›¾ç‰‡è¿˜æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œç»è¿‡æµ‹è¯•å‘ç°ï¼Œéœ€è¦åœ¨æ–‡ç« é‡Œå†™ä¸€æ¬¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--more--&gt;</span> // é¦–é¡µä¼šå‡ºç° Read More çš„æŒ‰é’®ï¼Œéšè—åé¢çš„å†…å®¹<br></code></pre></td></tr></table></figure><p>ç„¶åç¥å¥‡çš„æ˜¯ï¼Œå›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºäº†ã€‚</p><p>ä¹‹åï¼Œå³ä½¿æŠŠè¿™ä¸ªä»£ç å»æ‰ï¼Œå›¾ç‰‡ä¹Ÿæ˜¯æ­£å¸¸æ˜¾ç¤ºçš„ã€‚</p><p>å¯èƒ½æ˜¯è¿™ä¸ªæ’ä»¶çš„æŸä¸ªåœ°æ–¹å‡ºäº†é—®é¢˜å§ã€‚</p><p>å¦‚æœç›´æ¥å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--more--&gt;</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„ï¼Œè¿˜æ˜¯éœ€è¦å…ˆå®‰è£…æ’ä»¶ï¼Œé…ç½® config.ymlï¼Œå†å†™ Read More çš„ä»£ç æ‰è¡Œã€‚</p><p>æœ€åï¼Œç”Ÿæˆä¸€ä¸‹é¡µé¢ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo g<br></code></pre></td></tr></table></figure><p>åœ¨æœ¬åœ°æµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡å·²ç»æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo s<br></code></pre></td></tr></table></figure><p><img src="/../images/HexoImage/imagesTest.png" alt="æœ¬åœ°æµ‹è¯•"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo-Config</title>
    <link href="/2021/01/27/Hexo-Config/"/>
    <url>/2021/01/27/Hexo-Config/</url>
    
    <content type="html"><![CDATA[<p>åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæœ‰ä¸ªå« _config.yml çš„æ–‡ä»¶ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šé…ç½®å­—æ®µã€‚</p><span id="more"></span><h1 id="Site"><a href="#Site" class="headerlink" title="Site"></a>Site</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>title</td><td>ç½‘ç«™çš„æ ‡é¢˜</td><td>é»˜è®¤ä¼šæ˜¾ç¤ºåœ¨ç½‘ç«™é¡¶éƒ¨</td></tr><tr><td>subtitle</td><td>ç½‘ç«™çš„å‰¯æ ‡é¢˜</td><td>é»˜è®¤ä¼šæ˜¾ç¤ºåœ¨æ ‡é¢˜ä¸‹æ–¹</td></tr><tr><td>description</td><td>ç½‘ç«™çš„æè¿°</td><td>æ²¡æœ‰æ˜¾ç¤ºï¼Œè·Ÿæœç´¢å¼•æ“æœ‰å…³</td></tr><tr><td>keywords</td><td>ç½‘ç«™çš„å…³é”®è¯</td><td>æ²¡æœ‰æ˜¾ç¤ºï¼Œè·Ÿæœç´¢å¼•æ“æœ‰å…³</td></tr><tr><td>author</td><td>ä½œè€…</td><td>é»˜è®¤ä¼šæ˜¾ç¤ºåœ¨ç½‘ç«™åº•éƒ¨</td></tr><tr><td>language</td><td>ç½‘ç«™çš„è¯­è¨€ï¼Œä½¿ç”¨ 2 ä¸ªå­—ç¬¦çš„ä»£ç æè¿°ï¼Œä¸­æ–‡æ˜¯ zh</td><td>æ²¡æœ‰æ˜¾ç¤ºï¼Œè·Ÿæœç´¢å¼•æ“æœ‰å…³</td></tr><tr><td>timezone</td><td>ç½‘ç«™çš„æ—¶åŒºï¼ŒHexoä¼šé»˜è®¤ä½¿ç”¨è®¡ç®—æœºä¸Šçš„è®¾ç½®</td><td>æ²¡æœ‰æ˜¾ç¤ºï¼Œè·Ÿæœç´¢å¼•æ“æœ‰å…³</td></tr></tbody></table><h1 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>url</td><td>ç½‘ç«™çš„ URL</td><td>å¦‚æœç½‘ç«™åœ¨åŸŸåä¸‹çš„ä¸€ä¸ªå­ç›®å½•é‡Œï¼Œåˆ™éœ€è¦è®¾ç½®ä¸º https:&#x2F;&#x2F;ç½‘å€&#x2F;å­ç›®å½•&#x2F;</td></tr><tr><td>root</td><td>ç½‘ç«™çš„æ ¹ç›®å½•</td><td>å¦‚æœç½‘ç«™åœ¨åŸŸåä¸‹çš„ä¸€ä¸ªå­ç›®å½•é‡Œï¼Œåˆ™éœ€è¦è®¾ç½®ä¸º &#x2F;å­ç›®å½•&#x2F;</td></tr><tr><td>permalink</td><td>æ–‡ç« çš„æ°¸ä¹…é“¾æ¥æ ¼å¼</td><td>public æ–‡ä»¶å¤¹å’Œç½‘å€çš„å±‚çº§æ ¼å¼</td></tr><tr><td>permalink_defaults</td><td>æ°¸ä¹…é“¾æ¥æ ¼å¼çš„é»˜è®¤å€¼</td><td>ä¸º permalink è®¾ç½®é»˜è®¤å€¼</td></tr><tr><td>pretty_urls</td><td>ç¾åŒ–æ°¸ä¹…é“¾æ¥</td><td>å¯ä»¥è®© URL æ›´ç®€æ´</td></tr><tr><td>pretty_urls.trailing_index</td><td>é“¾æ¥å°¾éƒ¨çš„ index.html</td><td>è®¾ç½®ä¸º false å¯ä»¥è®©é“¾æ¥å°¾éƒ¨çš„ index.html ä¸æ˜¾ç¤º</td></tr><tr><td>pretty_urls.trailing_html</td><td>é“¾æ¥å°¾éƒ¨çš„ .html</td><td>è®¾ç½®ä¸º false å¯ä»¥è®©é“¾æ¥å°¾éƒ¨çš„ .html ä¸æ˜¾ç¤º</td></tr></tbody></table><h1 id="Directory"><a href="#Directory" class="headerlink" title="Directory"></a>Directory</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>source_dir</td><td>èµ„æºæ–‡ä»¶å¤¹</td><td>å­˜æ”¾æ–‡ç« ã€å›¾ç‰‡ç­‰èµ„æº</td></tr><tr><td>public_dir</td><td>Hexo å‘å¸ƒçš„æ–‡ä»¶å¤¹</td><td>å¯ä»¥çœ‹åˆ°å‘å¸ƒåçš„é™æ€é¡µé¢æ–‡ä»¶</td></tr><tr><td>tag_dir</td><td>æ ‡ç­¾æ–‡ä»¶å¤¹</td><td>ç»™æ–‡ç« è®¾ç½®æ ‡ç­¾åï¼Œä¼šå¤šå‡ºä¸€ä¸ªæ ‡ç­¾æ–‡ä»¶å¤¹ï¼Œç½‘ç«™çš„ä¾§è¾¹æ ä¹Ÿä¼šå¤šå‡ºä¸¤æ æ ‡ç­¾å¯¼èˆªæ </td></tr><tr><td>archive_dir</td><td>æ¡£æ¡ˆæ–‡ä»¶å¤¹</td><td>é»˜è®¤æŒ‰ç…§æœˆä»½å°†æ–‡ç« å½’æ¡£</td></tr><tr><td>category_dir</td><td>åˆ†ç±»æ–‡ä»¶å¤¹</td><td>è·Ÿæ ‡ç­¾æ–‡ä»¶å¤¹å·®ä¸å¤šï¼ŒåŒæ ·åœ¨æ–‡ç« çš„é¡¶éƒ¨è¿›è¡Œè®¾ç½®</td></tr><tr><td>code_dir</td><td>ä»£ç æ–‡ä»¶å¤¹</td><td>å­˜æ”¾ä»£ç </td></tr><tr><td>i18n_dir</td><td>å›½é™…åŒ–æ–‡ä»¶å¤¹</td><td>è·Ÿè¯­è¨€ç›¸å…³</td></tr><tr><td>skip_render</td><td>è·³è¿‡æ¸²æŸ“ï¼Œå°†è·¯å¾„ä¸‹çš„æ–‡ä»¶ç›´æ¥æ‹·è´åˆ° public æ–‡ä»¶å¤¹ä¸‹</td><td>å¯ä»¥åœ¨å‘å¸ƒæ—¶ï¼Œå°†ä¸€äº›èµ„æºåŸå°ä¸åŠ¨åœ°æ‹·è´åˆ° public æ–‡ä»¶å¤¹ï¼Œé¿å…æ¸²æŸ“åå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ README.md æ–‡ä»¶</td></tr></tbody></table><h1 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>new_post_name</td><td>æ–°å»ºæ–‡ç« çš„åç§°æ ¼å¼ï¼Œé»˜è®¤æ˜¯ title.md</td><td>æ–°å»ºæ–‡ç« åç”Ÿæˆçš„æ–‡ä»¶åä¼šæ˜¯ æ ‡é¢˜.md çš„æ ¼å¼</td></tr><tr><td>default_layout</td><td>æ–°å»ºæ–‡ç« çš„é»˜è®¤å¸ƒå±€ï¼Œé»˜è®¤æ˜¯ post</td><td>æ–°å»ºæ–‡ç« æ—¶ä½¿ç”¨çš„æ¨¡æ¿</td></tr><tr><td>titlecase</td><td>å°†æ ‡é¢˜è½¬æ¢æˆé¦–å­—æ¯å¤§å†™çš„æ ‡é¢˜</td><td></td></tr><tr><td>external_link</td><td>å¤–éƒ¨é“¾æ¥</td><td></td></tr><tr><td>external_link.enable</td><td>æ˜¯å¦åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€å¤–éƒ¨é“¾æ¥</td><td></td></tr><tr><td>external_link.field</td><td>å¯¹æ•´ä¸ªç½‘ç«™è¿˜æ˜¯å½“å‰æ–‡ç« ç”Ÿæ•ˆ</td><td></td></tr><tr><td>external_link.exclude</td><td>æ’é™¤å“ªäº›åŸŸå</td><td></td></tr><tr><td>filename_case</td><td>æŠŠæ–‡ç« çš„åç§°æ”¹ä¸ºå°å†™ï¼ˆ1ï¼‰æˆ–å¤§å†™ï¼ˆ2ï¼‰ï¼Œé»˜è®¤ä¸æ”¹ï¼ˆ0ï¼‰</td><td></td></tr><tr><td>render_drafts</td><td>æ˜¯å¦æ¸²æŸ“è‰ç¨¿</td><td>è®¾ç½®ä¸º true åï¼Œå°†ä¼šæ˜¾ç¤ºé€šè¿‡è‰ç¨¿æ¨¡æ¿åˆ›å»ºçš„æ–‡ç« </td></tr><tr><td>post_asset_folder</td><td>æ˜¯å¦å¯ç”¨èµ„æºæ–‡ä»¶å¤¹</td><td>è®¾ç½®ä¸º true åï¼Œæ–°å»ºæ–‡ç« çš„åŒæ—¶ï¼Œä¼šåœ¨æ–‡ç« åŒçº§ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåŒåæ–‡ä»¶å¤¹å­˜æ”¾èµ„æº</td></tr><tr><td>relative_link</td><td>æ˜¯å¦æŠŠé“¾æ¥æ”¹ä¸ºæ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„</td><td></td></tr><tr><td>future</td><td>æ˜¯å¦æ˜¾ç¤ºæœªæ¥æ—¥æœŸçš„æ–‡ç« </td><td>è®¾ç½®ä¸º false åï¼Œå°†ä¸ä¼šæ˜¾ç¤ºæœªæ¥æ—¥æœŸçš„æ–‡ç« </td></tr><tr><td>highlight</td><td>ä»£ç å—è®¾ç½®</td><td></td></tr><tr><td>highlight.enable</td><td></td><td></td></tr><tr><td>highlight.line_number</td><td></td><td></td></tr><tr><td>highlight.auto_detect</td><td></td><td></td></tr><tr><td>highlight.tab_replace</td><td></td><td></td></tr><tr><td>highlight.wrap</td><td></td><td></td></tr><tr><td>highlight.hljs</td><td></td><td></td></tr><tr><td>prismjs</td><td>ä»£ç å—è®¾ç½®</td><td></td></tr><tr><td>prismjs.enable</td><td></td><td></td></tr><tr><td>prismjs.preprocess</td><td></td><td></td></tr><tr><td>prismjs.line_number</td><td></td><td></td></tr><tr><td>prismjs.tab_replace</td><td></td><td></td></tr></tbody></table><h1 id="Home-page-setting"><a href="#Home-page-setting" class="headerlink" title="Home page setting"></a>Home page setting</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>index_generator</td><td>ä¸»é¡µè®¾ç½®</td><td></td></tr><tr><td>index_generator.path</td><td>ä¸»é¡µçš„è·¯å¾„</td><td></td></tr><tr><td>index_generator.per_page</td><td>æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°ç›®</td><td></td></tr><tr><td>index_generator.order_by</td><td>æ–‡ç« æ’åº</td><td></td></tr></tbody></table><h1 id="Category-Tag"><a href="#Category-Tag" class="headerlink" title="Category &amp; Tag"></a>Category &amp; Tag</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>default_category</td><td>é»˜è®¤åˆ†ç±»</td><td></td></tr><tr><td>category_map</td><td>åˆ†ç±»åˆ«å</td><td></td></tr><tr><td>tag_map</td><td>æ ‡ç­¾åˆ«å</td><td></td></tr></tbody></table><h1 id="Metadata-elements"><a href="#Metadata-elements" class="headerlink" title="Metadata elements"></a>Metadata elements</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>meta_generator</td><td>æ˜¯å¦åœ¨é¡µé¢å¤´éƒ¨æ’å…¥ meta æ ‡ç­¾</td><td></td></tr></tbody></table><h1 id="Date-Time-format"><a href="#Date-Time-format" class="headerlink" title="Date &#x2F; Time format"></a>Date &#x2F; Time format</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>date_format</td><td>æ—¥æœŸæ ¼å¼</td><td></td></tr><tr><td>time_format</td><td>æ—¶é—´æ ¼å¼</td><td></td></tr><tr><td>updated_option</td><td>å¦‚æœæ–‡ç« ä¸­æ²¡æœ‰æŒ‡å®šåˆ›å»ºæ—¥æœŸï¼Œå°±ä¼šä½¿ç”¨æ›´æ–°æ—¥æœŸ</td><td></td></tr></tbody></table><h1 id="Pagination"><a href="#Pagination" class="headerlink" title="Pagination"></a>Pagination</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>per_page</td><td>æ–‡ç« åˆ†é¡µæ—¶ï¼Œæ¯é¡µçš„æ–‡ç« æ•°ç›®</td><td></td></tr><tr><td>pagination_dir</td><td>åˆ†é¡µçš„ç›®å½•</td><td></td></tr></tbody></table><h1 id="Include-Exclude-file-s"><a href="#Include-Exclude-file-s" class="headerlink" title="Include &#x2F; Exclude file(s)"></a>Include &#x2F; Exclude file(s)</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>include</td><td>åŒ…æ‹¬çš„æ–‡ä»¶</td><td>Hexo ä¼šå°†è¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶æ‹·è´åˆ° source æ–‡ä»¶å¤¹ä¸‹</td></tr><tr><td>exclude</td><td>ä¸åŒ…æ‹¬çš„æ–‡ä»¶</td><td>Hexo ä¼šå°†è¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶æ’é™¤åœ¨å¤–</td></tr><tr><td>ignore</td><td>å¿½ç•¥çš„æ–‡ä»¶</td><td>Hexo ä¸ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œæ“ä½œ</td></tr></tbody></table><h1 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>theme</td><td>ä¸»é¢˜</td><td>ç½‘ç«™æ˜¾ç¤ºçš„æ ·å¼</td></tr></tbody></table><h1 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h1><table><thead><tr><th>å­—æ®µ</th><th>æè¿°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>deploy</td><td>éƒ¨ç½²è®¾ç½®</td><td></td></tr><tr><td>deploy.type</td><td>éƒ¨ç½²ç±»å‹ï¼Œé»˜è®¤æ˜¯ git</td><td></td></tr><tr><td>deploy.repo</td><td>éƒ¨ç½²åœ°å€ï¼Œgithub è¿œç¨‹ä»“åº“åœ°å€</td><td>å°†å‘å¸ƒåçš„æ–‡ä»¶éƒ¨ç½²åˆ°ç›¸åº”çš„ Github åœ°å€</td></tr><tr><td>deploy.branch</td><td>éƒ¨ç½²åˆ†æ”¯</td><td>å°†å‘å¸ƒåçš„æ–‡ä»¶éƒ¨ç½²åˆ°ç›¸åº”çš„ Github åœ°å€çš„ä¸€ä¸ªåˆ†æ”¯ä¸‹</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo</title>
    <link href="/2021/01/26/Hexo/"/>
    <url>/2021/01/26/Hexo/</url>
    
    <content type="html"><![CDATA[<p>Hexo æ˜¯ä¸€ä¸ªç½‘ç«™æ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„ç½‘ç«™ã€‚</p><p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹æˆ‘çš„æ­å»ºè¿‡ç¨‹ã€‚</p><span id="more"></span><h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><ul><li>æ³¨å†Œä¸€ä¸ª Github è´¦å·å¹¶åˆ›å»ºè¿œç¨‹ä»“åº“</li><li>å®‰è£… Git</li><li>å®‰è£… node.js</li><li>é…ç½® SSH Key</li></ul><h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>Github å®˜ç½‘ï¼š<a href="https://github.com/">https://github.com/</a></p><p>ç‚¹å‡»å³ä¸Šè§’çš„ sign up æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p><p>ç™»å½•åï¼Œåœ¨ Github ä¸Š new ä¸€ä¸ª repositoryï¼Œåå­—å«åšï¼šgithubæ˜µç§° + github.ioã€‚æ¯”å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">weikunou</span><span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span><br></code></pre></td></tr></table></figure><p><img src="/../images/Hexo/repository.png" alt="åˆ›å»ºä»“åº“"></p><p>åˆ›å»ºå¥½ä¹‹åï¼Œç‚¹å‡»åˆ†æ”¯æŒ‰é’®ï¼Œè¾“å…¥ sourceï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œç”¨äºå­˜å‚¨æºæ–‡ä»¶ã€‚</p><p><img src="/../images/Hexo/source.png" alt="åˆ›å»ºsourceåˆ†æ”¯"></p><p>è€Œé»˜è®¤çš„ main åˆ†æ”¯æ˜¯ç”¨æ¥å­˜å‚¨å‘å¸ƒåçš„é™æ€é¡µé¢æ–‡ä»¶çš„ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>Git å®˜ç½‘ï¼š <a href="https://git-scm.com/">https://git-scm.com/</a></p><p>Node.js å®˜ç½‘ï¼š<a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p><h2 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h2><p>è¿™ä¸ªæ˜¯ç”¨æ¥æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“çš„å¯†é’¥ï¼Œå¯ä»¥å®‰å…¨åœ°å°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ° Github æœåŠ¡å™¨ã€‚</p><p>æ‰“å¼€ Git Bashï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç ï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹æœ¬æœºæ˜¯å¦å·²ç»æœ‰ SSH Keyï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">$ <span class="hljs-keyword">cd</span> ~<span class="hljs-string">/.ssh</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæç¤º No such file or directory åˆ™è¯´æ˜æ²¡æœ‰ SSH Keyã€‚</p><p>é‚£ä¹ˆï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç åˆ›å»º SSH Keyï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh-keygen -t rsa -C <span class="hljs-string">&quot;æ³¨å†Œ Github çš„é‚®ç®±åœ°å€&quot;</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¿æŒé»˜è®¤è®¾ç½®ï¼Œå¯ä»¥ç›´æ¥è¿ç»­æŒ‰å›è½¦é”®ã€‚å®Œæˆé…ç½®åï¼Œæ‰“å¼€ C ç›˜é‡Œçš„ç”¨æˆ·æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ª .ssh çš„æ–‡ä»¶å¤¹ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ id_rsa.pubï¼Œå¤åˆ¶æ‰€æœ‰çš„å†…å®¹ã€‚</p><p>å›åˆ° Github ä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œç‚¹å‡» Settingsï¼Œè¿›å…¥è®¾ç½®é¡µé¢ï¼Œæ‰¾åˆ° SSH and GPG keysï¼Œç‚¹å‡» New SSH key æŒ‰é’®ï¼ŒTitle å¯ä»¥éšæ„èµ·ï¼ŒæŠŠå¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ° Key çš„æ–‡æœ¬æ¡†å†…ï¼Œæœ€åç‚¹å‡» Add SSH keyã€‚</p><p><img src="/../images/Hexo/ssh.png" alt="ssh"></p><p>ç„¶åï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦é…ç½®æˆåŠŸã€‚å›åˆ° Git Bash é¢æ¿ï¼Œè¾“å…¥ä»£ç ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh -T git<span class="hljs-variable">@github</span>.com<br></code></pre></td></tr></table></figure><p>å¦‚æœæœ‰æç¤º</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">Hi weikunou! You<span class="hljs-symbol">&#x27;ve</span> successfully authenticated, but GitHub does <span class="hljs-keyword">not</span> provide shell <span class="hljs-keyword">access</span>.<br></code></pre></td></tr></table></figure><p>å°±è¯´æ˜å·²ç»é…ç½®æˆåŠŸäº†ã€‚</p><p>å¦å¤–ï¼Œè¿˜éœ€è¦é…ç½®ä¸€ä¸‹ Git çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œç”¨æ¥è®°å½•æ¯æ¬¡æäº¤ä»£ç çš„äººæ˜¯è°ã€‚</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.name</span> <span class="hljs-string">&quot;github ç”¨æˆ·å&quot;</span><br>$ git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.email</span> <span class="hljs-string">&quot;github æ³¨å†Œé‚®ç®±&quot;</span><br></code></pre></td></tr></table></figure><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>åœ¨ Git Bash çª—å£ï¼ˆæˆ–è€… cmd å‘½ä»¤æç¤ºç¬¦çª—å£ï¼‰ï¼Œè¾“å…¥</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span> -g hexo<br></code></pre></td></tr></table></figure><p>å°±å®‰è£…å¥½äº† Hexoã€‚</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>åœ¨ç”µè„‘çš„æŸä¸ªç›˜ä¸Šå‡†å¤‡å¥½è¦å­˜æ”¾ Hexo çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ myblogã€‚</p><p>ç„¶ååœ¨ Git Bash çª—å£ä¸‹è½¬åˆ°ç›®å½•ï¼Œæ¯”å¦‚ D ç›˜ä¸Šçš„ Projects æ–‡ä»¶å¤¹ä¸‹çš„ myblog å­æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ cd <span class="hljs-regexp">/d/</span>Projects/myblog<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ã€‚å¦‚æœæ–‡ä»¶å¤¹ä¸æ˜¯ç©ºçš„ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œéœ€è¦ä¿æŒ myblog æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">$ hexo <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ myblog æ–‡ä»¶å¤¹ä¸‹å°±æœ‰äº†ä¸€äº›æ–‡ä»¶ã€‚è€å¿ƒç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ŒHexo ä¼šè‡ªåŠ¨å®‰è£… node_modules ä¾èµ–åŒ…ï¼Œå¦‚æœæ²¡æœ‰å‘ç°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆå¯ä»¥è¾“å…¥</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><p>æ‰‹åŠ¨å®‰è£… node_modules ä¾èµ–åŒ…ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">$ hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ http:&#x2F;&#x2F; localhost:4000&#x2F; å³å¯åœ¨æœ¬åœ°é¢„è§ˆç½‘ç«™ã€‚</p><h2 id="å†™ä½œ"><a href="#å†™ä½œ" class="headerlink" title="å†™ä½œ"></a>å†™ä½œ</h2><p>æ‰§è¡Œ</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">$ hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;About-me&quot;</span><br></code></pre></td></tr></table></figure><p>hexo ä¼šåœ¨ source&#x2F;_posts æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ªæ–°çš„ About-me.md æ–‡ä»¶ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå°±å¯ä»¥å¼€å§‹å†™ä½œå•¦ã€‚</p><p>è¿™é‡Œæ¨èä¸€æ¬¾ Markdown å†™ä½œè½¯ä»¶ï¼Œ<a href="https://www.typora.io/">Typora</a>ã€‚</p><h2 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h2><p>å®‰è£…ä¸€ä¸ªæ’ä»¶</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ Hexo æ–‡ä»¶å¤¹ä¸‹çš„ _config.ymlï¼Œåœ¨æœ€ä¸‹é¢çš„ deploy å‚æ•°ä¸‹ï¼Œå¡«å†™è¿œç¨‹ä»“åº“çš„åç§°å’Œåˆ†æ”¯ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-attribute">deploy</span>:<br>  <span class="hljs-attribute">type</span>: git<br>  <span class="hljs-attribute">repo</span>: <span class="hljs-attribute">https</span>:<span class="hljs-comment">//github.com/Github ç”¨æˆ·å/Github é¡¹ç›®å</span><br>  <span class="hljs-attribute">branch</span>: main<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo deploy<br></code></pre></td></tr></table></figure><p>å°±å°†é¡¹ç›®å‘å¸ƒæˆé™æ€é¡µé¢å¹¶ä¸Šä¼ åˆ° Github é¡¹ç›®çš„ main åˆ†æ”¯ä¸‹äº†ã€‚</p><p>ç°åœ¨ï¼Œåªè¦åœ¨æµè§ˆå™¨è¾“å…¥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>Githubé¡¹ç›®åç§°/<br></code></pre></td></tr></table></figure><p>å°±å¯ä»¥è®¿é—®ä¸ªäººç½‘ç«™å•¦ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
